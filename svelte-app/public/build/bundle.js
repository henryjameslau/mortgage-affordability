var app=function(){"use strict";function e(){}function t(e){return e()}function i(){return Object.create(null)}function r(e){e.forEach(t)}function n(e){return"function"==typeof e}function o(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function a(e,t){e.appendChild(t)}function s(e,t,i){e.insertBefore(t,i||null)}function l(e){e.parentNode&&e.parentNode.removeChild(e)}function c(e){return document.createElement(e)}function u(e){return document.createTextNode(e)}function h(){return u(" ")}function p(e,t,i,r){return e.addEventListener(t,i,r),()=>e.removeEventListener(t,i,r)}function d(e,t,i){null==i?e.removeAttribute(t):e.getAttribute(t)!==i&&e.setAttribute(t,i)}function f(e){return""===e?null:+e}function m(e,t){e.value=null==t?"":t}function g(e,t,i,r){null===i?e.style.removeProperty(t):e.style.setProperty(t,i,r?"important":"")}function y(e,t){for(let i=0;i<e.options.length;i+=1){const r=e.options[i];if(r.__value===t)return void(r.selected=!0)}e.selectedIndex=-1}let _;function x(e){_=e}function b(e){(function(){if(!_)throw new Error("Function called outside component initialization");return _})().$$.on_mount.push(e)}const v=[],w=[],A=[],E=[],I=Promise.resolve();let D=!1;function T(e){A.push(e)}const C=new Set;let M=0;function S(){if(0!==M)return;const e=_;do{try{for(;M<v.length;){const e=v[M];M++,x(e),P(e.$$)}}catch(e){throw v.length=0,M=0,e}for(x(null),v.length=0,M=0;w.length;)w.pop()();for(let e=0;e<A.length;e+=1){const t=A[e];C.has(t)||(C.add(t),t())}A.length=0}while(v.length);for(;E.length;)E.pop()();D=!1,C.clear(),x(e)}function P(e){if(null!==e.fragment){e.update(),r(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(T)}}const R=new Set;function k(e,t){e&&e.i&&(R.delete(e),e.i(t))}function z(e,t,i,r){if(e&&e.o){if(R.has(e))return;R.add(e),undefined.c.push((()=>{R.delete(e),r&&(i&&e.d(1),r())})),e.o(t)}else r&&r()}function L(e){e&&e.c()}function B(e,i,o,a){const{fragment:s,after_update:l}=e.$$;s&&s.m(i,o),a||T((()=>{const i=e.$$.on_mount.map(t).filter(n);e.$$.on_destroy?e.$$.on_destroy.push(...i):r(i),e.$$.on_mount=[]})),l.forEach(T)}function F(e,t){const i=e.$$;null!==i.fragment&&(r(i.on_destroy),i.fragment&&i.fragment.d(t),i.on_destroy=i.fragment=null,i.ctx=[])}function N(e,t){-1===e.$$.dirty[0]&&(v.push(e),D||(D=!0,I.then(S)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function O(t,n,o,a,s,c,u,h=[-1]){const p=_;x(t);const d=t.$$={fragment:null,ctx:[],props:c,update:e,not_equal:s,bound:i(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(p?p.$$.context:[])),callbacks:i(),dirty:h,skip_bound:!1,root:n.target||p.$$.root};u&&u(d.root);let f=!1;if(d.ctx=o?o(t,n.props||{},((e,i,...r)=>{const n=r.length?r[0]:i;return d.ctx&&s(d.ctx[e],d.ctx[e]=n)&&(!d.skip_bound&&d.bound[e]&&d.bound[e](n),f&&N(t,e)),i})):[],d.update(),f=!0,r(d.before_update),d.fragment=!!a&&a(d.ctx),n.target){if(n.hydrate){const e=function(e){return Array.from(e.childNodes)}(n.target);d.fragment&&d.fragment.l(e),e.forEach(l)}else d.fragment&&d.fragment.c();n.intro&&k(t.$$.fragment),B(t,n.target,n.anchor,n.customElement),S()}x(p)}class G{$destroy(){F(this,1),this.$destroy=e}$on(t,i){if(!n(i))return e;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(i),()=>{const e=r.indexOf(i);-1!==e&&r.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var U,V,$=(U=function(e,t){e.exports=function(){var e,t,i;function r(r,n){if(e)if(t){var o="var sharedChunk = {}; ("+e+")(sharedChunk); ("+t+")(sharedChunk);",a={};e(a),i=n(a),"undefined"!=typeof window&&(i.workerUrl=window.URL.createObjectURL(new Blob([o],{type:"text/javascript"})))}else t=n;else e=n}return r(["exports"],(function(e){var t=i;function i(e,t,i,r){this.cx=3*e,this.bx=3*(i-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(r-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=i,this.p2y=r}function r(e,i,r,n){const o=new t(e,i,r,n);return function(e){return o.solve(e)}}i.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(void 0===t&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var i=e,r=0;r<8;r++){var n=this.sampleCurveX(i)-e;if(Math.abs(n)<t)return i;var o=this.sampleCurveDerivativeX(i);if(Math.abs(o)<1e-6)break;i-=n/o}var a=0,s=1;for(i=e,r=0;r<20&&(n=this.sampleCurveX(i),!(Math.abs(n-e)<t));r++)e>n?a=i:s=i,i=.5*(s-a)+a;return i},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}};const n=r(.25,.1,.25,1);function o(e,t,i){return Math.min(i,Math.max(t,e))}function a(e,t,i){const r=i-t,n=((e-t)%r+r)%r+t;return n===t?i:n}function s(e,...t){for(const i of t)for(const t in i)e[t]=i[t];return e}let l=1;function c(e,t){e.forEach((e=>{t[e]&&(t[e]=t[e].bind(t))}))}function u(e,t,i){const r={};for(const n in e)r[n]=t.call(i||this,e[n],n,e);return r}function h(e,t,i){const r={};for(const n in e)t.call(i||this,e[n],n,e)&&(r[n]=e[n]);return r}function p(e){return Array.isArray(e)?e.map(p):"object"==typeof e&&e?u(e,p):e}const d={};function f(e){d[e]||("undefined"!=typeof console&&console.warn(e),d[e]=!0)}function m(e,t,i){return(i.y-e.y)*(t.x-e.x)>(t.y-e.y)*(i.x-e.x)}function g(e){let t=0;for(let i,r,n=0,o=e.length,a=o-1;n<o;a=n++)i=e[n],r=e[a],t+=(r.x-i.x)*(i.y+r.y);return t}function y(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function _(e){const t={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((e,i,r,n)=>{const o=r||n;return t[i]=!o||o.toLowerCase(),""})),t["max-age"]){const e=parseInt(t["max-age"],10);isNaN(e)?delete t["max-age"]:t["max-age"]=e}return t}let x,b,v=null;function w(e){if(null==v){const t=e.navigator?e.navigator.userAgent:null;v=!!e.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return v}function A(e){return"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap}const E={now:"undefined"!=typeof performance&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(e){const t=requestAnimationFrame(e);return{cancel:()=>cancelAnimationFrame(t)}},getImageData(e,t=0){const i=window.document.createElement("canvas"),r=i.getContext("2d");if(!r)throw new Error("failed to create canvas 2d context");return i.width=e.width,i.height=e.height,r.drawImage(e,0,0,e.width,e.height),r.getImageData(-t,-t,e.width+2*t,e.height+2*t)},resolveURL:e=>(x||(x=document.createElement("a")),x.href=e,x.href),hardwareConcurrency:"undefined"!=typeof navigator&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(null==b&&(b=matchMedia("(prefers-reduced-motion: reduce)")),b.matches)}};var I=D;function D(e,t){this.x=e,this.y=t}D.prototype={clone:function(){return new D(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,i=e.y-this.y;return t*t+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=t,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),i=Math.sin(e),r=i*this.x+t*this.y;return this.x=t*this.x-i*this.y,this.y=r,this},_rotateAround:function(e,t){var i=Math.cos(e),r=Math.sin(e),n=t.y+r*(this.x-t.x)+i*(this.y-t.y);return this.x=t.x+i*(this.x-t.x)-r*(this.y-t.y),this.y=n,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},D.convert=function(e){return e instanceof D?e:Array.isArray(e)?new D(e[0],e[1]):e};const T={MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},C="mapbox-tiles";let M,S,P=500,R=50;function k(){"undefined"==typeof caches||M||(M=caches.open(C))}let z=1/0;const L={supported:!1,testSupport:function(e){!N&&F&&(O?G(e):B=e)}};let B,F,N=!1,O=!1;function G(e){const t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,F),e.isContextLost())return;L.supported=!0}catch(e){}e.deleteTexture(t),N=!0}"undefined"!=typeof document&&(F=document.createElement("img"),F.onload=function(){B&&G(B),B=null,O=!0},F.onerror=function(){N=!0,B=null},F.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const U={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(U);class V extends Error{constructor(e,t,i,r){super(`AJAXError: ${t} (${e}): ${i}`),this.status=e,this.statusText=t,this.url=i,this.body=r}}const $=y()?()=>self.worker&&self.worker.referrer:()=>("blob:"===window.location.protocol?window.parent:window).location.href;function q(e,t){const i=new AbortController,r=new Request(e.url,{method:e.method||"GET",body:e.body,credentials:e.credentials,headers:e.headers,referrer:$(),signal:i.signal});let n=!1,o=!1;return"json"===e.type&&r.headers.set("Accept","application/json"),((i,a,s)=>{if(o)return;const l=Date.now();fetch(r).then((i=>i.ok?((i,a,s)=>{("arrayBuffer"===e.type?i.arrayBuffer():"json"===e.type?i.json():i.text()).then((e=>{o||(a&&s&&function(e,t,i){if(k(),!M)return;const r={status:t.status,statusText:t.statusText,headers:new Headers};t.headers.forEach(((e,t)=>r.headers.set(t,e)));const n=_(t.headers.get("Cache-Control")||"");n["no-store"]||(n["max-age"]&&r.headers.set("Expires",new Date(i+1e3*n["max-age"]).toUTCString()),new Date(r.headers.get("Expires")).getTime()-i<42e4||function(e,t){if(void 0===S)try{new Response(new ReadableStream),S=!0}catch(e){S=!1}S?t(e.body):e.blob().then(t)}(t,(t=>{const i=new Response(t,r);k(),M&&M.then((t=>t.put(function(e){const t=e.indexOf("?");return t<0?e:e.slice(0,t)}(e.url),i))).catch((e=>f(e.message)))})))}(r,a,s),n=!0,t(null,e,i.headers.get("Cache-Control"),i.headers.get("Expires")))})).catch((e=>{o||t(new Error(e.message))}))})(i,null,l):i.blob().then((r=>t(new V(i.status,i.statusText,e.url,r)))))).catch((e=>{20!==e.code&&t(new Error(e.message))}))})(),{cancel:()=>{o=!0,n||i.abort()}}}const j=function(e,t){if(/:\/\//.test(e.url)&&!/^https?:|^file:/.test(e.url)){if(y()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,t);if(!y()){const i=e.url.substring(0,e.url.indexOf("://"));return(T.REGISTERED_PROTOCOLS[i]||q)(e,t)}}if(!(/^file:/.test(i=e.url)||/^file:/.test($())&&!/^\w+:/.test(i))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return q(e,t);if(y()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,t,void 0,!0)}var i;return function(e,t){const i=new XMLHttpRequest;i.open(e.method||"GET",e.url,!0),"arrayBuffer"===e.type&&(i.responseType="arraybuffer");for(const t in e.headers)i.setRequestHeader(t,e.headers[t]);return"json"===e.type&&(i.responseType="text",i.setRequestHeader("Accept","application/json")),i.withCredentials="include"===e.credentials,i.onerror=()=>{t(new Error(i.statusText))},i.onload=()=>{if((i.status>=200&&i.status<300||0===i.status)&&null!==i.response){let r=i.response;if("json"===e.type)try{r=JSON.parse(i.response)}catch(e){return t(e)}t(null,r,i.getResponseHeader("Cache-Control"),i.getResponseHeader("Expires"))}else{const r=new Blob([i.response],{type:i.getResponseHeader("Content-Type")});t(new V(i.status,i.statusText,e.url,r))}},i.send(e.body),{cancel:()=>i.abort()}}(e,t)},Z=function(e,t){return j(s(e,{type:"arrayBuffer"}),t)};function W(e){const t=window.document.createElement("a");return t.href=e,t.protocol===window.document.location.protocol&&t.host===window.document.location.host}const X="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let H,Y;H=[],Y=0;const K=function(e,t){if(L.supported&&(e.headers||(e.headers={}),e.headers.accept="image/webp,*/*"),Y>=T.MAX_PARALLEL_IMAGE_REQUESTS){const i={requestParameters:e,callback:t,cancelled:!1,cancel(){this.cancelled=!0}};return H.push(i),i}Y++;let i=!1;const r=()=>{if(!i)for(i=!0,Y--;H.length&&Y<T.MAX_PARALLEL_IMAGE_REQUESTS;){const e=H.shift(),{requestParameters:t,callback:i,cancelled:r}=e;r||(e.cancel=K(t,i).cancel)}},n=Z(e,((e,i,n,o)=>{r(),e?t(e):i&&function(e,t){"function"==typeof createImageBitmap?function(e,t){const i=new Blob([new Uint8Array(e)],{type:"image/png"});createImageBitmap(i).then((e=>{t(null,e)})).catch((e=>{t(new Error(`Could not load image because of ${e.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))}))}(e,t):function(e,t){const i=new Image;i.onload=()=>{t(null,i),URL.revokeObjectURL(i.src),i.onload=null,window.requestAnimationFrame((()=>{i.src=X}))},i.onerror=()=>t(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const r=new Blob([new Uint8Array(e)],{type:"image/png"});i.src=e.byteLength?URL.createObjectURL(r):X}(e,t)}(i,((e,i)=>{null!=e?t(e):null!=i&&t(null,i,{cacheControl:n,expires:o})}))}));return{cancel:()=>{n.cancel(),r()}}};function J(e,t,i){i[e]&&-1!==i[e].indexOf(t)||(i[e]=i[e]||[],i[e].push(t))}function Q(e,t,i){if(i&&i[e]){const r=i[e].indexOf(t);-1!==r&&i[e].splice(r,1)}}class ee{constructor(e,t={}){s(this,t),this.type=e}}class te extends ee{constructor(e,t={}){super("error",s({error:e},t))}}class ie{on(e,t){return this._listeners=this._listeners||{},J(e,t,this._listeners),this}off(e,t){return Q(e,t,this._listeners),Q(e,t,this._oneTimeListeners),this}once(e,t){return this._oneTimeListeners=this._oneTimeListeners||{},J(e,t,this._oneTimeListeners),this}fire(e,t){"string"==typeof e&&(e=new ee(e,t||{}));const i=e.type;if(this.listens(i)){e.target=this;const t=this._listeners&&this._listeners[i]?this._listeners[i].slice():[];for(const i of t)i.call(this,e);const r=this._oneTimeListeners&&this._oneTimeListeners[i]?this._oneTimeListeners[i].slice():[];for(const t of r)Q(i,t,this._oneTimeListeners),t.call(this,e);const n=this._eventedParent;n&&(s(e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),n.fire(e))}else e instanceof te&&console.error(e.error);return this}listens(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)}setEventedParent(e,t){return this._eventedParent=e,this._eventedParentData=t,this}}var re={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1},elevationOffset:{type:"number",default:450}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class ne{constructor(e,t,i,r){this.message=(e?`${e}: `:"")+i,r&&(this.identifier=r),null!=t&&t.__line__&&(this.line=t.__line__)}}function oe(e){const t=e.value;return t?[new ne(e.key,t,"constants have been deprecated as of v8")]:[]}function ae(e,...t){for(const i of t)for(const t in i)e[t]=i[t];return e}function se(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function le(e){if(Array.isArray(e))return e.map(le);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){const t={};for(const i in e)t[i]=le(e[i]);return t}return se(e)}class ce extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}class ue{constructor(e,t=[]){this.parent=e,this.bindings={};for(const[e,i]of t)this.bindings[e]=i}concat(e){return new ue(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}const he={kind:"null"},pe={kind:"number"},de={kind:"string"},fe={kind:"boolean"},me={kind:"color"},ge={kind:"object"},ye={kind:"value"},_e={kind:"collator"},xe={kind:"formatted"},be={kind:"padding"},ve={kind:"resolvedImage"};function we(e,t){return{kind:"array",itemType:e,N:t}}function Ae(e){if("array"===e.kind){const t=Ae(e.itemType);return"number"==typeof e.N?`array<${t}, ${e.N}>`:"value"===e.itemType.kind?"array":`array<${t}>`}return e.kind}const Ee=[he,pe,de,fe,me,xe,ge,we(ye),be,ve];function Ie(e,t){if("error"===t.kind)return null;if("array"===e.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!Ie(e.itemType,t.itemType))&&("number"!=typeof e.N||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if("value"===e.kind)for(const e of Ee)if(!Ie(e,t))return null}return`Expected ${Ae(e)} but found ${Ae(t)} instead.`}function De(e,t){return t.some((t=>t.kind===e.kind))}function Te(e,t){return t.some((t=>"null"===t?null===e:"array"===t?Array.isArray(e):"object"===t?e&&!Array.isArray(e)&&"object"==typeof e:t===typeof e))}var Ce,Me={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Se(e){return(e=Math.round(e))<0?0:e>255?255:e}function Pe(e){return Se("%"===e[e.length-1]?parseFloat(e)/100*255:parseInt(e))}function Re(e){return(t="%"===e[e.length-1]?parseFloat(e)/100:parseFloat(e))<0?0:t>1?1:t;var t}function ke(e,t,i){return i<0?i+=1:i>1&&(i-=1),6*i<1?e+(t-e)*i*6:2*i<1?t:3*i<2?e+(t-e)*(2/3-i)*6:e}try{Ce={}.parseCSSColor=function(e){var t,i=e.replace(/ /g,"").toLowerCase();if(i in Me)return Me[i].slice();if("#"===i[0])return 4===i.length?(t=parseInt(i.substr(1),16))>=0&&t<=4095?[(3840&t)>>4|(3840&t)>>8,240&t|(240&t)>>4,15&t|(15&t)<<4,1]:null:7===i.length&&(t=parseInt(i.substr(1),16))>=0&&t<=16777215?[(16711680&t)>>16,(65280&t)>>8,255&t,1]:null;var r=i.indexOf("("),n=i.indexOf(")");if(-1!==r&&n+1===i.length){var o=i.substr(0,r),a=i.substr(r+1,n-(r+1)).split(","),s=1;switch(o){case"rgba":if(4!==a.length)return null;s=Re(a.pop());case"rgb":return 3!==a.length?null:[Pe(a[0]),Pe(a[1]),Pe(a[2]),s];case"hsla":if(4!==a.length)return null;s=Re(a.pop());case"hsl":if(3!==a.length)return null;var l=(parseFloat(a[0])%360+360)%360/360,c=Re(a[1]),u=Re(a[2]),h=u<=.5?u*(c+1):u+c-u*c,p=2*u-h;return[Se(255*ke(p,h,l+1/3)),Se(255*ke(p,h,l)),Se(255*ke(p,h,l-1/3)),s];default:return null}}return null}}catch(e){}class ze{constructor(e,t,i,r=1){this.r=e,this.g=t,this.b=i,this.a=r}static parse(e){if(!e)return;if(e instanceof ze)return e;if("string"!=typeof e)return;const t=Ce(e);return t?new ze(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3]):void 0}toString(){const[e,t,i,r]=this.toArray();return`rgba(${Math.round(e)},${Math.round(t)},${Math.round(i)},${r})`}toArray(){const{r:e,g:t,b:i,a:r}=this;return 0===r?[0,0,0,0]:[255*e/r,255*t/r,255*i/r,r]}}ze.black=new ze(0,0,0,1),ze.white=new ze(1,1,1,1),ze.transparent=new ze(0,0,0,0),ze.red=new ze(1,0,0,1);class Le{constructor(e,t,i){this.sensitivity=e?t?"variant":"case":t?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Be{constructor(e,t,i,r,n){this.text=e,this.image=t,this.scale=i,this.fontStack=r,this.textColor=n}}class Fe{constructor(e){this.sections=e}static fromString(e){return new Fe([new Be(e,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some((e=>0!==e.text.length||e.image&&0!==e.image.name.length))}static factory(e){return e instanceof Fe?e:Fe.fromString(e)}toString(){return 0===this.sections.length?"":this.sections.map((e=>e.text)).join("")}}class Ne{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Ne)return e;if("number"==typeof e)return new Ne([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||e.length>4)){for(const t of e)if("number"!=typeof t)return;switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]]}return new Ne(e)}}toString(){return JSON.stringify(this.values)}}class Oe{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new Oe({name:e,available:!1}):null}}function Ge(e,t,i,r){return"number"==typeof e&&e>=0&&e<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof i&&i>=0&&i<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:`Invalid rgba value [${[e,t,i,r].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof r?[e,t,i,r]:[e,t,i]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ue(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof ze)return!0;if(e instanceof Le)return!0;if(e instanceof Fe)return!0;if(e instanceof Ne)return!0;if(e instanceof Oe)return!0;if(Array.isArray(e)){for(const t of e)if(!Ue(t))return!1;return!0}if("object"==typeof e){for(const t in e)if(!Ue(e[t]))return!1;return!0}return!1}function Ve(e){if(null===e)return he;if("string"==typeof e)return de;if("boolean"==typeof e)return fe;if("number"==typeof e)return pe;if(e instanceof ze)return me;if(e instanceof Le)return _e;if(e instanceof Fe)return xe;if(e instanceof Ne)return be;if(e instanceof Oe)return ve;if(Array.isArray(e)){const t=e.length;let i;for(const t of e){const e=Ve(t);if(i){if(i===e)continue;i=ye;break}i=e}return we(i||ye,t)}return ge}function $e(e){const t=typeof e;return null===e?"":"string"===t||"number"===t||"boolean"===t?String(e):e instanceof ze||e instanceof Fe||e instanceof Ne||e instanceof Oe?e.toString():JSON.stringify(e)}class qe{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(2!==e.length)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!Ue(e[1]))return t.error("invalid value");const i=e[1];let r=Ve(i);const n=t.expectedType;return"array"!==r.kind||0!==r.N||!n||"array"!==n.kind||"number"==typeof n.N&&0!==n.N||(r=n),new qe(r,i)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class je{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}}const Ze={string:de,number:pe,boolean:fe,object:ge};class We{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let i,r=1;const n=e[0];if("array"===n){let n,o;if(e.length>2){const i=e[1];if("string"!=typeof i||!(i in Ze)||"object"===i)return t.error('The item type argument of "array" must be one of string, number, boolean',1);n=Ze[i],r++}else n=ye;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);o=e[2],r++}i=we(n,o)}else{if(!Ze[n])throw new Error(`Types doesn't contain name = ${n}`);i=Ze[n]}const o=[];for(;r<e.length;r++){const i=t.parse(e[r],r,ye);if(!i)return null;o.push(i)}return new We(i,o)}evaluate(e){for(let t=0;t<this.args.length;t++){const i=this.args[t].evaluate(e);if(!Ie(this.type,Ve(i)))return i;if(t===this.args.length-1)throw new je(`Expected value to be of type ${Ae(this.type)}, but found ${Ae(Ve(i))} instead.`)}throw new Error}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}}const Xe={"to-boolean":fe,"to-color":me,"to-number":pe,"to-string":de};class He{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const i=e[0];if(!Xe[i])throw new Error(`Can't parse ${i} as it is not part of the known types`);if(("to-boolean"===i||"to-string"===i)&&2!==e.length)return t.error("Expected one argument.");const r=Xe[i],n=[];for(let i=1;i<e.length;i++){const r=t.parse(e[i],i,ye);if(!r)return null;n.push(r)}return new He(r,n)}evaluate(e){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(e));if("color"===this.type.kind){let t,i;for(const r of this.args){if(t=r.evaluate(e),i=null,t instanceof ze)return t;if("string"==typeof t){const i=e.parseColor(t);if(i)return i}else if(Array.isArray(t)&&(i=t.length<3||t.length>4?`Invalid rbga value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:Ge(t[0],t[1],t[2],t[3]),!i))return new ze(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new je(i||`Could not parse color from value '${"string"==typeof t?t:JSON.stringify(t)}'`)}if("padding"===this.type.kind){let t;for(const i of this.args){t=i.evaluate(e);const r=Ne.parse(t);if(r)return r}throw new je(`Could not parse padding from value '${"string"==typeof t?t:JSON.stringify(t)}'`)}if("number"===this.type.kind){let t=null;for(const i of this.args){if(t=i.evaluate(e),null===t)return 0;const r=Number(t);if(!isNaN(r))return r}throw new je(`Could not convert ${JSON.stringify(t)} to number.`)}return"formatted"===this.type.kind?Fe.fromString($e(this.args[0].evaluate(e))):"resolvedImage"===this.type.kind?Oe.fromString($e(this.args[0].evaluate(e))):$e(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}}const Ye=["Unknown","Point","LineString","Polygon"];class Ke{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?Ye[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=ze.parse(e)),t}}class Je{constructor(e,t,i,r){this.name=e,this.type=t,this._evaluate=i,this.args=r}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}static parse(e,t){const i=e[0],r=Je.definitions[i];if(!r)return t.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0);const n=Array.isArray(r)?r[0]:r.type,o=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,a=o.filter((([t])=>!Array.isArray(t)||t.length===e.length-1));let s=null;for(const[r,o]of a){s=new vt(t.registry,t.path,null,t.scope);const a=[];let l=!1;for(let t=1;t<e.length;t++){const i=e[t],n=Array.isArray(r)?r[t-1]:r.type,o=s.parse(i,1+a.length,n);if(!o){l=!0;break}a.push(o)}if(!l)if(Array.isArray(r)&&r.length!==a.length)s.error(`Expected ${r.length} arguments, but found ${a.length} instead.`);else{for(let e=0;e<a.length;e++){const t=Array.isArray(r)?r[e]:r.type,i=a[e];s.concat(e+1).checkSubtype(t,i.type)}if(0===s.errors.length)return new Je(i,n,o,a)}}if(1===a.length)t.errors.push(...s.errors);else{const i=(a.length?a:o).map((([e])=>{return t=e,Array.isArray(t)?`(${t.map(Ae).join(", ")})`:`(${Ae(t.type)}...)`;var t})).join(" | "),r=[];for(let i=1;i<e.length;i++){const n=t.parse(e[i],1+r.length);if(!n)return null;r.push(Ae(n.type))}t.error(`Expected arguments of type ${i}, but found (${r.join(", ")}) instead.`)}return null}static register(e,t){Je.definitions=t;for(const i in t)e[i]=Je}}class Qe{constructor(e,t,i){this.type=_e,this.locale=i,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(2!==e.length)return t.error("Expected one argument.");const i=e[1];if("object"!=typeof i||Array.isArray(i))return t.error("Collator options argument must be an object.");const r=t.parse(void 0!==i["case-sensitive"]&&i["case-sensitive"],1,fe);if(!r)return null;const n=t.parse(void 0!==i["diacritic-sensitive"]&&i["diacritic-sensitive"],1,fe);if(!n)return null;let o=null;return i.locale&&(o=t.parse(i.locale,1,de),!o)?null:new Qe(r,n,o)}evaluate(e){return new Le(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}}const et=8192;function tt(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function it(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function rt(e,t){const i=(180+e[0])/360,r=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,n=Math.pow(2,t.z);return[Math.round(i*n*et),Math.round(r*n*et)]}function nt(e,t,i){const r=e[0]-t[0],n=e[1]-t[1],o=e[0]-i[0],a=e[1]-i[1];return r*a-o*n==0&&r*o<=0&&n*a<=0}function ot(e,t){let i=!1;for(let a=0,s=t.length;a<s;a++){const s=t[a];for(let t=0,a=s.length;t<a-1;t++){if(nt(e,s[t],s[t+1]))return!1;(n=s[t])[1]>(r=e)[1]!=(o=s[t+1])[1]>r[1]&&r[0]<(o[0]-n[0])*(r[1]-n[1])/(o[1]-n[1])+n[0]&&(i=!i)}}var r,n,o;return i}function at(e,t){for(let i=0;i<t.length;i++)if(ot(e,t[i]))return!0;return!1}function st(e,t,i,r){const n=r[0]-i[0],o=r[1]-i[1],a=(e[0]-i[0])*o-n*(e[1]-i[1]),s=(t[0]-i[0])*o-n*(t[1]-i[1]);return a>0&&s<0||a<0&&s>0}function lt(e,t,i){for(const c of i)for(let i=0;i<c.length-1;++i)if(0!=(s=[(a=c[i+1])[0]-(o=c[i])[0],a[1]-o[1]])[0]*(l=[(n=t)[0]-(r=e)[0],n[1]-r[1]])[1]-s[1]*l[0]&&st(r,n,o,a)&&st(o,a,r,n))return!0;var r,n,o,a,s,l;return!1}function ct(e,t){for(let i=0;i<e.length;++i)if(!ot(e[i],t))return!1;for(let i=0;i<e.length-1;++i)if(lt(e[i],e[i+1],t))return!1;return!0}function ut(e,t){for(let i=0;i<t.length;i++)if(ct(e,t[i]))return!0;return!1}function ht(e,t,i){const r=[];for(let n=0;n<e.length;n++){const o=[];for(let r=0;r<e[n].length;r++){const a=rt(e[n][r],i);tt(t,a),o.push(a)}r.push(o)}return r}function pt(e,t,i){const r=[];for(let n=0;n<e.length;n++){const o=ht(e[n],t,i);r.push(o)}return r}function dt(e,t,i,r){if(e[0]<i[0]||e[0]>i[2]){const t=.5*r;let n=e[0]-i[0]>t?-r:i[0]-e[0]>t?r:0;0===n&&(n=e[0]-i[2]>t?-r:i[2]-e[0]>t?r:0),e[0]+=n}tt(t,e)}function ft(e,t,i,r){const n=Math.pow(2,r.z)*et,o=[r.x*et,r.y*et],a=[];for(const r of e)for(const e of r){const r=[e.x+o[0],e.y+o[1]];dt(r,t,i,n),a.push(r)}return a}function mt(e,t,i,r){const n=Math.pow(2,r.z)*et,o=[r.x*et,r.y*et],a=[];for(const i of e){const e=[];for(const r of i){const i=[r.x+o[0],r.y+o[1]];tt(t,i),e.push(i)}a.push(e)}if(t[2]-t[0]<=n/2){(s=t)[0]=s[1]=1/0,s[2]=s[3]=-1/0;for(const e of a)for(const r of e)dt(r,t,i,n)}var s;return a}class gt{constructor(e,t){this.type=fe,this.geojson=e,this.geometries=t}static parse(e,t){if(2!==e.length)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(Ue(e[1])){const t=e[1];if("FeatureCollection"===t.type)for(let e=0;e<t.features.length;++e){const i=t.features[e].geometry.type;if("Polygon"===i||"MultiPolygon"===i)return new gt(t,t.features[e].geometry)}else if("Feature"===t.type){const e=t.geometry.type;if("Polygon"===e||"MultiPolygon"===e)return new gt(t,t.geometry)}else if("Polygon"===t.type||"MultiPolygon"===t.type)return new gt(t,t)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(e,t){const i=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],n=e.canonicalID();if("Polygon"===t.type){const o=ht(t.coordinates,r,n),a=ft(e.geometry(),i,r,n);if(!it(i,r))return!1;for(const e of a)if(!ot(e,o))return!1}if("MultiPolygon"===t.type){const o=pt(t.coordinates,r,n),a=ft(e.geometry(),i,r,n);if(!it(i,r))return!1;for(const e of a)if(!at(e,o))return!1}return!0}(e,this.geometries);if("LineString"===e.geometryType())return function(e,t){const i=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],n=e.canonicalID();if("Polygon"===t.type){const o=ht(t.coordinates,r,n),a=mt(e.geometry(),i,r,n);if(!it(i,r))return!1;for(const e of a)if(!ct(e,o))return!1}if("MultiPolygon"===t.type){const o=pt(t.coordinates,r,n),a=mt(e.geometry(),i,r,n);if(!it(i,r))return!1;for(const e of a)if(!ut(e,o))return!1}return!0}(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}function yt(e){if(e instanceof Je){if("get"===e.name&&1===e.args.length)return!1;if("feature-state"===e.name)return!1;if("has"===e.name&&1===e.args.length)return!1;if("properties"===e.name||"geometry-type"===e.name||"id"===e.name)return!1;if(/^filter-/.test(e.name))return!1}if(e instanceof gt)return!1;let t=!0;return e.eachChild((e=>{t&&!yt(e)&&(t=!1)})),t}function _t(e){if(e instanceof Je&&"feature-state"===e.name)return!1;let t=!0;return e.eachChild((e=>{t&&!_t(e)&&(t=!1)})),t}function xt(e,t){if(e instanceof Je&&t.indexOf(e.name)>=0)return!1;let i=!0;return e.eachChild((e=>{i&&!xt(e,t)&&(i=!1)})),i}class bt{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(2!==e.length||"string"!=typeof e[1])return t.error("'var' expression requires exactly one string literal argument.");const i=e[1];return t.scope.has(i)?new bt(i,t.scope.get(i)):t.error(`Unknown variable "${i}". Make sure "${i}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}}class vt{constructor(e,t=[],i,r=new ue,n=[]){this.registry=e,this.path=t,this.key=t.map((e=>`[${e}]`)).join(""),this.scope=r,this.errors=n,this.expectedType=i}parse(e,t,i,r,n={}){return t?this.concat(t,i,r)._parse(e,n):this._parse(e,n)}_parse(e,t){function i(e,t,i){return"assert"===i?new We(t,[e]):"coerce"===i?new He(t,[e]):e}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const r=e[0];if("string"!=typeof r)return this.error(`Expression name must be a string, but found ${typeof r} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const n=this.registry[r];if(n){let r=n.parse(e,this);if(!r)return null;if(this.expectedType){const e=this.expectedType,n=r.type;if("string"!==e.kind&&"number"!==e.kind&&"boolean"!==e.kind&&"object"!==e.kind&&"array"!==e.kind||"value"!==n.kind)if("color"!==e.kind&&"formatted"!==e.kind&&"resolvedImage"!==e.kind||"value"!==n.kind&&"string"!==n.kind)if("padding"!==e.kind||"value"!==n.kind&&"number"!==n.kind&&"array"!==n.kind){if(this.checkSubtype(e,n))return null}else r=i(r,e,t.typeAnnotation||"coerce");else r=i(r,e,t.typeAnnotation||"coerce");else r=i(r,e,t.typeAnnotation||"assert")}if(!(r instanceof qe)&&"resolvedImage"!==r.type.kind&&wt(r)){const t=new Ke;try{r=new qe(r.type,r.evaluate(t))}catch(e){return this.error(e.message),null}}return r}return this.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===e?"'undefined' value invalid. Use null instead.":"object"==typeof e?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof e} instead.`)}concat(e,t,i){const r="number"==typeof e?this.path.concat(e):this.path,n=i?this.scope.concat(i):this.scope;return new vt(this.registry,r,t||null,n,this.errors)}error(e,...t){const i=`${this.key}${t.map((e=>`[${e}]`)).join("")}`;this.errors.push(new ce(i,e))}checkSubtype(e,t){const i=Ie(e,t);return i&&this.error(i),i}}function wt(e){if(e instanceof bt)return wt(e.boundExpression);if(e instanceof Je&&"error"===e.name)return!1;if(e instanceof Qe)return!1;if(e instanceof gt)return!1;const t=e instanceof He||e instanceof We;let i=!0;return e.eachChild((e=>{i=t?i&&wt(e):i&&e instanceof qe})),!!i&&yt(e)&&xt(e,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function At(e,t){const i=e.length-1;let r,n,o=0,a=i,s=0;for(;o<=a;)if(s=Math.floor((o+a)/2),r=e[s],n=e[s+1],r<=t){if(s===i||t<n)return s;o=s+1}else{if(!(r>t))throw new je("Input is not a number.");a=s-1}return 0}class Et{constructor(e,t,i){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[e,t]of i)this.labels.push(e),this.outputs.push(t)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");const i=t.parse(e[1],1,pe);if(!i)return null;const r=[];let n=null;t.expectedType&&"value"!==t.expectedType.kind&&(n=t.expectedType);for(let i=1;i<e.length;i+=2){const o=1===i?-1/0:e[i],a=e[i+1],s=i,l=i+1;if("number"!=typeof o)return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',s);if(r.length&&r[r.length-1][0]>=o)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',s);const c=t.parse(a,l,n);if(!c)return null;n=n||c.type,r.push([o,c])}return new Et(n,i,r)}evaluate(e){const t=this.labels,i=this.outputs;if(1===t.length)return i[0].evaluate(e);const r=this.input.evaluate(e);if(r<=t[0])return i[0].evaluate(e);const n=t.length;return r>=t[n-1]?i[n-1].evaluate(e):i[At(t,r)].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))}}function It(e,t,i){return e*(1-i)+t*i}var Dt=Object.freeze({__proto__:null,number:It,color:function(e,t,i){return new ze(It(e.r,t.r,i),It(e.g,t.g,i),It(e.b,t.b,i),It(e.a,t.a,i))},array:function(e,t,i){return e.map(((e,r)=>It(e,t[r],i)))},padding:function(e,t,i){const r=e.values,n=t.values;return new Ne([It(r[0],n[0],i),It(r[1],n[1],i),It(r[2],n[2],i),It(r[3],n[3],i)])}});const Tt=.95047,Ct=1.08883,Mt=4/29,St=6/29,Pt=3*St*St,Rt=Math.PI/180,kt=180/Math.PI;function zt(e){return e>.008856451679035631?Math.pow(e,1/3):e/Pt+Mt}function Lt(e){return e>St?e*e*e:Pt*(e-Mt)}function Bt(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Ft(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Nt(e){const t=Ft(e.r),i=Ft(e.g),r=Ft(e.b),n=zt((.4124564*t+.3575761*i+.1804375*r)/Tt),o=zt((.2126729*t+.7151522*i+.072175*r)/1);return{l:116*o-16,a:500*(n-o),b:200*(o-zt((.0193339*t+.119192*i+.9503041*r)/Ct)),alpha:e.a}}function Ot(e){let t=(e.l+16)/116,i=isNaN(e.a)?t:t+e.a/500,r=isNaN(e.b)?t:t-e.b/200;return t=1*Lt(t),i=Tt*Lt(i),r=Ct*Lt(r),new ze(Bt(3.2404542*i-1.5371385*t-.4985314*r),Bt(-.969266*i+1.8760108*t+.041556*r),Bt(.0556434*i-.2040259*t+1.0572252*r),e.alpha)}function Gt(e,t,i){const r=t-e;return e+i*(r>180||r<-180?r-360*Math.round(r/360):r)}const Ut={forward:Nt,reverse:Ot,interpolate:function(e,t,i){return{l:It(e.l,t.l,i),a:It(e.a,t.a,i),b:It(e.b,t.b,i),alpha:It(e.alpha,t.alpha,i)}}},Vt={forward:function(e){const{l:t,a:i,b:r}=Nt(e),n=Math.atan2(r,i)*kt;return{h:n<0?n+360:n,c:Math.sqrt(i*i+r*r),l:t,alpha:e.a}},reverse:function(e){const t=e.h*Rt,i=e.c;return Ot({l:e.l,a:Math.cos(t)*i,b:Math.sin(t)*i,alpha:e.alpha})},interpolate:function(e,t,i){return{h:Gt(e.h,t.h,i),c:It(e.c,t.c,i),l:It(e.l,t.l,i),alpha:It(e.alpha,t.alpha,i)}}};var $t=Object.freeze({__proto__:null,lab:Ut,hcl:Vt});class qt{constructor(e,t,i,r,n){this.type=e,this.operator=t,this.interpolation=i,this.input=r,this.labels=[],this.outputs=[];for(const[e,t]of n)this.labels.push(e),this.outputs.push(t)}static interpolationFactor(e,i,r,n){let o=0;if("exponential"===e.name)o=jt(i,e.base,r,n);else if("linear"===e.name)o=jt(i,1,r,n);else if("cubic-bezier"===e.name){const a=e.controlPoints;o=new t(a[0],a[1],a[2],a[3]).solve(jt(i,1,r,n))}return o}static parse(e,t){let[i,r,n,...o]=e;if(!Array.isArray(r)||0===r.length)return t.error("Expected an interpolation type expression.",1);if("linear"===r[0])r={name:"linear"};else if("exponential"===r[0]){const e=r[1];if("number"!=typeof e)return t.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:e}}else{if("cubic-bezier"!==r[0])return t.error(`Unknown interpolation type ${String(r[0])}`,1,0);{const e=r.slice(1);if(4!==e.length||e.some((e=>"number"!=typeof e||e<0||e>1)))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:e}}}if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(n=t.parse(n,2,pe),!n)return null;const a=[];let s=null;"interpolate-hcl"===i||"interpolate-lab"===i?s=me:t.expectedType&&"value"!==t.expectedType.kind&&(s=t.expectedType);for(let e=0;e<o.length;e+=2){const i=o[e],r=o[e+1],n=e+3,l=e+4;if("number"!=typeof i)return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',n);if(a.length&&a[a.length-1][0]>=i)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',n);const c=t.parse(r,l,s);if(!c)return null;s=s||c.type,a.push([i,c])}return"number"===s.kind||"color"===s.kind||"padding"===s.kind||"array"===s.kind&&"number"===s.itemType.kind&&"number"==typeof s.N?new qt(s,i,r,n,a):t.error(`Type ${Ae(s)} is not interpolatable.`)}evaluate(e){const t=this.labels,i=this.outputs;if(1===t.length)return i[0].evaluate(e);const r=this.input.evaluate(e);if(r<=t[0])return i[0].evaluate(e);const n=t.length;if(r>=t[n-1])return i[n-1].evaluate(e);const o=At(t,r),a=qt.interpolationFactor(this.interpolation,r,t[o],t[o+1]),s=i[o].evaluate(e),l=i[o+1].evaluate(e);return"interpolate"===this.operator?Dt[this.type.kind.toLowerCase()](s,l,a):"interpolate-hcl"===this.operator?Vt.reverse(Vt.interpolate(Vt.forward(s),Vt.forward(l),a)):Ut.reverse(Ut.interpolate(Ut.forward(s),Ut.forward(l),a))}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))}}function jt(e,t,i,r){const n=r-i,o=e-i;return 0===n?0:1===t?o/n:(Math.pow(t,o)-1)/(Math.pow(t,n)-1)}class Zt{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expectected at least one argument.");let i=null;const r=t.expectedType;r&&"value"!==r.kind&&(i=r);const n=[];for(const r of e.slice(1)){const e=t.parse(r,1+n.length,i,void 0,{typeAnnotation:"omit"});if(!e)return null;i=i||e.type,n.push(e)}if(!i)throw new Error("No output type");const o=r&&n.some((e=>Ie(r,e.type)));return new Zt(o?ye:i,n)}evaluate(e){let t,i=null,r=0;for(const n of this.args)if(r++,i=n.evaluate(e),i&&i instanceof Oe&&!i.available&&(t||(t=i.name),i=null,r===this.args.length&&(i=t)),null!==i)break;return i}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}}class Wt{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const i=[];for(let r=1;r<e.length-1;r+=2){const n=e[r];if("string"!=typeof n)return t.error(`Expected string, but found ${typeof n} instead.`,r);if(/[^a-zA-Z0-9_]/.test(n))return t.error("Variable names must contain only alphanumeric characters or '_'.",r);const o=t.parse(e[r+1],r+1);if(!o)return null;i.push([n,o])}const r=t.parse(e[e.length-1],e.length-1,t.expectedType,i);return r?new Wt(i,r):null}outputDefined(){return this.result.outputDefined()}}class Xt{constructor(e,t,i){this.type=e,this.index=t,this.input=i}static parse(e,t){if(3!==e.length)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,pe),r=t.parse(e[2],2,we(t.expectedType||ye));return i&&r?new Xt(r.type.itemType,i,r):null}evaluate(e){const t=this.index.evaluate(e),i=this.input.evaluate(e);if(t<0)throw new je(`Array index out of bounds: ${t} < 0.`);if(t>=i.length)throw new je(`Array index out of bounds: ${t} > ${i.length-1}.`);if(t!==Math.floor(t))throw new je(`Array index must be an integer, but found ${t} instead.`);return i[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}}class Ht{constructor(e,t){this.type=fe,this.needle=e,this.haystack=t}static parse(e,t){if(3!==e.length)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,ye),r=t.parse(e[2],2,ye);return i&&r?De(i.type,[fe,de,pe,he,ye])?new Ht(i,r):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ae(i.type)} instead`):null}evaluate(e){const t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!i)return!1;if(!Te(t,["boolean","string","number","null"]))throw new je(`Expected first argument to be of type boolean, string, number or null, but found ${Ae(Ve(t))} instead.`);if(!Te(i,["string","array"]))throw new je(`Expected second argument to be of type array or string, but found ${Ae(Ve(i))} instead.`);return i.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}}class Yt{constructor(e,t,i){this.type=pe,this.needle=e,this.haystack=t,this.fromIndex=i}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,ye),r=t.parse(e[2],2,ye);if(!i||!r)return null;if(!De(i.type,[fe,de,pe,he,ye]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ae(i.type)} instead`);if(4===e.length){const n=t.parse(e[3],3,pe);return n?new Yt(i,r,n):null}return new Yt(i,r)}evaluate(e){const t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!Te(t,["boolean","string","number","null"]))throw new je(`Expected first argument to be of type boolean, string, number or null, but found ${Ae(Ve(t))} instead.`);if(!Te(i,["string","array"]))throw new je(`Expected second argument to be of type array or string, but found ${Ae(Ve(i))} instead.`);if(this.fromIndex){const r=this.fromIndex.evaluate(e);return i.indexOf(t,r)}return i.indexOf(t)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}}class Kt{constructor(e,t,i,r,n,o){this.inputType=e,this.type=t,this.input=i,this.cases=r,this.outputs=n,this.otherwise=o}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return t.error("Expected an even number of arguments.");let i,r;t.expectedType&&"value"!==t.expectedType.kind&&(r=t.expectedType);const n={},o=[];for(let a=2;a<e.length-1;a+=2){let s=e[a];const l=e[a+1];Array.isArray(s)||(s=[s]);const c=t.concat(a);if(0===s.length)return c.error("Expected at least one branch label.");for(const e of s){if("number"!=typeof e&&"string"!=typeof e)return c.error("Branch labels must be numbers or strings.");if("number"==typeof e&&Math.abs(e)>Number.MAX_SAFE_INTEGER)return c.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof e&&Math.floor(e)!==e)return c.error("Numeric branch labels must be integer values.");if(i){if(c.checkSubtype(i,Ve(e)))return null}else i=Ve(e);if(void 0!==n[String(e)])return c.error("Branch labels must be unique.");n[String(e)]=o.length}const u=t.parse(l,a,r);if(!u)return null;r=r||u.type,o.push(u)}const a=t.parse(e[1],1,ye);if(!a)return null;const s=t.parse(e[e.length-1],e.length-1,r);return s?"value"!==a.type.kind&&t.concat(1).checkSubtype(i,a.type)?null:new Kt(i,r,a,n,o,s):null}evaluate(e){const t=this.input.evaluate(e);return(Ve(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))&&this.otherwise.outputDefined()}}class Jt{constructor(e,t,i){this.type=e,this.branches=t,this.otherwise=i}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return t.error("Expected an odd number of arguments.");let i;t.expectedType&&"value"!==t.expectedType.kind&&(i=t.expectedType);const r=[];for(let n=1;n<e.length-1;n+=2){const o=t.parse(e[n],n,fe);if(!o)return null;const a=t.parse(e[n+1],n+1,i);if(!a)return null;r.push([o,a]),i=i||a.type}const n=t.parse(e[e.length-1],e.length-1,i);if(!n)return null;if(!i)throw new Error("Can't infer output type");return new Jt(i,r,n)}evaluate(e){for(const[t,i]of this.branches)if(t.evaluate(e))return i.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,i]of this.branches)e(t),e(i);e(this.otherwise)}outputDefined(){return this.branches.every((([e,t])=>t.outputDefined()))&&this.otherwise.outputDefined()}}class Qt{constructor(e,t,i,r){this.type=e,this.input=t,this.beginIndex=i,this.endIndex=r}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,ye),r=t.parse(e[2],2,pe);if(!i||!r)return null;if(!De(i.type,[we(ye),de,ye]))return t.error(`Expected first argument to be of type array or string, but found ${Ae(i.type)} instead`);if(4===e.length){const n=t.parse(e[3],3,pe);return n?new Qt(i.type,i,r,n):null}return new Qt(i.type,i,r)}evaluate(e){const t=this.input.evaluate(e),i=this.beginIndex.evaluate(e);if(!Te(t,["string","array"]))throw new je(`Expected first argument to be of type array or string, but found ${Ae(Ve(t))} instead.`);if(this.endIndex){const r=this.endIndex.evaluate(e);return t.slice(i,r)}return t.slice(i)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}}function ei(e,t){return"=="===e||"!="===e?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function ti(e,t,i,r){return 0===r.compare(t,i)}function ii(e,t,i){const r="=="!==e&&"!="!==e;return class n{constructor(e,t,i){this.type=fe,this.lhs=e,this.rhs=t,this.collator=i,this.hasUntypedArgument="value"===e.type.kind||"value"===t.type.kind}static parse(e,t){if(3!==e.length&&4!==e.length)return t.error("Expected two or three arguments.");const i=e[0];let o=t.parse(e[1],1,ye);if(!o)return null;if(!ei(i,o.type))return t.concat(1).error(`"${i}" comparisons are not supported for type '${Ae(o.type)}'.`);let a=t.parse(e[2],2,ye);if(!a)return null;if(!ei(i,a.type))return t.concat(2).error(`"${i}" comparisons are not supported for type '${Ae(a.type)}'.`);if(o.type.kind!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return t.error(`Cannot compare types '${Ae(o.type)}' and '${Ae(a.type)}'.`);r&&("value"===o.type.kind&&"value"!==a.type.kind?o=new We(a.type,[o]):"value"!==o.type.kind&&"value"===a.type.kind&&(a=new We(o.type,[a])));let s=null;if(4===e.length){if("string"!==o.type.kind&&"string"!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return t.error("Cannot use collator to compare non-string types.");if(s=t.parse(e[3],3,_e),!s)return null}return new n(o,a,s)}evaluate(n){const o=this.lhs.evaluate(n),a=this.rhs.evaluate(n);if(r&&this.hasUntypedArgument){const t=Ve(o),i=Ve(a);if(t.kind!==i.kind||"string"!==t.kind&&"number"!==t.kind)throw new je(`Expected arguments for "${e}" to be (string, string) or (number, number), but found (${t.kind}, ${i.kind}) instead.`)}if(this.collator&&!r&&this.hasUntypedArgument){const e=Ve(o),i=Ve(a);if("string"!==e.kind||"string"!==i.kind)return t(n,o,a)}return this.collator?i(n,o,a,this.collator.evaluate(n)):t(n,o,a)}eachChild(e){e(this.lhs),e(this.rhs),this.collator&&e(this.collator)}outputDefined(){return!0}}}const ri=ii("==",(function(e,t,i){return t===i}),ti),ni=ii("!=",(function(e,t,i){return t!==i}),(function(e,t,i,r){return!ti(0,t,i,r)})),oi=ii("<",(function(e,t,i){return t<i}),(function(e,t,i,r){return r.compare(t,i)<0})),ai=ii(">",(function(e,t,i){return t>i}),(function(e,t,i,r){return r.compare(t,i)>0})),si=ii("<=",(function(e,t,i){return t<=i}),(function(e,t,i,r){return r.compare(t,i)<=0})),li=ii(">=",(function(e,t,i){return t>=i}),(function(e,t,i,r){return r.compare(t,i)>=0}));class ci{constructor(e,t,i,r,n){this.type=de,this.number=e,this.locale=t,this.currency=i,this.minFractionDigits=r,this.maxFractionDigits=n}static parse(e,t){if(3!==e.length)return t.error("Expected two arguments.");const i=t.parse(e[1],1,pe);if(!i)return null;const r=e[2];if("object"!=typeof r||Array.isArray(r))return t.error("NumberFormat options argument must be an object.");let n=null;if(r.locale&&(n=t.parse(r.locale,1,de),!n))return null;let o=null;if(r.currency&&(o=t.parse(r.currency,1,de),!o))return null;let a=null;if(r["min-fraction-digits"]&&(a=t.parse(r["min-fraction-digits"],1,pe),!a))return null;let s=null;return r["max-fraction-digits"]&&(s=t.parse(r["max-fraction-digits"],1,pe),!s)?null:new ci(i,n,o,a,s)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}}class ui{constructor(e){this.type=xe,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const i=e[1];if(!Array.isArray(i)&&"object"==typeof i)return t.error("First argument must be an image or text section.");const r=[];let n=!1;for(let i=1;i<=e.length-1;++i){const o=e[i];if(n&&"object"==typeof o&&!Array.isArray(o)){n=!1;let e=null;if(o["font-scale"]&&(e=t.parse(o["font-scale"],1,pe),!e))return null;let i=null;if(o["text-font"]&&(i=t.parse(o["text-font"],1,we(de)),!i))return null;let a=null;if(o["text-color"]&&(a=t.parse(o["text-color"],1,me),!a))return null;const s=r[r.length-1];s.scale=e,s.font=i,s.textColor=a}else{const o=t.parse(e[i],1,ye);if(!o)return null;const a=o.type.kind;if("string"!==a&&"value"!==a&&"null"!==a&&"resolvedImage"!==a)return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");n=!0,r.push({content:o,scale:null,font:null,textColor:null})}}return new ui(r)}evaluate(e){return new Fe(this.sections.map((t=>{const i=t.content.evaluate(e);return Ve(i)===ve?new Be("",i,null,null,null):new Be($e(i),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null)})))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor)}outputDefined(){return!1}}class hi{constructor(e){this.type=ve,this.input=e}static parse(e,t){if(2!==e.length)return t.error("Expected two arguments.");const i=t.parse(e[1],1,de);return i?new hi(i):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),i=Oe.fromString(t);return i&&e.availableImages&&(i.available=e.availableImages.indexOf(t)>-1),i}eachChild(e){e(this.input)}outputDefined(){return!1}}class pi{constructor(e){this.type=pe,this.input=e}static parse(e,t){if(2!==e.length)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const i=t.parse(e[1],1);return i?"array"!==i.type.kind&&"string"!==i.type.kind&&"value"!==i.type.kind?t.error(`Expected argument of type string or array, but found ${Ae(i.type)} instead.`):new pi(i):null}evaluate(e){const t=this.input.evaluate(e);if("string"==typeof t)return t.length;if(Array.isArray(t))return t.length;throw new je(`Expected value to be of type string or array, but found ${Ae(Ve(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}}const di={"==":ri,"!=":ni,">":ai,"<":oi,">=":li,"<=":si,array:We,at:Xt,boolean:We,case:Jt,coalesce:Zt,collator:Qe,format:ui,image:hi,in:Ht,"index-of":Yt,interpolate:qt,"interpolate-hcl":qt,"interpolate-lab":qt,length:pi,let:Wt,literal:qe,match:Kt,number:We,"number-format":ci,object:We,slice:Qt,step:Et,string:We,"to-boolean":He,"to-color":He,"to-number":He,"to-string":He,var:bt,within:gt};function fi(e,[t,i,r,n]){t=t.evaluate(e),i=i.evaluate(e),r=r.evaluate(e);const o=n?n.evaluate(e):1,a=Ge(t,i,r,o);if(a)throw new je(a);return new ze(t/255*o,i/255*o,r/255*o,o)}function mi(e,t){return e in t}function gi(e,t){const i=t[e];return void 0===i?null:i}function yi(e){return{type:e}}function _i(e){return{result:"success",value:e}}function xi(e){return{result:"error",value:e}}function bi(e){return"data-driven"===e["property-type"]||"cross-faded-data-driven"===e["property-type"]}function vi(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function wi(e){return!!e.expression&&e.expression.interpolated}function Ai(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":null===e?"null":typeof e}function Ei(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function Ii(e){return e}function Di(e,t){const i="color"===t.type,r=e.stops&&"object"==typeof e.stops[0][0],n=r||!(r||void 0!==e.property),o=e.type||(wi(t)?"exponential":"interval");if(i||"padding"===t.type){const r=i?ze.parse:Ne.parse;(e=ae({},e)).stops&&(e.stops=e.stops.map((e=>[e[0],r(e[1])]))),e.default=r(e.default?e.default:t.default)}if(e.colorSpace&&"rgb"!==e.colorSpace&&!$t[e.colorSpace])throw new Error(`Unknown color space: ${e.colorSpace}`);let a,s,l;if("exponential"===o)a=Si;else if("interval"===o)a=Mi;else if("categorical"===o){a=Ci,s=Object.create(null);for(const t of e.stops)s[t[0]]=t[1];l=typeof e.stops[0][0]}else{if("identity"!==o)throw new Error(`Unknown function type "${o}"`);a=Pi}if(r){const i={},r=[];for(let t=0;t<e.stops.length;t++){const n=e.stops[t],o=n[0].zoom;void 0===i[o]&&(i[o]={zoom:o,type:e.type,property:e.property,default:e.default,stops:[]},r.push(o)),i[o].stops.push([n[0].value,n[1]])}const n=[];for(const e of r)n.push([i[e].zoom,Di(i[e],t)]);const o={name:"linear"};return{kind:"composite",interpolationType:o,interpolationFactor:qt.interpolationFactor.bind(void 0,o),zoomStops:n.map((e=>e[0])),evaluate:({zoom:i},r)=>Si({stops:n,base:e.base},t,i).evaluate(i,r)}}if(n){const i="exponential"===o?{name:"exponential",base:void 0!==e.base?e.base:1}:null;return{kind:"camera",interpolationType:i,interpolationFactor:qt.interpolationFactor.bind(void 0,i),zoomStops:e.stops.map((e=>e[0])),evaluate:({zoom:i})=>a(e,t,i,s,l)}}return{kind:"source",evaluate(i,r){const n=r&&r.properties?r.properties[e.property]:void 0;return void 0===n?Ti(e.default,t.default):a(e,t,n,s,l)}}}function Ti(e,t,i){return void 0!==e?e:void 0!==t?t:void 0!==i?i:void 0}function Ci(e,t,i,r,n){return Ti(typeof i===n?r[i]:void 0,e.default,t.default)}function Mi(e,t,i){if("number"!==Ai(i))return Ti(e.default,t.default);const r=e.stops.length;if(1===r)return e.stops[0][1];if(i<=e.stops[0][0])return e.stops[0][1];if(i>=e.stops[r-1][0])return e.stops[r-1][1];const n=At(e.stops.map((e=>e[0])),i);return e.stops[n][1]}function Si(e,t,i){const r=void 0!==e.base?e.base:1;if("number"!==Ai(i))return Ti(e.default,t.default);const n=e.stops.length;if(1===n)return e.stops[0][1];if(i<=e.stops[0][0])return e.stops[0][1];if(i>=e.stops[n-1][0])return e.stops[n-1][1];const o=At(e.stops.map((e=>e[0])),i),a=function(e,t,i,r){const n=r-i,o=e-i;return 0===n?0:1===t?o/n:(Math.pow(t,o)-1)/(Math.pow(t,n)-1)}(i,r,e.stops[o][0],e.stops[o+1][0]),s=e.stops[o][1],l=e.stops[o+1][1];let c=Dt[t.type]||Ii;if(e.colorSpace&&"rgb"!==e.colorSpace){const t=$t[e.colorSpace];c=(e,i)=>t.reverse(t.interpolate(t.forward(e),t.forward(i),a))}return"function"==typeof s.evaluate?{evaluate(...e){const t=s.evaluate.apply(void 0,e),i=l.evaluate.apply(void 0,e);if(void 0!==t&&void 0!==i)return c(t,i,a)}}:c(s,l,a)}function Pi(e,t,i){switch(t.type){case"color":i=ze.parse(i);break;case"formatted":i=Fe.fromString(i.toString());break;case"resolvedImage":i=Oe.fromString(i.toString());break;case"padding":i=Ne.parse(i);break;default:Ai(i)===t.type||"enum"===t.type&&t.values[i]||(i=void 0)}return Ti(i,e.default,t.default)}Je.register(di,{error:[{kind:"error"},[de],(e,[t])=>{throw new je(t.evaluate(e))}],typeof:[de,[ye],(e,[t])=>Ae(Ve(t.evaluate(e)))],"to-rgba":[we(pe,4),[me],(e,[t])=>t.evaluate(e).toArray()],rgb:[me,[pe,pe,pe],fi],rgba:[me,[pe,pe,pe,pe],fi],has:{type:fe,overloads:[[[de],(e,[t])=>mi(t.evaluate(e),e.properties())],[[de,ge],(e,[t,i])=>mi(t.evaluate(e),i.evaluate(e))]]},get:{type:ye,overloads:[[[de],(e,[t])=>gi(t.evaluate(e),e.properties())],[[de,ge],(e,[t,i])=>gi(t.evaluate(e),i.evaluate(e))]]},"feature-state":[ye,[de],(e,[t])=>gi(t.evaluate(e),e.featureState||{})],properties:[ge,[],e=>e.properties()],"geometry-type":[de,[],e=>e.geometryType()],id:[ye,[],e=>e.id()],zoom:[pe,[],e=>e.globals.zoom],"heatmap-density":[pe,[],e=>e.globals.heatmapDensity||0],"line-progress":[pe,[],e=>e.globals.lineProgress||0],accumulated:[ye,[],e=>void 0===e.globals.accumulated?null:e.globals.accumulated],"+":[pe,yi(pe),(e,t)=>{let i=0;for(const r of t)i+=r.evaluate(e);return i}],"*":[pe,yi(pe),(e,t)=>{let i=1;for(const r of t)i*=r.evaluate(e);return i}],"-":{type:pe,overloads:[[[pe,pe],(e,[t,i])=>t.evaluate(e)-i.evaluate(e)],[[pe],(e,[t])=>-t.evaluate(e)]]},"/":[pe,[pe,pe],(e,[t,i])=>t.evaluate(e)/i.evaluate(e)],"%":[pe,[pe,pe],(e,[t,i])=>t.evaluate(e)%i.evaluate(e)],ln2:[pe,[],()=>Math.LN2],pi:[pe,[],()=>Math.PI],e:[pe,[],()=>Math.E],"^":[pe,[pe,pe],(e,[t,i])=>Math.pow(t.evaluate(e),i.evaluate(e))],sqrt:[pe,[pe],(e,[t])=>Math.sqrt(t.evaluate(e))],log10:[pe,[pe],(e,[t])=>Math.log(t.evaluate(e))/Math.LN10],ln:[pe,[pe],(e,[t])=>Math.log(t.evaluate(e))],log2:[pe,[pe],(e,[t])=>Math.log(t.evaluate(e))/Math.LN2],sin:[pe,[pe],(e,[t])=>Math.sin(t.evaluate(e))],cos:[pe,[pe],(e,[t])=>Math.cos(t.evaluate(e))],tan:[pe,[pe],(e,[t])=>Math.tan(t.evaluate(e))],asin:[pe,[pe],(e,[t])=>Math.asin(t.evaluate(e))],acos:[pe,[pe],(e,[t])=>Math.acos(t.evaluate(e))],atan:[pe,[pe],(e,[t])=>Math.atan(t.evaluate(e))],min:[pe,yi(pe),(e,t)=>Math.min(...t.map((t=>t.evaluate(e))))],max:[pe,yi(pe),(e,t)=>Math.max(...t.map((t=>t.evaluate(e))))],abs:[pe,[pe],(e,[t])=>Math.abs(t.evaluate(e))],round:[pe,[pe],(e,[t])=>{const i=t.evaluate(e);return i<0?-Math.round(-i):Math.round(i)}],floor:[pe,[pe],(e,[t])=>Math.floor(t.evaluate(e))],ceil:[pe,[pe],(e,[t])=>Math.ceil(t.evaluate(e))],"filter-==":[fe,[de,ye],(e,[t,i])=>e.properties()[t.value]===i.value],"filter-id-==":[fe,[ye],(e,[t])=>e.id()===t.value],"filter-type-==":[fe,[de],(e,[t])=>e.geometryType()===t.value],"filter-<":[fe,[de,ye],(e,[t,i])=>{const r=e.properties()[t.value],n=i.value;return typeof r==typeof n&&r<n}],"filter-id-<":[fe,[ye],(e,[t])=>{const i=e.id(),r=t.value;return typeof i==typeof r&&i<r}],"filter->":[fe,[de,ye],(e,[t,i])=>{const r=e.properties()[t.value],n=i.value;return typeof r==typeof n&&r>n}],"filter-id->":[fe,[ye],(e,[t])=>{const i=e.id(),r=t.value;return typeof i==typeof r&&i>r}],"filter-<=":[fe,[de,ye],(e,[t,i])=>{const r=e.properties()[t.value],n=i.value;return typeof r==typeof n&&r<=n}],"filter-id-<=":[fe,[ye],(e,[t])=>{const i=e.id(),r=t.value;return typeof i==typeof r&&i<=r}],"filter->=":[fe,[de,ye],(e,[t,i])=>{const r=e.properties()[t.value],n=i.value;return typeof r==typeof n&&r>=n}],"filter-id->=":[fe,[ye],(e,[t])=>{const i=e.id(),r=t.value;return typeof i==typeof r&&i>=r}],"filter-has":[fe,[ye],(e,[t])=>t.value in e.properties()],"filter-has-id":[fe,[],e=>null!==e.id()&&void 0!==e.id()],"filter-type-in":[fe,[we(de)],(e,[t])=>t.value.indexOf(e.geometryType())>=0],"filter-id-in":[fe,[we(ye)],(e,[t])=>t.value.indexOf(e.id())>=0],"filter-in-small":[fe,[de,we(ye)],(e,[t,i])=>i.value.indexOf(e.properties()[t.value])>=0],"filter-in-large":[fe,[de,we(ye)],(e,[t,i])=>function(e,t,i,r){for(;i<=r;){const n=i+r>>1;if(t[n]===e)return!0;t[n]>e?r=n-1:i=n+1}return!1}(e.properties()[t.value],i.value,0,i.value.length-1)],all:{type:fe,overloads:[[[fe,fe],(e,[t,i])=>t.evaluate(e)&&i.evaluate(e)],[yi(fe),(e,t)=>{for(const i of t)if(!i.evaluate(e))return!1;return!0}]]},any:{type:fe,overloads:[[[fe,fe],(e,[t,i])=>t.evaluate(e)||i.evaluate(e)],[yi(fe),(e,t)=>{for(const i of t)if(i.evaluate(e))return!0;return!1}]]},"!":[fe,[fe],(e,[t])=>!t.evaluate(e)],"is-supported-script":[fe,[de],(e,[t])=>{const i=e.globals&&e.globals.isSupportedScript;return!i||i(t.evaluate(e))}],upcase:[de,[de],(e,[t])=>t.evaluate(e).toUpperCase()],downcase:[de,[de],(e,[t])=>t.evaluate(e).toLowerCase()],concat:[de,yi(ye),(e,t)=>t.map((t=>$e(t.evaluate(e)))).join("")],"resolved-locale":[de,[_e],(e,[t])=>t.evaluate(e).resolvedLocale()]});class Ri{constructor(e,t){this.expression=e,this._warningHistory={},this._evaluator=new Ke,this._defaultValue=t?function(e){return"color"===e.type&&Ei(e.default)?new ze(0,0,0,0):"color"===e.type?ze.parse(e.default)||null:"padding"===e.type?Ne.parse(e.default)||null:void 0===e.default?null:e.default}(t):null,this._enumValues=t&&"enum"===t.type?t.values:null}evaluateWithoutErrorHandling(e,t,i,r,n,o){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=i,this._evaluator.canonical=r,this._evaluator.availableImages=n||null,this._evaluator.formattedSection=o,this.expression.evaluate(this._evaluator)}evaluate(e,t,i,r,n,o){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=i||null,this._evaluator.canonical=r,this._evaluator.availableImages=n||null,this._evaluator.formattedSection=o||null;try{const e=this.expression.evaluate(this._evaluator);if(null==e||"number"==typeof e&&e!=e)return this._defaultValue;if(this._enumValues&&!(e in this._enumValues))throw new je(`Expected value to be one of ${Object.keys(this._enumValues).map((e=>JSON.stringify(e))).join(", ")}, but found ${JSON.stringify(e)} instead.`);return e}catch(e){return this._warningHistory[e.message]||(this._warningHistory[e.message]=!0,"undefined"!=typeof console&&console.warn(e.message)),this._defaultValue}}}function ki(e){return Array.isArray(e)&&e.length>0&&"string"==typeof e[0]&&e[0]in di}function zi(e,t){const i=new vt(di,[],t?function(e){const t={color:me,string:de,number:pe,enum:de,boolean:fe,formatted:xe,padding:be,resolvedImage:ve};return"array"===e.type?we(t[e.value]||ye,e.length):t[e.type]}(t):void 0),r=i.parse(e,void 0,void 0,void 0,t&&"string"===t.type?{typeAnnotation:"coerce"}:void 0);return r?_i(new Ri(r,t)):xi(i.errors)}class Li{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent="constant"!==e&&!_t(t.expression)}evaluateWithoutErrorHandling(e,t,i,r,n,o){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,r,n,o)}evaluate(e,t,i,r,n,o){return this._styleExpression.evaluate(e,t,i,r,n,o)}}class Bi{constructor(e,t,i,r){this.kind=e,this.zoomStops=i,this._styleExpression=t,this.isStateDependent="camera"!==e&&!_t(t.expression),this.interpolationType=r}evaluateWithoutErrorHandling(e,t,i,r,n,o){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,r,n,o)}evaluate(e,t,i,r,n,o){return this._styleExpression.evaluate(e,t,i,r,n,o)}interpolationFactor(e,t,i){return this.interpolationType?qt.interpolationFactor(this.interpolationType,e,t,i):0}}function Fi(e,t){const i=zi(e,t);if("error"===i.result)return i;const r=i.value.expression,n=yt(r);if(!n&&!bi(t))return xi([new ce("","data expressions not supported")]);const o=xt(r,["zoom"]);if(!o&&!vi(t))return xi([new ce("","zoom expressions not supported")]);const a=Oi(r);return a||o?a instanceof ce?xi([a]):a instanceof qt&&!wi(t)?xi([new ce("",'"interpolate" expressions cannot be used with this property')]):_i(a?new Bi(n?"camera":"composite",i.value,a.labels,a instanceof qt?a.interpolation:void 0):new Li(n?"constant":"source",i.value)):xi([new ce("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Ni{constructor(e,t){this._parameters=e,this._specification=t,ae(this,Di(this._parameters,this._specification))}static deserialize(e){return new Ni(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function Oi(e){let t=null;if(e instanceof Wt)t=Oi(e.result);else if(e instanceof Zt){for(const i of e.args)if(t=Oi(i),t)break}else(e instanceof Et||e instanceof qt)&&e.input instanceof Je&&"zoom"===e.input.name&&(t=e);return t instanceof ce||e.eachChild((e=>{const i=Oi(e);i instanceof ce?t=i:!t&&i?t=new ce("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&i&&t!==i&&(t=new ce("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),t}function Gi(e){const t=e.key,i=e.value,r=e.valueSpec||{},n=e.objectElementValidators||{},o=e.style,a=e.styleSpec;let s=[];const l=Ai(i);if("object"!==l)return[new ne(t,i,`object expected, ${l} found`)];for(const e in i){const l=e.split(".")[0],c=r[l]||r["*"];let u;if(n[l])u=n[l];else if(r[l])u=fr;else if(n["*"])u=n["*"];else{if(!r["*"]){s.push(new ne(t,i[e],`unknown property "${e}"`));continue}u=fr}s=s.concat(u({key:(t?`${t}.`:t)+e,value:i[e],valueSpec:c,style:o,styleSpec:a,object:i,objectKey:e},i))}for(const e in r)n[e]||r[e].required&&void 0===r[e].default&&void 0===i[e]&&s.push(new ne(t,i,`missing required property "${e}"`));return s}function Ui(e){const t=e.value,i=e.valueSpec,r=e.style,n=e.styleSpec,o=e.key,a=e.arrayElementValidator||fr;if("array"!==Ai(t))return[new ne(o,t,`array expected, ${Ai(t)} found`)];if(i.length&&t.length!==i.length)return[new ne(o,t,`array length ${i.length} expected, length ${t.length} found`)];if(i["min-length"]&&t.length<i["min-length"])return[new ne(o,t,`array length at least ${i["min-length"]} expected, length ${t.length} found`)];let s={type:i.value,values:i.values};n.$version<7&&(s.function=i.function),"object"===Ai(i.value)&&(s=i.value);let l=[];for(let e=0;e<t.length;e++)l=l.concat(a({array:t,arrayIndex:e,value:t[e],valueSpec:s,style:r,styleSpec:n,key:`${o}[${e}]`}));return l}function Vi(e){const t=e.key,i=e.value,r=e.valueSpec;let n=Ai(i);return"number"===n&&i!=i&&(n="NaN"),"number"!==n?[new ne(t,i,`number expected, ${n} found`)]:"minimum"in r&&i<r.minimum?[new ne(t,i,`${i} is less than the minimum value ${r.minimum}`)]:"maximum"in r&&i>r.maximum?[new ne(t,i,`${i} is greater than the maximum value ${r.maximum}`)]:[]}function $i(e){const t=e.valueSpec,i=se(e.value.type);let r,n,o,a={};const s="categorical"!==i&&void 0===e.value.property,l=!s,c="array"===Ai(e.value.stops)&&"array"===Ai(e.value.stops[0])&&"object"===Ai(e.value.stops[0][0]),u=Gi({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(e){if("identity"===i)return[new ne(e.key,e.value,'identity function may not have a "stops" property')];let t=[];const r=e.value;return t=t.concat(Ui({key:e.key,value:r,valueSpec:e.valueSpec,style:e.style,styleSpec:e.styleSpec,arrayElementValidator:h})),"array"===Ai(r)&&0===r.length&&t.push(new ne(e.key,r,"array must have at least one stop")),t},default:function(e){return fr({key:e.key,value:e.value,valueSpec:t,style:e.style,styleSpec:e.styleSpec})}}});return"identity"===i&&s&&u.push(new ne(e.key,e.value,'missing required property "property"')),"identity"===i||e.value.stops||u.push(new ne(e.key,e.value,'missing required property "stops"')),"exponential"===i&&e.valueSpec.expression&&!wi(e.valueSpec)&&u.push(new ne(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(l&&!bi(e.valueSpec)?u.push(new ne(e.key,e.value,"property functions not supported")):s&&!vi(e.valueSpec)&&u.push(new ne(e.key,e.value,"zoom functions not supported"))),"categorical"!==i&&!c||void 0!==e.value.property||u.push(new ne(e.key,e.value,'"property" property is required')),u;function h(e){let i=[];const r=e.value,s=e.key;if("array"!==Ai(r))return[new ne(s,r,`array expected, ${Ai(r)} found`)];if(2!==r.length)return[new ne(s,r,`array length 2 expected, length ${r.length} found`)];if(c){if("object"!==Ai(r[0]))return[new ne(s,r,`object expected, ${Ai(r[0])} found`)];if(void 0===r[0].zoom)return[new ne(s,r,"object stop key must have zoom")];if(void 0===r[0].value)return[new ne(s,r,"object stop key must have value")];if(o&&o>se(r[0].zoom))return[new ne(s,r[0].zoom,"stop zoom values must appear in ascending order")];se(r[0].zoom)!==o&&(o=se(r[0].zoom),n=void 0,a={}),i=i.concat(Gi({key:`${s}[0]`,value:r[0],valueSpec:{zoom:{}},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{zoom:Vi,value:p}}))}else i=i.concat(p({key:`${s}[0]`,value:r[0],valueSpec:{},style:e.style,styleSpec:e.styleSpec},r));return ki(le(r[1]))?i.concat([new ne(`${s}[1]`,r[1],"expressions are not allowed in function stops.")]):i.concat(fr({key:`${s}[1]`,value:r[1],valueSpec:t,style:e.style,styleSpec:e.styleSpec}))}function p(e,o){const s=Ai(e.value),l=se(e.value),c=null!==e.value?e.value:o;if(r){if(s!==r)return[new ne(e.key,c,`${s} stop domain type must match previous stop domain type ${r}`)]}else r=s;if("number"!==s&&"string"!==s&&"boolean"!==s)return[new ne(e.key,c,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==i){let r=`number expected, ${s} found`;return bi(t)&&void 0===i&&(r+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ne(e.key,c,r)]}return"categorical"!==i||"number"!==s||isFinite(l)&&Math.floor(l)===l?"categorical"!==i&&"number"===s&&void 0!==n&&l<n?[new ne(e.key,c,"stop domain values must appear in ascending order")]:(n=l,"categorical"===i&&l in a?[new ne(e.key,c,"stop domain values must be unique")]:(a[l]=!0,[])):[new ne(e.key,c,`integer expected, found ${l}`)]}}function qi(e){const t=("property"===e.expressionContext?Fi:zi)(le(e.value),e.valueSpec);if("error"===t.result)return t.value.map((t=>new ne(`${e.key}${t.key}`,e.value,t.message)));const i=t.value.expression||t.value._styleExpression.expression;if("property"===e.expressionContext&&"text-font"===e.propertyKey&&!i.outputDefined())return[new ne(e.key,e.value,`Invalid data expression for "${e.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===e.expressionContext&&"layout"===e.propertyType&&!_t(i))return[new ne(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===e.expressionContext&&!_t(i))return[new ne(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&0===e.expressionContext.indexOf("cluster")){if(!xt(i,["zoom","feature-state"]))return[new ne(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===e.expressionContext&&!yt(i))return[new ne(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ji(e){const t=e.key,i=e.value,r=e.valueSpec,n=[];return Array.isArray(r.values)?-1===r.values.indexOf(se(i))&&n.push(new ne(t,i,`expected one of [${r.values.join(", ")}], ${JSON.stringify(i)} found`)):-1===Object.keys(r.values).indexOf(se(i))&&n.push(new ne(t,i,`expected one of [${Object.keys(r.values).join(", ")}], ${JSON.stringify(i)} found`)),n}function Zi(e){if(!0===e||!1===e)return!0;if(!Array.isArray(e)||0===e.length)return!1;switch(e[0]){case"has":return e.length>=2&&"$id"!==e[1]&&"$type"!==e[1];case"in":return e.length>=3&&("string"!=typeof e[1]||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==e.length||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(const t of e.slice(1))if(!Zi(t)&&"boolean"!=typeof t)return!1;return!0;default:return!0}}const Wi={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Xi(e){if(null==e)return{filter:()=>!0,needGeometry:!1};Zi(e)||(e=Ki(e));const t=zi(e,Wi);if("error"===t.result)throw new Error(t.value.map((e=>`${e.key}: ${e.message}`)).join(", "));return{filter:(e,i,r)=>t.value.evaluate(e,i,{},r),needGeometry:Yi(e)}}function Hi(e,t){return e<t?-1:e>t?1:0}function Yi(e){if(!Array.isArray(e))return!1;if("within"===e[0])return!0;for(let t=1;t<e.length;t++)if(Yi(e[t]))return!0;return!1}function Ki(e){if(!e)return!0;const t=e[0];return e.length<=1?"any"!==t:"=="===t?Ji(e[1],e[2],"=="):"!="===t?tr(Ji(e[1],e[2],"==")):"<"===t||">"===t||"<="===t||">="===t?Ji(e[1],e[2],t):"any"===t?(i=e.slice(1),["any"].concat(i.map(Ki))):"all"===t?["all"].concat(e.slice(1).map(Ki)):"none"===t?["all"].concat(e.slice(1).map(Ki).map(tr)):"in"===t?Qi(e[1],e.slice(2)):"!in"===t?tr(Qi(e[1],e.slice(2))):"has"===t?er(e[1]):"!has"===t?tr(er(e[1])):"within"!==t||e;var i}function Ji(e,t,i){switch(e){case"$type":return[`filter-type-${i}`,t];case"$id":return[`filter-id-${i}`,t];default:return[`filter-${i}`,e,t]}}function Qi(e,t){if(0===t.length)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some((e=>typeof e!=typeof t[0]))?["filter-in-large",e,["literal",t.sort(Hi)]]:["filter-in-small",e,["literal",t]]}}function er(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function tr(e){return["!",e]}function ir(e){return Zi(le(e.value))?qi(ae({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):rr(e)}function rr(e){const t=e.value,i=e.key;if("array"!==Ai(t))return[new ne(i,t,`array expected, ${Ai(t)} found`)];const r=e.styleSpec;let n,o=[];if(t.length<1)return[new ne(i,t,"filter array must have at least 1 element")];switch(o=o.concat(ji({key:`${i}[0]`,value:t[0],valueSpec:r.filter_operator,style:e.style,styleSpec:e.styleSpec})),se(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&"$type"===se(t[1])&&o.push(new ne(i,t,`"$type" cannot be use with operator "${t[0]}"`));case"==":case"!=":3!==t.length&&o.push(new ne(i,t,`filter array for operator "${t[0]}" must have 3 elements`));case"in":case"!in":t.length>=2&&(n=Ai(t[1]),"string"!==n&&o.push(new ne(`${i}[1]`,t[1],`string expected, ${n} found`)));for(let a=2;a<t.length;a++)n=Ai(t[a]),"$type"===se(t[1])?o=o.concat(ji({key:`${i}[${a}]`,value:t[a],valueSpec:r.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==n&&"number"!==n&&"boolean"!==n&&o.push(new ne(`${i}[${a}]`,t[a],`string, number, or boolean expected, ${n} found`));break;case"any":case"all":case"none":for(let r=1;r<t.length;r++)o=o.concat(rr({key:`${i}[${r}]`,value:t[r],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":n=Ai(t[1]),2!==t.length?o.push(new ne(i,t,`filter array for "${t[0]}" operator must have 2 elements`)):"string"!==n&&o.push(new ne(`${i}[1]`,t[1],`string expected, ${n} found`));break;case"within":n=Ai(t[1]),2!==t.length?o.push(new ne(i,t,`filter array for "${t[0]}" operator must have 2 elements`)):"object"!==n&&o.push(new ne(`${i}[1]`,t[1],`object expected, ${n} found`))}return o}function nr(e,t){const i=e.key,r=e.style,n=e.styleSpec,o=e.value,a=e.objectKey,s=n[`${t}_${e.layerType}`];if(!s)return[];const l=a.match(/^(.*)-transition$/);if("paint"===t&&l&&s[l[1]]&&s[l[1]].transition)return fr({key:i,value:o,valueSpec:n.transition,style:r,styleSpec:n});const c=e.valueSpec||s[a];if(!c)return[new ne(i,o,`unknown property "${a}"`)];let u;if("string"===Ai(o)&&bi(c)&&!c.tokens&&(u=/^{([^}]+)}$/.exec(o)))return[new ne(i,o,`"${a}" does not support interpolation syntax\nUse an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(u[1])} }\`.`)];const h=[];return"symbol"===e.layerType&&("text-field"===a&&r&&!r.glyphs&&h.push(new ne(i,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&Ei(le(o))&&"identity"===se(o.type)&&h.push(new ne(i,o,'"text-font" does not support identity functions'))),h.concat(fr({key:e.key,value:o,valueSpec:c,style:r,styleSpec:n,expressionContext:"property",propertyType:t,propertyKey:a}))}function or(e){return nr(e,"paint")}function ar(e){return nr(e,"layout")}function sr(e){let t=[];const i=e.value,r=e.key,n=e.style,o=e.styleSpec;i.type||i.ref||t.push(new ne(r,i,'either "type" or "ref" is required'));let a=se(i.type);const s=se(i.ref);if(i.id){const o=se(i.id);for(let a=0;a<e.arrayIndex;a++){const e=n.layers[a];se(e.id)===o&&t.push(new ne(r,i.id,`duplicate layer id "${i.id}", previously used at line ${e.id.__line__}`))}}if("ref"in i){let e;["type","source","source-layer","filter","layout"].forEach((e=>{e in i&&t.push(new ne(r,i[e],`"${e}" is prohibited for ref layers`))})),n.layers.forEach((t=>{se(t.id)===s&&(e=t)})),e?e.ref?t.push(new ne(r,i.ref,"ref cannot reference another ref layer")):a=se(e.type):t.push(new ne(r,i.ref,`ref layer "${s}" not found`))}else if("background"!==a)if(i.source){const e=n.sources&&n.sources[i.source],o=e&&se(e.type);e?"vector"===o&&"raster"===a?t.push(new ne(r,i.source,`layer "${i.id}" requires a raster source`)):"raster"===o&&"raster"!==a?t.push(new ne(r,i.source,`layer "${i.id}" requires a vector source`)):"vector"!==o||i["source-layer"]?"raster-dem"===o&&"hillshade"!==a?t.push(new ne(r,i.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==a||!i.paint||!i.paint["line-gradient"]||"geojson"===o&&e.lineMetrics||t.push(new ne(r,i,`layer "${i.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new ne(r,i,`layer "${i.id}" must specify a "source-layer"`)):t.push(new ne(r,i.source,`source "${i.source}" not found`))}else t.push(new ne(r,i,'missing required property "source"'));return t=t.concat(Gi({key:r,value:i,valueSpec:o.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":()=>[],type:()=>fr({key:`${r}.type`,value:i.type,valueSpec:o.layer.type,style:e.style,styleSpec:e.styleSpec,object:i,objectKey:"type"}),filter:ir,layout:e=>Gi({layer:i,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":e=>ar(ae({layerType:a},e))}}),paint:e=>Gi({layer:i,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":e=>or(ae({layerType:a},e))}})}})),t}function lr(e){const t=e.value,i=e.key,r=Ai(t);return"string"!==r?[new ne(i,t,`string expected, ${r} found`)]:[]}const cr={promoteId:function({key:e,value:t}){if("string"===Ai(t))return lr({key:e,value:t});{const i=[];for(const r in t)i.push(...lr({key:`${e}.${r}`,value:t[r]}));return i}}};function ur(e){const t=e.value,i=e.key,r=e.styleSpec,n=e.style;if(!t.type)return[new ne(i,t,'"type" is required')];const o=se(t.type);let a;switch(o){case"vector":case"raster":case"raster-dem":return a=Gi({key:i,value:t,valueSpec:r[`source_${o.replace("-","_")}`],style:e.style,styleSpec:r,objectElementValidators:cr}),a;case"geojson":if(a=Gi({key:i,value:t,valueSpec:r.source_geojson,style:n,styleSpec:r,objectElementValidators:cr}),t.cluster)for(const e in t.clusterProperties){const[r,n]=t.clusterProperties[e],o="string"==typeof r?[r,["accumulated"],["get",e]]:r;a.push(...qi({key:`${i}.${e}.map`,value:n,expressionContext:"cluster-map"})),a.push(...qi({key:`${i}.${e}.reduce`,value:o,expressionContext:"cluster-reduce"}))}return a;case"video":return Gi({key:i,value:t,valueSpec:r.source_video,style:n,styleSpec:r});case"image":return Gi({key:i,value:t,valueSpec:r.source_image,style:n,styleSpec:r});case"canvas":return[new ne(i,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ji({key:`${i}.type`,value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:n,styleSpec:r})}}function hr(e){const t=e.value,i=e.styleSpec,r=i.light,n=e.style;let o=[];const a=Ai(t);if(void 0===t)return o;if("object"!==a)return o=o.concat([new ne("light",t,`object expected, ${a} found`)]),o;for(const e in t){const a=e.match(/^(.*)-transition$/);o=o.concat(a&&r[a[1]]&&r[a[1]].transition?fr({key:e,value:t[e],valueSpec:i.transition,style:n,styleSpec:i}):r[e]?fr({key:e,value:t[e],valueSpec:r[e],style:n,styleSpec:i}):[new ne(e,t[e],`unknown property "${e}"`)])}return o}function pr(e){const t=e.value,i=e.styleSpec,r=i.terrain,n=e.style;let o=[];const a=Ai(t);if(void 0===t)return o;if("object"!==a)return o=o.concat([new ne("terrain",t,`object expected, ${a} found`)]),o;for(const e in t)o=o.concat(r[e]?fr({key:e,value:t[e],valueSpec:r[e],style:n,styleSpec:i}):[new ne(e,t[e],`unknown property "${e}"`)]);return o}const dr={"*":()=>[],array:Ui,boolean:function(e){const t=e.value,i=e.key,r=Ai(t);return"boolean"!==r?[new ne(i,t,`boolean expected, ${r} found`)]:[]},number:Vi,color:function(e){const t=e.key,i=e.value,r=Ai(i);return"string"!==r?[new ne(t,i,`color expected, ${r} found`)]:null===Ce(i)?[new ne(t,i,`color expected, "${i}" found`)]:[]},constants:oe,enum:ji,filter:ir,function:$i,layer:sr,object:Gi,source:ur,light:hr,terrain:pr,string:lr,formatted:function(e){return 0===lr(e).length?[]:qi(e)},resolvedImage:function(e){return 0===lr(e).length?[]:qi(e)},padding:function(e){const t=e.key,i=e.value;if("array"===Ai(i)){if(i.length<1||i.length>4)return[new ne(t,i,`padding requires 1 to 4 values; ${i.length} values found`)];const e={type:"number"};let r=[];for(let n=0;n<i.length;n++)r=r.concat(fr({key:`${t}[${n}]`,value:i[n],valueSpec:e}));return r}return Vi({key:t,value:i,valueSpec:{}})}};function fr(e){const t=e.value,i=e.valueSpec,r=e.styleSpec;return i.expression&&Ei(se(t))?$i(e):i.expression&&ki(le(t))?qi(e):i.type&&dr[i.type]?dr[i.type](e):Gi(ae({},e,{valueSpec:i.type?r[i.type]:i}))}function mr(e){const t=e.value,i=e.key,r=lr(e);return r.length||(-1===t.indexOf("{fontstack}")&&r.push(new ne(i,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&r.push(new ne(i,t,'"glyphs" url must include a "{range}" token'))),r}function gr(e,t=re){let i=[];return i=i.concat(fr({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:mr,"*":()=>[]}})),e.constants&&(i=i.concat(oe({key:"constants",value:e.constants,style:e,styleSpec:t}))),yr(i)}function yr(e){return[].concat(e).sort(((e,t)=>e.line-t.line))}function _r(e){return function(...t){return yr(e.apply(this,t))}}gr.source=_r(ur),gr.light=_r(hr),gr.terrain=_r(pr),gr.layer=_r(sr),gr.filter=_r(ir),gr.paintProperty=_r(or),gr.layoutProperty=_r(ar);const xr=gr,br=xr.light,vr=xr.paintProperty,wr=xr.layoutProperty;function Ar(e,t){let i=!1;if(t&&t.length)for(const r of t)e.fire(new te(new Error(r.message))),i=!0;return i}class Er{constructor(e,t,i){const r=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;const n=new Int32Array(this.arrayBuffer);e=n[0],this.d=(t=n[1])+2*(i=n[2]);for(let e=0;e<this.d*this.d;e++){const t=n[3+e],i=n[3+e+1];r.push(t===i?null:n.subarray(t,i))}const o=n[3+r.length+1];this.keys=n.subarray(n[3+r.length],o),this.bboxes=n.subarray(o),this.insert=this._insertReadonly}else{this.d=t+2*i;for(let e=0;e<this.d*this.d;e++)r.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=i,this.scale=t/e,this.uid=0;const n=i/t*e;this.min=-n,this.max=e+n}insert(e,t,i,r,n){this._forEachCell(t,i,r,n,this._insertCell,this.uid++,void 0,void 0),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(i),this.bboxes.push(r),this.bboxes.push(n)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(e,t,i,r,n,o){this.cells[n].push(o)}query(e,t,i,r,n){const o=this.min,a=this.max;if(e<=o&&t<=o&&a<=i&&a<=r&&!n)return Array.prototype.slice.call(this.keys);{const o=[];return this._forEachCell(e,t,i,r,this._queryCell,o,{},n),o}}_queryCell(e,t,i,r,n,o,a,s){const l=this.cells[n];if(null!==l){const n=this.keys,c=this.bboxes;for(let u=0;u<l.length;u++){const h=l[u];if(void 0===a[h]){const l=4*h;(s?s(c[l+0],c[l+1],c[l+2],c[l+3]):e<=c[l+2]&&t<=c[l+3]&&i>=c[l+0]&&r>=c[l+1])?(a[h]=!0,o.push(n[h])):a[h]=!1}}}}_forEachCell(e,t,i,r,n,o,a,s){const l=this._convertToCellCoord(e),c=this._convertToCellCoord(t),u=this._convertToCellCoord(i),h=this._convertToCellCoord(r);for(let p=l;p<=u;p++)for(let l=c;l<=h;l++){const c=this.d*l+p;if((!s||s(this._convertFromCellCoord(p),this._convertFromCellCoord(l),this._convertFromCellCoord(p+1),this._convertFromCellCoord(l+1)))&&n.call(this,e,t,i,r,c,o,a,s))return}}_convertFromCellCoord(e){return(e-this.padding)/this.scale}_convertToCellCoord(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const e=this.cells,t=3+this.cells.length+1+1;let i=0;for(let e=0;e<this.cells.length;e++)i+=this.cells[e].length;const r=new Int32Array(t+i+this.keys.length+this.bboxes.length);r[0]=this.extent,r[1]=this.n,r[2]=this.padding;let n=t;for(let t=0;t<e.length;t++){const i=e[t];r[3+t]=n,r.set(i,n),n+=i.length}return r[3+e.length]=n,r.set(this.keys,n),n+=this.keys.length,r[3+e.length+1]=n,r.set(this.bboxes,n),n+=this.bboxes.length,r.buffer}static serialize(e,t){const i=e.toArrayBuffer();return t&&t.push(i),{buffer:i}}static deserialize(e){return new Er(e.buffer)}}const Ir={};function Dr(e,t,i={}){if(Ir[e])throw new Error(`${e} is already registered.`);Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:!1}),Ir[e]={klass:t,omit:i.omit||[],shallow:i.shallow||[]}}Dr("Object",Object),Dr("TransferableGridIndex",Er),Dr("Color",ze),Dr("Error",Error),Dr("AJAXError",V),Dr("ResolvedImage",Oe),Dr("StylePropertyFunction",Ni),Dr("StyleExpression",Ri,{omit:["_evaluator"]}),Dr("ZoomDependentExpression",Bi),Dr("ZoomConstantExpression",Li),Dr("CompoundExpression",Je,{omit:["_evaluate"]});for(const e in di)di[e]._classRegistryKey||Dr(`Expression_${e}`,di[e]);function Tr(e){return e&&"undefined"!=typeof ArrayBuffer&&(e instanceof ArrayBuffer||e.constructor&&"ArrayBuffer"===e.constructor.name)}function Cr(e,t){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||e instanceof Blob)return e;if(Tr(e))return t&&t.push(e),e;if(A(e))return t&&t.push(e),e;if(ArrayBuffer.isView(e)){const i=e;return t&&t.push(i.buffer),i}if(e instanceof ImageData)return t&&t.push(e.data.buffer),e;if(Array.isArray(e)){const i=[];for(const r of e)i.push(Cr(r,t));return i}if("object"==typeof e){const i=e.constructor,r=i._classRegistryKey;if(!r)throw new Error("can't serialize object of unregistered class");if(!Ir[r])throw new Error(`${r} is not registered.`);const n=i.serialize?i.serialize(e,t):{};if(i.serialize){if(t&&n===t[t.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const i in e){if(!e.hasOwnProperty(i))continue;if(Ir[r].omit.indexOf(i)>=0)continue;const o=e[i];n[i]=Ir[r].shallow.indexOf(i)>=0?o:Cr(o,t)}e instanceof Error&&(n.message=e.message)}if(n.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==r&&(n.$name=r),n}throw new Error("can't serialize object of type "+typeof e)}function Mr(e){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||e instanceof Blob||Tr(e)||A(e)||ArrayBuffer.isView(e)||e instanceof ImageData)return e;if(Array.isArray(e))return e.map(Mr);if("object"==typeof e){const t=e.$name||"Object";if(!Ir[t])throw new Error(`can't deserialize unregistered class ${t}`);const{klass:i}=Ir[t];if(!i)throw new Error(`can't deserialize unregistered class ${t}`);if(i.deserialize)return i.deserialize(e);const r=Object.create(i.prototype);for(const i of Object.keys(e)){if("$name"===i)continue;const n=e[i];r[i]=Ir[t].shallow.indexOf(i)>=0?n:Mr(n)}return r}throw new Error("can't deserialize object of type "+typeof e)}class Sr{constructor(){this.first=!0}update(e,t){const i=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=i,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=i,!0):(this.lastFloorZoom>i?(this.lastIntegerZoom=i+1,this.lastIntegerZoomTime=t):this.lastFloorZoom<i&&(this.lastIntegerZoom=i,this.lastIntegerZoomTime=t),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=i,!0))}}const Pr={"Latin-1 Supplement":e=>e>=128&&e<=255,Arabic:e=>e>=1536&&e<=1791,"Arabic Supplement":e=>e>=1872&&e<=1919,"Arabic Extended-A":e=>e>=2208&&e<=2303,"Hangul Jamo":e=>e>=4352&&e<=4607,"Unified Canadian Aboriginal Syllabics":e=>e>=5120&&e<=5759,Khmer:e=>e>=6016&&e<=6143,"Unified Canadian Aboriginal Syllabics Extended":e=>e>=6320&&e<=6399,"General Punctuation":e=>e>=8192&&e<=8303,"Letterlike Symbols":e=>e>=8448&&e<=8527,"Number Forms":e=>e>=8528&&e<=8591,"Miscellaneous Technical":e=>e>=8960&&e<=9215,"Control Pictures":e=>e>=9216&&e<=9279,"Optical Character Recognition":e=>e>=9280&&e<=9311,"Enclosed Alphanumerics":e=>e>=9312&&e<=9471,"Geometric Shapes":e=>e>=9632&&e<=9727,"Miscellaneous Symbols":e=>e>=9728&&e<=9983,"Miscellaneous Symbols and Arrows":e=>e>=11008&&e<=11263,"CJK Radicals Supplement":e=>e>=11904&&e<=12031,"Kangxi Radicals":e=>e>=12032&&e<=12255,"Ideographic Description Characters":e=>e>=12272&&e<=12287,"CJK Symbols and Punctuation":e=>e>=12288&&e<=12351,Hiragana:e=>e>=12352&&e<=12447,Katakana:e=>e>=12448&&e<=12543,Bopomofo:e=>e>=12544&&e<=12591,"Hangul Compatibility Jamo":e=>e>=12592&&e<=12687,Kanbun:e=>e>=12688&&e<=12703,"Bopomofo Extended":e=>e>=12704&&e<=12735,"CJK Strokes":e=>e>=12736&&e<=12783,"Katakana Phonetic Extensions":e=>e>=12784&&e<=12799,"Enclosed CJK Letters and Months":e=>e>=12800&&e<=13055,"CJK Compatibility":e=>e>=13056&&e<=13311,"CJK Unified Ideographs Extension A":e=>e>=13312&&e<=19903,"Yijing Hexagram Symbols":e=>e>=19904&&e<=19967,"CJK Unified Ideographs":e=>e>=19968&&e<=40959,"Yi Syllables":e=>e>=40960&&e<=42127,"Yi Radicals":e=>e>=42128&&e<=42191,"Hangul Jamo Extended-A":e=>e>=43360&&e<=43391,"Hangul Syllables":e=>e>=44032&&e<=55215,"Hangul Jamo Extended-B":e=>e>=55216&&e<=55295,"Private Use Area":e=>e>=57344&&e<=63743,"CJK Compatibility Ideographs":e=>e>=63744&&e<=64255,"Arabic Presentation Forms-A":e=>e>=64336&&e<=65023,"Vertical Forms":e=>e>=65040&&e<=65055,"CJK Compatibility Forms":e=>e>=65072&&e<=65103,"Small Form Variants":e=>e>=65104&&e<=65135,"Arabic Presentation Forms-B":e=>e>=65136&&e<=65279,"Halfwidth and Fullwidth Forms":e=>e>=65280&&e<=65519};function Rr(e){for(const t of e)if(Lr(t.charCodeAt(0)))return!0;return!1}function kr(e){for(const t of e)if(!zr(t.charCodeAt(0)))return!1;return!0}function zr(e){return!(Pr.Arabic(e)||Pr["Arabic Supplement"](e)||Pr["Arabic Extended-A"](e)||Pr["Arabic Presentation Forms-A"](e)||Pr["Arabic Presentation Forms-B"](e))}function Lr(e){return!(746!==e&&747!==e&&(e<4352||!(Pr["Bopomofo Extended"](e)||Pr.Bopomofo(e)||Pr["CJK Compatibility Forms"](e)&&!(e>=65097&&e<=65103)||Pr["CJK Compatibility Ideographs"](e)||Pr["CJK Compatibility"](e)||Pr["CJK Radicals Supplement"](e)||Pr["CJK Strokes"](e)||!(!Pr["CJK Symbols and Punctuation"](e)||e>=12296&&e<=12305||e>=12308&&e<=12319||12336===e)||Pr["CJK Unified Ideographs Extension A"](e)||Pr["CJK Unified Ideographs"](e)||Pr["Enclosed CJK Letters and Months"](e)||Pr["Hangul Compatibility Jamo"](e)||Pr["Hangul Jamo Extended-A"](e)||Pr["Hangul Jamo Extended-B"](e)||Pr["Hangul Jamo"](e)||Pr["Hangul Syllables"](e)||Pr.Hiragana(e)||Pr["Ideographic Description Characters"](e)||Pr.Kanbun(e)||Pr["Kangxi Radicals"](e)||Pr["Katakana Phonetic Extensions"](e)||Pr.Katakana(e)&&12540!==e||!(!Pr["Halfwidth and Fullwidth Forms"](e)||65288===e||65289===e||65293===e||e>=65306&&e<=65310||65339===e||65341===e||65343===e||e>=65371&&e<=65503||65507===e||e>=65512&&e<=65519)||!(!Pr["Small Form Variants"](e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||Pr["Unified Canadian Aboriginal Syllabics"](e)||Pr["Unified Canadian Aboriginal Syllabics Extended"](e)||Pr["Vertical Forms"](e)||Pr["Yijing Hexagram Symbols"](e)||Pr["Yi Syllables"](e)||Pr["Yi Radicals"](e))))}function Br(e){return!(Lr(e)||function(e){return!!(Pr["Latin-1 Supplement"](e)&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||Pr["General Punctuation"](e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||Pr["Letterlike Symbols"](e)||Pr["Number Forms"](e)||Pr["Miscellaneous Technical"](e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215)||Pr["Control Pictures"](e)&&9251!==e||Pr["Optical Character Recognition"](e)||Pr["Enclosed Alphanumerics"](e)||Pr["Geometric Shapes"](e)||Pr["Miscellaneous Symbols"](e)&&!(e>=9754&&e<=9759)||Pr["Miscellaneous Symbols and Arrows"](e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||Pr["CJK Symbols and Punctuation"](e)||Pr.Katakana(e)||Pr["Private Use Area"](e)||Pr["CJK Compatibility Forms"](e)||Pr["Small Form Variants"](e)||Pr["Halfwidth and Fullwidth Forms"](e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e)}(e))}function Fr(e){return e>=1424&&e<=2303||Pr["Arabic Presentation Forms-A"](e)||Pr["Arabic Presentation Forms-B"](e)}function Nr(e,t){return!(!t&&Fr(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||Pr.Khmer(e))}function Or(e){for(const t of e)if(Fr(t.charCodeAt(0)))return!0;return!1}const Gr="deferred",Ur="loading",Vr="loaded";let $r=null,qr="unavailable",jr=null;const Zr=function(e){e&&"string"==typeof e&&e.indexOf("NetworkError")>-1&&(qr="error"),$r&&$r(e)};function Wr(){Xr.fire(new ee("pluginStateChange",{pluginStatus:qr,pluginURL:jr}))}const Xr=new ie,Hr=function(){return qr},Yr=function(){if(qr!==Gr||!jr)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");qr=Ur,Wr(),jr&&Z({url:jr},(e=>{e?Zr(e):(qr=Vr,Wr())}))},Kr={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>qr===Vr||null!=Kr.applyArabicShaping,isLoading:()=>qr===Ur,setState(e){if(!y())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");qr=e.pluginStatus,jr=e.pluginURL},isParsed(){if(!y())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return null!=Kr.applyArabicShaping&&null!=Kr.processBidirectionalText&&null!=Kr.processStyledBidirectionalText},getPluginURL(){if(!y())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return jr}};class Jr{constructor(e,t){this.zoom=e,t?(this.now=t.now,this.fadeDuration=t.fadeDuration,this.zoomHistory=t.zoomHistory,this.transition=t.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Sr,this.transition={})}isSupportedScript(e){return function(e,t){for(const i of e)if(!Nr(i.charCodeAt(0),t))return!1;return!0}(e,Kr.isLoaded())}crossFadingFactor(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const e=this.zoom,t=e-Math.floor(e),i=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:t+(1-t)*i}:{fromScale:.5,toScale:1,t:1-(1-i)*t}}}class Qr{constructor(e,t){this.property=e,this.value=t,this.expression=function(e,t){if(Ei(e))return new Ni(e,t);if(ki(e)){const i=Fi(e,t);if("error"===i.result)throw new Error(i.value.map((e=>`${e.key}: ${e.message}`)).join(", "));return i.value}{let i=e;return"color"===t.type&&"string"==typeof e?i=ze.parse(e):"padding"!==t.type||"number"!=typeof e&&!Array.isArray(e)||(i=Ne.parse(e)),{kind:"constant",evaluate:()=>i}}}(void 0===t?e.specification.default:t,e.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(e,t,i){return this.property.possiblyEvaluate(this,e,t,i)}}class en{constructor(e){this.property=e,this.value=new Qr(e,void 0)}transitioned(e,t){return new rn(this.property,this.value,t,s({},e.transition,this.transition),e.now)}untransitioned(){return new rn(this.property,this.value,null,{},0)}}class tn{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)}getValue(e){return p(this._values[e].value.value)}setValue(e,t){Object.prototype.hasOwnProperty.call(this._values,e)||(this._values[e]=new en(this._values[e].property)),this._values[e].value=new Qr(this._values[e].property,null===t?void 0:p(t))}getTransition(e){return p(this._values[e].transition)}setTransition(e,t){Object.prototype.hasOwnProperty.call(this._values,e)||(this._values[e]=new en(this._values[e].property)),this._values[e].transition=p(t)||void 0}serialize(){const e={};for(const t of Object.keys(this._values)){const i=this.getValue(t);void 0!==i&&(e[t]=i);const r=this.getTransition(t);void 0!==r&&(e[`${t}-transition`]=r)}return e}transitioned(e,t){const i=new nn(this._properties);for(const r of Object.keys(this._values))i._values[r]=this._values[r].transitioned(e,t._values[r]);return i}untransitioned(){const e=new nn(this._properties);for(const t of Object.keys(this._values))e._values[t]=this._values[t].untransitioned();return e}}class rn{constructor(e,t,i,r,n){this.property=e,this.value=t,this.begin=n+r.delay||0,this.end=this.begin+r.duration||0,e.specification.transition&&(r.delay||r.duration)&&(this.prior=i)}possiblyEvaluate(e,t,i){const r=e.now||0,n=this.value.possiblyEvaluate(e,t,i),o=this.prior;if(o){if(r>this.end)return this.prior=null,n;if(this.value.isDataDriven())return this.prior=null,n;if(r<this.begin)return o.possiblyEvaluate(e,t,i);{const a=(r-this.begin)/(this.end-this.begin);return this.property.interpolate(o.possiblyEvaluate(e,t,i),n,function(e){if(e<=0)return 0;if(e>=1)return 1;const t=e*e,i=t*e;return 4*(e<.5?i:3*(e-t)+i-.75)}(a))}}return n}}class nn{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,t,i){const r=new sn(this._properties);for(const n of Object.keys(this._values))r._values[n]=this._values[n].possiblyEvaluate(e,t,i);return r}hasTransition(){for(const e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}}class on{constructor(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)}getValue(e){return p(this._values[e].value)}setValue(e,t){this._values[e]=new Qr(this._values[e].property,null===t?void 0:p(t))}serialize(){const e={};for(const t of Object.keys(this._values)){const i=this.getValue(t);void 0!==i&&(e[t]=i)}return e}possiblyEvaluate(e,t,i){const r=new sn(this._properties);for(const n of Object.keys(this._values))r._values[n]=this._values[n].possiblyEvaluate(e,t,i);return r}}class an{constructor(e,t,i){this.property=e,this.value=t,this.parameters=i}isConstant(){return"constant"===this.value.kind}constantOr(e){return"constant"===this.value.kind?this.value.value:e}evaluate(e,t,i,r){return this.property.evaluate(this.value,this.parameters,e,t,i,r)}}class sn{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}}class ln{constructor(e){this.specification=e}possiblyEvaluate(e,t){if(e.isDataDriven())throw new Error("Value should not be data driven");return e.expression.evaluate(t)}interpolate(e,t,i){const r=Dt[this.specification.type];return r?r(e,t,i):e}}class cn{constructor(e,t){this.specification=e,this.overrides=t}possiblyEvaluate(e,t,i,r){return new an(this,"constant"===e.expression.kind||"camera"===e.expression.kind?{kind:"constant",value:e.expression.evaluate(t,null,{},i,r)}:e.expression,t)}interpolate(e,t,i){if("constant"!==e.value.kind||"constant"!==t.value.kind)return e;if(void 0===e.value.value||void 0===t.value.value)return new an(this,{kind:"constant",value:void 0},e.parameters);const r=Dt[this.specification.type];return r?new an(this,{kind:"constant",value:r(e.value.value,t.value.value,i)},e.parameters):e}evaluate(e,t,i,r,n,o){return"constant"===e.kind?e.value:e.evaluate(t,i,r,n,o)}}class un extends cn{possiblyEvaluate(e,t,i,r){if(void 0===e.value)return new an(this,{kind:"constant",value:void 0},t);if("constant"===e.expression.kind){const n=e.expression.evaluate(t,null,{},i,r),o="resolvedImage"===e.property.specification.type&&"string"!=typeof n?n.name:n,a=this._calculate(o,o,o,t);return new an(this,{kind:"constant",value:a},t)}if("camera"===e.expression.kind){const i=this._calculate(e.expression.evaluate({zoom:t.zoom-1}),e.expression.evaluate({zoom:t.zoom}),e.expression.evaluate({zoom:t.zoom+1}),t);return new an(this,{kind:"constant",value:i},t)}return new an(this,e.expression,t)}evaluate(e,t,i,r,n,o){if("source"===e.kind){const a=e.evaluate(t,i,r,n,o);return this._calculate(a,a,a,t)}return"composite"===e.kind?this._calculate(e.evaluate({zoom:Math.floor(t.zoom)-1},i,r),e.evaluate({zoom:Math.floor(t.zoom)},i,r),e.evaluate({zoom:Math.floor(t.zoom)+1},i,r),t):e.value}_calculate(e,t,i,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:i,to:t}}interpolate(e){return e}}class hn{constructor(e){this.specification=e}possiblyEvaluate(e,t,i,r){if(void 0!==e.value){if("constant"===e.expression.kind){const n=e.expression.evaluate(t,null,{},i,r);return this._calculate(n,n,n,t)}return this._calculate(e.expression.evaluate(new Jr(Math.floor(t.zoom-1),t)),e.expression.evaluate(new Jr(Math.floor(t.zoom),t)),e.expression.evaluate(new Jr(Math.floor(t.zoom+1),t)),t)}}_calculate(e,t,i,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:i,to:t}}interpolate(e){return e}}class pn{constructor(e){this.specification=e}possiblyEvaluate(e,t,i,r){return!!e.expression.evaluate(t,null,{},i,r)}interpolate(){return!1}}class dn{constructor(e){this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const t in e){const i=e[t];i.specification.overridable&&this.overridableProperties.push(t);const r=this.defaultPropertyValues[t]=new Qr(i,void 0),n=this.defaultTransitionablePropertyValues[t]=new en(i);this.defaultTransitioningPropertyValues[t]=n.untransitioned(),this.defaultPossiblyEvaluatedValues[t]=r.possiblyEvaluate({})}}}Dr("DataDrivenProperty",cn),Dr("DataConstantProperty",ln),Dr("CrossFadedDataDrivenProperty",un),Dr("CrossFadedProperty",hn),Dr("ColorRampProperty",pn);const fn="-transition";class mn extends ie{constructor(e,t){if(super(),this.id=e.id,this.type=e.type,this._featureFilter={filter:()=>!0,needGeometry:!1},"custom"!==e.type&&(this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),t.layout&&(this._unevaluatedLayout=new on(t.layout)),t.paint)){this._transitionablePaint=new tn(t.paint);for(const t in e.paint)this.setPaintProperty(t,e.paint[t],{validate:!1});for(const t in e.layout)this.setLayoutProperty(t,e.layout[t],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new sn(t.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)}setLayoutProperty(e,t,i={}){null!=t&&this._validate(wr,`layers.${this.id}.layout.${e}`,e,t,i)||("visibility"!==e?this._unevaluatedLayout.setValue(e,t):this.visibility=t)}getPaintProperty(e){return e.endsWith(fn)?this._transitionablePaint.getTransition(e.slice(0,-fn.length)):this._transitionablePaint.getValue(e)}setPaintProperty(e,t,i={}){if(null!=t&&this._validate(vr,`layers.${this.id}.paint.${e}`,e,t,i))return!1;if(e.endsWith(fn))return this._transitionablePaint.setTransition(e.slice(0,-fn.length),t||void 0),!1;{const i=this._transitionablePaint._values[e],r="cross-faded-data-driven"===i.property.specification["property-type"],n=i.value.isDataDriven(),o=i.value;this._transitionablePaint.setValue(e,t),this._handleSpecialPaintPropertyUpdate(e);const a=this._transitionablePaint._values[e].value;return a.isDataDriven()||n||r||this._handleOverridablePaintPropertyUpdate(e,o,a)}}_handleSpecialPaintPropertyUpdate(e){}_handleOverridablePaintPropertyUpdate(e,t,i){return!1}isHidden(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(e,t){e.getCrossfadeParameters&&(this._crossfadeParameters=e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,t)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,t)}serialize(){const e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),h(e,((e,t)=>!(void 0===e||"layout"===t&&!Object.keys(e).length||"paint"===t&&!Object.keys(e).length)))}_validate(e,t,i,r,n={}){return(!n||!1!==n.validate)&&Ar(this,e.call(xr,{key:t,layerType:this.type,objectKey:i,value:r,styleSpec:re,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const e in this.paint._values){const t=this.paint.get(e);if(t instanceof an&&bi(t.property.specification)&&("source"===t.value.kind||"composite"===t.value.kind)&&t.value.isStateDependent)return!0}return!1}}const gn={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class yn{constructor(e,t){this._structArray=e,this._pos1=t*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class _n{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){const t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function xn(e,t=1){let i=0,r=0;return{members:e.map((e=>{const n=gn[e.type].BYTES_PER_ELEMENT,o=i=bn(i,Math.max(t,n)),a=e.components||1;return r=Math.max(r,n),i+=n*a,{name:e.name,type:e.type,components:a,offset:o}})),size:bn(i,Math.max(r,t)),alignment:t}}function bn(e,t){return Math.ceil(e/t)*t}class vn extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t){const i=this.length;return this.resize(i+1),this.emplace(i,e,t)}emplace(e,t,i){const r=2*e;return this.int16[r+0]=t,this.int16[r+1]=i,e}}vn.prototype.bytesPerElement=4,Dr("StructArrayLayout2i4",vn);class wn extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,i,r){const n=this.length;return this.resize(n+1),this.emplace(n,e,t,i,r)}emplace(e,t,i,r,n){const o=4*e;return this.int16[o+0]=t,this.int16[o+1]=i,this.int16[o+2]=r,this.int16[o+3]=n,e}}wn.prototype.bytesPerElement=8,Dr("StructArrayLayout4i8",wn);class An extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,i,r,n,o){const a=this.length;return this.resize(a+1),this.emplace(a,e,t,i,r,n,o)}emplace(e,t,i,r,n,o,a){const s=6*e;return this.int16[s+0]=t,this.int16[s+1]=i,this.int16[s+2]=r,this.int16[s+3]=n,this.int16[s+4]=o,this.int16[s+5]=a,e}}An.prototype.bytesPerElement=12,Dr("StructArrayLayout2i4i12",An);class En extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,i,r,n,o){const a=this.length;return this.resize(a+1),this.emplace(a,e,t,i,r,n,o)}emplace(e,t,i,r,n,o,a){const s=4*e,l=8*e;return this.int16[s+0]=t,this.int16[s+1]=i,this.uint8[l+4]=r,this.uint8[l+5]=n,this.uint8[l+6]=o,this.uint8[l+7]=a,e}}En.prototype.bytesPerElement=8,Dr("StructArrayLayout2i4ub8",En);class In extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t){const i=this.length;return this.resize(i+1),this.emplace(i,e,t)}emplace(e,t,i){const r=2*e;return this.float32[r+0]=t,this.float32[r+1]=i,e}}In.prototype.bytesPerElement=8,Dr("StructArrayLayout2f8",In);class Dn extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,i,r,n,o,a,s,l,c){const u=this.length;return this.resize(u+1),this.emplace(u,e,t,i,r,n,o,a,s,l,c)}emplace(e,t,i,r,n,o,a,s,l,c,u){const h=10*e;return this.uint16[h+0]=t,this.uint16[h+1]=i,this.uint16[h+2]=r,this.uint16[h+3]=n,this.uint16[h+4]=o,this.uint16[h+5]=a,this.uint16[h+6]=s,this.uint16[h+7]=l,this.uint16[h+8]=c,this.uint16[h+9]=u,e}}Dn.prototype.bytesPerElement=20,Dr("StructArrayLayout10ui20",Dn);class Tn extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,i,r,n,o,a,s,l,c,u,h){const p=this.length;return this.resize(p+1),this.emplace(p,e,t,i,r,n,o,a,s,l,c,u,h)}emplace(e,t,i,r,n,o,a,s,l,c,u,h,p){const d=12*e;return this.int16[d+0]=t,this.int16[d+1]=i,this.int16[d+2]=r,this.int16[d+3]=n,this.uint16[d+4]=o,this.uint16[d+5]=a,this.uint16[d+6]=s,this.uint16[d+7]=l,this.int16[d+8]=c,this.int16[d+9]=u,this.int16[d+10]=h,this.int16[d+11]=p,e}}Tn.prototype.bytesPerElement=24,Dr("StructArrayLayout4i4ui4i24",Tn);class Cn extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,i){const r=this.length;return this.resize(r+1),this.emplace(r,e,t,i)}emplace(e,t,i,r){const n=3*e;return this.float32[n+0]=t,this.float32[n+1]=i,this.float32[n+2]=r,e}}Cn.prototype.bytesPerElement=12,Dr("StructArrayLayout3f12",Cn);class Mn extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.uint32[1*e+0]=t,e}}Mn.prototype.bytesPerElement=4,Dr("StructArrayLayout1ul4",Mn);class Sn extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,i,r,n,o,a,s,l){const c=this.length;return this.resize(c+1),this.emplace(c,e,t,i,r,n,o,a,s,l)}emplace(e,t,i,r,n,o,a,s,l,c){const u=10*e,h=5*e;return this.int16[u+0]=t,this.int16[u+1]=i,this.int16[u+2]=r,this.int16[u+3]=n,this.int16[u+4]=o,this.int16[u+5]=a,this.uint32[h+3]=s,this.uint16[u+8]=l,this.uint16[u+9]=c,e}}Sn.prototype.bytesPerElement=20,Dr("StructArrayLayout6i1ul2ui20",Sn);class Pn extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,i,r,n,o){const a=this.length;return this.resize(a+1),this.emplace(a,e,t,i,r,n,o)}emplace(e,t,i,r,n,o,a){const s=6*e;return this.int16[s+0]=t,this.int16[s+1]=i,this.int16[s+2]=r,this.int16[s+3]=n,this.int16[s+4]=o,this.int16[s+5]=a,e}}Pn.prototype.bytesPerElement=12,Dr("StructArrayLayout2i2i2i12",Pn);class Rn extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,i,r,n){const o=this.length;return this.resize(o+1),this.emplace(o,e,t,i,r,n)}emplace(e,t,i,r,n,o){const a=4*e,s=8*e;return this.float32[a+0]=t,this.float32[a+1]=i,this.float32[a+2]=r,this.int16[s+6]=n,this.int16[s+7]=o,e}}Rn.prototype.bytesPerElement=16,Dr("StructArrayLayout2f1f2i16",Rn);class kn extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,i,r){const n=this.length;return this.resize(n+1),this.emplace(n,e,t,i,r)}emplace(e,t,i,r,n){const o=12*e,a=3*e;return this.uint8[o+0]=t,this.uint8[o+1]=i,this.float32[a+1]=r,this.float32[a+2]=n,e}}kn.prototype.bytesPerElement=12,Dr("StructArrayLayout2ub2f12",kn);class zn extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,i){const r=this.length;return this.resize(r+1),this.emplace(r,e,t,i)}emplace(e,t,i,r){const n=3*e;return this.uint16[n+0]=t,this.uint16[n+1]=i,this.uint16[n+2]=r,e}}zn.prototype.bytesPerElement=6,Dr("StructArrayLayout3ui6",zn);class Ln extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,i,r,n,o,a,s,l,c,u,h,p,d,f,m,g){const y=this.length;return this.resize(y+1),this.emplace(y,e,t,i,r,n,o,a,s,l,c,u,h,p,d,f,m,g)}emplace(e,t,i,r,n,o,a,s,l,c,u,h,p,d,f,m,g,y){const _=24*e,x=12*e,b=48*e;return this.int16[_+0]=t,this.int16[_+1]=i,this.uint16[_+2]=r,this.uint16[_+3]=n,this.uint32[x+2]=o,this.uint32[x+3]=a,this.uint32[x+4]=s,this.uint16[_+10]=l,this.uint16[_+11]=c,this.uint16[_+12]=u,this.float32[x+7]=h,this.float32[x+8]=p,this.uint8[b+36]=d,this.uint8[b+37]=f,this.uint8[b+38]=m,this.uint32[x+10]=g,this.int16[_+22]=y,e}}Ln.prototype.bytesPerElement=48,Dr("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Ln);class Bn extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,i,r,n,o,a,s,l,c,u,h,p,d,f,m,g,y,_,x,b,v,w,A,E,I,D,T){const C=this.length;return this.resize(C+1),this.emplace(C,e,t,i,r,n,o,a,s,l,c,u,h,p,d,f,m,g,y,_,x,b,v,w,A,E,I,D,T)}emplace(e,t,i,r,n,o,a,s,l,c,u,h,p,d,f,m,g,y,_,x,b,v,w,A,E,I,D,T,C){const M=34*e,S=17*e;return this.int16[M+0]=t,this.int16[M+1]=i,this.int16[M+2]=r,this.int16[M+3]=n,this.int16[M+4]=o,this.int16[M+5]=a,this.int16[M+6]=s,this.int16[M+7]=l,this.uint16[M+8]=c,this.uint16[M+9]=u,this.uint16[M+10]=h,this.uint16[M+11]=p,this.uint16[M+12]=d,this.uint16[M+13]=f,this.uint16[M+14]=m,this.uint16[M+15]=g,this.uint16[M+16]=y,this.uint16[M+17]=_,this.uint16[M+18]=x,this.uint16[M+19]=b,this.uint16[M+20]=v,this.uint16[M+21]=w,this.uint16[M+22]=A,this.uint32[S+12]=E,this.float32[S+13]=I,this.float32[S+14]=D,this.float32[S+15]=T,this.float32[S+16]=C,e}}Bn.prototype.bytesPerElement=68,Dr("StructArrayLayout8i15ui1ul4f68",Bn);class Fn extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.float32[1*e+0]=t,e}}Fn.prototype.bytesPerElement=4,Dr("StructArrayLayout1f4",Fn);class Nn extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,i){const r=this.length;return this.resize(r+1),this.emplace(r,e,t,i)}emplace(e,t,i,r){const n=3*e;return this.int16[n+0]=t,this.int16[n+1]=i,this.int16[n+2]=r,e}}Nn.prototype.bytesPerElement=6,Dr("StructArrayLayout3i6",Nn);class On extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,i){const r=this.length;return this.resize(r+1),this.emplace(r,e,t,i)}emplace(e,t,i,r){const n=4*e;return this.uint32[2*e+0]=t,this.uint16[n+2]=i,this.uint16[n+3]=r,e}}On.prototype.bytesPerElement=8,Dr("StructArrayLayout1ul2ui8",On);class Gn extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t){const i=this.length;return this.resize(i+1),this.emplace(i,e,t)}emplace(e,t,i){const r=2*e;return this.uint16[r+0]=t,this.uint16[r+1]=i,e}}Gn.prototype.bytesPerElement=4,Dr("StructArrayLayout2ui4",Gn);class Un extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.uint16[1*e+0]=t,e}}Un.prototype.bytesPerElement=2,Dr("StructArrayLayout1ui2",Un);class Vn extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,i,r){const n=this.length;return this.resize(n+1),this.emplace(n,e,t,i,r)}emplace(e,t,i,r,n){const o=4*e;return this.float32[o+0]=t,this.float32[o+1]=i,this.float32[o+2]=r,this.float32[o+3]=n,e}}Vn.prototype.bytesPerElement=16,Dr("StructArrayLayout4f16",Vn);class $n extends yn{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new I(this.anchorPointX,this.anchorPointY)}}$n.prototype.size=20;class qn extends Sn{get(e){return new $n(this,e)}}Dr("CollisionBoxArray",qn);class jn extends yn{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(e){this._structArray.uint8[this._pos1+37]=e}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(e){this._structArray.uint8[this._pos1+38]=e}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(e){this._structArray.uint32[this._pos4+10]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}jn.prototype.size=48;class Zn extends Ln{get(e){return new jn(this,e)}}Dr("PlacedSymbolArray",Zn);class Wn extends yn{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(e){this._structArray.uint32[this._pos4+12]=e}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}Wn.prototype.size=68;class Xn extends Bn{get(e){return new Wn(this,e)}}Dr("SymbolInstanceArray",Xn);class Hn extends Fn{getoffsetX(e){return this.float32[1*e+0]}}Dr("GlyphOffsetArray",Hn);class Yn extends Nn{getx(e){return this.int16[3*e+0]}gety(e){return this.int16[3*e+1]}gettileUnitDistanceFromAnchor(e){return this.int16[3*e+2]}}Dr("SymbolLineVertexArray",Yn);class Kn extends yn{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Kn.prototype.size=8;class Jn extends On{get(e){return new Kn(this,e)}}Dr("FeatureIndexArray",Jn);class Qn extends vn{}class eo extends vn{}class to extends vn{}class io extends An{}class ro extends En{}class no extends In{}class oo extends Dn{}class ao extends Tn{}class so extends Cn{}class lo extends Mn{}class co extends Pn{}class uo extends kn{}class ho extends zn{}class po extends Gn{}const fo=xn([{name:"a_pos",components:2,type:"Int16"}],4),{members:mo}=fo;class go{constructor(e=[]){this.segments=e}prepareSegment(e,t,i,r){let n=this.segments[this.segments.length-1];return e>go.MAX_VERTEX_ARRAY_LENGTH&&f(`Max vertices per segment is ${go.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${e}`),(!n||n.vertexLength+e>go.MAX_VERTEX_ARRAY_LENGTH||n.sortKey!==r)&&(n={vertexOffset:t.length,primitiveOffset:i.length,vertexLength:0,primitiveLength:0},void 0!==r&&(n.sortKey=r),this.segments.push(n)),n}get(){return this.segments}destroy(){for(const e of this.segments)for(const t in e.vaos)e.vaos[t].destroy()}static simpleSegment(e,t,i,r){return new go([{vertexOffset:e,primitiveOffset:t,vertexLength:i,primitiveLength:r,vaos:{},sortKey:0}])}}function yo(e,t){return 256*(e=o(Math.floor(e),0,255))+o(Math.floor(t),0,255)}go.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Dr("SegmentVector",go);const _o=xn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var xo={exports:{}},bo={exports:{}};bo.exports=function(e,t){var i,r,n,o,a,s,l,c;for(r=e.length-(i=3&e.length),n=t,a=3432918353,s=461845907,c=0;c<r;)l=255&e.charCodeAt(c)|(255&e.charCodeAt(++c))<<8|(255&e.charCodeAt(++c))<<16|(255&e.charCodeAt(++c))<<24,++c,n=27492+(65535&(o=5*(65535&(n=(n^=l=(65535&(l=(l=(65535&l)*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295)<<13|n>>>19))+((5*(n>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(l=0,i){case 3:l^=(255&e.charCodeAt(c+2))<<16;case 2:l^=(255&e.charCodeAt(c+1))<<8;case 1:n^=l=(65535&(l=(l=(65535&(l^=255&e.charCodeAt(c)))*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295}return n^=e.length,n=2246822507*(65535&(n^=n>>>16))+((2246822507*(n>>>16)&65535)<<16)&4294967295,n=3266489909*(65535&(n^=n>>>13))+((3266489909*(n>>>16)&65535)<<16)&4294967295,(n^=n>>>16)>>>0};var vo={exports:{}};vo.exports=function(e,t){for(var i,r=e.length,n=t^r,o=0;r>=4;)i=1540483477*(65535&(i=255&e.charCodeAt(o)|(255&e.charCodeAt(++o))<<8|(255&e.charCodeAt(++o))<<16|(255&e.charCodeAt(++o))<<24))+((1540483477*(i>>>16)&65535)<<16),n=1540483477*(65535&n)+((1540483477*(n>>>16)&65535)<<16)^(i=1540483477*(65535&(i^=i>>>24))+((1540483477*(i>>>16)&65535)<<16)),r-=4,++o;switch(r){case 3:n^=(255&e.charCodeAt(o+2))<<16;case 2:n^=(255&e.charCodeAt(o+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(o)))+((1540483477*(n>>>16)&65535)<<16)}return n=1540483477*(65535&(n^=n>>>13))+((1540483477*(n>>>16)&65535)<<16),(n^=n>>>15)>>>0};var wo=bo.exports,Ao=vo.exports;xo.exports=wo,xo.exports.murmur3=wo,xo.exports.murmur2=Ao;class Eo{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(e,t,i,r){this.ids.push(Io(e)),this.positions.push(t,i,r)}getPositions(e){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const t=Io(e);let i=0,r=this.ids.length-1;for(;i<r;){const e=i+r>>1;this.ids[e]>=t?r=e:i=e+1}const n=[];for(;this.ids[i]===t;)n.push({index:this.positions[3*i],start:this.positions[3*i+1],end:this.positions[3*i+2]}),i++;return n}static serialize(e,t){const i=new Float64Array(e.ids),r=new Uint32Array(e.positions);return Do(i,r,0,i.length-1),t&&t.push(i.buffer,r.buffer),{ids:i,positions:r}}static deserialize(e){const t=new Eo;return t.ids=e.ids,t.positions=e.positions,t.indexed=!0,t}}function Io(e){const t=+e;return!isNaN(t)&&t<=Number.MAX_SAFE_INTEGER?t:xo.exports(String(e))}function Do(e,t,i,r){for(;i<r;){const n=e[i+r>>1];let o=i-1,a=r+1;for(;;){do{o++}while(e[o]<n);do{a--}while(e[a]>n);if(o>=a)break;To(e,o,a),To(t,3*o,3*a),To(t,3*o+1,3*a+1),To(t,3*o+2,3*a+2)}a-i<r-a?(Do(e,t,i,a),i=a+1):(Do(e,t,a+1,r),r=a)}}function To(e,t,i){const r=e[t];e[t]=e[i],e[i]=r}Dr("FeaturePositionMap",Eo);class Co{constructor(e,t){this.gl=e.gl,this.location=t}}class Mo extends Co{constructor(e,t){super(e,t),this.current=0}set(e){this.current!==e&&(this.current=e,this.gl.uniform1f(this.location,e))}}class So extends Co{constructor(e,t){super(e,t),this.current=[0,0,0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]&&e[3]===this.current[3]||(this.current=e,this.gl.uniform4f(this.location,e[0],e[1],e[2],e[3]))}}class Po extends Co{constructor(e,t){super(e,t),this.current=ze.transparent}set(e){e.r===this.current.r&&e.g===this.current.g&&e.b===this.current.b&&e.a===this.current.a||(this.current=e,this.gl.uniform4f(this.location,e.r,e.g,e.b,e.a))}}const Ro=new Float32Array(16);function ko(e){return[yo(255*e.r,255*e.g),yo(255*e.b,255*e.a)]}class zo{constructor(e,t,i){this.value=e,this.uniformNames=t.map((e=>`u_${e}`)),this.type=i}setUniform(e,t,i){e.set(i.constantOr(this.value))}getBinding(e,t,i){return"color"===this.type?new Po(e,t):new Mo(e,t)}}class Lo{constructor(e,t){this.uniformNames=t.map((e=>`u_${e}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(e,t){this.pixelRatioFrom=t.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=t.tlbr,this.patternTo=e.tlbr}setUniform(e,t,i,r){const n="u_pattern_to"===r?this.patternTo:"u_pattern_from"===r?this.patternFrom:"u_pixel_ratio_to"===r?this.pixelRatioTo:"u_pixel_ratio_from"===r?this.pixelRatioFrom:null;n&&e.set(n)}getBinding(e,t,i){return"u_pattern"===i.substr(0,9)?new So(e,t):new Mo(e,t)}}class Bo{constructor(e,t,i,r){this.expression=e,this.type=i,this.maxValue=0,this.paintVertexAttributes=t.map((e=>({name:`a_${e}`,type:"Float32",components:"color"===i?2:1,offset:0}))),this.paintVertexArray=new r}populatePaintArray(e,t,i,r,n){const o=this.paintVertexArray.length,a=this.expression.evaluate(new Jr(0),t,{},r,[],n);this.paintVertexArray.resize(e),this._setPaintValue(o,e,a)}updatePaintArray(e,t,i,r){const n=this.expression.evaluate({zoom:0},i,r);this._setPaintValue(e,t,n)}_setPaintValue(e,t,i){if("color"===this.type){const r=ko(i);for(let i=e;i<t;i++)this.paintVertexArray.emplace(i,r[0],r[1])}else{for(let r=e;r<t;r++)this.paintVertexArray.emplace(r,i);this.maxValue=Math.max(this.maxValue,Math.abs(i))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Fo{constructor(e,t,i,r,n,o){this.expression=e,this.uniformNames=t.map((e=>`u_${e}_t`)),this.type=i,this.useIntegerZoom=r,this.zoom=n,this.maxValue=0,this.paintVertexAttributes=t.map((e=>({name:`a_${e}`,type:"Float32",components:"color"===i?4:2,offset:0}))),this.paintVertexArray=new o}populatePaintArray(e,t,i,r,n){const o=this.expression.evaluate(new Jr(this.zoom),t,{},r,[],n),a=this.expression.evaluate(new Jr(this.zoom+1),t,{},r,[],n),s=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(s,e,o,a)}updatePaintArray(e,t,i,r){const n=this.expression.evaluate({zoom:this.zoom},i,r),o=this.expression.evaluate({zoom:this.zoom+1},i,r);this._setPaintValue(e,t,n,o)}_setPaintValue(e,t,i,r){if("color"===this.type){const n=ko(i),o=ko(r);for(let i=e;i<t;i++)this.paintVertexArray.emplace(i,n[0],n[1],o[0],o[1])}else{for(let n=e;n<t;n++)this.paintVertexArray.emplace(n,i,r);this.maxValue=Math.max(this.maxValue,Math.abs(i),Math.abs(r))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,t){const i=this.useIntegerZoom?Math.floor(t.zoom):t.zoom,r=o(this.expression.interpolationFactor(i,this.zoom,this.zoom+1),0,1);e.set(r)}getBinding(e,t,i){return new Mo(e,t)}}class No{constructor(e,t,i,r,n,o){this.expression=e,this.type=t,this.useIntegerZoom=i,this.zoom=r,this.layerId=o,this.zoomInPaintVertexArray=new n,this.zoomOutPaintVertexArray=new n}populatePaintArray(e,t,i){const r=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(r,e,t.patterns&&t.patterns[this.layerId],i)}updatePaintArray(e,t,i,r,n){this._setPaintValues(e,t,i.patterns&&i.patterns[this.layerId],n)}_setPaintValues(e,t,i,r){if(!r||!i)return;const{min:n,mid:o,max:a}=i,s=r[n],l=r[o],c=r[a];if(s&&l&&c)for(let i=e;i<t;i++)this.zoomInPaintVertexArray.emplace(i,l.tl[0],l.tl[1],l.br[0],l.br[1],s.tl[0],s.tl[1],s.br[0],s.br[1],l.pixelRatio,s.pixelRatio),this.zoomOutPaintVertexArray.emplace(i,l.tl[0],l.tl[1],l.br[0],l.br[1],c.tl[0],c.tl[1],c.br[0],c.br[1],l.pixelRatio,c.pixelRatio)}upload(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,_o.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,_o.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Oo{constructor(e,t,i){this.binders={},this._buffers=[];const r=[];for(const n in e.paint._values){if(!i(n))continue;const o=e.paint.get(n);if(!(o instanceof an&&bi(o.property.specification)))continue;const a=Uo(n,e.type),s=o.value,l=o.property.specification.type,c=o.property.useIntegerZoom,u=o.property.specification["property-type"],h="cross-faded"===u||"cross-faded-data-driven"===u;if("constant"===s.kind)this.binders[n]=h?new Lo(s.value,a):new zo(s.value,a,l),r.push(`/u_${n}`);else if("source"===s.kind||h){const i=Vo(n,l,"source");this.binders[n]=h?new No(s,l,c,t,i,e.id):new Bo(s,a,l,i),r.push(`/a_${n}`)}else{const e=Vo(n,l,"composite");this.binders[n]=new Fo(s,a,l,c,t,e),r.push(`/z_${n}`)}}this.cacheKey=r.sort().join("")}getMaxValue(e){const t=this.binders[e];return t instanceof Bo||t instanceof Fo?t.maxValue:0}populatePaintArrays(e,t,i,r,n){for(const o in this.binders){const a=this.binders[o];(a instanceof Bo||a instanceof Fo||a instanceof No)&&a.populatePaintArray(e,t,i,r,n)}}setConstantPatternPositions(e,t){for(const i in this.binders){const r=this.binders[i];r instanceof Lo&&r.setConstantPatternPositions(e,t)}}updatePaintArrays(e,t,i,r,n){let o=!1;for(const a in e){const s=t.getPositions(a);for(const t of s){const s=i.feature(t.index);for(const i in this.binders){const l=this.binders[i];if((l instanceof Bo||l instanceof Fo||l instanceof No)&&!0===l.expression.isStateDependent){const c=r.paint.get(i);l.expression=c.value,l.updatePaintArray(t.start,t.end,s,e[a],n),o=!0}}}}return o}defines(){const e=[];for(const t in this.binders){const i=this.binders[t];(i instanceof zo||i instanceof Lo)&&e.push(...i.uniformNames.map((e=>`#define HAS_UNIFORM_${e}`)))}return e}getBinderAttributes(){const e=[];for(const t in this.binders){const i=this.binders[t];if(i instanceof Bo||i instanceof Fo)for(let t=0;t<i.paintVertexAttributes.length;t++)e.push(i.paintVertexAttributes[t].name);else if(i instanceof No)for(let t=0;t<_o.members.length;t++)e.push(_o.members[t].name)}return e}getBinderUniforms(){const e=[];for(const t in this.binders){const i=this.binders[t];if(i instanceof zo||i instanceof Lo||i instanceof Fo)for(const t of i.uniformNames)e.push(t)}return e}getPaintVertexBuffers(){return this._buffers}getUniforms(e,t){const i=[];for(const r in this.binders){const n=this.binders[r];if(n instanceof zo||n instanceof Lo||n instanceof Fo)for(const o of n.uniformNames)if(t[o]){const a=n.getBinding(e,t[o],o);i.push({name:o,property:r,binding:a})}}return i}setUniforms(e,t,i,r){for(const{name:e,property:n,binding:o}of t)this.binders[n].setUniform(o,r,i.get(n),e)}updatePaintBuffers(e){this._buffers=[];for(const t in this.binders){const i=this.binders[t];if(e&&i instanceof No){const t=2===e.fromScale?i.zoomInPaintVertexBuffer:i.zoomOutPaintVertexBuffer;t&&this._buffers.push(t)}else(i instanceof Bo||i instanceof Fo)&&i.paintVertexBuffer&&this._buffers.push(i.paintVertexBuffer)}}upload(e){for(const t in this.binders){const i=this.binders[t];(i instanceof Bo||i instanceof Fo||i instanceof No)&&i.upload(e)}this.updatePaintBuffers()}destroy(){for(const e in this.binders){const t=this.binders[e];(t instanceof Bo||t instanceof Fo||t instanceof No)&&t.destroy()}}}class Go{constructor(e,t,i=(()=>!0)){this.programConfigurations={};for(const r of e)this.programConfigurations[r.id]=new Oo(r,t,i);this.needsUpload=!1,this._featureMap=new Eo,this._bufferOffset=0}populatePaintArrays(e,t,i,r,n,o){for(const i in this.programConfigurations)this.programConfigurations[i].populatePaintArrays(e,t,r,n,o);void 0!==t.id&&this._featureMap.add(t.id,i,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}updatePaintArrays(e,t,i,r){for(const n of i)this.needsUpload=this.programConfigurations[n.id].updatePaintArrays(e,this._featureMap,t,n,r)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(const t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}}destroy(){for(const e in this.programConfigurations)this.programConfigurations[e].destroy()}}function Uo(e,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[e]||[e.replace(`${t}-`,"").replace(/-/g,"_")]}function Vo(e,t,i){const r={color:{source:In,composite:Vn},number:{source:Fn,composite:In}},n=function(e){return{"line-pattern":{source:oo,composite:oo},"fill-pattern":{source:oo,composite:oo},"fill-extrusion-pattern":{source:oo,composite:oo}}[e]}(e);return n&&n[i]||r[t][i]}Dr("ConstantBinder",zo),Dr("CrossFadedConstantBinder",Lo),Dr("SourceExpressionBinder",Bo),Dr("CrossFadedCompositeBinder",No),Dr("CompositeExpressionBinder",Fo),Dr("ProgramConfiguration",Oo,{omit:["_buffers"]}),Dr("ProgramConfigurationSet",Go);var $o=8192;const qo=Math.pow(2,14)-1,jo=-qo-1;function Zo(e){const t=$o/e.extent,i=e.loadGeometry();for(let e=0;e<i.length;e++){const r=i[e];for(let e=0;e<r.length;e++){const i=r[e],n=Math.round(i.x*t),a=Math.round(i.y*t);i.x=o(n,jo,qo),i.y=o(a,jo,qo),(n<i.x||n>i.x+1||a<i.y||a>i.y+1)&&f("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return i}function Wo(e,t){return{type:e.type,id:e.id,properties:e.properties,geometry:t?Zo(e):[]}}function Xo(e,t,i,r,n){e.emplaceBack(2*t+(r+1)/2,2*i+(n+1)/2)}class Ho{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new eo,this.indexArray=new ho,this.segments=new go,this.programConfigurations=new Go(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id))}populate(e,t,i){const r=this.layers[0],n=[];let o=null,a=!1;"circle"===r.type&&(o=r.layout.get("circle-sort-key"),a=!o.isConstant());for(const{feature:t,id:r,index:s,sourceLayerIndex:l}of e){const e=this.layers[0]._featureFilter.needGeometry,c=Wo(t,e);if(!this.layers[0]._featureFilter.filter(new Jr(this.zoom),c,i))continue;const u=a?o.evaluate(c,{},i):void 0,h={id:r,properties:t.properties,type:t.type,sourceLayerIndex:l,index:s,geometry:e?c.geometry:Zo(t),patterns:{},sortKey:u};n.push(h)}a&&n.sort(((e,t)=>e.sortKey-t.sortKey));for(const r of n){const{geometry:n,index:o,sourceLayerIndex:a}=r,s=e[o].feature;this.addFeature(r,n,o,i),t.featureIndex.insert(s,n,o,a,this.index)}}update(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,mo),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,t,i,r){for(const i of t)for(const t of i){const i=t.x,r=t.y;if(i<0||i>=$o||r<0||r>=$o)continue;const n=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),o=n.vertexLength;Xo(this.layoutVertexArray,i,r,-1,-1),Xo(this.layoutVertexArray,i,r,1,-1),Xo(this.layoutVertexArray,i,r,1,1),Xo(this.layoutVertexArray,i,r,-1,1),this.indexArray.emplaceBack(o,o+1,o+2),this.indexArray.emplaceBack(o,o+3,o+2),n.vertexLength+=4,n.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,{},r)}}function Yo(e,t){for(let i=0;i<e.length;i++)if(oa(t,e[i]))return!0;for(let i=0;i<t.length;i++)if(oa(e,t[i]))return!0;return!!ea(e,t)}function Ko(e,t,i){return!!oa(e,t)||!!ia(t,e,i)}function Jo(e,t){if(1===e.length)return na(t,e[0]);for(let i=0;i<t.length;i++){const r=t[i];for(let t=0;t<r.length;t++)if(oa(e,r[t]))return!0}for(let i=0;i<e.length;i++)if(na(t,e[i]))return!0;for(let i=0;i<t.length;i++)if(ea(e,t[i]))return!0;return!1}function Qo(e,t,i){if(e.length>1){if(ea(e,t))return!0;for(let r=0;r<t.length;r++)if(ia(t[r],e,i))return!0}for(let r=0;r<e.length;r++)if(ia(e[r],t,i))return!0;return!1}function ea(e,t){if(0===e.length||0===t.length)return!1;for(let i=0;i<e.length-1;i++){const r=e[i],n=e[i+1];for(let e=0;e<t.length-1;e++)if(ta(r,n,t[e],t[e+1]))return!0}return!1}function ta(e,t,i,r){return m(e,i,r)!==m(t,i,r)&&m(e,t,i)!==m(e,t,r)}function ia(e,t,i){const r=i*i;if(1===t.length)return e.distSqr(t[0])<r;for(let i=1;i<t.length;i++)if(ra(e,t[i-1],t[i])<r)return!0;return!1}function ra(e,t,i){const r=t.distSqr(i);if(0===r)return e.distSqr(t);const n=((e.x-t.x)*(i.x-t.x)+(e.y-t.y)*(i.y-t.y))/r;return e.distSqr(n<0?t:n>1?i:i.sub(t)._mult(n)._add(t))}function na(e,t){let i,r,n,o=!1;for(let a=0;a<e.length;a++){i=e[a];for(let e=0,a=i.length-1;e<i.length;a=e++)r=i[e],n=i[a],r.y>t.y!=n.y>t.y&&t.x<(n.x-r.x)*(t.y-r.y)/(n.y-r.y)+r.x&&(o=!o)}return o}function oa(e,t){let i=!1;for(let r=0,n=e.length-1;r<e.length;n=r++){const o=e[r],a=e[n];o.y>t.y!=a.y>t.y&&t.x<(a.x-o.x)*(t.y-o.y)/(a.y-o.y)+o.x&&(i=!i)}return i}function aa(e,t,i){const r=i[0],n=i[2];if(e.x<r.x&&t.x<r.x||e.x>n.x&&t.x>n.x||e.y<r.y&&t.y<r.y||e.y>n.y&&t.y>n.y)return!1;const o=m(e,t,i[0]);return o!==m(e,t,i[1])||o!==m(e,t,i[2])||o!==m(e,t,i[3])}function sa(e,t,i){const r=t.paint.get(e).value;return"constant"===r.kind?r.value:i.programConfigurations.get(t.id).getMaxValue(e)}function la(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function ca(e,t,i,r,n){if(!t[0]&&!t[1])return e;const o=I.convert(t)._mult(n);"viewport"===i&&o._rotate(-r);const a=[];for(let t=0;t<e.length;t++)a.push(e[t].sub(o));return a}Dr("CircleBucket",Ho,{omit:["layers"]});const ua=new dn({"circle-sort-key":new cn(re.layout_circle["circle-sort-key"])});var ha={paint:new dn({"circle-radius":new cn(re.paint_circle["circle-radius"]),"circle-color":new cn(re.paint_circle["circle-color"]),"circle-blur":new cn(re.paint_circle["circle-blur"]),"circle-opacity":new cn(re.paint_circle["circle-opacity"]),"circle-translate":new ln(re.paint_circle["circle-translate"]),"circle-translate-anchor":new ln(re.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new ln(re.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new ln(re.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new cn(re.paint_circle["circle-stroke-width"]),"circle-stroke-color":new cn(re.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new cn(re.paint_circle["circle-stroke-opacity"])}),layout:ua},pa=1e-6,da="undefined"!=typeof Float32Array?Float32Array:Array;function fa(){var e=new da(9);return da!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function ma(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function ga(e,t,i){var r=t[0],n=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],h=t[8],p=t[9],d=t[10],f=t[11],m=t[12],g=t[13],y=t[14],_=t[15],x=i[0],b=i[1],v=i[2],w=i[3];return e[0]=x*r+b*s+v*h+w*m,e[1]=x*n+b*l+v*p+w*g,e[2]=x*o+b*c+v*d+w*y,e[3]=x*a+b*u+v*f+w*_,e[4]=(x=i[4])*r+(b=i[5])*s+(v=i[6])*h+(w=i[7])*m,e[5]=x*n+b*l+v*p+w*g,e[6]=x*o+b*c+v*d+w*y,e[7]=x*a+b*u+v*f+w*_,e[8]=(x=i[8])*r+(b=i[9])*s+(v=i[10])*h+(w=i[11])*m,e[9]=x*n+b*l+v*p+w*g,e[10]=x*o+b*c+v*d+w*y,e[11]=x*a+b*u+v*f+w*_,e[12]=(x=i[12])*r+(b=i[13])*s+(v=i[14])*h+(w=i[15])*m,e[13]=x*n+b*l+v*p+w*g,e[14]=x*o+b*c+v*d+w*y,e[15]=x*a+b*u+v*f+w*_,e}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var ya,_a=ga;function xa(){var e=new da(3);return da!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function ba(e,t,i){var r=new da(3);return r[0]=e,r[1]=t,r[2]=i,r}function va(e,t,i){var r=t[0],n=t[1],o=t[2],a=t[3];return e[0]=i[0]*r+i[4]*n+i[8]*o+i[12]*a,e[1]=i[1]*r+i[5]*n+i[9]*o+i[13]*a,e[2]=i[2]*r+i[6]*n+i[10]*o+i[14]*a,e[3]=i[3]*r+i[7]*n+i[11]*o+i[15]*a,e}function wa(){var e=new da(4);return da!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function Aa(e,t){const i=va([],[e.x,e.y,0,1],t);return new I(i[0]/i[3],i[1]/i[3])}xa(),ya=new da(4),da!=Float32Array&&(ya[0]=0,ya[1]=0,ya[2]=0,ya[3]=0),xa(),ba(1,0,0),ba(0,1,0),wa(),wa(),fa(),function(){var e;e=new da(2),da!=Float32Array&&(e[0]=0,e[1]=0)}();class Ea extends Ho{}Dr("HeatmapBucket",Ea,{omit:["layers"]});var Ia={paint:new dn({"heatmap-radius":new cn(re.paint_heatmap["heatmap-radius"]),"heatmap-weight":new cn(re.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new ln(re.paint_heatmap["heatmap-intensity"]),"heatmap-color":new pn(re.paint_heatmap["heatmap-color"]),"heatmap-opacity":new ln(re.paint_heatmap["heatmap-opacity"])})};function Da(e,{width:t,height:i},r,n){if(n){if(n instanceof Uint8ClampedArray)n=new Uint8Array(n.buffer);else if(n.length!==t*i*r)throw new RangeError(`mismatched image size. expected: ${n.length} but got: ${t*i*r}`)}else n=new Uint8Array(t*i*r);return e.width=t,e.height=i,e.data=n,e}function Ta(e,{width:t,height:i},r){if(t===e.width&&i===e.height)return;const n=Da({},{width:t,height:i},r);Ca(e,n,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,t),height:Math.min(e.height,i)},r),e.width=t,e.height=i,e.data=n.data}function Ca(e,t,i,r,n,o){if(0===n.width||0===n.height)return t;if(n.width>e.width||n.height>e.height||i.x>e.width-n.width||i.y>e.height-n.height)throw new RangeError("out of range source coordinates for image copy");if(n.width>t.width||n.height>t.height||r.x>t.width-n.width||r.y>t.height-n.height)throw new RangeError("out of range destination coordinates for image copy");const a=e.data,s=t.data;if(a===s)throw new Error("srcData equals dstData, so image is already copied");for(let l=0;l<n.height;l++){const c=((i.y+l)*e.width+i.x)*o,u=((r.y+l)*t.width+r.x)*o;for(let e=0;e<n.width*o;e++)s[u+e]=a[c+e]}return t}class Ma{constructor(e,t){Da(this,e,1,t)}resize(e){Ta(this,e,1)}clone(){return new Ma({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,t,i,r,n){Ca(e,t,i,r,n,1)}}class Sa{constructor(e,t){Da(this,e,4,t)}resize(e){Ta(this,e,4)}replace(e,t){t?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}clone(){return new Sa({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,t,i,r,n){Ca(e,t,i,r,n,4)}}function Pa(e){const t={},i=e.resolution||256,r=e.clips?e.clips.length:1,n=e.image||new Sa({width:i,height:r});if(Math.log(i)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${i}`);const o=(i,r,o)=>{t[e.evaluationKey]=o;const a=e.expression.evaluate(t);n.data[i+r+0]=Math.floor(255*a.r/a.a),n.data[i+r+1]=Math.floor(255*a.g/a.a),n.data[i+r+2]=Math.floor(255*a.b/a.a),n.data[i+r+3]=Math.floor(255*a.a)};if(e.clips)for(let t=0,n=0;t<r;++t,n+=4*i)for(let r=0,a=0;r<i;r++,a+=4){const s=r/(i-1),{start:l,end:c}=e.clips[t];o(n,a,l*(1-s)+c*s)}else for(let e=0,t=0;e<i;e++,t+=4)o(0,t,e/(i-1));return n}Dr("AlphaImage",Ma),Dr("RGBAImage",Sa);var Ra={paint:new dn({"hillshade-illumination-direction":new ln(re.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new ln(re.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new ln(re.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new ln(re.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new ln(re.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new ln(re.paint_hillshade["hillshade-accent-color"])})};const ka=xn([{name:"a_pos",components:2,type:"Int16"}],4),{members:za}=ka;var La={exports:{}};function Ba(e,t,i){i=i||2;var r,n,o,a,s,l,c,u=t&&t.length,h=u?t[0]*i:e.length,p=Fa(e,0,h,i,!0),d=[];if(!p||p.next===p.prev)return d;if(u&&(p=function(e,t,i,r){var n,o,a,s=[];for(n=0,o=t.length;n<o;n++)(a=Fa(e,t[n]*r,n<o-1?t[n+1]*r:e.length,r,!1))===a.next&&(a.steiner=!0),s.push(Xa(a));for(s.sort(qa),n=0;n<s.length;n++)i=ja(s[n],i);return i}(e,t,p,i)),e.length>80*i){r=o=e[0],n=a=e[1];for(var f=i;f<h;f+=i)(s=e[f])<r&&(r=s),(l=e[f+1])<n&&(n=l),s>o&&(o=s),l>a&&(a=l);c=0!==(c=Math.max(o-r,a-n))?32767/c:0}return Oa(p,d,i,r,n,c,0),d}function Fa(e,t,i,r,n){var o,a;if(n===ss(e,t,i,r)>0)for(o=t;o<i;o+=r)a=ns(o,e[o],e[o+1],a);else for(o=i-r;o>=t;o-=r)a=ns(o,e[o],e[o+1],a);return a&&Ja(a,a.next)&&(os(a),a=a.next),a}function Na(e,t){if(!e)return e;t||(t=e);var i,r=e;do{if(i=!1,r.steiner||!Ja(r,r.next)&&0!==Ka(r.prev,r,r.next))r=r.next;else{if(os(r),(r=t=r.prev)===r.next)break;i=!0}}while(i||r!==t);return t}function Oa(e,t,i,r,n,o,a){if(e){!a&&o&&function(e,t,i,r){var n=e;do{0===n.z&&(n.z=Wa(n.x,n.y,t,i,r)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next}while(n!==e);n.prevZ.nextZ=null,n.prevZ=null,function(e){var t,i,r,n,o,a,s,l,c=1;do{for(i=e,e=null,o=null,a=0;i;){for(a++,r=i,s=0,t=0;t<c&&(s++,r=r.nextZ);t++);for(l=c;s>0||l>0&&r;)0!==s&&(0===l||!r||i.z<=r.z)?(n=i,i=i.nextZ,s--):(n=r,r=r.nextZ,l--),o?o.nextZ=n:e=n,n.prevZ=o,o=n;i=r}o.nextZ=null,c*=2}while(a>1)}(n)}(e,r,n,o);for(var s,l,c=e;e.prev!==e.next;)if(s=e.prev,l=e.next,o?Ua(e,r,n,o):Ga(e))t.push(s.i/i|0),t.push(e.i/i|0),t.push(l.i/i|0),os(e),e=l.next,c=l.next;else if((e=l)===c){a?1===a?Oa(e=Va(Na(e),t,i),t,i,r,n,o,2):2===a&&$a(e,t,i,r,n,o):Oa(Na(e),t,i,r,n,o,1);break}}}function Ga(e){var t=e.prev,i=e,r=e.next;if(Ka(t,i,r)>=0)return!1;for(var n=t.x,o=i.x,a=r.x,s=t.y,l=i.y,c=r.y,u=n<o?n<a?n:a:o<a?o:a,h=s<l?s<c?s:c:l<c?l:c,p=n>o?n>a?n:a:o>a?o:a,d=s>l?s>c?s:c:l>c?l:c,f=r.next;f!==t;){if(f.x>=u&&f.x<=p&&f.y>=h&&f.y<=d&&Ha(n,s,o,l,a,c,f.x,f.y)&&Ka(f.prev,f,f.next)>=0)return!1;f=f.next}return!0}function Ua(e,t,i,r){var n=e.prev,o=e,a=e.next;if(Ka(n,o,a)>=0)return!1;for(var s=n.x,l=o.x,c=a.x,u=n.y,h=o.y,p=a.y,d=s<l?s<c?s:c:l<c?l:c,f=u<h?u<p?u:p:h<p?h:p,m=s>l?s>c?s:c:l>c?l:c,g=u>h?u>p?u:p:h>p?h:p,y=Wa(d,f,t,i,r),_=Wa(m,g,t,i,r),x=e.prevZ,b=e.nextZ;x&&x.z>=y&&b&&b.z<=_;){if(x.x>=d&&x.x<=m&&x.y>=f&&x.y<=g&&x!==n&&x!==a&&Ha(s,u,l,h,c,p,x.x,x.y)&&Ka(x.prev,x,x.next)>=0)return!1;if(x=x.prevZ,b.x>=d&&b.x<=m&&b.y>=f&&b.y<=g&&b!==n&&b!==a&&Ha(s,u,l,h,c,p,b.x,b.y)&&Ka(b.prev,b,b.next)>=0)return!1;b=b.nextZ}for(;x&&x.z>=y;){if(x.x>=d&&x.x<=m&&x.y>=f&&x.y<=g&&x!==n&&x!==a&&Ha(s,u,l,h,c,p,x.x,x.y)&&Ka(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;b&&b.z<=_;){if(b.x>=d&&b.x<=m&&b.y>=f&&b.y<=g&&b!==n&&b!==a&&Ha(s,u,l,h,c,p,b.x,b.y)&&Ka(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function Va(e,t,i){var r=e;do{var n=r.prev,o=r.next.next;!Ja(n,o)&&Qa(n,r,r.next,o)&&is(n,o)&&is(o,n)&&(t.push(n.i/i|0),t.push(r.i/i|0),t.push(o.i/i|0),os(r),os(r.next),r=e=o),r=r.next}while(r!==e);return Na(r)}function $a(e,t,i,r,n,o){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&Ya(a,s)){var l=rs(a,s);return a=Na(a,a.next),l=Na(l,l.next),Oa(a,t,i,r,n,o,0),void Oa(l,t,i,r,n,o,0)}s=s.next}a=a.next}while(a!==e)}function qa(e,t){return e.x-t.x}function ja(e,t){var i=function(e,t){var i,r=t,n=e.x,o=e.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=n&&s>a&&(a=s,i=r.x<r.next.x?r:r.next,s===n))return i}r=r.next}while(r!==t);if(!i)return null;var l,c=i,u=i.x,h=i.y,p=1/0;r=i;do{n>=r.x&&r.x>=u&&n!==r.x&&Ha(o<h?n:a,o,u,h,o<h?a:n,o,r.x,r.y)&&(l=Math.abs(o-r.y)/(n-r.x),is(r,e)&&(l<p||l===p&&(r.x>i.x||r.x===i.x&&Za(i,r)))&&(i=r,p=l)),r=r.next}while(r!==c);return i}(e,t);if(!i)return t;var r=rs(i,e);return Na(r,r.next),Na(i,i.next)}function Za(e,t){return Ka(e.prev,e,t.prev)<0&&Ka(t.next,e,e.next)<0}function Wa(e,t,i,r,n){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-i)*n|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*n|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Xa(e){var t=e,i=e;do{(t.x<i.x||t.x===i.x&&t.y<i.y)&&(i=t),t=t.next}while(t!==e);return i}function Ha(e,t,i,r,n,o,a,s){return(n-a)*(t-s)>=(e-a)*(o-s)&&(e-a)*(r-s)>=(i-a)*(t-s)&&(i-a)*(o-s)>=(n-a)*(r-s)}function Ya(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var i=e;do{if(i.i!==e.i&&i.next.i!==e.i&&i.i!==t.i&&i.next.i!==t.i&&Qa(i,i.next,e,t))return!0;i=i.next}while(i!==e);return!1}(e,t)&&(is(e,t)&&is(t,e)&&function(e,t){var i=e,r=!1,n=(e.x+t.x)/2,o=(e.y+t.y)/2;do{i.y>o!=i.next.y>o&&i.next.y!==i.y&&n<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next}while(i!==e);return r}(e,t)&&(Ka(e.prev,e,t.prev)||Ka(e,t.prev,t))||Ja(e,t)&&Ka(e.prev,e,e.next)>0&&Ka(t.prev,t,t.next)>0)}function Ka(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function Ja(e,t){return e.x===t.x&&e.y===t.y}function Qa(e,t,i,r){var n=ts(Ka(e,t,i)),o=ts(Ka(e,t,r)),a=ts(Ka(i,r,e)),s=ts(Ka(i,r,t));return n!==o&&a!==s||!(0!==n||!es(e,i,t))||!(0!==o||!es(e,r,t))||!(0!==a||!es(i,e,r))||!(0!==s||!es(i,t,r))}function es(e,t,i){return t.x<=Math.max(e.x,i.x)&&t.x>=Math.min(e.x,i.x)&&t.y<=Math.max(e.y,i.y)&&t.y>=Math.min(e.y,i.y)}function ts(e){return e>0?1:e<0?-1:0}function is(e,t){return Ka(e.prev,e,e.next)<0?Ka(e,t,e.next)>=0&&Ka(e,e.prev,t)>=0:Ka(e,t,e.prev)<0||Ka(e,e.next,t)<0}function rs(e,t){var i=new as(e.i,e.x,e.y),r=new as(t.i,t.x,t.y),n=e.next,o=t.prev;return e.next=t,t.prev=e,i.next=n,n.prev=i,r.next=i,i.prev=r,o.next=r,r.prev=o,r}function ns(e,t,i,r){var n=new as(e,t,i);return r?(n.next=r.next,n.prev=r,r.next.prev=n,r.next=n):(n.prev=n,n.next=n),n}function os(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function as(e,t,i){this.i=e,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function ss(e,t,i,r){for(var n=0,o=t,a=i-r;o<i;o+=r)n+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return n}function ls(e,t,i,r,n){cs(e,t,i||0,r||e.length-1,n||hs)}function cs(e,t,i,r,n){for(;r>i;){if(r-i>600){var o=r-i+1,a=t-i+1,s=Math.log(o),l=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*l*(o-l)/o)*(a-o/2<0?-1:1);cs(e,t,Math.max(i,Math.floor(t-a*l/o+c)),Math.min(r,Math.floor(t+(o-a)*l/o+c)),n)}var u=e[t],h=i,p=r;for(us(e,i,t),n(e[r],u)>0&&us(e,i,r);h<p;){for(us(e,h,p),h++,p--;n(e[h],u)<0;)h++;for(;n(e[p],u)>0;)p--}0===n(e[i],u)?us(e,i,p):us(e,++p,r),p<=t&&(i=p+1),t<=p&&(r=p-1)}}function us(e,t,i){var r=e[t];e[t]=e[i],e[i]=r}function hs(e,t){return e<t?-1:e>t?1:0}function ps(e,t){const i=e.length;if(i<=1)return[e];const r=[];let n,o;for(let t=0;t<i;t++){const i=g(e[t]);0!==i&&(e[t].area=Math.abs(i),void 0===o&&(o=i<0),o===i<0?(n&&r.push(n),n=[e[t]]):n.push(e[t]))}if(n&&r.push(n),t>1)for(let e=0;e<r.length;e++)r[e].length<=t||(ls(r[e],t,1,r[e].length-1,ds),r[e]=r[e].slice(0,t));return r}function ds(e,t){return t.area-e.area}function fs(e,t,i){const r=i.patternDependencies;let n=!1;for(const i of t){const t=i.paint.get(`${e}-pattern`);t.isConstant()||(n=!0);const o=t.constantOr(null);o&&(n=!0,r[o.to]=!0,r[o.from]=!0)}return n}function ms(e,t,i,r,n){const o=n.patternDependencies;for(const a of t){const t=a.paint.get(`${e}-pattern`).value;if("constant"!==t.kind){let e=t.evaluate({zoom:r-1},i,{},n.availableImages),s=t.evaluate({zoom:r},i,{},n.availableImages),l=t.evaluate({zoom:r+1},i,{},n.availableImages);e=e&&e.name?e.name:e,s=s&&s.name?s.name:s,l=l&&l.name?l.name:l,o[e]=!0,o[s]=!0,o[l]=!0,i.patterns[a.id]={min:e,mid:s,max:l}}}return i}La.exports=Ba,La.exports.default=Ba,Ba.deviation=function(e,t,i,r){var n=t&&t.length,o=Math.abs(ss(e,0,n?t[0]*i:e.length,i));if(n)for(var a=0,s=t.length;a<s;a++)o-=Math.abs(ss(e,t[a]*i,a<s-1?t[a+1]*i:e.length,i));var l=0;for(a=0;a<r.length;a+=3){var c=r[a]*i,u=r[a+1]*i,h=r[a+2]*i;l+=Math.abs((e[c]-e[h])*(e[u+1]-e[c+1])-(e[c]-e[u])*(e[h+1]-e[c+1]))}return 0===o&&0===l?0:Math.abs((l-o)/o)},Ba.flatten=function(e){for(var t=e[0][0].length,i={vertices:[],holes:[],dimensions:t},r=0,n=0;n<e.length;n++){for(var o=0;o<e[n].length;o++)for(var a=0;a<t;a++)i.vertices.push(e[n][o][a]);n>0&&i.holes.push(r+=e[n-1].length)}return i};class gs{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new to,this.indexArray=new ho,this.indexArray2=new po,this.programConfigurations=new Go(e.layers,e.zoom),this.segments=new go,this.segments2=new go,this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id))}populate(e,t,i){this.hasPattern=fs("fill",this.layers,t);const r=this.layers[0].layout.get("fill-sort-key"),n=!r.isConstant(),o=[];for(const{feature:a,id:s,index:l,sourceLayerIndex:c}of e){const e=this.layers[0]._featureFilter.needGeometry,u=Wo(a,e);if(!this.layers[0]._featureFilter.filter(new Jr(this.zoom),u,i))continue;const h=n?r.evaluate(u,{},i,t.availableImages):void 0,p={id:s,properties:a.properties,type:a.type,sourceLayerIndex:c,index:l,geometry:e?u.geometry:Zo(a),patterns:{},sortKey:h};o.push(p)}n&&o.sort(((e,t)=>e.sortKey-t.sortKey));for(const r of o){const{geometry:n,index:o,sourceLayerIndex:a}=r;if(this.hasPattern){const e=ms("fill",this.layers,r,this.zoom,t);this.patternFeatures.push(e)}else this.addFeature(r,n,o,i,{});t.featureIndex.insert(e[o].feature,n,o,a,this.index)}}update(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)}addFeatures(e,t,i){for(const e of this.patternFeatures)this.addFeature(e,e.geometry,e.index,t,i)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,za),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(e,t,i,r,n){for(const e of ps(t,500)){let t=0;for(const i of e)t+=i.length;const i=this.segments.prepareSegment(t,this.layoutVertexArray,this.indexArray),r=i.vertexLength,n=[],o=[];for(const t of e){if(0===t.length)continue;t!==e[0]&&o.push(n.length/2);const i=this.segments2.prepareSegment(t.length,this.layoutVertexArray,this.indexArray2),r=i.vertexLength;this.layoutVertexArray.emplaceBack(t[0].x,t[0].y),this.indexArray2.emplaceBack(r+t.length-1,r),n.push(t[0].x),n.push(t[0].y);for(let e=1;e<t.length;e++)this.layoutVertexArray.emplaceBack(t[e].x,t[e].y),this.indexArray2.emplaceBack(r+e-1,r+e),n.push(t[e].x),n.push(t[e].y);i.vertexLength+=t.length,i.primitiveLength+=t.length}const a=La.exports(n,o);for(let e=0;e<a.length;e+=3)this.indexArray.emplaceBack(r+a[e],r+a[e+1],r+a[e+2]);i.vertexLength+=t,i.primitiveLength+=a.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,n,r)}}Dr("FillBucket",gs,{omit:["layers","patternFeatures"]});const ys=new dn({"fill-sort-key":new cn(re.layout_fill["fill-sort-key"])});var _s={paint:new dn({"fill-antialias":new ln(re.paint_fill["fill-antialias"]),"fill-opacity":new cn(re.paint_fill["fill-opacity"]),"fill-color":new cn(re.paint_fill["fill-color"]),"fill-outline-color":new cn(re.paint_fill["fill-outline-color"]),"fill-translate":new ln(re.paint_fill["fill-translate"]),"fill-translate-anchor":new ln(re.paint_fill["fill-translate-anchor"]),"fill-pattern":new un(re.paint_fill["fill-pattern"])}),layout:ys};const xs=xn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),bs=xn([{name:"a_centroid",components:2,type:"Int16"}],4),{members:vs}=xs;var ws={},As=I,Es=Is;function Is(e,t,i,r,n){this.properties={},this.extent=i,this.type=0,this._pbf=e,this._geometry=-1,this._keys=r,this._values=n,e.readFields(Ds,this,t)}function Ds(e,t,i){1==e?t.id=i.readVarint():2==e?function(e,t){for(var i=e.readVarint()+e.pos;e.pos<i;){var r=t._keys[e.readVarint()],n=t._values[e.readVarint()];t.properties[r]=n}}(i,t):3==e?t.type=i.readVarint():4==e&&(t._geometry=i.pos)}function Ts(e){for(var t,i,r=0,n=0,o=e.length,a=o-1;n<o;a=n++)r+=((i=e[a]).x-(t=e[n]).x)*(t.y+i.y);return r}Is.types=["Unknown","Point","LineString","Polygon"],Is.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,i=e.readVarint()+e.pos,r=1,n=0,o=0,a=0,s=[];e.pos<i;){if(n<=0){var l=e.readVarint();r=7&l,n=l>>3}if(n--,1===r||2===r)o+=e.readSVarint(),a+=e.readSVarint(),1===r&&(t&&s.push(t),t=[]),t.push(new As(o,a));else{if(7!==r)throw new Error("unknown command "+r);t&&t.push(t[0].clone())}}return t&&s.push(t),s},Is.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,i=1,r=0,n=0,o=0,a=1/0,s=-1/0,l=1/0,c=-1/0;e.pos<t;){if(r<=0){var u=e.readVarint();i=7&u,r=u>>3}if(r--,1===i||2===i)(n+=e.readSVarint())<a&&(a=n),n>s&&(s=n),(o+=e.readSVarint())<l&&(l=o),o>c&&(c=o);else if(7!==i)throw new Error("unknown command "+i)}return[a,l,s,c]},Is.prototype.toGeoJSON=function(e,t,i){var r,n,o=this.extent*Math.pow(2,i),a=this.extent*e,s=this.extent*t,l=this.loadGeometry(),c=Is.types[this.type];function u(e){for(var t=0;t<e.length;t++){var i=e[t];e[t]=[360*(i.x+a)/o-180,360/Math.PI*Math.atan(Math.exp((180-360*(i.y+s)/o)*Math.PI/180))-90]}}switch(this.type){case 1:var h=[];for(r=0;r<l.length;r++)h[r]=l[r][0];u(l=h);break;case 2:for(r=0;r<l.length;r++)u(l[r]);break;case 3:for(l=function(e){var t=e.length;if(t<=1)return[e];for(var i,r,n=[],o=0;o<t;o++){var a=Ts(e[o]);0!==a&&(void 0===r&&(r=a<0),r===a<0?(i&&n.push(i),i=[e[o]]):i.push(e[o]))}return i&&n.push(i),n}(l),r=0;r<l.length;r++)for(n=0;n<l[r].length;n++)u(l[r][n])}1===l.length?l=l[0]:c="Multi"+c;var p={type:"Feature",geometry:{type:c,coordinates:l},properties:this.properties};return"id"in this&&(p.id=this.id),p};var Cs=Es,Ms=Ss;function Ss(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(Ps,this,t),this.length=this._features.length}function Ps(e,t,i){15===e?t.version=i.readVarint():1===e?t.name=i.readString():5===e?t.extent=i.readVarint():2===e?t._features.push(i.pos):3===e?t._keys.push(i.readString()):4===e&&t._values.push(function(e){for(var t=null,i=e.readVarint()+e.pos;e.pos<i;){var r=e.readVarint()>>3;t=1===r?e.readString():2===r?e.readFloat():3===r?e.readDouble():4===r?e.readVarint64():5===r?e.readVarint():6===r?e.readSVarint():7===r?e.readBoolean():null}return t}(i))}Ss.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new Cs(this._pbf,t,this.extent,this._keys,this._values)};var Rs=Ms;function ks(e,t,i){if(3===e){var r=new Rs(i,i.readVarint()+i.pos);r.length&&(t[r.name]=r)}}ws.VectorTile=function(e,t){this.layers=e.readFields(ks,{},t)},ws.VectorTileFeature=Es,ws.VectorTileLayer=Ms;const zs=ws.VectorTileFeature.types,Ls=Math.pow(2,13);function Bs(e,t,i,r,n,o,a,s){e.emplaceBack(t,i,2*Math.floor(r*Ls)+a,n*Ls*2,o*Ls*2,Math.round(s))}class Fs{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new io,this.centroidVertexArray=new Qn,this.indexArray=new ho,this.programConfigurations=new Go(e.layers,e.zoom),this.segments=new go,this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id))}populate(e,t,i){this.features=[],this.hasPattern=fs("fill-extrusion",this.layers,t);for(const{feature:r,id:n,index:o,sourceLayerIndex:a}of e){const e=this.layers[0]._featureFilter.needGeometry,s=Wo(r,e);if(!this.layers[0]._featureFilter.filter(new Jr(this.zoom),s,i))continue;const l={id:n,sourceLayerIndex:a,index:o,geometry:e?s.geometry:Zo(r),properties:r.properties,type:r.type,patterns:{}};this.hasPattern?this.features.push(ms("fill-extrusion",this.layers,l,this.zoom,t)):this.addFeature(l,l.geometry,o,i,{}),t.featureIndex.insert(r,l.geometry,o,a,this.index,!0)}}addFeatures(e,t,i){for(const e of this.features){const{geometry:r}=e;this.addFeature(e,r,e.index,t,i)}}update(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.centroidVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,vs),this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,bs.members,!0),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(e,t,i,r,n){const o={x:0,y:0,vertexCount:0};for(const i of ps(t,500)){let t=0;for(const e of i)t+=e.length;let r=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const e of i){if(0===e.length)continue;if(Os(e))continue;let t=0;for(let i=0;i<e.length;i++){const n=e[i];if(i>=1){const a=e[i-1];if(!Ns(n,a)){r.vertexLength+4>go.MAX_VERTEX_ARRAY_LENGTH&&(r=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const e=n.sub(a)._perp()._unit(),i=a.dist(n);t+i>32768&&(t=0),Bs(this.layoutVertexArray,n.x,n.y,e.x,e.y,0,0,t),Bs(this.layoutVertexArray,n.x,n.y,e.x,e.y,0,1,t),o.x+=2*n.x,o.y+=2*n.y,o.vertexCount+=2,t+=i,Bs(this.layoutVertexArray,a.x,a.y,e.x,e.y,0,0,t),Bs(this.layoutVertexArray,a.x,a.y,e.x,e.y,0,1,t),o.x+=2*a.x,o.y+=2*a.y,o.vertexCount+=2;const s=r.vertexLength;this.indexArray.emplaceBack(s,s+2,s+1),this.indexArray.emplaceBack(s+1,s+2,s+3),r.vertexLength+=4,r.primitiveLength+=2}}}}if(r.vertexLength+t>go.MAX_VERTEX_ARRAY_LENGTH&&(r=this.segments.prepareSegment(t,this.layoutVertexArray,this.indexArray)),"Polygon"!==zs[e.type])continue;const n=[],a=[],s=r.vertexLength;for(const e of i)if(0!==e.length){e!==i[0]&&a.push(n.length/2);for(let t=0;t<e.length;t++){const i=e[t];Bs(this.layoutVertexArray,i.x,i.y,0,0,1,1,0),o.x+=i.x,o.y+=i.y,o.vertexCount+=1,n.push(i.x),n.push(i.y)}}const l=La.exports(n,a);for(let e=0;e<l.length;e+=3)this.indexArray.emplaceBack(s+l[e],s+l[e+2],s+l[e+1]);r.primitiveLength+=l.length/3,r.vertexLength+=t}for(let e=0;e<o.vertexCount;e++)this.centroidVertexArray.emplaceBack(Math.floor(o.x/o.vertexCount),Math.floor(o.y/o.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,n,r)}}function Ns(e,t){return e.x===t.x&&(e.x<0||e.x>$o)||e.y===t.y&&(e.y<0||e.y>$o)}function Os(e){return e.every((e=>e.x<0))||e.every((e=>e.x>$o))||e.every((e=>e.y<0))||e.every((e=>e.y>$o))}Dr("FillExtrusionBucket",Fs,{omit:["layers","features"]});var Gs={paint:new dn({"fill-extrusion-opacity":new ln(re["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new cn(re["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new ln(re["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new ln(re["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new un(re["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new cn(re["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new cn(re["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new ln(re["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function Us(e,t){return e.x*t.x+e.y*t.y}function Vs(e,t){if(1===e.length){let i=0;const r=t[i++];let n;for(;!n||r.equals(n);)if(n=t[i++],!n)return 1/0;for(;i<t.length;i++){const o=t[i],a=e[0],s=n.sub(r),l=o.sub(r),c=a.sub(r),u=Us(s,s),h=Us(s,l),p=Us(l,l),d=Us(c,s),f=Us(c,l),m=u*p-h*h,g=(p*d-h*f)/m,y=(u*f-h*d)/m,_=r.z*(1-g-y)+n.z*g+o.z*y;if(isFinite(_))return _}return 1/0}{let e=1/0;for(const i of t)e=Math.min(e,i.z);return e}}const $s=xn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:qs}=$s,js=xn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Zs}=js,Ws=ws.VectorTileFeature.types,Xs=Math.cos(Math.PI/180*37.5),Hs=Math.pow(2,14)/.5;class Ys{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((e=>{this.gradients[e.id]={}})),this.layoutVertexArray=new ro,this.layoutVertexArray2=new no,this.indexArray=new ho,this.programConfigurations=new Go(e.layers,e.zoom),this.segments=new go,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id))}populate(e,t,i){this.hasPattern=fs("line",this.layers,t);const r=this.layers[0].layout.get("line-sort-key"),n=!r.isConstant(),o=[];for(const{feature:t,id:a,index:s,sourceLayerIndex:l}of e){const e=this.layers[0]._featureFilter.needGeometry,c=Wo(t,e);if(!this.layers[0]._featureFilter.filter(new Jr(this.zoom),c,i))continue;const u=n?r.evaluate(c,{},i):void 0,h={id:a,properties:t.properties,type:t.type,sourceLayerIndex:l,index:s,geometry:e?c.geometry:Zo(t),patterns:{},sortKey:u};o.push(h)}n&&o.sort(((e,t)=>e.sortKey-t.sortKey));for(const r of o){const{geometry:n,index:o,sourceLayerIndex:a}=r;if(this.hasPattern){const e=ms("line",this.layers,r,this.zoom,t);this.patternFeatures.push(e)}else this.addFeature(r,n,o,i,{});t.featureIndex.insert(e[o].feature,n,o,a,this.index)}}update(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)}addFeatures(e,t,i){for(const e of this.patternFeatures)this.addFeature(e,e.geometry,e.index,t,i)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,Zs)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,qs),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&Object.prototype.hasOwnProperty.call(e.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(e.properties,"mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}addFeature(e,t,i,r,n){const o=this.layers[0].layout,a=o.get("line-join").evaluate(e,{}),s=o.get("line-cap"),l=o.get("line-miter-limit"),c=o.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(const i of t)this.addLine(i,e,a,s,l,c);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,n,r)}addLine(e,t,i,r,n,o){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let t=0;t<e.length-1;t++)this.totalDistance+=e[t].dist(e[t+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const a="Polygon"===Ws[t.type];let s=e.length;for(;s>=2&&e[s-1].equals(e[s-2]);)s--;let l=0;for(;l<s-1&&e[l].equals(e[l+1]);)l++;if(s<(a?3:2))return;"bevel"===i&&(n=1.05);const c=this.overscaling<=16?122880/(512*this.overscaling):0,u=this.segments.prepareSegment(10*s,this.layoutVertexArray,this.indexArray);let h,p,d,f,m;this.e1=this.e2=-1,a&&(h=e[s-2],m=e[l].sub(h)._unit()._perp());for(let t=l;t<s;t++){if(d=t===s-1?a?e[l+1]:void 0:e[t+1],d&&e[t].equals(d))continue;m&&(f=m),h&&(p=h),h=e[t],m=d?d.sub(h)._unit()._perp():f,f=f||m;let g=f.add(m);0===g.x&&0===g.y||g._unit();const y=f.x*m.x+f.y*m.y,_=g.x*m.x+g.y*m.y,x=0!==_?1/_:1/0,b=2*Math.sqrt(2-2*_),v=_<Xs&&p&&d,w=f.x*m.y-f.y*m.x>0;if(v&&t>l){const e=h.dist(p);if(e>2*c){const t=h.sub(h.sub(p)._mult(c/e)._round());this.updateDistance(p,t),this.addCurrentVertex(t,f,0,0,u),p=t}}const A=p&&d;let E=A?i:a?"butt":r;if(A&&"round"===E&&(x<o?E="miter":x<=2&&(E="fakeround")),"miter"===E&&x>n&&(E="bevel"),"bevel"===E&&(x>2&&(E="flipbevel"),x<n&&(E="miter")),p&&this.updateDistance(p,h),"miter"===E)g._mult(x),this.addCurrentVertex(h,g,0,0,u);else if("flipbevel"===E){if(x>100)g=m.mult(-1);else{const e=x*f.add(m).mag()/f.sub(m).mag();g._perp()._mult(e*(w?-1:1))}this.addCurrentVertex(h,g,0,0,u),this.addCurrentVertex(h,g.mult(-1),0,0,u)}else if("bevel"===E||"fakeround"===E){const e=-Math.sqrt(x*x-1),t=w?e:0,i=w?0:e;if(p&&this.addCurrentVertex(h,f,t,i,u),"fakeround"===E){const e=Math.round(180*b/Math.PI/20);for(let t=1;t<e;t++){let i=t/e;if(.5!==i){const e=i-.5;i+=i*e*(i-1)*((1.0904+y*(y*(3.55645-1.43519*y)-3.2452))*e*e+(.848013+y*(.215638*y-1.06021)))}const r=m.sub(f)._mult(i)._add(f)._unit()._mult(w?-1:1);this.addHalfVertex(h,r.x,r.y,!1,w,0,u)}}d&&this.addCurrentVertex(h,m,-t,-i,u)}else if("butt"===E)this.addCurrentVertex(h,g,0,0,u);else if("square"===E){const e=p?1:-1;this.addCurrentVertex(h,g,e,e,u)}else"round"===E&&(p&&(this.addCurrentVertex(h,f,0,0,u),this.addCurrentVertex(h,f,1,1,u,!0)),d&&(this.addCurrentVertex(h,m,-1,-1,u,!0),this.addCurrentVertex(h,m,0,0,u)));if(v&&t<s-1){const e=h.dist(d);if(e>2*c){const t=h.add(d.sub(h)._mult(c/e)._round());this.updateDistance(h,t),this.addCurrentVertex(t,m,0,0,u),h=t}}}}addCurrentVertex(e,t,i,r,n,o=!1){const a=t.y*r-t.x,s=-t.y-t.x*r;this.addHalfVertex(e,t.x+t.y*i,t.y-t.x*i,o,!1,i,n),this.addHalfVertex(e,a,s,o,!0,-r,n),this.distance>Hs/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(e,t,i,r,n,o))}addHalfVertex({x:e,y:t},i,r,n,o,a,s){const l=.5*(this.lineClips?this.scaledDistance*(Hs-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((e<<1)+(n?1:0),(t<<1)+(o?1:0),Math.round(63*i)+128,Math.round(63*r)+128,1+(0===a?0:a<0?-1:1)|(63&l)<<2,l>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const c=s.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,c),s.primitiveLength++),o?this.e2=c:this.e1=c}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(e,t){this.distance+=e.dist(t),this.updateScaledDistance()}}Dr("LineBucket",Ys,{omit:["layers","patternFeatures"]});const Ks=new dn({"line-cap":new ln(re.layout_line["line-cap"]),"line-join":new cn(re.layout_line["line-join"]),"line-miter-limit":new ln(re.layout_line["line-miter-limit"]),"line-round-limit":new ln(re.layout_line["line-round-limit"]),"line-sort-key":new cn(re.layout_line["line-sort-key"])});var Js={paint:new dn({"line-opacity":new cn(re.paint_line["line-opacity"]),"line-color":new cn(re.paint_line["line-color"]),"line-translate":new ln(re.paint_line["line-translate"]),"line-translate-anchor":new ln(re.paint_line["line-translate-anchor"]),"line-width":new cn(re.paint_line["line-width"]),"line-gap-width":new cn(re.paint_line["line-gap-width"]),"line-offset":new cn(re.paint_line["line-offset"]),"line-blur":new cn(re.paint_line["line-blur"]),"line-dasharray":new hn(re.paint_line["line-dasharray"]),"line-pattern":new un(re.paint_line["line-pattern"]),"line-gradient":new pn(re.paint_line["line-gradient"])}),layout:Ks};const Qs=new class extends cn{possiblyEvaluate(e,t){return t=new Jr(Math.floor(t.zoom),{now:t.now,fadeDuration:t.fadeDuration,zoomHistory:t.zoomHistory,transition:t.transition}),super.possiblyEvaluate(e,t)}evaluate(e,t,i,r){return t=s({},t,{zoom:Math.floor(t.zoom)}),super.evaluate(e,t,i,r)}}(Js.paint.properties["line-width"].specification);function el(e,t){return t>0?t+2*e:e}Qs.useIntegerZoom=!0;const tl=xn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),il=xn([{name:"a_projected_pos",components:3,type:"Float32"}],4);xn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const rl=xn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);xn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const nl=xn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),ol=xn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function al(e,t,i){return e.sections.forEach((e=>{e.text=function(e,t,i){const r=t.layout.get("text-transform").evaluate(i,{});return"uppercase"===r?e=e.toLocaleUpperCase():"lowercase"===r&&(e=e.toLocaleLowerCase()),Kr.applyArabicShaping&&(e=Kr.applyArabicShaping(e)),e}(e.text,t,i)})),e}xn([{name:"triangle",components:3,type:"Uint16"}]),xn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),xn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),xn([{type:"Float32",name:"offsetX"}]),xn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const sl={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var ll=24,cl=pl,ul=function(e,t,i,r,n){var o,a,s=8*n-r-1,l=(1<<s)-1,c=l>>1,u=-7,h=i?n-1:0,p=i?-1:1,d=e[t+h];for(h+=p,o=d&(1<<-u)-1,d>>=-u,u+=s;u>0;o=256*o+e[t+h],h+=p,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=r;u>0;a=256*a+e[t+h],h+=p,u-=8);if(0===o)o=1-c;else{if(o===l)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,r),o-=c}return(d?-1:1)*a*Math.pow(2,o-r)},hl=function(e,t,i,r,n,o){var a,s,l,c=8*o-n-1,u=(1<<c)-1,h=u>>1,p=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,f=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),(t+=a+h>=1?p/l:p*Math.pow(2,1-h))*l>=2&&(a++,l/=2),a+h>=u?(s=0,a=u):a+h>=1?(s=(t*l-1)*Math.pow(2,n),a+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,n),a=0));n>=8;e[i+d]=255&s,d+=f,s/=256,n-=8);for(a=a<<n|s,c+=n;c>0;e[i+d]=255&a,d+=f,a/=256,c-=8);e[i+d-f]|=128*m};function pl(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}pl.Varint=0,pl.Fixed64=1,pl.Bytes=2,pl.Fixed32=5;var dl,fl=4294967296,ml=1/fl,gl="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function yl(e){return e.type===pl.Bytes?e.readVarint()+e.pos:e.pos+1}function _l(e,t,i){return i?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function xl(e,t,i){var r=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));i.realloc(r);for(var n=i.pos-1;n>=e;n--)i.buf[n+r]=i.buf[n]}function bl(e,t){for(var i=0;i<e.length;i++)t.writeVarint(e[i])}function vl(e,t){for(var i=0;i<e.length;i++)t.writeSVarint(e[i])}function wl(e,t){for(var i=0;i<e.length;i++)t.writeFloat(e[i])}function Al(e,t){for(var i=0;i<e.length;i++)t.writeDouble(e[i])}function El(e,t){for(var i=0;i<e.length;i++)t.writeBoolean(e[i])}function Il(e,t){for(var i=0;i<e.length;i++)t.writeFixed32(e[i])}function Dl(e,t){for(var i=0;i<e.length;i++)t.writeSFixed32(e[i])}function Tl(e,t){for(var i=0;i<e.length;i++)t.writeFixed64(e[i])}function Cl(e,t){for(var i=0;i<e.length;i++)t.writeSFixed64(e[i])}function Ml(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function Sl(e,t,i){e[i]=t,e[i+1]=t>>>8,e[i+2]=t>>>16,e[i+3]=t>>>24}function Pl(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function Rl(e,t,i){1===e&&i.readMessage(kl,t)}function kl(e,t,i){if(3===e){const{id:e,bitmap:r,width:n,height:o,left:a,top:s,advance:l}=i.readMessage(zl,{});t.push({id:e,bitmap:new Ma({width:n+6,height:o+6},r),metrics:{width:n,height:o,left:a,top:s,advance:l}})}}function zl(e,t,i){1===e?t.id=i.readVarint():2===e?t.bitmap=i.readBytes():3===e?t.width=i.readVarint():4===e?t.height=i.readVarint():5===e?t.left=i.readSVarint():6===e?t.top=i.readSVarint():7===e&&(t.advance=i.readVarint())}function Ll(e){let t=0,i=0;for(const r of e)t+=r.w*r.h,i=Math.max(i,r.w);e.sort(((e,t)=>t.h-e.h));const r=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),i),h:1/0}];let n=0,o=0;for(const t of e)for(let e=r.length-1;e>=0;e--){const i=r[e];if(!(t.w>i.w||t.h>i.h)){if(t.x=i.x,t.y=i.y,o=Math.max(o,t.y+t.h),n=Math.max(n,t.x+t.w),t.w===i.w&&t.h===i.h){const t=r.pop();e<r.length&&(r[e]=t)}else t.h===i.h?(i.x+=t.w,i.w-=t.w):t.w===i.w?(i.y+=t.h,i.h-=t.h):(r.push({x:i.x+t.w,y:i.y,w:i.w-t.w,h:t.h}),i.y+=t.h,i.h-=t.h);break}}return{w:n,h:o,fill:t/(n*o)||0}}pl.prototype={destroy:function(){this.buf=null},readFields:function(e,t,i){for(i=i||this.length;this.pos<i;){var r=this.readVarint(),n=r>>3,o=this.pos;this.type=7&r,e(n,t,this),this.pos===o&&this.skip(r)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=Ml(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=Pl(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=Ml(this.buf,this.pos)+Ml(this.buf,this.pos+4)*fl;return this.pos+=8,e},readSFixed64:function(){var e=Ml(this.buf,this.pos)+Pl(this.buf,this.pos+4)*fl;return this.pos+=8,e},readFloat:function(){var e=ul(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=ul(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,i,r=this.buf;return t=127&(i=r[this.pos++]),i<128?t:(t|=(127&(i=r[this.pos++]))<<7,i<128?t:(t|=(127&(i=r[this.pos++]))<<14,i<128?t:(t|=(127&(i=r[this.pos++]))<<21,i<128?t:function(e,t,i){var r,n,o=i.buf;if(r=(112&(n=o[i.pos++]))>>4,n<128)return _l(e,r,t);if(r|=(127&(n=o[i.pos++]))<<3,n<128)return _l(e,r,t);if(r|=(127&(n=o[i.pos++]))<<10,n<128)return _l(e,r,t);if(r|=(127&(n=o[i.pos++]))<<17,n<128)return _l(e,r,t);if(r|=(127&(n=o[i.pos++]))<<24,n<128)return _l(e,r,t);if(r|=(1&(n=o[i.pos++]))<<31,n<128)return _l(e,r,t);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(i=r[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&gl?function(e,t,i){return gl.decode(e.subarray(t,i))}(this.buf,t,e):function(e,t,i){for(var r="",n=t;n<i;){var o,a,s,l=e[n],c=null,u=l>239?4:l>223?3:l>191?2:1;if(n+u>i)break;1===u?l<128&&(c=l):2===u?128==(192&(o=e[n+1]))&&(c=(31&l)<<6|63&o)<=127&&(c=null):3===u?(a=e[n+2],128==(192&(o=e[n+1]))&&128==(192&a)&&((c=(15&l)<<12|(63&o)<<6|63&a)<=2047||c>=55296&&c<=57343)&&(c=null)):4===u&&(a=e[n+2],s=e[n+3],128==(192&(o=e[n+1]))&&128==(192&a)&&128==(192&s)&&((c=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||c>=1114112)&&(c=null)),null===c?(c=65533,u=1):c>65535&&(c-=65536,r+=String.fromCharCode(c>>>10&1023|55296),c=56320|1023&c),r+=String.fromCharCode(c),n+=u}return r}(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==pl.Bytes)return e.push(this.readVarint(t));var i=yl(this);for(e=e||[];this.pos<i;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==pl.Bytes)return e.push(this.readSVarint());var t=yl(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==pl.Bytes)return e.push(this.readBoolean());var t=yl(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==pl.Bytes)return e.push(this.readFloat());var t=yl(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==pl.Bytes)return e.push(this.readDouble());var t=yl(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==pl.Bytes)return e.push(this.readFixed32());var t=yl(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==pl.Bytes)return e.push(this.readSFixed32());var t=yl(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==pl.Bytes)return e.push(this.readFixed64());var t=yl(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==pl.Bytes)return e.push(this.readSFixed64());var t=yl(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===pl.Varint)for(;this.buf[this.pos++]>127;);else if(t===pl.Bytes)this.pos=this.readVarint()+this.pos;else if(t===pl.Fixed32)this.pos+=4;else{if(t!==pl.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var i=new Uint8Array(t);i.set(this.buf),this.buf=i,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),Sl(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),Sl(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),Sl(this.buf,-1&e,this.pos),Sl(this.buf,Math.floor(e*ml),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),Sl(this.buf,-1&e,this.pos),Sl(this.buf,Math.floor(e*ml),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(e,t){var i,r;if(e>=0?(i=e%4294967296|0,r=e/4294967296|0):(r=~(-e/4294967296),4294967295^(i=~(-e%4294967296))?i=i+1|0:(i=0,r=r+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),function(e,t,i){i.buf[i.pos++]=127&e|128,e>>>=7,i.buf[i.pos++]=127&e|128,e>>>=7,i.buf[i.pos++]=127&e|128,e>>>=7,i.buf[i.pos++]=127&e|128,i.buf[i.pos]=127&(e>>>=7)}(i,0,t),function(e,t){var i=(7&e)<<4;t.buf[t.pos++]|=i|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e)))))}(r,t)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(e,t,i){for(var r,n,o=0;o<t.length;o++){if((r=t.charCodeAt(o))>55295&&r<57344){if(!n){r>56319||o+1===t.length?(e[i++]=239,e[i++]=191,e[i++]=189):n=r;continue}if(r<56320){e[i++]=239,e[i++]=191,e[i++]=189,n=r;continue}r=n-55296<<10|r-56320|65536,n=null}else n&&(e[i++]=239,e[i++]=191,e[i++]=189,n=null);r<128?e[i++]=r:(r<2048?e[i++]=r>>6|192:(r<65536?e[i++]=r>>12|224:(e[i++]=r>>18|240,e[i++]=r>>12&63|128),e[i++]=r>>6&63|128),e[i++]=63&r|128)}return i}(this.buf,e,this.pos);var i=this.pos-t;i>=128&&xl(t,i,this),this.pos=t-1,this.writeVarint(i),this.pos+=i},writeFloat:function(e){this.realloc(4),hl(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),hl(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var i=0;i<t;i++)this.buf[this.pos++]=e[i]},writeRawMessage:function(e,t){this.pos++;var i=this.pos;e(t,this);var r=this.pos-i;r>=128&&xl(i,r,this),this.pos=i-1,this.writeVarint(r),this.pos+=r},writeMessage:function(e,t,i){this.writeTag(e,pl.Bytes),this.writeRawMessage(t,i)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,bl,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,vl,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,El,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,wl,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,Al,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,Il,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,Dl,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,Tl,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,Cl,t)},writeBytesField:function(e,t){this.writeTag(e,pl.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,pl.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,pl.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,pl.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,pl.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,pl.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,pl.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,pl.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,pl.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,pl.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};class Bl{constructor(e,{pixelRatio:t,version:i,stretchX:r,stretchY:n,content:o}){this.paddedRect=e,this.pixelRatio=t,this.stretchX=r,this.stretchY=n,this.content=o,this.version=i}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Fl{constructor(e,t){const i={},r={};this.haveRenderCallbacks=[];const n=[];this.addImages(e,i,n),this.addImages(t,r,n);const{w:o,h:a}=Ll(n),s=new Sa({width:o||1,height:a||1});for(const t in e){const r=e[t],n=i[t].paddedRect;Sa.copy(r.data,s,{x:0,y:0},{x:n.x+1,y:n.y+1},r.data)}for(const e in t){const i=t[e],n=r[e].paddedRect,o=n.x+1,a=n.y+1,l=i.data.width,c=i.data.height;Sa.copy(i.data,s,{x:0,y:0},{x:o,y:a},i.data),Sa.copy(i.data,s,{x:0,y:c-1},{x:o,y:a-1},{width:l,height:1}),Sa.copy(i.data,s,{x:0,y:0},{x:o,y:a+c},{width:l,height:1}),Sa.copy(i.data,s,{x:l-1,y:0},{x:o-1,y:a},{width:1,height:c}),Sa.copy(i.data,s,{x:0,y:0},{x:o+l,y:a},{width:1,height:c})}this.image=s,this.iconPositions=i,this.patternPositions=r}addImages(e,t,i){for(const r in e){const n=e[r],o={x:0,y:0,w:n.data.width+2,h:n.data.height+2};i.push(o),t[r]=new Bl(o,n),n.hasRenderCallback&&this.haveRenderCallbacks.push(r)}}patchUpdatedImages(e,t){e.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const i in e.updatedImages)this.patchUpdatedImage(this.iconPositions[i],e.getImage(i),t),this.patchUpdatedImage(this.patternPositions[i],e.getImage(i),t)}patchUpdatedImage(e,t,i){if(!e||!t)return;if(e.version===t.version)return;e.version=t.version;const[r,n]=e.tl;i.update(t.data,void 0,{x:r,y:n})}}Dr("ImagePosition",Bl),Dr("ImageAtlas",Fl),e.WritingMode=void 0,(dl=e.WritingMode||(e.WritingMode={}))[dl.none=0]="none",dl[dl.horizontal=1]="horizontal",dl[dl.vertical=2]="vertical",dl[dl.horizontalOnly=3]="horizontalOnly";const Nl=-17;class Ol{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(e,t){const i=new Ol;return i.scale=e||1,i.fontStack=t,i}static forImage(e){const t=new Ol;return t.imageName=e,t}}class Gl{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(e,t){const i=new Gl;for(let r=0;r<e.sections.length;r++){const n=e.sections[r];n.image?i.addImageSection(n):i.addTextSection(n,t)}return i}length(){return this.text.length}getSection(e){return this.sections[this.sectionIndex[e]]}getSectionIndex(e){return this.sectionIndex[e]}getCharCode(e){return this.text.charCodeAt(e)}verticalizePunctuation(){this.text=function(e){let t="";for(let i=0;i<e.length;i++){const r=e.charCodeAt(i+1)||null,n=e.charCodeAt(i-1)||null;t+=r&&Br(r)&&!sl[e[i+1]]||n&&Br(n)&&!sl[e[i-1]]||!sl[e[i]]?e[i]:sl[e[i]]}return t}(this.text)}trim(){let e=0;for(let t=0;t<this.text.length&&Vl[this.text.charCodeAt(t)];t++)e++;let t=this.text.length;for(let i=this.text.length-1;i>=0&&i>=e&&Vl[this.text.charCodeAt(i)];i--)t--;this.text=this.text.substring(e,t),this.sectionIndex=this.sectionIndex.slice(e,t)}substring(e,t){const i=new Gl;return i.text=this.text.substring(e,t),i.sectionIndex=this.sectionIndex.slice(e,t),i.sections=this.sections,i}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((e,t)=>Math.max(e,this.sections[t].scale)),0)}addTextSection(e,t){this.text+=e.text,this.sections.push(Ol.forText(e.scale,e.fontStack||t));const i=this.sections.length-1;for(let t=0;t<e.text.length;++t)this.sectionIndex.push(i)}addImageSection(e){const t=e.image?e.image.name:"";if(0===t.length)return void f("Can't add FormattedSection with an empty image.");const i=this.getNextImageSectionCharCode();i?(this.text+=String.fromCharCode(i),this.sections.push(Ol.forImage(t)),this.sectionIndex.push(this.sections.length-1)):f("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Ul(t,i,r,n,o,a,s,l,c,u,h,p,d,f,m,g){const y=Gl.fromFeature(t,o);let _;p===e.WritingMode.vertical&&y.verticalizePunctuation();const{processBidirectionalText:x,processStyledBidirectionalText:b}=Kr;if(x&&1===y.sections.length){_=[];const e=x(y.toString(),Hl(y,u,a,i,n,f,m));for(const t of e){const e=new Gl;e.text=t,e.sections=y.sections;for(let i=0;i<t.length;i++)e.sectionIndex.push(0);_.push(e)}}else if(b){_=[];const e=b(y.text,y.sectionIndex,Hl(y,u,a,i,n,f,m));for(const t of e){const e=new Gl;e.text=t[0],e.sectionIndex=t[1],e.sections=y.sections,_.push(e)}}else _=function(e,t){const i=[],r=e.text;let n=0;for(const r of t)i.push(e.substring(n,r)),n=r;return n<r.length&&i.push(e.substring(n,r.length)),i}(y,Hl(y,u,a,i,n,f,m));const v=[],w={positionedLines:v,text:y.toString(),top:h[1],bottom:h[1],left:h[0],right:h[0],writingMode:p,iconsInText:!1,verticalizable:!1};return function(t,i,r,n,o,a,s,l,c,u,h,p){let d=0,f=Nl,m=0,g=0;const y="right"===l?1:"left"===l?0:.5;let _=0;for(const s of o){s.trim();const o=s.getMaxScale(),l=(o-1)*ll,b={positionedGlyphs:[],lineOffset:0};t.positionedLines[_]=b;const v=b.positionedGlyphs;let w=0;if(!s.length()){f+=a,++_;continue}for(let a=0;a<s.length();a++){const m=s.getSection(a),g=s.getSectionIndex(a),y=s.getCharCode(a);let _=0,b=null,A=null,E=null,I=ll;const D=!(c===e.WritingMode.horizontal||!h&&!Lr(y)||h&&(Vl[y]||(x=y,Pr.Arabic(x)||Pr["Arabic Supplement"](x)||Pr["Arabic Extended-A"](x)||Pr["Arabic Presentation Forms-A"](x)||Pr["Arabic Presentation Forms-B"](x))));if(m.imageName){const e=n[m.imageName];if(!e)continue;E=m.imageName,t.iconsInText=t.iconsInText||!0,A=e.paddedRect;const i=e.displaySize;m.scale=m.scale*ll/p,b={width:i[0],height:i[1],left:1,top:-3,advance:D?i[1]:i[0]},_=l+(ll-i[1]*m.scale),I=b.advance;const r=D?i[0]*m.scale-ll*o:i[1]*m.scale-ll*o;r>0&&r>w&&(w=r)}else{const e=r[m.fontStack],t=e&&e[y];if(t&&t.rect)A=t.rect,b=t.metrics;else{const e=i[m.fontStack],t=e&&e[y];if(!t)continue;b=t.metrics}_=(o-m.scale)*ll}D?(t.verticalizable=!0,v.push({glyph:y,imageName:E,x:d,y:f+_,vertical:D,scale:m.scale,fontStack:m.fontStack,sectionIndex:g,metrics:b,rect:A}),d+=I*m.scale+u):(v.push({glyph:y,imageName:E,x:d,y:f+_,vertical:D,scale:m.scale,fontStack:m.fontStack,sectionIndex:g,metrics:b,rect:A}),d+=b.advance*m.scale+u)}0!==v.length&&(m=Math.max(d-u,m),Kl(v,0,v.length-1,y,w)),d=0;const A=a*o+w;b.lineOffset=Math.max(w,l),f+=A,g=Math.max(A,g),++_}var x;const b=f-Nl,{horizontalAlign:v,verticalAlign:w}=Yl(s);(function(e,t,i,r,n,o,a,s,l){const c=(t-i)*n;let u=0;u=o!==a?-s*r-Nl:(-r*l+.5)*a;for(const t of e)for(const e of t.positionedGlyphs)e.x+=c,e.y+=u})(t.positionedLines,y,v,w,m,g,a,b,o.length),t.top+=-w*b,t.bottom=t.top+b,t.left+=-v*m,t.right=t.left+m}(w,i,r,n,_,s,l,c,p,u,d,g),!function(e){for(const t of e)if(0!==t.positionedGlyphs.length)return!1;return!0}(v)&&w}const Vl={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},$l={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function ql(e,t,i,r,n,o){if(t.imageName){const e=r[t.imageName];return e?e.displaySize[0]*t.scale*ll/o+n:0}{const r=i[t.fontStack],o=r&&r[e];return o?o.metrics.advance*t.scale+n:0}}function jl(e,t,i,r){const n=Math.pow(e-t,2);return r?e<t?n/2:2*n:n+Math.abs(i)*i}function Zl(e,t,i){let r=0;return 10===e&&(r-=1e4),i&&(r+=150),40!==e&&65288!==e||(r+=50),41!==t&&65289!==t||(r+=50),r}function Wl(e,t,i,r,n,o){let a=null,s=jl(t,i,n,o);for(const e of r){const r=jl(t-e.x,i,n,o)+e.badness;r<=s&&(a=e,s=r)}return{index:e,x:t,priorBreak:a,badness:s}}function Xl(e){return e?Xl(e.priorBreak).concat(e.index):[]}function Hl(e,t,i,r,n,o,a){if("point"!==o)return[];if(!e)return[];const s=[],l=function(e,t,i,r,n,o){let a=0;for(let i=0;i<e.length();i++){const s=e.getSection(i);a+=ql(e.getCharCode(i),s,r,n,t,o)}return a/Math.max(1,Math.ceil(a/i))}(e,t,i,r,n,a),c=e.text.indexOf("")>=0;let u=0;for(let i=0;i<e.length();i++){const o=e.getSection(i),p=e.getCharCode(i);if(Vl[p]||(u+=ql(p,o,r,n,t,a)),i<e.length()-1){const t=!((h=p)<11904||!(Pr["Bopomofo Extended"](h)||Pr.Bopomofo(h)||Pr["CJK Compatibility Forms"](h)||Pr["CJK Compatibility Ideographs"](h)||Pr["CJK Compatibility"](h)||Pr["CJK Radicals Supplement"](h)||Pr["CJK Strokes"](h)||Pr["CJK Symbols and Punctuation"](h)||Pr["CJK Unified Ideographs Extension A"](h)||Pr["CJK Unified Ideographs"](h)||Pr["Enclosed CJK Letters and Months"](h)||Pr["Halfwidth and Fullwidth Forms"](h)||Pr.Hiragana(h)||Pr["Ideographic Description Characters"](h)||Pr["Kangxi Radicals"](h)||Pr["Katakana Phonetic Extensions"](h)||Pr.Katakana(h)||Pr["Vertical Forms"](h)||Pr["Yi Radicals"](h)||Pr["Yi Syllables"](h)));($l[p]||t||o.imageName)&&s.push(Wl(i+1,u,l,s,Zl(p,e.getCharCode(i+1),t&&c),!1))}}var h;return Xl(Wl(e.length(),u,l,s,0,!0))}function Yl(e){let t=.5,i=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":i=1;break;case"top":case"top-right":case"top-left":i=0}return{horizontalAlign:t,verticalAlign:i}}function Kl(e,t,i,r,n){if(!r&&!n)return;const o=e[i],a=(e[i].x+o.metrics.advance*o.scale)*r;for(let r=t;r<=i;r++)e[r].x-=a,e[r].y+=n}function Jl(e,t,i){const{horizontalAlign:r,verticalAlign:n}=Yl(i),o=t[0]-e.displaySize[0]*r,a=t[1]-e.displaySize[1]*n;return{image:e,top:a,bottom:a+e.displaySize[1],left:o,right:o+e.displaySize[0]}}function Ql(e,t,i,r,n,o){const a=e.image;let s;if(a.content){const e=a.content,t=a.pixelRatio||1;s=[e[0]/t,e[1]/t,a.displaySize[0]-e[2]/t,a.displaySize[1]-e[3]/t]}const l=t.left*o,c=t.right*o;let u,h,p,d;"width"===i||"both"===i?(d=n[0]+l-r[3],h=n[0]+c+r[1]):(d=n[0]+(l+c-a.displaySize[0])/2,h=d+a.displaySize[0]);const f=t.top*o,m=t.bottom*o;return"height"===i||"both"===i?(u=n[1]+f-r[0],p=n[1]+m+r[2]):(u=n[1]+(f+m-a.displaySize[1])/2,p=u+a.displaySize[1]),{image:a,top:u,right:h,bottom:p,left:d,collisionPadding:s}}const ec=128;function tc(e,t){const{expression:i}=t;if("constant"===i.kind)return{kind:"constant",layoutSize:i.evaluate(new Jr(e+1))};if("source"===i.kind)return{kind:"source"};{const{zoomStops:t,interpolationType:r}=i;let n=0;for(;n<t.length&&t[n]<=e;)n++;n=Math.max(0,n-1);let o=n;for(;o<t.length&&t[o]<e+1;)o++;o=Math.min(t.length-1,o);const a=t[n],s=t[o];return"composite"===i.kind?{kind:"composite",minZoom:a,maxZoom:s,interpolationType:r}:{kind:"camera",minZoom:a,maxZoom:s,minSize:i.evaluate(new Jr(a)),maxSize:i.evaluate(new Jr(s)),interpolationType:r}}}class ic extends I{constructor(e,t,i,r){super(e,t),this.angle=i,void 0!==r&&(this.segment=r)}clone(){return new ic(this.x,this.y,this.angle,this.segment)}}function rc(e,t,i,r,n){if(void 0===t.segment)return!0;let o=t,a=t.segment+1,s=0;for(;s>-i/2;){if(a--,a<0)return!1;s-=e[a].dist(o),o=e[a]}s+=e[a].dist(e[a+1]),a++;const l=[];let c=0;for(;s<i/2;){const t=e[a],i=e[a+1];if(!i)return!1;let o=e[a-1].angleTo(t)-t.angleTo(i);for(o=Math.abs((o+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:s,angleDelta:o}),c+=o;s-l[0].distance>r;)c-=l.shift().angleDelta;if(c>n)return!1;a++,s+=t.dist(i)}return!0}function nc(e){let t=0;for(let i=0;i<e.length-1;i++)t+=e[i].dist(e[i+1]);return t}function oc(e,t,i){return e?.6*t*i:0}function ac(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function sc(e,t,i,r,n,o){const a=oc(i,n,o),s=ac(i,r)*o;let l=0;const c=nc(e)/2;for(let i=0;i<e.length-1;i++){const r=e[i],n=e[i+1],o=r.dist(n);if(l+o>c){const u=(c-l)/o,h=It(r.x,n.x,u),p=It(r.y,n.y,u),d=new ic(h,p,n.angleTo(r),i);return d._round(),!a||rc(e,d,s,a,t)?d:void 0}l+=o}}function lc(e,t,i,r,n,o,a,s,l){const c=oc(r,o,a),u=ac(r,n),h=u*a,p=0===e[0].x||e[0].x===l||0===e[0].y||e[0].y===l;return t-h<t/4&&(t=h+t/4),cc(e,p?t/2*s%t:(u/2+2*o)*a*s%t,t,c,i,h,p,!1,l)}function cc(e,t,i,r,n,o,a,s,l){const c=o/2,u=nc(e);let h=0,p=t-i,d=[];for(let t=0;t<e.length-1;t++){const a=e[t],s=e[t+1],f=a.dist(s),m=s.angleTo(a);for(;p+i<h+f;){p+=i;const g=(p-h)/f,y=It(a.x,s.x,g),_=It(a.y,s.y,g);if(y>=0&&y<l&&_>=0&&_<l&&p-c>=0&&p+c<=u){const i=new ic(y,_,m,t);i._round(),r&&!rc(e,i,o,r,n)||d.push(i)}}h+=f}return s||d.length||a||(d=cc(e,h/2,i,r,n,o,a,!0,l)),d}function uc(e,t,i,r,n){const o=[];for(let a=0;a<e.length;a++){const s=e[a];let l;for(let e=0;e<s.length-1;e++){let a=s[e],c=s[e+1];a.x<t&&c.x<t||(a.x<t?a=new I(t,a.y+(t-a.x)/(c.x-a.x)*(c.y-a.y))._round():c.x<t&&(c=new I(t,a.y+(t-a.x)/(c.x-a.x)*(c.y-a.y))._round()),a.y<i&&c.y<i||(a.y<i?a=new I(a.x+(i-a.y)/(c.y-a.y)*(c.x-a.x),i)._round():c.y<i&&(c=new I(a.x+(i-a.y)/(c.y-a.y)*(c.x-a.x),i)._round()),a.x>=r&&c.x>=r||(a.x>=r?a=new I(r,a.y+(r-a.x)/(c.x-a.x)*(c.y-a.y))._round():c.x>=r&&(c=new I(r,a.y+(r-a.x)/(c.x-a.x)*(c.y-a.y))._round()),a.y>=n&&c.y>=n||(a.y>=n?a=new I(a.x+(n-a.y)/(c.y-a.y)*(c.x-a.x),n)._round():c.y>=n&&(c=new I(a.x+(n-a.y)/(c.y-a.y)*(c.x-a.x),n)._round()),l&&a.equals(l[l.length-1])||(l=[a],o.push(l)),l.push(c)))))}}return o}function hc(e,t,i,r){const n=[],o=e.image,a=o.pixelRatio,s=o.paddedRect.w-2,l=o.paddedRect.h-2,c=e.right-e.left,u=e.bottom-e.top,h=o.stretchX||[[0,s]],p=o.stretchY||[[0,l]],d=(e,t)=>e+t[1]-t[0],f=h.reduce(d,0),m=p.reduce(d,0),g=s-f,y=l-m;let _=0,x=f,b=0,v=m,w=0,A=g,E=0,D=y;if(o.content&&r){const e=o.content;_=pc(h,0,e[0]),b=pc(p,0,e[1]),x=pc(h,e[0],e[2]),v=pc(p,e[1],e[3]),w=e[0]-_,E=e[1]-b,A=e[2]-e[0]-x,D=e[3]-e[1]-v}const T=(r,n,s,l)=>{const h=fc(r.stretch-_,x,c,e.left),p=mc(r.fixed-w,A,r.stretch,f),d=fc(n.stretch-b,v,u,e.top),g=mc(n.fixed-E,D,n.stretch,m),y=fc(s.stretch-_,x,c,e.left),T=mc(s.fixed-w,A,s.stretch,f),C=fc(l.stretch-b,v,u,e.top),M=mc(l.fixed-E,D,l.stretch,m),S=new I(h,d),P=new I(y,d),R=new I(y,C),k=new I(h,C),z=new I(p/a,g/a),L=new I(T/a,M/a),B=t*Math.PI/180;if(B){const e=Math.sin(B),t=Math.cos(B),i=[t,-e,e,t];S._matMult(i),P._matMult(i),k._matMult(i),R._matMult(i)}const F=r.stretch+r.fixed,N=n.stretch+n.fixed;return{tl:S,tr:P,bl:k,br:R,tex:{x:o.paddedRect.x+1+F,y:o.paddedRect.y+1+N,w:s.stretch+s.fixed-F,h:l.stretch+l.fixed-N},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:z,pixelOffsetBR:L,minFontScaleX:A/a/c,minFontScaleY:D/a/u,isSDF:i}};if(r&&(o.stretchX||o.stretchY)){const e=dc(h,g,f),t=dc(p,y,m);for(let i=0;i<e.length-1;i++){const r=e[i],o=e[i+1];for(let e=0;e<t.length-1;e++)n.push(T(r,t[e],o,t[e+1]))}}else n.push(T({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:s+1},{fixed:0,stretch:l+1}));return n}function pc(e,t,i){let r=0;for(const n of e)r+=Math.max(t,Math.min(i,n[1]))-Math.max(t,Math.min(i,n[0]));return r}function dc(e,t,i){const r=[{fixed:-1,stretch:0}];for(const[t,i]of e){const e=r[r.length-1];r.push({fixed:t-e.stretch,stretch:e.stretch}),r.push({fixed:t-e.stretch,stretch:e.stretch+(i-t)})}return r.push({fixed:t+1,stretch:i}),r}function fc(e,t,i,r){return e/t*i+r}function mc(e,t,i,r){return e-t*i/r}Dr("Anchor",ic);class gc{constructor(e,t,i,r,n,o,a,s,l,c){if(this.boxStartIndex=e.length,l){let e=o.top,t=o.bottom;const i=o.collisionPadding;i&&(e-=i[1],t+=i[3]);let r=t-e;r>0&&(r=Math.max(10,r),this.circleDiameter=r)}else{let l=o.top*a-s[0],u=o.bottom*a+s[2],h=o.left*a-s[3],p=o.right*a+s[1];const d=o.collisionPadding;if(d&&(h-=d[0]*a,l-=d[1]*a,p+=d[2]*a,u+=d[3]*a),c){const e=new I(h,l),t=new I(p,l),i=new I(h,u),r=new I(p,u),n=c*Math.PI/180;e._rotate(n),t._rotate(n),i._rotate(n),r._rotate(n),h=Math.min(e.x,t.x,i.x,r.x),p=Math.max(e.x,t.x,i.x,r.x),l=Math.min(e.y,t.y,i.y,r.y),u=Math.max(e.y,t.y,i.y,r.y)}e.emplaceBack(t.x,t.y,h,l,p,u,i,r,n)}this.boxEndIndex=e.length}}class yc{constructor(e=[],t=_c){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let e=(this.length>>1)-1;e>=0;e--)this._down(e)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:i}=this,r=t[e];for(;e>0;){const n=e-1>>1,o=t[n];if(i(r,o)>=0)break;t[e]=o,e=n}t[e]=r}_down(e){const{data:t,compare:i}=this,r=this.length>>1,n=t[e];for(;e<r;){let r=1+(e<<1),o=t[r];const a=r+1;if(a<this.length&&i(t[a],o)<0&&(r=a,o=t[a]),i(o,n)>=0)break;t[e]=o,e=r}t[e]=n}}function _c(e,t){return e<t?-1:e>t?1:0}function xc(e,t=1,i=!1){let r=1/0,n=1/0,o=-1/0,a=-1/0;const s=e[0];for(let e=0;e<s.length;e++){const t=s[e];(!e||t.x<r)&&(r=t.x),(!e||t.y<n)&&(n=t.y),(!e||t.x>o)&&(o=t.x),(!e||t.y>a)&&(a=t.y)}const l=Math.min(o-r,a-n);let c=l/2;const u=new yc([],bc);if(0===l)return new I(r,n);for(let t=r;t<o;t+=l)for(let i=n;i<a;i+=l)u.push(new vc(t+c,i+c,c,e));let h=function(e){let t=0,i=0,r=0;const n=e[0];for(let e=0,o=n.length,a=o-1;e<o;a=e++){const o=n[e],s=n[a],l=o.x*s.y-s.x*o.y;i+=(o.x+s.x)*l,r+=(o.y+s.y)*l,t+=3*l}return new vc(i/t,r/t,0,e)}(e),p=u.length;for(;u.length;){const r=u.pop();(r.d>h.d||!h.d)&&(h=r,i&&console.log("found best %d after %d probes",Math.round(1e4*r.d)/1e4,p)),r.max-h.d<=t||(c=r.h/2,u.push(new vc(r.p.x-c,r.p.y-c,c,e)),u.push(new vc(r.p.x+c,r.p.y-c,c,e)),u.push(new vc(r.p.x-c,r.p.y+c,c,e)),u.push(new vc(r.p.x+c,r.p.y+c,c,e)),p+=4)}return i&&(console.log(`num probes: ${p}`),console.log(`best distance: ${h.d}`)),h.p}function bc(e,t){return t.max-e.max}function vc(e,t,i,r){this.p=new I(e,t),this.h=i,this.d=function(e,t){let i=!1,r=1/0;for(let n=0;n<t.length;n++){const o=t[n];for(let t=0,n=o.length,a=n-1;t<n;a=t++){const n=o[t],s=o[a];n.y>e.y!=s.y>e.y&&e.x<(s.x-n.x)*(e.y-n.y)/(s.y-n.y)+n.x&&(i=!i),r=Math.min(r,ra(e,n,s))}}return(i?1:-1)*Math.sqrt(r)}(this.p,r),this.max=this.d+this.h*Math.SQRT2}const wc=Number.POSITIVE_INFINITY;function Ac(e,t){return t[1]!==wc?function(e,t,i){let r=0,n=0;switch(t=Math.abs(t),i=Math.abs(i),e){case"top-right":case"top-left":case"top":n=i-7;break;case"bottom-right":case"bottom-left":case"bottom":n=7-i}switch(e){case"top-right":case"bottom-right":case"right":r=-t;break;case"top-left":case"bottom-left":case"left":r=t}return[r,n]}(e,t[0],t[1]):function(e,t){let i=0,r=0;t<0&&(t=0);const n=t/Math.sqrt(2);switch(e){case"top-right":case"top-left":r=n-7;break;case"bottom-right":case"bottom-left":r=7-n;break;case"bottom":r=7-t;break;case"top":r=t-7}switch(e){case"top-right":case"bottom-right":i=-n;break;case"top-left":case"bottom-left":i=n;break;case"left":i=t;break;case"right":i=-t}return[i,r]}(e,t[0])}function Ec(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Ic(t,i,r,n,o,a,s,l,c,u,h){let p=a.textMaxSize.evaluate(i,{});void 0===p&&(p=s);const d=t.layers[0].layout,m=d.get("icon-offset").evaluate(i,{},h),g=Cc(r.horizontal),y=s/24,_=t.tilePixelRatio*y,x=t.tilePixelRatio*p/24,b=t.tilePixelRatio*l,v=t.tilePixelRatio*d.get("symbol-spacing"),w=d.get("text-padding")*t.tilePixelRatio,A=function(e,t,i,r=1){const n=e.get("icon-padding").evaluate(t,{},i),o=n&&n.values;return[o[0]*r,o[1]*r,o[2]*r,o[3]*r]}(d,i,h,t.tilePixelRatio),E=d.get("text-max-angle")/180*Math.PI,I="viewport"!==d.get("text-rotation-alignment")&&"point"!==d.get("symbol-placement"),D="map"===d.get("icon-rotation-alignment")&&"point"!==d.get("symbol-placement"),T=d.get("symbol-placement"),C=v/2,M=d.get("icon-text-fit");let S;n&&"none"!==M&&(t.allowVerticalPlacement&&r.vertical&&(S=Ql(n,r.vertical,M,d.get("icon-text-fit-padding"),m,y)),g&&(n=Ql(n,g,M,d.get("icon-text-fit-padding"),m,y)));const P=(l,p)=>{p.x<0||p.x>=$o||p.y<0||p.y>=$o||function(t,i,r,n,o,a,s,l,c,u,h,p,d,m,g,y,_,x,b,v,w,A,E,I,D){const T=t.addToLineVertexArray(i,r);let C,M,S,P,R=0,k=0,z=0,L=0,B=-1,F=-1;const N={};let O=xo.exports(""),G=0,U=0;if(void 0===l._unevaluatedLayout.getValue("text-radial-offset")?[G,U]=l.layout.get("text-offset").evaluate(w,{},I).map((e=>e*ll)):(G=l.layout.get("text-radial-offset").evaluate(w,{},I)*ll,U=wc),t.allowVerticalPlacement&&n.vertical){const e=l.layout.get("text-rotate").evaluate(w,{},I)+90;S=new gc(c,i,u,h,p,n.vertical,d,m,g,e),s&&(P=new gc(c,i,u,h,p,s,_,x,g,e))}if(o){const r=l.layout.get("icon-rotate").evaluate(w,{}),n="none"!==l.layout.get("icon-text-fit"),a=hc(o,r,E,n),d=s?hc(s,r,E,n):void 0;M=new gc(c,i,u,h,p,o,_,x,!1,r),R=4*a.length;const m=t.iconSizeData;let g=null;"source"===m.kind?(g=[ec*l.layout.get("icon-size").evaluate(w,{})],g[0]>Dc&&f(`${t.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):"composite"===m.kind&&(g=[ec*A.compositeIconSizes[0].evaluate(w,{},I),ec*A.compositeIconSizes[1].evaluate(w,{},I)],(g[0]>Dc||g[1]>Dc)&&f(`${t.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),t.addSymbols(t.icon,a,g,v,b,w,e.WritingMode.none,i,T.lineStartIndex,T.lineLength,-1,I),B=t.icon.placedSymbolArray.length-1,d&&(k=4*d.length,t.addSymbols(t.icon,d,g,v,b,w,e.WritingMode.vertical,i,T.lineStartIndex,T.lineLength,-1,I),F=t.icon.placedSymbolArray.length-1)}const V=Object.keys(n.horizontal);for(const r of V){const o=n.horizontal[r];if(!C){O=xo.exports(o.text);const e=l.layout.get("text-rotate").evaluate(w,{},I);C=new gc(c,i,u,h,p,o,d,m,g,e)}const s=1===o.positionedLines.length;if(z+=Tc(t,i,o,a,l,g,w,y,T,n.vertical?e.WritingMode.horizontal:e.WritingMode.horizontalOnly,s?V:[r],N,B,A,I),s)break}n.vertical&&(L+=Tc(t,i,n.vertical,a,l,g,w,y,T,e.WritingMode.vertical,["vertical"],N,F,A,I));const $=C?C.boxStartIndex:t.collisionBoxArray.length,q=C?C.boxEndIndex:t.collisionBoxArray.length,j=S?S.boxStartIndex:t.collisionBoxArray.length,Z=S?S.boxEndIndex:t.collisionBoxArray.length,W=M?M.boxStartIndex:t.collisionBoxArray.length,X=M?M.boxEndIndex:t.collisionBoxArray.length,H=P?P.boxStartIndex:t.collisionBoxArray.length,Y=P?P.boxEndIndex:t.collisionBoxArray.length;let K=-1;const J=(e,t)=>e&&e.circleDiameter?Math.max(e.circleDiameter,t):t;K=J(C,K),K=J(S,K),K=J(M,K),K=J(P,K);const Q=K>-1?1:0;Q&&(K*=D/ll),t.glyphOffsetArray.length>=Fc.MAX_GLYPHS&&f("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==w.sortKey&&t.addToSortKeyRanges(t.symbolInstances.length,w.sortKey),t.symbolInstances.emplaceBack(i.x,i.y,N.right>=0?N.right:-1,N.center>=0?N.center:-1,N.left>=0?N.left:-1,N.vertical||-1,B,F,O,$,q,j,Z,W,X,H,Y,u,z,L,R,k,Q,0,d,G,U,K)}(t,p,l,r,n,o,S,t.layers[0],t.collisionBoxArray,i.index,i.sourceLayerIndex,t.index,_,[w,w,w,w],I,c,b,A,D,m,i,a,u,h,s)};if("line"===T)for(const e of uc(i.geometry,0,0,$o,$o)){const i=lc(e,v,E,r.vertical||g,n,24,x,t.overscaling,$o);for(const r of i)g&&Mc(t,g.text,C,r)||P(e,r)}else if("line-center"===T){for(const e of i.geometry)if(e.length>1){const t=sc(e,E,r.vertical||g,n,24,x);t&&P(e,t)}}else if("Polygon"===i.type)for(const e of ps(i.geometry,0)){const t=xc(e,16);P(e[0],new ic(t.x,t.y,0))}else if("LineString"===i.type)for(const e of i.geometry)P(e,new ic(e[0].x,e[0].y,0));else if("Point"===i.type)for(const e of i.geometry)for(const t of e)P([t],new ic(t.x,t.y,0))}const Dc=32640;function Tc(e,t,i,r,n,o,a,s,l,c,u,h,p,d,m){const g=function(e,t,i,r,n,o,a,s){const l=r.layout.get("text-rotate").evaluate(o,{})*Math.PI/180,c=[];for(const e of t.positionedLines)for(const r of e.positionedGlyphs){if(!r.rect)continue;const o=r.rect||{};let u=4,h=!0,p=1,d=0;const f=(n||s)&&r.vertical,m=r.metrics.advance*r.scale/2;if(s&&t.verticalizable){const t=(r.scale-1)*ll,i=(ll-r.metrics.width*r.scale)/2;d=e.lineOffset/2-(r.imageName?-i:t)}if(r.imageName){const e=a[r.imageName];h=e.sdf,p=e.pixelRatio,u=1/p}const g=n?[r.x+m,r.y]:[0,0];let y=n?[0,0]:[r.x+m+i[0],r.y+i[1]-d],_=[0,0];f&&(_=y,y=[0,0]);const x=(r.metrics.left-u)*r.scale-m+y[0],b=(-r.metrics.top-u)*r.scale+y[1],v=x+o.w*r.scale/p,w=b+o.h*r.scale/p,A=new I(x,b),E=new I(v,b),D=new I(x,w),T=new I(v,w);if(f){const e=new I(-m,m-Nl),t=-Math.PI/2,i=12-m,n=new I(22-i,-(r.imageName?i:0)),o=new I(..._);A._rotateAround(t,e)._add(n)._add(o),E._rotateAround(t,e)._add(n)._add(o),D._rotateAround(t,e)._add(n)._add(o),T._rotateAround(t,e)._add(n)._add(o)}if(l){const e=Math.sin(l),t=Math.cos(l),i=[t,-e,e,t];A._matMult(i),E._matMult(i),D._matMult(i),T._matMult(i)}const C=new I(0,0),M=new I(0,0);c.push({tl:A,tr:E,bl:D,br:T,tex:o,writingMode:t.writingMode,glyphOffset:g,sectionIndex:r.sectionIndex,isSDF:h,pixelOffsetTL:C,pixelOffsetBR:M,minFontScaleX:0,minFontScaleY:0})}return c}(0,i,s,n,o,a,r,e.allowVerticalPlacement),y=e.textSizeData;let _=null;"source"===y.kind?(_=[ec*n.layout.get("text-size").evaluate(a,{})],_[0]>Dc&&f(`${e.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):"composite"===y.kind&&(_=[ec*d.compositeTextSizes[0].evaluate(a,{},m),ec*d.compositeTextSizes[1].evaluate(a,{},m)],(_[0]>Dc||_[1]>Dc)&&f(`${e.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),e.addSymbols(e.text,g,_,s,o,a,c,t,l.lineStartIndex,l.lineLength,p,m);for(const t of u)h[t]=e.text.placedSymbolArray.length-1;return 4*g.length}function Cc(e){for(const t in e)return e[t];return null}function Mc(e,t,i,r){const n=e.compareText;if(t in n){const e=n[t];for(let t=e.length-1;t>=0;t--)if(r.dist(e[t])<i)return!0}else n[t]=[];return n[t].push(r),!1}const Sc=ws.VectorTileFeature.types,Pc=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Rc(e,t,i,r,n,o,a,s,l,c,u,h,p){const d=s?Math.min(Dc,Math.round(s[0])):0,f=s?Math.min(Dc,Math.round(s[1])):0;e.emplaceBack(t,i,Math.round(32*r),Math.round(32*n),o,a,(d<<1)+(l?1:0),f,16*c,16*u,256*h,256*p)}function kc(e,t,i){e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i)}function zc(e){for(const t of e.sections)if(Or(t.text))return!0;return!1}class Lc{constructor(e){this.layoutVertexArray=new ao,this.indexArray=new ho,this.programConfigurations=e,this.segments=new go,this.dynamicLayoutVertexArray=new so,this.opacityVertexArray=new lo,this.placedSymbolArray=new Zn}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(e,t,i,r){this.isEmpty()||(i&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,tl.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,il.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,Pc,!0),this.opacityVertexBuffer.itemSize=1),(i||r)&&this.programConfigurations.upload(e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Dr("SymbolBuffers",Lc);class Bc{constructor(e,t,i){this.layoutVertexArray=new e,this.layoutAttributes=t,this.indexArray=new i,this.segments=new go,this.collisionVertexArray=new uo}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,rl.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Dr("CollisionBuffers",Bc);class Fc{constructor(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=ma([]),this.placementViewportMatrix=ma([]);const i=this.layers[0]._unevaluatedLayout._values;this.textSizeData=tc(this.zoom,i["text-size"]),this.iconSizeData=tc(this.zoom,i["icon-size"]);const r=this.layers[0].layout,n=r.get("symbol-sort-key"),o=r.get("symbol-z-order");this.canOverlap="never"!==Vc(r,"text-overlap","text-allow-overlap")||"never"!==Vc(r,"icon-overlap","icon-allow-overlap")||r.get("text-ignore-placement")||r.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==o&&!n.isConstant(),this.sortFeaturesByY=("viewport-y"===o||"auto"===o&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===r.get("symbol-placement")&&(this.writingModes=r.get("text-writing-mode").map((t=>e.WritingMode[t]))),this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id)),this.sourceID=t.sourceID}createArrays(){this.text=new Lc(new Go(this.layers,this.zoom,(e=>/^text/.test(e)))),this.icon=new Lc(new Go(this.layers,this.zoom,(e=>/^icon/.test(e)))),this.glyphOffsetArray=new Hn,this.lineVertexArray=new Yn,this.symbolInstances=new Xn}calculateGlyphDependencies(e,t,i,r,n){for(let o=0;o<e.length;o++)if(t[e.charCodeAt(o)]=!0,(i||r)&&n){const i=sl[e.charAt(o)];i&&(t[i.charCodeAt(0)]=!0)}}populate(t,i,r){const n=this.layers[0],o=n.layout,a=o.get("text-font"),s=o.get("text-field"),l=o.get("icon-image"),c=("constant"!==s.value.kind||s.value.value instanceof Fe&&!s.value.value.isEmpty()||s.value.value.toString().length>0)&&("constant"!==a.value.kind||a.value.value.length>0),u="constant"!==l.value.kind||!!l.value.value||Object.keys(l.parameters).length>0,h=o.get("symbol-sort-key");if(this.features=[],!c&&!u)return;const p=i.iconDependencies,d=i.glyphDependencies,f=i.availableImages,m=new Jr(this.zoom);for(const{feature:i,id:s,index:l,sourceLayerIndex:g}of t){const t=n._featureFilter.needGeometry,y=Wo(i,t);if(!n._featureFilter.filter(m,y,r))continue;let _,x;if(t||(y.geometry=Zo(i)),c){const e=n.getValueAndResolveTokens("text-field",y,r,f),t=Fe.factory(e);zc(t)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===Hr()||this.hasRTLText&&Kr.isParsed())&&(_=al(t,n,y))}if(u){const e=n.getValueAndResolveTokens("icon-image",y,r,f);x=e instanceof Oe?e:Oe.fromString(e)}if(!_&&!x)continue;const b=this.sortFeaturesByKey?h.evaluate(y,{},r):void 0;if(this.features.push({id:s,text:_,icon:x,index:l,sourceLayerIndex:g,geometry:y.geometry,properties:i.properties,type:Sc[i.type],sortKey:b}),x&&(p[x.name]=!0),_){const t=a.evaluate(y,{},r).join(","),i="viewport"!==o.get("text-rotation-alignment")&&"point"!==o.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(e.WritingMode.vertical)>=0;for(const e of _.sections)if(e.image)p[e.image.name]=!0;else{const r=Rr(_.toString()),n=e.fontStack||t,o=d[n]=d[n]||{};this.calculateGlyphDependencies(e.text,o,i,this.allowVerticalPlacement,r)}}}"line"===o.get("symbol-placement")&&(this.features=function(e){const t={},i={},r=[];let n=0;function o(t){r.push(e[t]),n++}function a(e,t,n){const o=i[e];return delete i[e],i[t]=o,r[o].geometry[0].pop(),r[o].geometry[0]=r[o].geometry[0].concat(n[0]),o}function s(e,i,n){const o=t[i];return delete t[i],t[e]=o,r[o].geometry[0].shift(),r[o].geometry[0]=n[0].concat(r[o].geometry[0]),o}function l(e,t,i){const r=i?t[0][t[0].length-1]:t[0][0];return`${e}:${r.x}:${r.y}`}for(let c=0;c<e.length;c++){const u=e[c],h=u.geometry,p=u.text?u.text.toString():null;if(!p){o(c);continue}const d=l(p,h),f=l(p,h,!0);if(d in i&&f in t&&i[d]!==t[f]){const e=s(d,f,h),n=a(d,f,r[e].geometry);delete t[d],delete i[f],i[l(p,r[n].geometry,!0)]=n,r[e].geometry=null}else d in i?a(d,f,h):f in t?s(d,f,h):(o(c),t[d]=n-1,i[f]=n-1)}return r.filter((e=>e.geometry))}(this.features)),this.sortFeaturesByKey&&this.features.sort(((e,t)=>e.sortKey-t.sortKey))}update(e,t,i){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,t,this.layers,i),this.icon.programConfigurations.updatePaintArrays(e,t,this.layers,i))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(e,t){const i=this.lineVertexArray.length;if(void 0!==e.segment){let i=e.dist(t[e.segment+1]),r=e.dist(t[e.segment]);const n={};for(let r=e.segment+1;r<t.length;r++)n[r]={x:t[r].x,y:t[r].y,tileUnitDistanceFromAnchor:i},r<t.length-1&&(i+=t[r+1].dist(t[r]));for(let i=e.segment||0;i>=0;i--)n[i]={x:t[i].x,y:t[i].y,tileUnitDistanceFromAnchor:r},i>0&&(r+=t[i-1].dist(t[i]));for(let e=0;e<t.length;e++){const t=n[e];this.lineVertexArray.emplaceBack(t.x,t.y,t.tileUnitDistanceFromAnchor)}}return{lineStartIndex:i,lineLength:this.lineVertexArray.length-i}}addSymbols(t,i,r,n,o,a,s,l,c,u,h,p){const d=t.indexArray,f=t.layoutVertexArray,m=t.segments.prepareSegment(4*i.length,f,d,this.canOverlap?a.sortKey:void 0),g=this.glyphOffsetArray.length,y=m.vertexLength,_=this.allowVerticalPlacement&&s===e.WritingMode.vertical?Math.PI/2:0,x=a.text&&a.text.sections;for(let e=0;e<i.length;e++){const{tl:n,tr:o,bl:s,br:c,tex:u,pixelOffsetTL:h,pixelOffsetBR:g,minFontScaleX:y,minFontScaleY:b,glyphOffset:v,isSDF:w,sectionIndex:A}=i[e],E=m.vertexLength,I=v[1];Rc(f,l.x,l.y,n.x,I+n.y,u.x,u.y,r,w,h.x,h.y,y,b),Rc(f,l.x,l.y,o.x,I+o.y,u.x+u.w,u.y,r,w,g.x,h.y,y,b),Rc(f,l.x,l.y,s.x,I+s.y,u.x,u.y+u.h,r,w,h.x,g.y,y,b),Rc(f,l.x,l.y,c.x,I+c.y,u.x+u.w,u.y+u.h,r,w,g.x,g.y,y,b),kc(t.dynamicLayoutVertexArray,l,_),d.emplaceBack(E,E+1,E+2),d.emplaceBack(E+1,E+2,E+3),m.vertexLength+=4,m.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(v[0]),e!==i.length-1&&A===i[e+1].sectionIndex||t.programConfigurations.populatePaintArrays(f.length,a,a.index,{},p,x&&x[A])}t.placedSymbolArray.emplaceBack(l.x,l.y,g,this.glyphOffsetArray.length-g,y,c,u,l.segment,r?r[0]:0,r?r[1]:0,n[0],n[1],s,0,!1,0,h)}_addCollisionDebugVertex(e,t,i,r,n,o){return t.emplaceBack(0,0),e.emplaceBack(i.x,i.y,r,n,Math.round(o.x),Math.round(o.y))}addCollisionDebugVertices(e,t,i,r,n,o,a){const s=n.segments.prepareSegment(4,n.layoutVertexArray,n.indexArray),l=s.vertexLength,c=n.layoutVertexArray,u=n.collisionVertexArray,h=a.anchorX,p=a.anchorY;this._addCollisionDebugVertex(c,u,o,h,p,new I(e,t)),this._addCollisionDebugVertex(c,u,o,h,p,new I(i,t)),this._addCollisionDebugVertex(c,u,o,h,p,new I(i,r)),this._addCollisionDebugVertex(c,u,o,h,p,new I(e,r)),s.vertexLength+=4;const d=n.indexArray;d.emplaceBack(l,l+1),d.emplaceBack(l+1,l+2),d.emplaceBack(l+2,l+3),d.emplaceBack(l+3,l),s.primitiveLength+=4}addDebugCollisionBoxes(e,t,i,r){for(let n=e;n<t;n++){const e=this.collisionBoxArray.get(n);this.addCollisionDebugVertices(e.x1,e.y1,e.x2,e.y2,r?this.textCollisionBox:this.iconCollisionBox,e.anchorPoint,i)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Bc(co,nl.members,po),this.iconCollisionBox=new Bc(co,nl.members,po);for(let e=0;e<this.symbolInstances.length;e++){const t=this.symbolInstances.get(e);this.addDebugCollisionBoxes(t.textBoxStartIndex,t.textBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.verticalTextBoxStartIndex,t.verticalTextBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.iconBoxStartIndex,t.iconBoxEndIndex,t,!1),this.addDebugCollisionBoxes(t.verticalIconBoxStartIndex,t.verticalIconBoxEndIndex,t,!1)}}_deserializeCollisionBoxesForSymbol(e,t,i,r,n,o,a,s,l){const c={};for(let r=t;r<i;r++){const t=e.get(r);c.textBox={x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,anchorPointX:t.anchorPointX,anchorPointY:t.anchorPointY},c.textFeatureIndex=t.featureIndex;break}for(let t=r;t<n;t++){const i=e.get(t);c.verticalTextBox={x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2,anchorPointX:i.anchorPointX,anchorPointY:i.anchorPointY},c.verticalTextFeatureIndex=i.featureIndex;break}for(let t=o;t<a;t++){const i=e.get(t);c.iconBox={x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2,anchorPointX:i.anchorPointX,anchorPointY:i.anchorPointY},c.iconFeatureIndex=i.featureIndex;break}for(let t=s;t<l;t++){const i=e.get(t);c.verticalIconBox={x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2,anchorPointX:i.anchorPointX,anchorPointY:i.anchorPointY},c.verticalIconFeatureIndex=i.featureIndex;break}return c}deserializeCollisionBoxes(e){this.collisionArrays=[];for(let t=0;t<this.symbolInstances.length;t++){const i=this.symbolInstances.get(t);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,i.textBoxStartIndex,i.textBoxEndIndex,i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i.iconBoxStartIndex,i.iconBoxEndIndex,i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(e,t){const i=e.placedSymbolArray.get(t),r=i.vertexStartIndex+4*i.numGlyphs;for(let t=i.vertexStartIndex;t<r;t+=4)e.indexArray.emplaceBack(t,t+1,t+2),e.indexArray.emplaceBack(t+1,t+2,t+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const t=Math.sin(e),i=Math.cos(e),r=[],n=[],o=[];for(let e=0;e<this.symbolInstances.length;++e){o.push(e);const a=this.symbolInstances.get(e);r.push(0|Math.round(t*a.anchorX+i*a.anchorY)),n.push(a.featureIndex)}return o.sort(((e,t)=>r[e]-r[t]||n[t]-n[e])),o}addToSortKeyRanges(e,t){const i=this.sortKeyRanges[this.sortKeyRanges.length-1];i&&i.sortKey===t?i.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:t,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const e of this.symbolInstanceIndexes){const t=this.symbolInstances.get(e);this.featureSortOrder.push(t.featureIndex),[t.rightJustifiedTextSymbolIndex,t.centerJustifiedTextSymbolIndex,t.leftJustifiedTextSymbolIndex].forEach(((e,t,i)=>{e>=0&&i.indexOf(e)===t&&this.addIndicesForPlacedSymbol(this.text,e)})),t.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,t.verticalPlacedTextSymbolIndex),t.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,t.placedIconSymbolIndex),t.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,t.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Dr("SymbolBucket",Fc,{omit:["layers","collisionBoxArray","features","compareText"]}),Fc.MAX_GLYPHS=65535,Fc.addDynamicAttributes=kc;const Nc=new dn({"symbol-placement":new ln(re.layout_symbol["symbol-placement"]),"symbol-spacing":new ln(re.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new ln(re.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new cn(re.layout_symbol["symbol-sort-key"]),"symbol-z-order":new ln(re.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new ln(re.layout_symbol["icon-allow-overlap"]),"icon-overlap":new ln(re.layout_symbol["icon-overlap"]),"icon-ignore-placement":new ln(re.layout_symbol["icon-ignore-placement"]),"icon-optional":new ln(re.layout_symbol["icon-optional"]),"icon-rotation-alignment":new ln(re.layout_symbol["icon-rotation-alignment"]),"icon-size":new cn(re.layout_symbol["icon-size"]),"icon-text-fit":new ln(re.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new ln(re.layout_symbol["icon-text-fit-padding"]),"icon-image":new cn(re.layout_symbol["icon-image"]),"icon-rotate":new cn(re.layout_symbol["icon-rotate"]),"icon-padding":new cn(re.layout_symbol["icon-padding"]),"icon-keep-upright":new ln(re.layout_symbol["icon-keep-upright"]),"icon-offset":new cn(re.layout_symbol["icon-offset"]),"icon-anchor":new cn(re.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new ln(re.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new ln(re.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new ln(re.layout_symbol["text-rotation-alignment"]),"text-field":new cn(re.layout_symbol["text-field"]),"text-font":new cn(re.layout_symbol["text-font"]),"text-size":new cn(re.layout_symbol["text-size"]),"text-max-width":new cn(re.layout_symbol["text-max-width"]),"text-line-height":new ln(re.layout_symbol["text-line-height"]),"text-letter-spacing":new cn(re.layout_symbol["text-letter-spacing"]),"text-justify":new cn(re.layout_symbol["text-justify"]),"text-radial-offset":new cn(re.layout_symbol["text-radial-offset"]),"text-variable-anchor":new ln(re.layout_symbol["text-variable-anchor"]),"text-anchor":new cn(re.layout_symbol["text-anchor"]),"text-max-angle":new ln(re.layout_symbol["text-max-angle"]),"text-writing-mode":new ln(re.layout_symbol["text-writing-mode"]),"text-rotate":new cn(re.layout_symbol["text-rotate"]),"text-padding":new ln(re.layout_symbol["text-padding"]),"text-keep-upright":new ln(re.layout_symbol["text-keep-upright"]),"text-transform":new cn(re.layout_symbol["text-transform"]),"text-offset":new cn(re.layout_symbol["text-offset"]),"text-allow-overlap":new ln(re.layout_symbol["text-allow-overlap"]),"text-overlap":new ln(re.layout_symbol["text-overlap"]),"text-ignore-placement":new ln(re.layout_symbol["text-ignore-placement"]),"text-optional":new ln(re.layout_symbol["text-optional"])});var Oc={paint:new dn({"icon-opacity":new cn(re.paint_symbol["icon-opacity"]),"icon-color":new cn(re.paint_symbol["icon-color"]),"icon-halo-color":new cn(re.paint_symbol["icon-halo-color"]),"icon-halo-width":new cn(re.paint_symbol["icon-halo-width"]),"icon-halo-blur":new cn(re.paint_symbol["icon-halo-blur"]),"icon-translate":new ln(re.paint_symbol["icon-translate"]),"icon-translate-anchor":new ln(re.paint_symbol["icon-translate-anchor"]),"text-opacity":new cn(re.paint_symbol["text-opacity"]),"text-color":new cn(re.paint_symbol["text-color"],{runtimeType:me,getOverride:e=>e.textColor,hasOverride:e=>!!e.textColor}),"text-halo-color":new cn(re.paint_symbol["text-halo-color"]),"text-halo-width":new cn(re.paint_symbol["text-halo-width"]),"text-halo-blur":new cn(re.paint_symbol["text-halo-blur"]),"text-translate":new ln(re.paint_symbol["text-translate"]),"text-translate-anchor":new ln(re.paint_symbol["text-translate-anchor"])}),layout:Nc};class Gc{constructor(e){if(void 0===e.property.overrides)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=e.property.overrides?e.property.overrides.runtimeType:he,this.defaultValue=e}evaluate(e){if(e.formattedSection){const t=this.defaultValue.property.overrides;if(t&&t.hasOverride(e.formattedSection))return t.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Dr("FormatSectionOverride",Gc,{omit:["defaultValue"]});class Uc extends mn{constructor(e){super(e,Oc)}recalculate(e,t){if(super.recalculate(e,t),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]="map"===this.layout.get("text-rotation-alignment")?"map":"viewport"),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){const e=this.layout.get("text-writing-mode");if(e){const t=[];for(const i of e)t.indexOf(i)<0&&t.push(i);this.layout._values["text-writing-mode"]=t}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(e,t,i,r){const n=this.layout.get(e).evaluate(t,{},i,r),o=this._unevaluatedLayout._values[e];return o.isDataDriven()||ki(o.value)||!n?n:function(e,t){return t.replace(/{([^{}]+)}/g,((t,i)=>i in e?String(e[i]):""))}(t.properties,n)}createBucket(e){return new Fc(e)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const e of Oc.paint.overridableProperties){if(!Uc.hasPaintOverride(this.layout,e))continue;const t=this.paint.get(e),i=new Gc(t),r=new Ri(i,t.property.specification);let n=null;n="constant"===t.value.kind||"source"===t.value.kind?new Li("source",r):new Bi("composite",r,t.value.zoomStops),this.paint._values[e]=new an(t.property,n,t.parameters)}}_handleOverridablePaintPropertyUpdate(e,t,i){return!(!this.layout||t.isDataDriven()||i.isDataDriven())&&Uc.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,t){const i=e.get("text-field"),r=Oc.paint.properties[t];let n=!1;const o=e=>{for(const t of e)if(r.overrides&&r.overrides.hasOverride(t))return void(n=!0)};if("constant"===i.value.kind&&i.value.value instanceof Fe)o(i.value.value.sections);else if("source"===i.value.kind){const e=t=>{n||(t instanceof qe&&Ve(t.value)===xe?o(t.value.sections):t instanceof ui?o(t.sections):t.eachChild(e))},t=i.value;t._styleExpression&&e(t._styleExpression.expression)}return n}}function Vc(e,t,i){let r="never";const n=e.get(t);return n?r=n:e.get(i)&&(r="always"),r}var $c={paint:new dn({"background-color":new ln(re.paint_background["background-color"]),"background-pattern":new hn(re.paint_background["background-pattern"]),"background-opacity":new ln(re.paint_background["background-opacity"])})},qc={paint:new dn({"raster-opacity":new ln(re.paint_raster["raster-opacity"]),"raster-hue-rotate":new ln(re.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new ln(re.paint_raster["raster-brightness-min"]),"raster-brightness-max":new ln(re.paint_raster["raster-brightness-max"]),"raster-saturation":new ln(re.paint_raster["raster-saturation"]),"raster-contrast":new ln(re.paint_raster["raster-contrast"]),"raster-resampling":new ln(re.paint_raster["raster-resampling"]),"raster-fade-duration":new ln(re.paint_raster["raster-fade-duration"])})};class jc extends mn{constructor(e){super(e,{}),this.onAdd=e=>{this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)},this.onRemove=e=>{this.implementation.onRemove&&this.implementation.onRemove(e,e.painter.context.gl)},this.implementation=e}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}const Zc={circle:class extends mn{constructor(e){super(e,ha)}createBucket(e){return new Ho(e)}queryRadius(e){const t=e;return sa("circle-radius",this,t)+sa("circle-stroke-width",this,t)+la(this.paint.get("circle-translate"))}queryIntersectsFeature(e,t,i,r,n,o,a,s){const l=ca(e,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,a),c=this.paint.get("circle-radius").evaluate(t,i)+this.paint.get("circle-stroke-width").evaluate(t,i),u="map"===this.paint.get("circle-pitch-alignment"),h=u?l:function(e,t){return e.map((e=>Aa(e,t)))}(l,s),p=u?c*a:c;for(const e of r)for(const t of e){const e=u?t:Aa(t,s);let i=p;const r=va([],[t.x,t.y,0,1],s);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?i*=r[3]/o.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(i*=o.cameraToCenterDistance/r[3]),Ko(h,e,i))return!0}return!1}},heatmap:class extends mn{constructor(e){super(e,Ia),this._updateColorRamp()}createBucket(e){return new Ea(e)}_handleSpecialPaintPropertyUpdate(e){"heatmap-color"===e&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Pa({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}},hillshade:class extends mn{constructor(e){super(e,Ra)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}},fill:class extends mn{constructor(e){super(e,_s)}recalculate(e,t){super.recalculate(e,t);const i=this.paint._values["fill-outline-color"];"constant"===i.value.kind&&void 0===i.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(e){return new gs(e)}queryRadius(){return la(this.paint.get("fill-translate"))}queryIntersectsFeature(e,t,i,r,n,o,a){return Jo(ca(e,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,a),r)}isTileClipped(){return!0}},"fill-extrusion":class extends mn{constructor(e){super(e,Gs)}createBucket(e){return new Fs(e)}queryRadius(){return la(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(e,t,i,r,n,o,a,s){const l=ca(e,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),o.angle,a),c=this.paint.get("fill-extrusion-height").evaluate(t,i),u=this.paint.get("fill-extrusion-base").evaluate(t,i),h=function(e,t,i,r){const n=[];for(const i of e){const e=[i.x,i.y,0,1];va(e,e,t),n.push(new I(e[0]/e[3],e[1]/e[3]))}return n}(l,s),p=function(e,t,i,r){const n=[],o=[],a=r[8]*t,s=r[9]*t,l=r[10]*t,c=r[11]*t,u=r[8]*i,h=r[9]*i,p=r[10]*i,d=r[11]*i;for(const t of e){const e=[],i=[];for(const n of t){const t=n.x,o=n.y,f=r[0]*t+r[4]*o+r[12],m=r[1]*t+r[5]*o+r[13],g=r[2]*t+r[6]*o+r[14],y=r[3]*t+r[7]*o+r[15],_=g+l,x=y+c,b=f+u,v=m+h,w=g+p,A=y+d,E=new I((f+a)/x,(m+s)/x);E.z=_/x,e.push(E);const D=new I(b/A,v/A);D.z=w/A,i.push(D)}n.push(e),o.push(i)}return[n,o]}(r,u,c,s);return function(e,t,i){let r=1/0;Jo(i,t)&&(r=Vs(i,t[0]));for(let n=0;n<t.length;n++){const o=t[n],a=e[n];for(let e=0;e<o.length-1;e++){const t=o[e],n=[t,o[e+1],a[e+1],a[e],t];Yo(i,n)&&(r=Math.min(r,Vs(i,n)))}}return r!==1/0&&r}(p[0],p[1],h)}},line:class extends mn{constructor(e){super(e,Js),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(e){"line-gradient"===e&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Et,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(e,t){super.recalculate(e,t),this.paint._values["line-floorwidth"]=Qs.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)}createBucket(e){return new Ys(e)}queryRadius(e){const t=e,i=el(sa("line-width",this,t),sa("line-gap-width",this,t)),r=sa("line-offset",this,t);return i/2+Math.abs(r)+la(this.paint.get("line-translate"))}queryIntersectsFeature(e,t,i,r,n,o,a){const s=ca(e,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),o.angle,a),l=a/2*el(this.paint.get("line-width").evaluate(t,i),this.paint.get("line-gap-width").evaluate(t,i)),c=this.paint.get("line-offset").evaluate(t,i);return c&&(r=function(e,t){const i=[];for(let r=0;r<e.length;r++){const n=e[r],o=[];for(let e=0;e<n.length;e++){const i=n[e-1],r=n[e],a=n[e+1],s=0===e?new I(0,0):r.sub(i)._unit()._perp(),l=e===n.length-1?new I(0,0):a.sub(r)._unit()._perp(),c=s._add(l)._unit(),u=c.x*l.x+c.y*l.y;0!==u&&c._mult(1/u),o.push(c._mult(t)._add(r))}i.push(o)}return i}(r,c*a)),function(e,t,i){for(let r=0;r<t.length;r++){const n=t[r];if(e.length>=3)for(let t=0;t<n.length;t++)if(oa(e,n[t]))return!0;if(Qo(e,n,i))return!0}return!1}(s,r,l)}isTileClipped(){return!0}},symbol:Uc,background:class extends mn{constructor(e){super(e,$c)}},raster:class extends mn{constructor(e){super(e,qc)}}};class Wc{constructor(e){this._callback=e,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._callback()}),0))}remove(){delete this._channel,this._callback=()=>{}}}const Xc=6371008.8;class Hc{constructor(e,t){if(isNaN(e)||isNaN(t))throw new Error(`Invalid LngLat object: (${e}, ${t})`);if(this.lng=+e,this.lat=+t,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Hc(a(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(e){const t=Math.PI/180,i=this.lat*t,r=e.lat*t,n=Math.sin(i)*Math.sin(r)+Math.cos(i)*Math.cos(r)*Math.cos((e.lng-this.lng)*t);return Xc*Math.acos(Math.min(n,1))}toBounds(e=0){const t=360*e/40075017,i=t/Math.cos(Math.PI/180*this.lat);return new Yc(new Hc(this.lng-i,this.lat-t),new Hc(this.lng+i,this.lat+t))}static convert(e){if(e instanceof Hc)return e;if(Array.isArray(e)&&(2===e.length||3===e.length))return new Hc(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"==typeof e&&null!==e)return new Hc(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class Yc{constructor(e,t){e&&(t?this.setSouthWest(e).setNorthEast(t):4===e.length?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))}setNorthEast(e){return this._ne=e instanceof Hc?new Hc(e.lng,e.lat):Hc.convert(e),this}setSouthWest(e){return this._sw=e instanceof Hc?new Hc(e.lng,e.lat):Hc.convert(e),this}extend(e){const t=this._sw,i=this._ne;let r,n;if(e instanceof Hc)r=e,n=e;else{if(!(e instanceof Yc))return Array.isArray(e)?4===e.length||e.every(Array.isArray)?this.extend(Yc.convert(e)):this.extend(Hc.convert(e)):this;if(r=e._sw,n=e._ne,!r||!n)return this}return t||i?(t.lng=Math.min(r.lng,t.lng),t.lat=Math.min(r.lat,t.lat),i.lng=Math.max(n.lng,i.lng),i.lat=Math.max(n.lat,i.lat)):(this._sw=new Hc(r.lng,r.lat),this._ne=new Hc(n.lng,n.lat)),this}getCenter(){return new Hc((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Hc(this.getWest(),this.getNorth())}getSouthEast(){return new Hc(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:t,lat:i}=Hc.convert(e);let r=this._sw.lng<=t&&t<=this._ne.lng;return this._sw.lng>this._ne.lng&&(r=this._sw.lng>=t&&t>=this._ne.lng),this._sw.lat<=i&&i<=this._ne.lat&&r}static convert(e){return e instanceof Yc?e:e?new Yc(e):e}}const Kc=2*Math.PI*Xc;function Jc(e){return Kc*Math.cos(e*Math.PI/180)}function Qc(e){return(180+e)/360}function eu(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function tu(e,t){return e/Jc(t)}function iu(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}class ru{constructor(e,t,i=0){this.x=+e,this.y=+t,this.z=+i}static fromLngLat(e,t=0){const i=Hc.convert(e);return new ru(Qc(i.lng),eu(i.lat),tu(t,i.lat))}toLngLat(){return new Hc(360*this.x-180,iu(this.y))}toAltitude(){return this.z*Jc(iu(this.y))}meterInMercatorCoordinateUnits(){return 1/Kc*(e=iu(this.y),1/Math.cos(e*Math.PI/180));var e}}function nu(e,t,i){var r=2*Math.PI*6378137/256/Math.pow(2,i);return[e*r-2*Math.PI*6378137/2,t*r-2*Math.PI*6378137/2]}class ou{constructor(e,t,i){if(e<0||e>25||i<0||i>=Math.pow(2,e)||t<0||t>=Math.pow(2,e))throw new Error(`x=${t}, y=${i}, z=${e} outside of bounds. 0<=x<${Math.pow(2,e)}, 0<=y<${Math.pow(2,e)} 0<=z<=25 `);this.z=e,this.x=t,this.y=i,this.key=lu(0,e,e,t,i)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,t,i){const r=(o=this.y,a=this.z,s=nu(256*(n=this.x),256*(o=Math.pow(2,a)-o-1),a),l=nu(256*(n+1),256*(o+1),a),s[0]+","+s[1]+","+l[0]+","+l[1]);var n,o,a,s,l;const c=function(e,t,i){let r,n="";for(let o=e;o>0;o--)r=1<<o-1,n+=(t&r?1:0)+(i&r?2:0);return n}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===i?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,t>1?"@2x":"").replace(/{quadkey}/g,c).replace(/{bbox-epsg-3857}/g,r)}isChildOf(e){const t=this.z-e.z;return t>0&&e.x===this.x>>t&&e.y===this.y>>t}getTilePoint(e){const t=Math.pow(2,this.z);return new I((e.x*t-this.x)*$o,(e.y*t-this.y)*$o)}toString(){return`${this.z}/${this.x}/${this.y}`}}class au{constructor(e,t){this.wrap=e,this.canonical=t,this.key=lu(e,t.z,t.z,t.x,t.y)}}class su{constructor(e,t,i,r,n){if(e<i)throw new Error(`overscaledZ should be >= z; overscaledZ = ${e}; z = ${i}`);this.overscaledZ=e,this.wrap=t,this.canonical=new ou(i,+r,+n),this.key=lu(t,e,i,r,n)}clone(){return new su(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){if(e>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${e}; overscaledZ = ${this.overscaledZ}`);const t=this.canonical.z-e;return e>this.canonical.z?new su(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new su(e,this.wrap,e,this.canonical.x>>t,this.canonical.y>>t)}calculateScaledKey(e,t){if(e>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${e}; overscaledZ = ${this.overscaledZ}`);const i=this.canonical.z-e;return e>this.canonical.z?lu(this.wrap*+t,e,this.canonical.z,this.canonical.x,this.canonical.y):lu(this.wrap*+t,e,e,this.canonical.x>>i,this.canonical.y>>i)}isChildOf(e){if(e.wrap!==this.wrap)return!1;const t=this.canonical.z-e.canonical.z;return 0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t}children(e){if(this.overscaledZ>=e)return[new su(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const t=this.canonical.z+1,i=2*this.canonical.x,r=2*this.canonical.y;return[new su(t,this.wrap,t,i,r),new su(t,this.wrap,t,i+1,r),new su(t,this.wrap,t,i,r+1),new su(t,this.wrap,t,i+1,r+1)]}isLessThan(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}wrapped(){return new su(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new su(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new au(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(e){return this.canonical.getTilePoint(new ru(e.x-this.wrap,e.y))}}function lu(e,t,i,r,n){(e*=2)<0&&(e=-1*e-1);const o=1<<i;return(o*o*e+o*n+r).toString(36)+i.toString(36)+t.toString(36)}Dr("CanonicalTileID",ou),Dr("OverscaledTileID",su,{omit:["posMatrix"]});class cu{constructor(e,t,i){if(this.uid=e,t.height!==t.width)throw new RangeError("DEM tiles must be square");if(i&&"mapbox"!==i&&"terrarium"!==i)return void f(`"${i}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=t.height;const r=this.dim=t.height-2;this.data=new Uint32Array(t.data.buffer),this.encoding=i||"mapbox";for(let e=0;e<r;e++)this.data[this._idx(-1,e)]=this.data[this._idx(0,e)],this.data[this._idx(r,e)]=this.data[this._idx(r-1,e)],this.data[this._idx(e,-1)]=this.data[this._idx(e,0)],this.data[this._idx(e,r)]=this.data[this._idx(e,r-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(r,-1)]=this.data[this._idx(r-1,0)],this.data[this._idx(-1,r)]=this.data[this._idx(0,r-1)],this.data[this._idx(r,r)]=this.data[this._idx(r-1,r-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let e=0;e<r;e++)for(let t=0;t<r;t++){const i=this.get(e,t);i>this.max&&(this.max=i),i<this.min&&(this.min=i)}}get(e,t){const i=new Uint8Array(this.data.buffer),r=4*this._idx(e,t);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(i[r],i[r+1],i[r+2])}getUnpackVector(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(e,t){if(e<-1||e>=this.dim+1||t<-1||t>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(t+1)*this.stride+(e+1)}_unpackMapbox(e,t,i){return(256*e*256+256*t+i)/10-1e4}_unpackTerrarium(e,t,i){return 256*e+t+i/256-32768}getPixels(){return new Sa({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(e,t,i){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");let r=t*this.dim,n=t*this.dim+this.dim,o=i*this.dim,a=i*this.dim+this.dim;switch(t){case-1:r=n-1;break;case 1:n=r+1}switch(i){case-1:o=a-1;break;case 1:a=o+1}const s=-t*this.dim,l=-i*this.dim;for(let t=o;t<a;t++)for(let i=r;i<n;i++)this.data[this._idx(i,t)]=e.data[this._idx(i+s,t+l)]}}Dr("DEMData",cu);class uu{constructor(e){this._stringToNumber={},this._numberToString=[];for(let t=0;t<e.length;t++){const i=e[t];this._stringToNumber[i]=t,this._numberToString[t]=i}}encode(e){return this._stringToNumber[e]}decode(e){if(e>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${e} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[e]}}class hu{constructor(e,t,i,r,n){this.type="Feature",this._vectorTileFeature=e,e._z=t,e._x=i,e._y=r,this.properties=e.properties,this.id=n}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(e){this._geometry=e}toJSON(){const e={geometry:this.geometry};for(const t in this)"_geometry"!==t&&"_vectorTileFeature"!==t&&(e[t]=this[t]);return e}}class pu{constructor(e,t){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new Er($o,16,0),this.grid3D=new Er($o,16,0),this.featureIndexArray=new Jn,this.promoteId=t}insert(e,t,i,r,n,o){const a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(i,r,n);const s=o?this.grid3D:this.grid;for(let e=0;e<t.length;e++){const i=t[e],r=[1/0,1/0,-1/0,-1/0];for(let e=0;e<i.length;e++){const t=i[e];r[0]=Math.min(r[0],t.x),r[1]=Math.min(r[1],t.y),r[2]=Math.max(r[2],t.x),r[3]=Math.max(r[3],t.y)}r[0]<$o&&r[1]<$o&&r[2]>=0&&r[3]>=0&&s.insert(a,r[0],r[1],r[2],r[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new ws.VectorTile(new cl(this.rawTileData)).layers,this.sourceLayerCoder=new uu(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(e,t,i,r){this.loadVTLayers();const n=e.params||{},o=$o/e.tileSize/e.scale,a=Xi(n.filter),s=e.queryGeometry,l=e.queryPadding*o,c=fu(s),u=this.grid.query(c.minX-l,c.minY-l,c.maxX+l,c.maxY+l),h=fu(e.cameraQueryGeometry),p=this.grid3D.query(h.minX-l,h.minY-l,h.maxX+l,h.maxY+l,((t,i,r,n)=>function(e,t,i,r,n){for(const o of e)if(t<=o.x&&i<=o.y&&r>=o.x&&n>=o.y)return!0;const o=[new I(t,i),new I(t,n),new I(r,n),new I(r,i)];if(e.length>2)for(const t of o)if(oa(e,t))return!0;for(let t=0;t<e.length-1;t++)if(aa(e[t],e[t+1],o))return!0;return!1}(e.cameraQueryGeometry,t-l,i-l,r+l,n+l)));for(const e of p)u.push(e);u.sort(mu);const d={};let f;for(let l=0;l<u.length;l++){const c=u[l];if(c===f)continue;f=c;const h=this.featureIndexArray.get(c);let p=null;this.loadMatchingFeature(d,h.bucketIndex,h.sourceLayerIndex,h.featureIndex,a,n.layers,n.availableImages,t,i,r,((t,i,r)=>(p||(p=Zo(t)),i.queryIntersectsFeature(s,t,r,p,this.z,e.transform,o,e.pixelPosMatrix))))}return d}loadMatchingFeature(e,t,i,r,n,o,a,l,c,u,h){const p=this.bucketLayerIDs[t];if(o&&!function(e,t){for(let i=0;i<e.length;i++)if(t.indexOf(e[i])>=0)return!0;return!1}(o,p))return;const d=this.sourceLayerCoder.decode(i),f=this.vtLayers[d].feature(r);if(n.needGeometry){const e=Wo(f,!0);if(!n.filter(new Jr(this.tileID.overscaledZ),e,this.tileID.canonical))return}else if(!n.filter(new Jr(this.tileID.overscaledZ),f))return;const m=this.getId(f,d);for(let t=0;t<p.length;t++){const i=p[t];if(o&&o.indexOf(i)<0)continue;const n=l[i];if(!n)continue;let d={};m&&u&&(d=u.getState(n.sourceLayer||"_geojsonTileLayer",m));const g=s({},c[i]);g.paint=du(g.paint,n.paint,f,d,a),g.layout=du(g.layout,n.layout,f,d,a);const y=!h||h(f,n,d);if(!y)continue;const _=new hu(f,this.z,this.x,this.y,m);_.layer=g;let x=e[i];void 0===x&&(x=e[i]=[]),x.push({featureIndex:r,feature:_,intersectionZ:y})}}lookupSymbolFeatures(e,t,i,r,n,o,a,s){const l={};this.loadVTLayers();const c=Xi(n);for(const n of e)this.loadMatchingFeature(l,i,r,n,c,o,a,s,t);return l}hasLayer(e){for(const t of this.bucketLayerIDs)for(const i of t)if(e===i)return!0;return!1}getId(e,t){let i=e.id;return this.promoteId&&(i=e.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[t]],"boolean"==typeof i&&(i=Number(i))),i}}function du(e,t,i,r,n){return u(e,((e,o)=>{const a=t instanceof sn?t.get(o):null;return a&&a.evaluate?a.evaluate(i,r,n):a}))}function fu(e){let t=1/0,i=1/0,r=-1/0,n=-1/0;for(const o of e)t=Math.min(t,o.x),i=Math.min(i,o.y),r=Math.max(r,o.x),n=Math.max(n,o.y);return{minX:t,minY:i,maxX:r,maxY:n}}function mu(e,t){return t-e}var gu;Dr("FeatureIndex",pu,{omit:["rawTileData","sourceLayerCoder"]}),e.PerformanceMarkers=void 0,(gu=e.PerformanceMarkers||(e.PerformanceMarkers={})).create="create",gu.load="load",gu.fullLoad="fullLoad";let yu=null,_u=[];const xu=1e3/30,bu={mark(e){performance.mark(e)},frame(e){const t=e;null!=yu&&_u.push(t-yu),yu=t},clearMetrics(){yu=null,_u=[],performance.clearMeasures("loadTime"),performance.clearMeasures("fullLoadTime");for(const t in e.PerformanceMarkers)performance.clearMarks(e.PerformanceMarkers[t])},getPerformanceMetrics(){performance.measure("loadTime",e.PerformanceMarkers.create,e.PerformanceMarkers.load),performance.measure("fullLoadTime",e.PerformanceMarkers.create,e.PerformanceMarkers.fullLoad);const t=performance.getEntriesByName("loadTime")[0].duration,i=performance.getEntriesByName("fullLoadTime")[0].duration,r=_u.length,n=1/(_u.reduce(((e,t)=>e+t),0)/r/1e3),o=_u.filter((e=>e>xu)).reduce(((e,t)=>e+(t-xu)/xu),0);return{loadTime:t,fullLoadTime:i,fps:n,percentDroppedFrames:o/(r+o)*100}}};e.AJAXError=V,e.ARRAY_TYPE=da,e.Actor=class{constructor(e,t,i){this.target=e,this.parent=t,this.mapId=i,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},c(["receive","process"],this),this.invoker=new Wc(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=y()?e:window}send(e,t,i,r,n=!1){const o=Math.round(1e18*Math.random()).toString(36).substring(0,10);i&&(this.callbacks[o]=i);const a=w(this.globalScope)?void 0:[];return this.target.postMessage({id:o,type:e,hasCallback:!!i,targetMapId:r,mustQueue:n,sourceMapId:this.mapId,data:Cr(t,a)},a),{cancel:()=>{i&&delete this.callbacks[o],this.target.postMessage({id:o,type:"<cancel>",targetMapId:r,sourceMapId:this.mapId})}}}receive(e){const t=e.data,i=t.id;if(i&&(!t.targetMapId||this.mapId===t.targetMapId))if("<cancel>"===t.type){delete this.tasks[i];const e=this.cancelCallbacks[i];delete this.cancelCallbacks[i],e&&e()}else y()||t.mustQueue?(this.tasks[i]=t,this.taskQueue.push(i),this.invoker.trigger()):this.processTask(i,t)}process(){if(!this.taskQueue.length)return;const e=this.taskQueue.shift(),t=this.tasks[e];delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),t&&this.processTask(e,t)}processTask(e,t){if("<response>"===t.type){const i=this.callbacks[e];delete this.callbacks[e],i&&(t.error?i(Mr(t.error)):i(null,Mr(t.data)))}else{let i=!1;const r=w(this.globalScope)?void 0:[],n=t.hasCallback?(t,n)=>{i=!0,delete this.cancelCallbacks[e],this.target.postMessage({id:e,type:"<response>",sourceMapId:this.mapId,error:t?Cr(t):null,data:Cr(n,r)},r)}:e=>{i=!0};let o=null;const a=Mr(t.data);if(this.parent[t.type])o=this.parent[t.type](t.sourceMapId,a,n);else if(this.parent.getWorkerSource){const e=t.type.split(".");o=this.parent.getWorkerSource(t.sourceMapId,e[0],a.source)[e[1]](a,n)}else n(new Error(`Could not find function ${t.type}`));!i&&o&&o.cancel&&(this.cancelCallbacks[e]=o.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},e.AlphaImage=Ma,e.CanonicalTileID=ou,e.CollisionBoxArray=qn,e.CollisionCircleLayoutArray=class extends Rn{},e.Color=ze,e.DEMData=cu,e.DataConstantProperty=ln,e.DictionaryCoder=uu,e.EXTENT=$o,e.ErrorEvent=te,e.EvaluationParameters=Jr,e.Event=ee,e.Evented=ie,e.FeatureIndex=pu,e.FillBucket=gs,e.FillExtrusionBucket=Fs,e.GeoJSONFeature=hu,e.ImageAtlas=Fl,e.ImagePosition=Bl,e.LineBucket=Ys,e.LineStripIndexArray=class extends Un{},e.LngLat=Hc,e.LngLatBounds=Yc,e.MercatorCoordinate=ru,e.ONE_EM=ll,e.OverscaledTileID=su,e.PerformanceUtils=bu,e.PosArray=Qn,e.Properties=dn,e.QuadTriangleArray=class extends zn{},e.RGBAImage=Sa,e.RasterBoundsArray=class extends wn{},e.RequestPerformance=class{constructor(e){this._marks={start:[e.url,"start"].join("#"),end:[e.url,"end"].join("#"),measure:e.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let e=performance.getEntriesByName(this._marks.measure);return 0===e.length&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),e=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),e}},e.ResourceType=U,e.SegmentVector=go,e.SymbolBucket=Fc,e.Transitionable=tn,e.TriangleIndexArray=ho,e.Uniform1f=Mo,e.Uniform1i=class extends Co{constructor(e,t){super(e,t),this.current=0}set(e){this.current!==e&&(this.current=e,this.gl.uniform1i(this.location,e))}},e.Uniform2f=class extends Co{constructor(e,t){super(e,t),this.current=[0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]||(this.current=e,this.gl.uniform2f(this.location,e[0],e[1]))}},e.Uniform3f=class extends Co{constructor(e,t){super(e,t),this.current=[0,0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]||(this.current=e,this.gl.uniform3f(this.location,e[0],e[1],e[2]))}},e.Uniform4f=So,e.UniformColor=Po,e.UniformMatrix4f=class extends Co{constructor(e,t){super(e,t),this.current=Ro}set(e){if(e[12]!==this.current[12]||e[0]!==this.current[0])return this.current=e,void this.gl.uniformMatrix4fv(this.location,!1,e);for(let t=1;t<16;t++)if(e[t]!==this.current[t]){this.current=e,this.gl.uniformMatrix4fv(this.location,!1,e);break}}},e.UnwrappedTileID=au,e.ValidationError=ne,e.ZoomHistory=Sr,e.add=function(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e},e.addDynamicAttributes=kc,e.asyncAll=function(e,t,i){if(!e.length)return i(null,[]);let r=e.length;const n=new Array(e.length);let o=null;e.forEach(((e,a)=>{t(e,((e,t)=>{e&&(o=e),n[a]=t,0==--r&&i(o,n)}))}))},e.bezier=r,e.bindAll=c,e.cacheEntryPossiblyAdded=function(e){z++,z>R&&(e.getActor().send("enforceCacheSizeLimit",P),z=0)},e.clamp=o,e.clearTileCache=function(e){const t=caches.delete(C);e&&t.catch(e).then((()=>e()))},e.clipLine=uc,e.clone=function(e){var t=new da(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.clone$1=p,e.clone$2=function(e){var t=new da(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},e.collisionCircleLayout=ol,e.config=T,e.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},e.create=function(){var e=new da(16);return da!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},e.create$1=fa,e.createExpression=zi,e.createFilter=Xi,e.createLayout=xn,e.createStyleLayer=function(e){return"custom"===e.type?new jc(e):new Zc[e.type](e)},e.cross=function(e,t,i){var r=t[0],n=t[1],o=t[2],a=i[0],s=i[1],l=i[2];return e[0]=n*l-o*s,e[1]=o*a-r*l,e[2]=r*s-n*a,e},e.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},e.dot$1=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},e.ease=n,e.emitValidationErrors=Ar,e.enforceCacheSizeLimit=function(e){k(),M&&M.then((t=>{t.keys().then((i=>{for(let r=0;r<i.length-e;r++)t.delete(i[r])}))}))},e.equals=function(e,t){var i=e[0],r=e[1],n=e[2],o=e[3],a=e[4],s=e[5],l=e[6],c=e[7],u=e[8],h=e[9],p=e[10],d=e[11],f=e[12],m=e[13],g=e[14],y=e[15],_=t[0],x=t[1],b=t[2],v=t[3],w=t[4],A=t[5],E=t[6],I=t[7],D=t[8],T=t[9],C=t[10],M=t[11],S=t[12],P=t[13],R=t[14],k=t[15];return Math.abs(i-_)<=pa*Math.max(1,Math.abs(i),Math.abs(_))&&Math.abs(r-x)<=pa*Math.max(1,Math.abs(r),Math.abs(x))&&Math.abs(n-b)<=pa*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(o-v)<=pa*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(a-w)<=pa*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(s-A)<=pa*Math.max(1,Math.abs(s),Math.abs(A))&&Math.abs(l-E)<=pa*Math.max(1,Math.abs(l),Math.abs(E))&&Math.abs(c-I)<=pa*Math.max(1,Math.abs(c),Math.abs(I))&&Math.abs(u-D)<=pa*Math.max(1,Math.abs(u),Math.abs(D))&&Math.abs(h-T)<=pa*Math.max(1,Math.abs(h),Math.abs(T))&&Math.abs(p-C)<=pa*Math.max(1,Math.abs(p),Math.abs(C))&&Math.abs(d-M)<=pa*Math.max(1,Math.abs(d),Math.abs(M))&&Math.abs(f-S)<=pa*Math.max(1,Math.abs(f),Math.abs(S))&&Math.abs(m-P)<=pa*Math.max(1,Math.abs(m),Math.abs(P))&&Math.abs(g-R)<=pa*Math.max(1,Math.abs(g),Math.abs(R))&&Math.abs(y-k)<=pa*Math.max(1,Math.abs(y),Math.abs(k))},e.evaluateSizeForFeature=function(e,{uSize:t,uSizeT:i},{lowerSize:r,upperSize:n}){return"source"===e.kind?r/ec:"composite"===e.kind?It(r/ec,n/ec,i):t},e.evaluateSizeForZoom=function(e,t){let i=0,r=0;if("constant"===e.kind)r=e.layoutSize;else if("source"!==e.kind){const{interpolationType:n,minZoom:a,maxZoom:s}=e,l=n?o(qt.interpolationFactor(n,t,a,s),0,1):0;"camera"===e.kind?r=It(e.minSize,e.maxSize,l):i=l}return{uSizeT:i,uSize:r}},e.evaluateVariableOffset=Ac,e.evented=Xr,e.exported=E,e.exported$1=L,e.extend=s,e.filterObject=h,e.fromRotation=function(e,t){var i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=i,e[2]=0,e[3]=-i,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},e.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},e.getAnchorAlignment=Yl,e.getAnchorJustification=Ec,e.getArrayBuffer=Z,e.getImage=K,e.getJSON=function(e,t){return j(s(e,{type:"json"}),t)},e.getOverlapMode=Vc,e.getRTLTextPluginStatus=Hr,e.getReferrer=$,e.getVideo=function(e,t){const i=window.document.createElement("video");i.muted=!0,i.onloadstart=function(){t(null,i)};for(let t=0;t<e.length;t++){const r=window.document.createElement("source");W(e[t])||(i.crossOrigin="Anonymous"),r.src=e[t],i.appendChild(r)}return{cancel:()=>{}}},e.identity=ma,e.invert=function(e,t){var i=t[0],r=t[1],n=t[2],o=t[3],a=t[4],s=t[5],l=t[6],c=t[7],u=t[8],h=t[9],p=t[10],d=t[11],f=t[12],m=t[13],g=t[14],y=t[15],_=i*s-r*a,x=i*l-n*a,b=i*c-o*a,v=r*l-n*s,w=r*c-o*s,A=n*c-o*l,E=u*m-h*f,I=u*g-p*f,D=u*y-d*f,T=h*g-p*m,C=h*y-d*m,M=p*y-d*g,S=_*M-x*C+b*T+v*D-w*I+A*E;return S?(e[0]=(s*M-l*C+c*T)*(S=1/S),e[1]=(n*C-r*M-o*T)*S,e[2]=(m*A-g*w+y*v)*S,e[3]=(p*w-h*A-d*v)*S,e[4]=(l*D-a*M-c*I)*S,e[5]=(i*M-n*D+o*I)*S,e[6]=(g*b-f*A-y*x)*S,e[7]=(u*A-p*b+d*x)*S,e[8]=(a*C-s*D+c*E)*S,e[9]=(r*D-i*C-o*E)*S,e[10]=(f*w-m*b+y*_)*S,e[11]=(h*b-u*w-d*_)*S,e[12]=(s*I-a*T-l*E)*S,e[13]=(i*T-r*I+n*E)*S,e[14]=(m*x-f*v-g*_)*S,e[15]=(u*v-h*x+p*_)*S,e):null},e.isImageBitmap=A,e.isSafari=w,e.isWorker=y,e.keysDifference=function(e,t){const i=[];for(const r in e)r in t||i.push(r);return i},e.lazyLoadRTLTextPlugin=function(){Kr.isLoading()||Kr.isLoaded()||"deferred"!==Hr()||Yr()},e.makeRequest=j,e.mapObject=u,e.mercatorXfromLng=Qc,e.mercatorYfromLat=eu,e.mercatorZfromAltitude=tu,e.mul=_a,e.mul$1=function(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e[2]=t[2]*i[2],e[3]=t[3]*i[3],e},e.multiply=ga,e.nextPowerOfTwo=function(e){return e<=1?1:Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},e.normalize=function(e,t){var i=t[0],r=t[1],n=t[2],o=i*i+r*r+n*n;return o>0&&(o=1/Math.sqrt(o)),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e},e.number=It,e.ortho=function(e,t,i,r,n,o,a){var s=1/(t-i),l=1/(r-n),c=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+i)*s,e[13]=(n+r)*l,e[14]=(a+o)*c,e[15]=1,e},e.parseCacheControl=_,e.parseGlyphPbf=function(e){return new cl(e).readFields(Rl,[])},e.pbf=cl,e.performSymbolLayout=function(t){t.bucket.createArrays(),t.bucket.tilePixelRatio=$o/(512*t.bucket.overscaling),t.bucket.compareText={},t.bucket.iconsNeedLinear=!1;const i=t.bucket.layers[0].layout,r=t.bucket.layers[0]._unevaluatedLayout._values,n={layoutIconSize:r["icon-size"].possiblyEvaluate(new Jr(t.bucket.zoom+1),t.canonical),layoutTextSize:r["text-size"].possiblyEvaluate(new Jr(t.bucket.zoom+1),t.canonical),textMaxSize:r["text-size"].possiblyEvaluate(new Jr(18))};if("composite"===t.bucket.textSizeData.kind){const{minZoom:e,maxZoom:i}=t.bucket.textSizeData;n.compositeTextSizes=[r["text-size"].possiblyEvaluate(new Jr(e),t.canonical),r["text-size"].possiblyEvaluate(new Jr(i),t.canonical)]}if("composite"===t.bucket.iconSizeData.kind){const{minZoom:e,maxZoom:i}=t.bucket.iconSizeData;n.compositeIconSizes=[r["icon-size"].possiblyEvaluate(new Jr(e),t.canonical),r["icon-size"].possiblyEvaluate(new Jr(i),t.canonical)]}const o=i.get("text-line-height")*ll,a="viewport"!==i.get("text-rotation-alignment")&&"point"!==i.get("symbol-placement"),s=i.get("text-keep-upright"),l=i.get("text-size");for(const r of t.bucket.features){const c=i.get("text-font").evaluate(r,{},t.canonical).join(","),u=l.evaluate(r,{},t.canonical),h=n.layoutTextSize.evaluate(r,{},t.canonical),p=n.layoutIconSize.evaluate(r,{},t.canonical),d={horizontal:{},vertical:void 0},m=r.text;let g,y=[0,0];if(m){const n=m.toString(),l=i.get("text-letter-spacing").evaluate(r,{},t.canonical)*ll,p=kr(n)?l:0,f=i.get("text-anchor").evaluate(r,{},t.canonical),g=i.get("text-variable-anchor");if(!g){const e=i.get("text-radial-offset").evaluate(r,{},t.canonical);y=e?Ac(f,[e*ll,wc]):i.get("text-offset").evaluate(r,{},t.canonical).map((e=>e*ll))}let _=a?"center":i.get("text-justify").evaluate(r,{},t.canonical);const x=i.get("symbol-placement"),b="point"===x?i.get("text-max-width").evaluate(r,{},t.canonical)*ll:0,v=()=>{t.bucket.allowVerticalPlacement&&Rr(n)&&(d.vertical=Ul(m,t.glyphMap,t.glyphPositions,t.imagePositions,c,b,o,f,"left",p,y,e.WritingMode.vertical,!0,x,h,u))};if(!a&&g){const i="auto"===_?g.map((e=>Ec(e))):[_];let r=!1;for(let n=0;n<i.length;n++){const a=i[n];if(!d.horizontal[a])if(r)d.horizontal[a]=d.horizontal[0];else{const i=Ul(m,t.glyphMap,t.glyphPositions,t.imagePositions,c,b,o,"center",a,p,y,e.WritingMode.horizontal,!1,x,h,u);i&&(d.horizontal[a]=i,r=1===i.positionedLines.length)}}v()}else{"auto"===_&&(_=Ec(f));const i=Ul(m,t.glyphMap,t.glyphPositions,t.imagePositions,c,b,o,f,_,p,y,e.WritingMode.horizontal,!1,x,h,u);i&&(d.horizontal[_]=i),v(),Rr(n)&&a&&s&&(d.vertical=Ul(m,t.glyphMap,t.glyphPositions,t.imagePositions,c,b,o,f,_,p,y,e.WritingMode.vertical,!1,x,h,u))}}let _=!1;if(r.icon&&r.icon.name){const e=t.imageMap[r.icon.name];e&&(g=Jl(t.imagePositions[r.icon.name],i.get("icon-offset").evaluate(r,{},t.canonical),i.get("icon-anchor").evaluate(r,{},t.canonical)),_=!!e.sdf,void 0===t.bucket.sdfIcons?t.bucket.sdfIcons=_:t.bucket.sdfIcons!==_&&f("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(e.pixelRatio!==t.bucket.pixelRatio||0!==i.get("icon-rotate").constantOr(1))&&(t.bucket.iconsNeedLinear=!0))}const x=Cc(d.horizontal)||d.vertical;t.bucket.iconsInText=!!x&&x.iconsInText,(x||g)&&Ic(t.bucket,r,d,g,t.imageMap,n,h,p,y,_,t.canonical)}t.showCollisionBoxes&&t.bucket.generateCollisionDebugBuffers()},e.perspective=function(e,t,i,r,n){var o,a=1/Math.tan(t/2);return e[0]=a/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=n&&n!==1/0?(e[10]=(n+r)*(o=1/(r-n)),e[14]=2*n*r*o):(e[10]=-1,e[14]=-2*r),e},e.pick=function(e,t){const i={};for(let r=0;r<t.length;r++){const n=t[r];n in e&&(i[n]=e[n])}return i},e.plugin=Kr,e.pointGeometry=I,e.polygonIntersectsPolygon=Yo,e.potpack=Ll,e.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],e.register=Dr,e.registerForPluginStateChange=function(e){return e({pluginStatus:qr,pluginURL:jr}),Xr.on("pluginStateChange",e),e},e.renderColorRamp=Pa,e.rotateX=function(e,t,i){var r=Math.sin(i),n=Math.cos(i),o=t[4],a=t[5],s=t[6],l=t[7],c=t[8],u=t[9],h=t[10],p=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*n+c*r,e[5]=a*n+u*r,e[6]=s*n+h*r,e[7]=l*n+p*r,e[8]=c*n-o*r,e[9]=u*n-a*r,e[10]=h*n-s*r,e[11]=p*n-l*r,e},e.rotateZ=function(e,t,i){var r=Math.sin(i),n=Math.cos(i),o=t[0],a=t[1],s=t[2],l=t[3],c=t[4],u=t[5],h=t[6],p=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*n+c*r,e[1]=a*n+u*r,e[2]=s*n+h*r,e[3]=l*n+p*r,e[4]=c*n-o*r,e[5]=u*n-a*r,e[6]=h*n-s*r,e[7]=p*n-l*r,e},e.scale=function(e,t,i){var r=i[0],n=i[1],o=i[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},e.scale$1=function(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e},e.setCacheLimits=function(e,t){P=e,R=t},e.setRTLTextPlugin=function(e,t,i=!1){if(qr===Gr||qr===Ur||qr===Vr)throw new Error("setRTLTextPlugin cannot be called multiple times.");jr=E.resolveURL(e),qr=Gr,$r=t,Wr(),i||Yr()},e.spec=re,e.sphericalToCartesian=function([e,t,i]){return t+=90,t*=Math.PI/180,i*=Math.PI/180,{x:e*Math.cos(t)*Math.sin(i),y:e*Math.sin(t)*Math.sin(i),z:e*Math.cos(i)}},e.sqrLen=function(e){var t=e[0],i=e[1];return t*t+i*i},e.sub=function(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e},e.toEvaluationFeature=Wo,e.transformMat3=function(e,t,i){var r=t[0],n=t[1],o=t[2];return e[0]=r*i[0]+n*i[3]+o*i[6],e[1]=r*i[1]+n*i[4]+o*i[7],e[2]=r*i[2]+n*i[5]+o*i[8],e},e.transformMat4=va,e.transformMat4$1=function(e,t,i){var r=t[0],n=t[1];return e[0]=i[0]*r+i[4]*n+i[12],e[1]=i[1]*r+i[5]*n+i[13],e},e.translate=function(e,t,i){var r,n,o,a,s,l,c,u,h,p,d,f,m=i[0],g=i[1],y=i[2];return t===e?(e[12]=t[0]*m+t[4]*g+t[8]*y+t[12],e[13]=t[1]*m+t[5]*g+t[9]*y+t[13],e[14]=t[2]*m+t[6]*g+t[10]*y+t[14],e[15]=t[3]*m+t[7]*g+t[11]*y+t[15]):(n=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],h=t[8],p=t[9],d=t[10],f=t[11],e[0]=r=t[0],e[1]=n,e[2]=o,e[3]=a,e[4]=s,e[5]=l,e[6]=c,e[7]=u,e[8]=h,e[9]=p,e[10]=d,e[11]=f,e[12]=r*m+s*g+h*y+t[12],e[13]=n*m+l*g+p*y+t[13],e[14]=o*m+c*g+d*y+t[14],e[15]=a*m+u*g+f*y+t[15]),e},e.triggerPluginCompletionEvent=Zr,e.unicodeBlockLookup=Pr,e.uniqueId=function(){return l++},e.validateCustomStyleLayer=function(e){const t=[],i=e.id;return void 0===i&&t.push({message:`layers.${i}: missing required property "id"`}),void 0===e.render&&t.push({message:`layers.${i}: missing required method "render"`}),e.renderingMode&&"2d"!==e.renderingMode&&"3d"!==e.renderingMode&&t.push({message:`layers.${i}: property "renderingMode" must be either "2d" or "3d"`}),t},e.validateLight=br,e.validateStyle=xr,e.vectorTile=ws,e.warnOnce=f,e.wrap=a})),r(["./shared"],(function(e){function t(e){const i=typeof e;if("number"===i||"boolean"===i||"string"===i||null==e)return JSON.stringify(e);if(Array.isArray(e)){let i="[";for(const r of e)i+=`${t(r)},`;return`${i}]`}const r=Object.keys(e).sort();let n="{";for(let i=0;i<r.length;i++)n+=`${JSON.stringify(r[i])}:${t(e[r[i]])},`;return`${n}}`}function i(i){let r="";for(const n of e.refProperties)r+=`/${t(i[n])}`;return r}class r{constructor(e){this.keyCache={},e&&this.replace(e)}replace(e){this._layerConfigs={},this._layers={},this.update(e,[])}update(t,r){for(const i of t){this._layerConfigs[i.id]=i;const t=this._layers[i.id]=e.createStyleLayer(i);t._featureFilter=e.createFilter(t.filter),this.keyCache[i.id]&&delete this.keyCache[i.id]}for(const e of r)delete this.keyCache[e],delete this._layerConfigs[e],delete this._layers[e];this.familiesBySource={};const n=function(e,t){const r={};for(let n=0;n<e.length;n++){const o=t&&t[e[n].id]||i(e[n]);t&&(t[e[n].id]=o);let a=r[o];a||(a=r[o]=[]),a.push(e[n])}const n=[];for(const e in r)n.push(r[e]);return n}(Object.values(this._layerConfigs),this.keyCache);for(const e of n){const t=e.map((e=>this._layers[e.id])),i=t[0];if("none"===i.visibility)continue;const r=i.source||"";let n=this.familiesBySource[r];n||(n=this.familiesBySource[r]={});const o=i.sourceLayer||"_geojsonTileLayer";let a=n[o];a||(a=n[o]=[]),a.push(t)}}}class n{constructor(t){const i={},r=[];for(const e in t){const n=t[e],o=i[e]={};for(const e in n){const t=n[+e];if(!t||0===t.bitmap.width||0===t.bitmap.height)continue;const i={x:0,y:0,w:t.bitmap.width+2,h:t.bitmap.height+2};r.push(i),o[e]={rect:i,metrics:t.metrics}}}const{w:n,h:o}=e.potpack(r),a=new e.AlphaImage({width:n||1,height:o||1});for(const r in t){const n=t[r];for(const t in n){const o=n[+t];if(!o||0===o.bitmap.width||0===o.bitmap.height)continue;const s=i[r][t].rect;e.AlphaImage.copy(o.bitmap,a,{x:0,y:0},{x:s.x+1,y:s.y+1},o.bitmap)}}this.image=a,this.positions=i}}e.register("GlyphAtlas",n);class o{constructor(t){this.tileID=new e.OverscaledTileID(t.tileID.overscaledZ,t.tileID.wrap,t.tileID.canonical.z,t.tileID.canonical.x,t.tileID.canonical.y),this.uid=t.uid,this.zoom=t.zoom,this.pixelRatio=t.pixelRatio,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=t.showCollisionBoxes,this.collectResourceTiming=!!t.collectResourceTiming,this.returnDependencies=!!t.returnDependencies,this.promoteId=t.promoteId}parse(t,i,r,o,s){this.status="parsing",this.data=t,this.collisionBoxArray=new e.CollisionBoxArray;const l=new e.DictionaryCoder(Object.keys(t.layers).sort()),c=new e.FeatureIndex(this.tileID,this.promoteId);c.bucketLayerIDs=[];const u={},h={featureIndex:c,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:r},p=i.familiesBySource[this.source];for(const i in p){const n=t.layers[i];if(!n)continue;1===n.version&&e.warnOnce(`Vector tile source "${this.source}" layer "${i}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const o=l.encode(i),s=[];for(let e=0;e<n.length;e++){const t=n.feature(e),r=c.getId(t,i);s.push({feature:t,id:r,index:e,sourceLayerIndex:o})}for(const t of p[i]){const i=t[0];i.source!==this.source&&e.warnOnce(`layer.source = ${i.source} does not equal this.source = ${this.source}`),i.minzoom&&this.zoom<Math.floor(i.minzoom)||i.maxzoom&&this.zoom>=i.maxzoom||"none"!==i.visibility&&(a(t,this.zoom,r),(u[i.id]=i.createBucket({index:c.bucketLayerIDs.length,layers:t,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:o,sourceID:this.source})).populate(s,h,this.tileID.canonical),c.bucketLayerIDs.push(t.map((e=>e.id))))}}let d,f,m,g;const y=e.mapObject(h.glyphDependencies,(e=>Object.keys(e).map(Number)));Object.keys(y).length?o.send("getGlyphs",{uid:this.uid,stacks:y},((e,t)=>{d||(d=e,f=t,b.call(this))})):f={};const _=Object.keys(h.iconDependencies);_.length?o.send("getImages",{icons:_,source:this.source,tileID:this.tileID,type:"icons"},((e,t)=>{d||(d=e,m=t,b.call(this))})):m={};const x=Object.keys(h.patternDependencies);function b(){if(d)return s(d);if(f&&m&&g){const t=new n(f),i=new e.ImageAtlas(m,g);for(const n in u){const o=u[n];o instanceof e.SymbolBucket?(a(o.layers,this.zoom,r),e.performSymbolLayout({bucket:o,glyphMap:f,glyphPositions:t.positions,imageMap:m,imagePositions:i.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):o.hasPattern&&(o instanceof e.LineBucket||o instanceof e.FillBucket||o instanceof e.FillExtrusionBucket)&&(a(o.layers,this.zoom,r),o.addFeatures(h,this.tileID.canonical,i.patternPositions))}this.status="done",s(null,{buckets:Object.values(u).filter((e=>!e.isEmpty())),featureIndex:c,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:t.image,imageAtlas:i,glyphMap:this.returnDependencies?f:null,iconMap:this.returnDependencies?m:null,glyphPositions:this.returnDependencies?t.positions:null})}}x.length?o.send("getImages",{icons:x,source:this.source,tileID:this.tileID,type:"patterns"},((e,t)=>{d||(d=e,g=t,b.call(this))})):g={},b.call(this)}}function a(t,i,r){const n=new e.EvaluationParameters(i);for(const e of t)e.recalculate(n,r)}function s(t,i){const r=e.getArrayBuffer(t.request,((t,r,n,o)=>{t?i(t):r&&i(null,{vectorTile:new e.vectorTile.VectorTile(new e.pbf(r)),rawData:r,cacheControl:n,expires:o})}));return()=>{r.cancel(),i()}}class l{constructor(e,t,i,r){this.actor=e,this.layerIndex=t,this.availableImages=i,this.loadVectorData=r||s,this.loading={},this.loaded={}}loadTile(t,i){const r=t.uid;this.loading||(this.loading={});const n=!!(t&&t.request&&t.request.collectResourceTiming)&&new e.RequestPerformance(t.request),a=this.loading[r]=new o(t);a.abort=this.loadVectorData(t,((t,o)=>{if(delete this.loading[r],t||!o)return a.status="done",this.loaded[r]=a,i(t);const s=o.rawData,l={};o.expires&&(l.expires=o.expires),o.cacheControl&&(l.cacheControl=o.cacheControl);const c={};if(n){const e=n.finish();e&&(c.resourceTiming=JSON.parse(JSON.stringify(e)))}a.vectorTile=o.vectorTile,a.parse(o.vectorTile,this.layerIndex,this.availableImages,this.actor,((t,r)=>{if(t||!r)return i(t);i(null,e.extend({rawTileData:s.slice(0)},r,l,c))})),this.loaded=this.loaded||{},this.loaded[r]=a}))}reloadTile(e,t){const i=this.loaded,r=e.uid,n=this;if(i&&i[r]){const o=i[r];o.showCollisionBoxes=e.showCollisionBoxes;const a=(e,i)=>{const r=o.reloadCallback;r&&(delete o.reloadCallback,o.parse(o.vectorTile,n.layerIndex,this.availableImages,n.actor,r)),t(e,i)};"parsing"===o.status?o.reloadCallback=a:"done"===o.status&&(o.vectorTile?o.parse(o.vectorTile,this.layerIndex,this.availableImages,this.actor,a):a())}}abortTile(e,t){const i=this.loading,r=e.uid;i&&i[r]&&i[r].abort&&(i[r].abort(),delete i[r]),t()}removeTile(e,t){const i=this.loaded,r=e.uid;i&&i[r]&&delete i[r],t()}}class c{constructor(){this.loaded={}}loadTile(t,i){const{uid:r,encoding:n,rawImageData:o}=t,a=e.isImageBitmap(o)?this.getImageData(o):o,s=new e.DEMData(r,a,n);this.loaded=this.loaded||{},this.loaded[r]=s,i(null,s)}getImageData(t){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(t.width,t.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=t.width,this.offscreenCanvas.height=t.height,this.offscreenCanvasContext.drawImage(t,0,0,t.width,t.height);const i=this.offscreenCanvasContext.getImageData(-1,-1,t.width+2,t.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new e.RGBAImage({width:i.width,height:i.height},i.data)}removeTile(e){const t=this.loaded,i=e.uid;t&&t[i]&&delete t[i]}}var u=function e(t,i){var r,n=t&&t.type;if("FeatureCollection"===n)for(r=0;r<t.features.length;r++)e(t.features[r],i);else if("GeometryCollection"===n)for(r=0;r<t.geometries.length;r++)e(t.geometries[r],i);else if("Feature"===n)e(t.geometry,i);else if("Polygon"===n)h(t.coordinates,i);else if("MultiPolygon"===n)for(r=0;r<t.coordinates.length;r++)h(t.coordinates[r],i);return t};function h(e,t){if(0!==e.length){p(e[0],t);for(var i=1;i<e.length;i++)p(e[i],!t)}}function p(e,t){for(var i=0,r=0,n=0,o=e.length,a=o-1;n<o;a=n++){var s=(e[n][0]-e[a][0])*(e[a][1]+e[n][1]),l=i+s;r+=Math.abs(i)>=Math.abs(s)?i-l+s:s-l+i,i=l}i+r>=0!=!!t&&e.reverse()}const d=e.vectorTile.VectorTileFeature.prototype.toGeoJSON;class f{constructor(t){this._feature=t,this.extent=e.EXTENT,this.type=t.type,this.properties=t.tags,"id"in t&&!isNaN(t.id)&&(this.id=parseInt(t.id,10))}loadGeometry(){if(1===this._feature.type){const t=[];for(const i of this._feature.geometry)t.push([new e.pointGeometry(i[0],i[1])]);return t}{const t=[];for(const i of this._feature.geometry){const r=[];for(const t of i)r.push(new e.pointGeometry(t[0],t[1]));t.push(r)}return t}}toGeoJSON(e,t,i){return d.call(this,e,t,i)}}class m{constructor(t){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.EXTENT,this.length=t.length,this._features=t}feature(e){return new f(this._features[e])}}var g={exports:{}},y=e.pointGeometry,_=e.vectorTile.VectorTileFeature,x=b;function b(e,t){this.options=t||{},this.features=e,this.length=e.length}function v(e,t){this.id="number"==typeof e.id?e.id:void 0,this.type=e.type,this.rawGeometry=1===e.type?[e.geometry]:e.geometry,this.properties=e.tags,this.extent=t||4096}b.prototype.feature=function(e){return new v(this.features[e],this.options.extent)},v.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var t=0;t<e.length;t++){for(var i=e[t],r=[],n=0;n<i.length;n++)r.push(new y(i[n][0],i[n][1]));this.geometry.push(r)}return this.geometry},v.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var e=this.geometry,t=1/0,i=-1/0,r=1/0,n=-1/0,o=0;o<e.length;o++)for(var a=e[o],s=0;s<a.length;s++){var l=a[s];t=Math.min(t,l.x),i=Math.max(i,l.x),r=Math.min(r,l.y),n=Math.max(n,l.y)}return[t,r,i,n]},v.prototype.toGeoJSON=_.prototype.toGeoJSON;var w=e.pbf,A=x;function E(e){var t=new w;return function(e,t){for(var i in e.layers)t.writeMessage(3,I,e.layers[i])}(e,t),t.finish()}function I(e,t){var i;t.writeVarintField(15,e.version||1),t.writeStringField(1,e.name||""),t.writeVarintField(5,e.extent||4096);var r={keys:[],values:[],keycache:{},valuecache:{}};for(i=0;i<e.length;i++)r.feature=e.feature(i),t.writeMessage(2,D,r);var n=r.keys;for(i=0;i<n.length;i++)t.writeStringField(3,n[i]);var o=r.values;for(i=0;i<o.length;i++)t.writeMessage(4,P,o[i])}function D(e,t){var i=e.feature;void 0!==i.id&&t.writeVarintField(1,i.id),t.writeMessage(2,T,e),t.writeVarintField(3,i.type),t.writeMessage(4,S,i)}function T(e,t){var i=e.feature,r=e.keys,n=e.values,o=e.keycache,a=e.valuecache;for(var s in i.properties){var l=i.properties[s],c=o[s];if(null!==l){void 0===c&&(r.push(s),o[s]=c=r.length-1),t.writeVarint(c);var u=typeof l;"string"!==u&&"boolean"!==u&&"number"!==u&&(l=JSON.stringify(l));var h=u+":"+l,p=a[h];void 0===p&&(n.push(l),a[h]=p=n.length-1),t.writeVarint(p)}}}function C(e,t){return(t<<3)+(7&e)}function M(e){return e<<1^e>>31}function S(e,t){for(var i=e.loadGeometry(),r=e.type,n=0,o=0,a=i.length,s=0;s<a;s++){var l=i[s],c=1;1===r&&(c=l.length),t.writeVarint(C(1,c));for(var u=3===r?l.length-1:l.length,h=0;h<u;h++){1===h&&1!==r&&t.writeVarint(C(2,u-1));var p=l[h].x-n,d=l[h].y-o;t.writeVarint(M(p)),t.writeVarint(M(d)),n+=p,o+=d}3===r&&t.writeVarint(C(7,1))}}function P(e,t){var i=typeof e;"string"===i?t.writeStringField(1,e):"boolean"===i?t.writeBooleanField(7,e):"number"===i&&(e%1!=0?t.writeDoubleField(3,e):e<0?t.writeSVarintField(6,e):t.writeVarintField(5,e))}function R(e,t,i,r,n,o){if(n-r<=i)return;const a=r+n>>1;k(e,t,a,r,n,o%2),R(e,t,i,r,a-1,o+1),R(e,t,i,a+1,n,o+1)}function k(e,t,i,r,n,o){for(;n>r;){if(n-r>600){const a=n-r+1,s=i-r+1,l=Math.log(a),c=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*c*(a-c)/a)*(s-a/2<0?-1:1);k(e,t,i,Math.max(r,Math.floor(i-s*c/a+u)),Math.min(n,Math.floor(i+(a-s)*c/a+u)),o)}const a=t[2*i+o];let s=r,l=n;for(z(e,t,r,i),t[2*n+o]>a&&z(e,t,r,n);s<l;){for(z(e,t,s,l),s++,l--;t[2*s+o]<a;)s++;for(;t[2*l+o]>a;)l--}t[2*r+o]===a?z(e,t,r,l):(l++,z(e,t,l,n)),l<=i&&(r=l+1),i<=l&&(n=l-1)}}function z(e,t,i,r){L(e,i,r),L(t,2*i,2*r),L(t,2*i+1,2*r+1)}function L(e,t,i){const r=e[t];e[t]=e[i],e[i]=r}function B(e,t,i,r){const n=e-i,o=t-r;return n*n+o*o}g.exports=E,g.exports.fromVectorTileJs=E,g.exports.fromGeojsonVt=function(e,t){t=t||{};var i={};for(var r in e)i[r]=new A(e[r].features,t),i[r].name=r,i[r].version=t.version,i[r].extent=t.extent;return E({layers:i})},g.exports.GeoJSONWrapper=A;const F=e=>e[0],N=e=>e[1];class O{constructor(e,t=F,i=N,r=64,n=Float64Array){this.nodeSize=r,this.points=e;const o=e.length<65536?Uint16Array:Uint32Array,a=this.ids=new o(e.length),s=this.coords=new n(2*e.length);for(let r=0;r<e.length;r++)a[r]=r,s[2*r]=t(e[r]),s[2*r+1]=i(e[r]);R(a,s,r,0,a.length-1,0)}range(e,t,i,r){return function(e,t,i,r,n,o,a){const s=[0,e.length-1,0],l=[];let c,u;for(;s.length;){const h=s.pop(),p=s.pop(),d=s.pop();if(p-d<=a){for(let a=d;a<=p;a++)c=t[2*a],u=t[2*a+1],c>=i&&c<=n&&u>=r&&u<=o&&l.push(e[a]);continue}const f=Math.floor((d+p)/2);c=t[2*f],u=t[2*f+1],c>=i&&c<=n&&u>=r&&u<=o&&l.push(e[f]);const m=(h+1)%2;(0===h?i<=c:r<=u)&&(s.push(d),s.push(f-1),s.push(m)),(0===h?n>=c:o>=u)&&(s.push(f+1),s.push(p),s.push(m))}return l}(this.ids,this.coords,e,t,i,r,this.nodeSize)}within(e,t,i){return function(e,t,i,r,n,o){const a=[0,e.length-1,0],s=[],l=n*n;for(;a.length;){const c=a.pop(),u=a.pop(),h=a.pop();if(u-h<=o){for(let n=h;n<=u;n++)B(t[2*n],t[2*n+1],i,r)<=l&&s.push(e[n]);continue}const p=Math.floor((h+u)/2),d=t[2*p],f=t[2*p+1];B(d,f,i,r)<=l&&s.push(e[p]);const m=(c+1)%2;(0===c?i-n<=d:r-n<=f)&&(a.push(h),a.push(p-1),a.push(m)),(0===c?i+n>=d:r+n>=f)&&(a.push(p+1),a.push(u),a.push(m))}return s}(this.ids,this.coords,e,t,i,this.nodeSize)}}const G={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:e=>e},U=Math.fround||(V=new Float32Array(1),e=>(V[0]=+e,V[0]));var V;class ${constructor(e){this.options=K(Object.create(G),e),this.trees=new Array(this.options.maxZoom+1)}load(e){const{log:t,minZoom:i,maxZoom:r,nodeSize:n}=this.options;t&&console.time("total time");const o=`prepare ${e.length} points`;t&&console.time(o),this.points=e;let a=[];for(let t=0;t<e.length;t++)e[t].geometry&&a.push(j(e[t],t));this.trees[r+1]=new O(a,J,Q,n,Float32Array),t&&console.timeEnd(o);for(let e=r;e>=i;e--){const i=+Date.now();a=this._cluster(a,e),this.trees[e]=new O(a,J,Q,n,Float32Array),t&&console.log("z%d: %d clusters in %dms",e,a.length,+Date.now()-i)}return t&&console.timeEnd("total time"),this}getClusters(e,t){let i=((e[0]+180)%360+360)%360-180;const r=Math.max(-90,Math.min(90,e[1]));let n=180===e[2]?180:((e[2]+180)%360+360)%360-180;const o=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)i=-180,n=180;else if(i>n){const e=this.getClusters([i,r,180,o],t),a=this.getClusters([-180,r,n,o],t);return e.concat(a)}const a=this.trees[this._limitZoom(t)],s=a.range(X(i),H(o),X(n),H(r)),l=[];for(const e of s){const t=a.points[e];l.push(t.numPoints?Z(t):this.points[t.index])}return l}getChildren(e){const t=this._getOriginId(e),i=this._getOriginZoom(e),r="No cluster with the specified id.",n=this.trees[i];if(!n)throw new Error(r);const o=n.points[t];if(!o)throw new Error(r);const a=this.options.radius/(this.options.extent*Math.pow(2,i-1)),s=n.within(o.x,o.y,a),l=[];for(const t of s){const i=n.points[t];i.parentId===e&&l.push(i.numPoints?Z(i):this.points[i.index])}if(0===l.length)throw new Error(r);return l}getLeaves(e,t,i){const r=[];return this._appendLeaves(r,e,t=t||10,i=i||0,0),r}getTile(e,t,i){const r=this.trees[this._limitZoom(e)],n=Math.pow(2,e),{extent:o,radius:a}=this.options,s=a/o,l=(i-s)/n,c=(i+1+s)/n,u={features:[]};return this._addTileFeatures(r.range((t-s)/n,l,(t+1+s)/n,c),r.points,t,i,n,u),0===t&&this._addTileFeatures(r.range(1-s/n,l,1,c),r.points,n,i,n,u),t===n-1&&this._addTileFeatures(r.range(0,l,s/n,c),r.points,-1,i,n,u),u.features.length?u:null}getClusterExpansionZoom(e){let t=this._getOriginZoom(e)-1;for(;t<=this.options.maxZoom;){const i=this.getChildren(e);if(t++,1!==i.length)break;e=i[0].properties.cluster_id}return t}_appendLeaves(e,t,i,r,n){const o=this.getChildren(t);for(const t of o){const o=t.properties;if(o&&o.cluster?n+o.point_count<=r?n+=o.point_count:n=this._appendLeaves(e,o.cluster_id,i,r,n):n<r?n++:e.push(t),e.length===i)break}return n}_addTileFeatures(e,t,i,r,n,o){for(const a of e){const e=t[a],s=e.numPoints;let l,c,u;if(s)l=W(e),c=e.x,u=e.y;else{const t=this.points[e.index];l=t.properties,c=X(t.geometry.coordinates[0]),u=H(t.geometry.coordinates[1])}const h={type:1,geometry:[[Math.round(this.options.extent*(c*n-i)),Math.round(this.options.extent*(u*n-r))]],tags:l};let p;s?p=e.id:this.options.generateId?p=e.index:this.points[e.index].id&&(p=this.points[e.index].id),void 0!==p&&(h.id=p),o.features.push(h)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,t){const i=[],{radius:r,extent:n,reduce:o,minPoints:a}=this.options,s=r/(n*Math.pow(2,t));for(let r=0;r<e.length;r++){const n=e[r];if(n.zoom<=t)continue;n.zoom=t;const l=this.trees[t+1],c=l.within(n.x,n.y,s),u=n.numPoints||1;let h=u;for(const e of c){const i=l.points[e];i.zoom>t&&(h+=i.numPoints||1)}if(h>u&&h>=a){let e=n.x*u,a=n.y*u,s=o&&u>1?this._map(n,!0):null;const p=(r<<5)+(t+1)+this.points.length;for(const i of c){const r=l.points[i];if(r.zoom<=t)continue;r.zoom=t;const c=r.numPoints||1;e+=r.x*c,a+=r.y*c,r.parentId=p,o&&(s||(s=this._map(n,!0)),o(s,this._map(r)))}n.parentId=p,i.push(q(e/h,a/h,p,h,s))}else if(i.push(n),h>1)for(const e of c){const r=l.points[e];r.zoom<=t||(r.zoom=t,i.push(r))}}return i}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,t){if(e.numPoints)return t?K({},e.properties):e.properties;const i=this.points[e.index].properties,r=this.options.map(i);return t&&r===i?K({},r):r}}function q(e,t,i,r,n){return{x:U(e),y:U(t),zoom:1/0,id:i,parentId:-1,numPoints:r,properties:n}}function j(e,t){const[i,r]=e.geometry.coordinates;return{x:U(X(i)),y:U(H(r)),zoom:1/0,index:t,parentId:-1}}function Z(e){return{type:"Feature",id:e.id,properties:W(e),geometry:{type:"Point",coordinates:[(t=e.x,360*(t-.5)),Y(e.y)]}};var t}function W(e){const t=e.numPoints,i=t>=1e4?`${Math.round(t/1e3)}k`:t>=1e3?Math.round(t/100)/10+"k":t;return K(K({},e.properties),{cluster:!0,cluster_id:e.id,point_count:t,point_count_abbreviated:i})}function X(e){return e/360+.5}function H(e){const t=Math.sin(e*Math.PI/180),i=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return i<0?0:i>1?1:i}function Y(e){const t=(180-360*e)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}function K(e,t){for(const i in t)e[i]=t[i];return e}function J(e){return e.x}function Q(e){return e.y}function ee(e,t,i,r){for(var n,o=r,a=i-t>>1,s=i-t,l=e[t],c=e[t+1],u=e[i],h=e[i+1],p=t+3;p<i;p+=3){var d=te(e[p],e[p+1],l,c,u,h);if(d>o)n=p,o=d;else if(d===o){var f=Math.abs(p-a);f<s&&(n=p,s=f)}}o>r&&(n-t>3&&ee(e,t,n,r),e[n+2]=o,i-n>3&&ee(e,n,i,r))}function te(e,t,i,r,n,o){var a=n-i,s=o-r;if(0!==a||0!==s){var l=((e-i)*a+(t-r)*s)/(a*a+s*s);l>1?(i=n,r=o):l>0&&(i+=a*l,r+=s*l)}return(a=e-i)*a+(s=t-r)*s}function ie(e,t,i,r){var n={id:void 0===e?null:e,type:t,geometry:i,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(e){var t=e.geometry,i=e.type;if("Point"===i||"MultiPoint"===i||"LineString"===i)re(e,t);else if("Polygon"===i||"MultiLineString"===i)for(var r=0;r<t.length;r++)re(e,t[r]);else if("MultiPolygon"===i)for(r=0;r<t.length;r++)for(var n=0;n<t[r].length;n++)re(e,t[r][n])}(n),n}function re(e,t){for(var i=0;i<t.length;i+=3)e.minX=Math.min(e.minX,t[i]),e.minY=Math.min(e.minY,t[i+1]),e.maxX=Math.max(e.maxX,t[i]),e.maxY=Math.max(e.maxY,t[i+1])}function ne(e,t,i,r){if(t.geometry){var n=t.geometry.coordinates,o=t.geometry.type,a=Math.pow(i.tolerance/((1<<i.maxZoom)*i.extent),2),s=[],l=t.id;if(i.promoteId?l=t.properties[i.promoteId]:i.generateId&&(l=r||0),"Point"===o)oe(n,s);else if("MultiPoint"===o)for(var c=0;c<n.length;c++)oe(n[c],s);else if("LineString"===o)ae(n,s,a,!1);else if("MultiLineString"===o){if(i.lineMetrics){for(c=0;c<n.length;c++)ae(n[c],s=[],a,!1),e.push(ie(l,"LineString",s,t.properties));return}se(n,s,a,!1)}else if("Polygon"===o)se(n,s,a,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"===o){for(c=0;c<t.geometry.geometries.length;c++)ne(e,{id:l,geometry:t.geometry.geometries[c],properties:t.properties},i,r);return}throw new Error("Input data is not a valid GeoJSON object.")}for(c=0;c<n.length;c++){var u=[];se(n[c],u,a,!0),s.push(u)}}e.push(ie(l,o,s,t.properties))}}function oe(e,t){t.push(le(e[0])),t.push(ce(e[1])),t.push(0)}function ae(e,t,i,r){for(var n,o,a=0,s=0;s<e.length;s++){var l=le(e[s][0]),c=ce(e[s][1]);t.push(l),t.push(c),t.push(0),s>0&&(a+=r?(n*c-l*o)/2:Math.sqrt(Math.pow(l-n,2)+Math.pow(c-o,2))),n=l,o=c}var u=t.length-3;t[2]=1,ee(t,0,u,i),t[u+2]=1,t.size=Math.abs(a),t.start=0,t.end=t.size}function se(e,t,i,r){for(var n=0;n<e.length;n++){var o=[];ae(e[n],o,i,r),t.push(o)}}function le(e){return e/360+.5}function ce(e){var t=Math.sin(e*Math.PI/180),i=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return i<0?0:i>1?1:i}function ue(e,t,i,r,n,o,a,s){if(r/=t,o>=(i/=t)&&a<r)return e;if(a<i||o>=r)return null;for(var l=[],c=0;c<e.length;c++){var u=e[c],h=u.geometry,p=u.type,d=0===n?u.minX:u.minY,f=0===n?u.maxX:u.maxY;if(d>=i&&f<r)l.push(u);else if(!(f<i||d>=r)){var m=[];if("Point"===p||"MultiPoint"===p)he(h,m,i,r,n);else if("LineString"===p)pe(h,m,i,r,n,!1,s.lineMetrics);else if("MultiLineString"===p)fe(h,m,i,r,n,!1);else if("Polygon"===p)fe(h,m,i,r,n,!0);else if("MultiPolygon"===p)for(var g=0;g<h.length;g++){var y=[];fe(h[g],y,i,r,n,!0),y.length&&m.push(y)}if(m.length){if(s.lineMetrics&&"LineString"===p){for(g=0;g<m.length;g++)l.push(ie(u.id,p,m[g],u.tags));continue}"LineString"!==p&&"MultiLineString"!==p||(1===m.length?(p="LineString",m=m[0]):p="MultiLineString"),"Point"!==p&&"MultiPoint"!==p||(p=3===m.length?"Point":"MultiPoint"),l.push(ie(u.id,p,m,u.tags))}}}return l.length?l:null}function he(e,t,i,r,n){for(var o=0;o<e.length;o+=3){var a=e[o+n];a>=i&&a<=r&&(t.push(e[o]),t.push(e[o+1]),t.push(e[o+2]))}}function pe(e,t,i,r,n,o,a){for(var s,l,c=de(e),u=0===n?ge:ye,h=e.start,p=0;p<e.length-3;p+=3){var d=e[p],f=e[p+1],m=e[p+2],g=e[p+3],y=e[p+4],_=0===n?d:f,x=0===n?g:y,b=!1;a&&(s=Math.sqrt(Math.pow(d-g,2)+Math.pow(f-y,2))),_<i?x>i&&(l=u(c,d,f,g,y,i),a&&(c.start=h+s*l)):_>r?x<r&&(l=u(c,d,f,g,y,r),a&&(c.start=h+s*l)):me(c,d,f,m),x<i&&_>=i&&(l=u(c,d,f,g,y,i),b=!0),x>r&&_<=r&&(l=u(c,d,f,g,y,r),b=!0),!o&&b&&(a&&(c.end=h+s*l),t.push(c),c=de(e)),a&&(h+=s)}var v=e.length-3;d=e[v],f=e[v+1],m=e[v+2],(_=0===n?d:f)>=i&&_<=r&&me(c,d,f,m),v=c.length-3,o&&v>=3&&(c[v]!==c[0]||c[v+1]!==c[1])&&me(c,c[0],c[1],c[2]),c.length&&t.push(c)}function de(e){var t=[];return t.size=e.size,t.start=e.start,t.end=e.end,t}function fe(e,t,i,r,n,o){for(var a=0;a<e.length;a++)pe(e[a],t,i,r,n,o,!1)}function me(e,t,i,r){e.push(t),e.push(i),e.push(r)}function ge(e,t,i,r,n,o){var a=(o-t)/(r-t);return e.push(o),e.push(i+(n-i)*a),e.push(1),a}function ye(e,t,i,r,n,o){var a=(o-i)/(n-i);return e.push(t+(r-t)*a),e.push(o),e.push(1),a}function _e(e,t){for(var i=[],r=0;r<e.length;r++){var n,o=e[r],a=o.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)n=xe(o.geometry,t);else if("MultiLineString"===a||"Polygon"===a){n=[];for(var s=0;s<o.geometry.length;s++)n.push(xe(o.geometry[s],t))}else if("MultiPolygon"===a)for(n=[],s=0;s<o.geometry.length;s++){for(var l=[],c=0;c<o.geometry[s].length;c++)l.push(xe(o.geometry[s][c],t));n.push(l)}i.push(ie(o.id,a,n,o.tags))}return i}function xe(e,t){var i=[];i.size=e.size,void 0!==e.start&&(i.start=e.start,i.end=e.end);for(var r=0;r<e.length;r+=3)i.push(e[r]+t,e[r+1],e[r+2]);return i}function be(e,t){if(e.transformed)return e;var i,r,n,o=1<<e.z,a=e.x,s=e.y;for(i=0;i<e.features.length;i++){var l=e.features[i],c=l.geometry,u=l.type;if(l.geometry=[],1===u)for(r=0;r<c.length;r+=2)l.geometry.push(ve(c[r],c[r+1],t,o,a,s));else for(r=0;r<c.length;r++){var h=[];for(n=0;n<c[r].length;n+=2)h.push(ve(c[r][n],c[r][n+1],t,o,a,s));l.geometry.push(h)}}return e.transformed=!0,e}function ve(e,t,i,r,n,o){return[Math.round(i*(e*r-n)),Math.round(i*(t*r-o))]}function we(e,t,i,r,n){for(var o=t===n.maxZoom?0:n.tolerance/((1<<t)*n.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:i,y:r,z:t,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<e.length;s++){a.numFeatures++,Ae(a,e[s],o,n);var l=e[s].minX,c=e[s].minY,u=e[s].maxX,h=e[s].maxY;l<a.minX&&(a.minX=l),c<a.minY&&(a.minY=c),u>a.maxX&&(a.maxX=u),h>a.maxY&&(a.maxY=h)}return a}function Ae(e,t,i,r){var n=t.geometry,o=t.type,a=[];if("Point"===o||"MultiPoint"===o)for(var s=0;s<n.length;s+=3)a.push(n[s]),a.push(n[s+1]),e.numPoints++,e.numSimplified++;else if("LineString"===o)Ee(a,n,e,i,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(s=0;s<n.length;s++)Ee(a,n[s],e,i,"Polygon"===o,0===s);else if("MultiPolygon"===o)for(var l=0;l<n.length;l++){var c=n[l];for(s=0;s<c.length;s++)Ee(a,c[s],e,i,!0,0===s)}if(a.length){var u=t.tags||null;if("LineString"===o&&r.lineMetrics){for(var h in u={},t.tags)u[h]=t.tags[h];u.mapbox_clip_start=n.start/n.size,u.mapbox_clip_end=n.end/n.size}var p={geometry:a,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:u};null!==t.id&&(p.id=t.id),e.features.push(p)}}function Ee(e,t,i,r,n,o){var a=r*r;if(r>0&&t.size<(n?a:r))i.numPoints+=t.length/3;else{for(var s=[],l=0;l<t.length;l+=3)(0===r||t[l+2]>a)&&(i.numSimplified++,s.push(t[l]),s.push(t[l+1])),i.numPoints++;n&&function(e,t){for(var i=0,r=0,n=e.length,o=n-2;r<n;o=r,r+=2)i+=(e[r]-e[o])*(e[r+1]+e[o+1]);if(i>0===t)for(r=0,n=e.length;r<n/2;r+=2){var a=e[r],s=e[r+1];e[r]=e[n-2-r],e[r+1]=e[n-1-r],e[n-2-r]=a,e[n-1-r]=s}}(s,o),e.push(s)}}function Ie(e,t){var i=(t=this.options=function(e,t){for(var i in t)e[i]=t[i];return e}(Object.create(this.options),t)).debug;if(i&&console.time("preprocess data"),t.maxZoom<0||t.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(t.promoteId&&t.generateId)throw new Error("promoteId and generateId cannot be used together.");var r=function(e,t){var i=[];if("FeatureCollection"===e.type)for(var r=0;r<e.features.length;r++)ne(i,e.features[r],t,r);else ne(i,"Feature"===e.type?e:{geometry:e},t);return i}(e,t);this.tiles={},this.tileCoords=[],i&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),r=function(e,t){var i=t.buffer/t.extent,r=e,n=ue(e,1,-1-i,i,0,-1,2,t),o=ue(e,1,1-i,2+i,0,-1,2,t);return(n||o)&&(r=ue(e,1,-i,1+i,0,-1,2,t)||[],n&&(r=_e(n,1).concat(r)),o&&(r=r.concat(_e(o,-1)))),r}(r,t),r.length&&this.splitTile(r,0,0,0),i&&(r.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function De(e,t,i){return 32*((1<<e)*i+t)+e}function Te(e,t){const i=e.tileID.canonical;if(!this._geoJSONIndex)return t(null,null);const r=this._geoJSONIndex.getTile(i.z,i.x,i.y);if(!r)return t(null,null);const n=new m(r.features);let o=g.exports(n);0===o.byteOffset&&o.byteLength===o.buffer.byteLength||(o=new Uint8Array(o)),t(null,{vectorTile:n,rawData:o.buffer})}Ie.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Ie.prototype.splitTile=function(e,t,i,r,n,o,a){for(var s=[e,t,i,r],l=this.options,c=l.debug;s.length;){r=s.pop(),i=s.pop(),t=s.pop(),e=s.pop();var u=1<<t,h=De(t,i,r),p=this.tiles[h];if(!p&&(c>1&&console.time("creation"),p=this.tiles[h]=we(e,t,i,r,l),this.tileCoords.push({z:t,x:i,y:r}),c)){c>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,i,r,p.numFeatures,p.numPoints,p.numSimplified),console.timeEnd("creation"));var d="z"+t;this.stats[d]=(this.stats[d]||0)+1,this.total++}if(p.source=e,n){if(t===l.maxZoom||t===n)continue;var f=1<<n-t;if(i!==Math.floor(o/f)||r!==Math.floor(a/f))continue}else if(t===l.indexMaxZoom||p.numPoints<=l.indexMaxPoints)continue;if(p.source=null,0!==e.length){c>1&&console.time("clipping");var m,g,y,_,x,b,v=.5*l.buffer/l.extent,w=.5-v,A=.5+v,E=1+v;m=g=y=_=null,x=ue(e,u,i-v,i+A,0,p.minX,p.maxX,l),b=ue(e,u,i+w,i+E,0,p.minX,p.maxX,l),e=null,x&&(m=ue(x,u,r-v,r+A,1,p.minY,p.maxY,l),g=ue(x,u,r+w,r+E,1,p.minY,p.maxY,l),x=null),b&&(y=ue(b,u,r-v,r+A,1,p.minY,p.maxY,l),_=ue(b,u,r+w,r+E,1,p.minY,p.maxY,l),b=null),c>1&&console.timeEnd("clipping"),s.push(m||[],t+1,2*i,2*r),s.push(g||[],t+1,2*i,2*r+1),s.push(y||[],t+1,2*i+1,2*r),s.push(_||[],t+1,2*i+1,2*r+1)}}},Ie.prototype.getTile=function(e,t,i){var r=this.options,n=r.extent,o=r.debug;if(e<0||e>24)return null;var a=1<<e,s=De(e,t=(t%a+a)%a,i);if(this.tiles[s])return be(this.tiles[s],n);o>1&&console.log("drilling down to z%d-%d-%d",e,t,i);for(var l,c=e,u=t,h=i;!l&&c>0;)c--,u=Math.floor(u/2),h=Math.floor(h/2),l=this.tiles[De(c,u,h)];return l&&l.source?(o>1&&console.log("found parent tile z%d-%d-%d",c,u,h),o>1&&console.time("drilling down"),this.splitTile(l.source,c,u,h,e,t,i),o>1&&console.timeEnd("drilling down"),this.tiles[s]?be(this.tiles[s],n):null):null};class Ce extends l{constructor(e,t,i,r){super(e,t,i,Te),r&&(this.loadGeoJSON=r)}loadData(t,i){var r;null===(r=this._pendingRequest)||void 0===r||r.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const n=!!(t&&t.request&&t.request.collectResourceTiming)&&new e.RequestPerformance(t.request);this._pendingCallback=i,this._pendingRequest=this.loadGeoJSON(t,((r,o)=>{if(delete this._pendingCallback,delete this._pendingRequest,r||!o)return i(r);if("object"!=typeof o)return i(new Error(`Input data given to '${t.source}' is not a valid GeoJSON object.`));{u(o,!0);try{if(t.filter){const i=e.createExpression(t.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===i.result)throw new Error(i.value.map((e=>`${e.key}: ${e.message}`)).join(", "));const r=o.features.filter((e=>i.value.evaluate({zoom:0},e)));o={type:"FeatureCollection",features:r}}this._geoJSONIndex=t.cluster?new $(function({superclusterOptions:t,clusterProperties:i}){if(!i||!t)return t;const r={},n={},o={accumulated:null,zoom:0},a={properties:null},s=Object.keys(i);for(const t of s){const[o,a]=i[t],s=e.createExpression(a),l=e.createExpression("string"==typeof o?[o,["accumulated"],["get",t]]:o);r[t]=s.value,n[t]=l.value}return t.map=e=>{a.properties=e;const t={};for(const e of s)t[e]=r[e].evaluate(o,a);return t},t.reduce=(e,t)=>{a.properties=t;for(const t of s)o.accumulated=e[t],e[t]=n[t].evaluate(o,a)},t}(t)).load(o.features):function(e,t){return new Ie(e,t)}(o,t.geojsonVtOptions)}catch(r){return i(r)}this.loaded={};const a={};if(n){const e=n.finish();e&&(a.resourceTiming={},a.resourceTiming[t.source]=JSON.parse(JSON.stringify(e)))}i(null,a)}}))}reloadTile(e,t){const i=this.loaded;return i&&i[e.uid]?super.reloadTile(e,t):this.loadTile(e,t)}loadGeoJSON(t,i){if(t.request)return e.getJSON(t.request,i);if("string"==typeof t.data)try{i(null,JSON.parse(t.data))}catch(e){i(new Error(`Input data given to '${t.source}' is not a valid GeoJSON object.`))}else i(new Error(`Input data given to '${t.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}}removeSource(e,t){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),t()}getClusterExpansionZoom(e,t){try{t(null,this._geoJSONIndex.getClusterExpansionZoom(e.clusterId))}catch(e){t(e)}}getClusterChildren(e,t){try{t(null,this._geoJSONIndex.getChildren(e.clusterId))}catch(e){t(e)}}getClusterLeaves(e,t){try{t(null,this._geoJSONIndex.getLeaves(e.clusterId,e.limit,e.offset))}catch(e){t(e)}}}class Me{constructor(t){this.self=t,this.actor=new e.Actor(t,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:l,geojson:Ce},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(e,t)=>{if(this.workerSourceTypes[e])throw new Error(`Worker source with name "${e}" already registered.`);this.workerSourceTypes[e]=t},this.self.registerRTLTextPlugin=t=>{if(e.plugin.isParsed())throw new Error("RTL text plugin already registered.");e.plugin.applyArabicShaping=t.applyArabicShaping,e.plugin.processBidirectionalText=t.processBidirectionalText,e.plugin.processStyledBidirectionalText=t.processStyledBidirectionalText}}setReferrer(e,t){this.referrer=t}setImages(e,t,i){this.availableImages[e]=t;for(const i in this.workerSources[e]){const r=this.workerSources[e][i];for(const e in r)r[e].availableImages=t}i()}setLayers(e,t,i){this.getLayerIndex(e).replace(t),i()}updateLayers(e,t,i){this.getLayerIndex(e).update(t.layers,t.removedIds),i()}loadTile(e,t,i){this.getWorkerSource(e,t.type,t.source).loadTile(t,i)}loadDEMTile(e,t,i){this.getDEMWorkerSource(e,t.source).loadTile(t,i)}reloadTile(e,t,i){this.getWorkerSource(e,t.type,t.source).reloadTile(t,i)}abortTile(e,t,i){this.getWorkerSource(e,t.type,t.source).abortTile(t,i)}removeTile(e,t,i){this.getWorkerSource(e,t.type,t.source).removeTile(t,i)}removeDEMTile(e,t){this.getDEMWorkerSource(e,t.source).removeTile(t)}removeSource(e,t,i){if(!this.workerSources[e]||!this.workerSources[e][t.type]||!this.workerSources[e][t.type][t.source])return;const r=this.workerSources[e][t.type][t.source];delete this.workerSources[e][t.type][t.source],void 0!==r.removeSource?r.removeSource(t,i):i()}loadWorkerSource(e,t,i){try{this.self.importScripts(t.url),i()}catch(e){i(e.toString())}}syncRTLPluginState(t,i,r){try{e.plugin.setState(i);const t=e.plugin.getPluginURL();if(e.plugin.isLoaded()&&!e.plugin.isParsed()&&null!=t){this.self.importScripts(t);const i=e.plugin.isParsed();r(i?void 0:new Error(`RTL Text Plugin failed to import scripts from ${t}`),i)}}catch(e){r(e.toString())}}getAvailableImages(e){let t=this.availableImages[e];return t||(t=[]),t}getLayerIndex(e){let t=this.layerIndexes[e];return t||(t=this.layerIndexes[e]=new r),t}getWorkerSource(e,t,i){if(this.workerSources[e]||(this.workerSources[e]={}),this.workerSources[e][t]||(this.workerSources[e][t]={}),!this.workerSources[e][t][i]){const r={send:(t,i,r)=>{this.actor.send(t,i,r,e)}};this.workerSources[e][t][i]=new this.workerSourceTypes[t](r,this.getLayerIndex(e),this.getAvailableImages(e))}return this.workerSources[e][t][i]}getDEMWorkerSource(e,t){return this.demWorkerSources[e]||(this.demWorkerSources[e]={}),this.demWorkerSources[e][t]||(this.demWorkerSources[e][t]=new c),this.demWorkerSources[e][t]}enforceCacheSizeLimit(t,i){e.enforceCacheSizeLimit(i)}}return e.isWorker()&&(self.worker=new Me(self)),Me})),r(["./shared"],(function(e){var t=i;function i(e){return!function(e){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var e,t,i=new Blob([""],{type:"text/javascript"}),r=URL.createObjectURL(i);try{t=new Worker(r),e=!0}catch(t){e=!1}return t&&t.terminate(),URL.revokeObjectURL(r),e}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var e=document.createElement("canvas");e.width=e.height=1;var t=e.getContext("2d");if(!t)return!1;var i=t.getImageData(0,0,1,1);return i&&i.width===e.width}()?(void 0===r[t=e&&e.failIfMajorPerformanceCaveat]&&(r[t]=function(e){var t,r=function(e){var t=document.createElement("canvas"),r=Object.create(i.webGLContextAttributes);return r.failIfMajorPerformanceCaveat=e,t.getContext("webgl",r)||t.getContext("experimental-webgl",r)}(e);if(!r)return!1;try{t=r.createShader(r.VERTEX_SHADER)}catch(e){return!1}return!(!t||r.isContextLost())&&(r.shaderSource(t,"void main() {}"),r.compileShader(t),!0===r.getShaderParameter(t,r.COMPILE_STATUS))}(t)),r[t]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var t}(e)}var r={};function n(e,t){if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!n(e[i],t[i]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==t){if("object"!=typeof t)return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const i in e)if(!n(e[i],t[i]))return!1;return!0}return e===t}i.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};class o{static testProp(e){if(!o.docStyle)return e[0];for(let t=0;t<e.length;t++)if(e[t]in o.docStyle)return e[t];return e[0]}static create(e,t,i){const r=window.document.createElement(e);return void 0!==t&&(r.className=t),i&&i.appendChild(r),r}static createNS(e,t){return window.document.createElementNS(e,t)}static disableDrag(){o.docStyle&&o.selectProp&&(o.userSelect=o.docStyle[o.selectProp],o.docStyle[o.selectProp]="none")}static enableDrag(){o.docStyle&&o.selectProp&&(o.docStyle[o.selectProp]=o.userSelect)}static setTransform(e,t){e.style[o.transformProp]=t}static addEventListener(e,t,i,r={}){e.addEventListener(t,i,"passive"in r?r:r.capture)}static removeEventListener(e,t,i,r={}){e.removeEventListener(t,i,"passive"in r?r:r.capture)}static suppressClickInternal(e){e.preventDefault(),e.stopPropagation(),window.removeEventListener("click",o.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",o.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",o.suppressClickInternal,!0)}),0)}static mousePos(t,i){const r=t.getBoundingClientRect();return new e.pointGeometry(i.clientX-r.left-t.clientLeft,i.clientY-r.top-t.clientTop)}static touchPos(t,i){const r=t.getBoundingClientRect(),n=[];for(let o=0;o<i.length;o++)n.push(new e.pointGeometry(i[o].clientX-r.left-t.clientLeft,i[o].clientY-r.top-t.clientTop));return n}static mouseButton(e){return e.button}static remove(e){e.parentNode&&e.parentNode.removeChild(e)}}o.docStyle="undefined"!=typeof window&&window.document&&window.document.documentElement.style,o.selectProp=o.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),o.transformProp=o.testProp(["transform","WebkitTransform"]);class a{constructor(e){this._transformRequestFn=e}transformRequest(e,t){return this._transformRequestFn&&this._transformRequestFn(e,t)||{url:e}}normalizeSpriteURL(e,t,i){const r=function(e){const t=e.match(s);if(!t)throw new Error(`Unable to parse URL "${e}"`);return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}(e);return r.path+=`${t}${i}`,function(e){const t=e.params.length?`?${e.params.join("&")}`:"";return`${e.protocol}://${e.authority}${e.path}${t}`}(r)}setTransformRequest(e){this._transformRequestFn=e}}const s=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;class l{constructor(e,t,i,r){this.context=e,this.format=i,this.texture=e.gl.createTexture(),this.update(t,r)}update(t,i,r){const{width:n,height:o}=t,a=!(this.size&&this.size[0]===n&&this.size[1]===o||r),{context:s}=this,{gl:l}=s;if(this.useMipmap=Boolean(i&&i.useMipmap),l.bindTexture(l.TEXTURE_2D,this.texture),s.pixelStoreUnpackFlipY.set(!1),s.pixelStoreUnpack.set(1),s.pixelStoreUnpackPremultiplyAlpha.set(this.format===l.RGBA&&(!i||!1!==i.premultiply)),a)this.size=[n,o],t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageData||e.isImageBitmap(t)?l.texImage2D(l.TEXTURE_2D,0,this.format,this.format,l.UNSIGNED_BYTE,t):l.texImage2D(l.TEXTURE_2D,0,this.format,n,o,0,this.format,l.UNSIGNED_BYTE,t.data);else{const{x:i,y:a}=r||{x:0,y:0};t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageData||e.isImageBitmap(t)?l.texSubImage2D(l.TEXTURE_2D,0,i,a,l.RGBA,l.UNSIGNED_BYTE,t):l.texSubImage2D(l.TEXTURE_2D,0,i,a,n,o,l.RGBA,l.UNSIGNED_BYTE,t.data)}this.useMipmap&&this.isSizePowerOfTwo()&&l.generateMipmap(l.TEXTURE_2D)}bind(e,t,i){const{context:r}=this,{gl:n}=r;n.bindTexture(n.TEXTURE_2D,this.texture),i!==n.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(i=n.LINEAR),e!==this.filter&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,e),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,i||e),this.filter=e),t!==this.wrap&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,t),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,t),this.wrap=t)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}function c(e){const{userImage:t}=e;return!!(t&&t.render&&t.render())&&(e.data.replace(new Uint8Array(t.data.buffer)),!0)}class u extends e.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new e.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(e){if(this.loaded!==e&&(this.loaded=e,e)){for(const{ids:e,callback:t}of this.requestors)this._notify(e,t);this.requestors=[]}}getImage(e){return this.images[e]}addImage(e,t){if(this.images[e])throw new Error(`Image id ${e} already exist, use updateImage instead`);this._validate(e,t)&&(this.images[e]=t)}_validate(t,i){let r=!0;return this._validateStretch(i.stretchX,i.data&&i.data.width)||(this.fire(new e.ErrorEvent(new Error(`Image "${t}" has invalid "stretchX" value`))),r=!1),this._validateStretch(i.stretchY,i.data&&i.data.height)||(this.fire(new e.ErrorEvent(new Error(`Image "${t}" has invalid "stretchY" value`))),r=!1),this._validateContent(i.content,i)||(this.fire(new e.ErrorEvent(new Error(`Image "${t}" has invalid "content" value`))),r=!1),r}_validateStretch(e,t){if(!e)return!0;let i=0;for(const r of e){if(r[0]<i||r[1]<r[0]||t<r[1])return!1;i=r[1]}return!0}_validateContent(e,t){return!(e&&(4!==e.length||e[0]<0||t.data.width<e[0]||e[1]<0||t.data.height<e[1]||e[2]<0||t.data.width<e[2]||e[3]<0||t.data.height<e[3]||e[2]<e[0]||e[3]<e[1]))}updateImage(e,t){const i=this.images[e];if(i.data.width!==t.data.width||i.data.height!==t.data.height)throw new Error(`size mismatch between old image (${i.data.width}x${i.data.height}) and new image (${t.data.width}x${t.data.height}).`);t.version=i.version+1,this.images[e]=t,this.updatedImages[e]=!0}removeImage(e){const t=this.images[e];delete this.images[e],delete this.patterns[e],t.userImage&&t.userImage.onRemove&&t.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(e,t){let i=!0;if(!this.isLoaded())for(const t of e)this.images[t]||(i=!1);this.isLoaded()||i?this._notify(e,t):this.requestors.push({ids:e,callback:t})}_notify(t,i){const r={};for(const i of t){this.images[i]||this.fire(new e.Event("styleimagemissing",{id:i}));const t=this.images[i];t?r[i]={data:t.data.clone(),pixelRatio:t.pixelRatio,sdf:t.sdf,version:t.version,stretchX:t.stretchX,stretchY:t.stretchY,content:t.content,hasRenderCallback:Boolean(t.userImage&&t.userImage.render)}:e.warnOnce(`Image "${i}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}i(null,r)}getPixelSize(){const{width:e,height:t}=this.atlasImage;return{width:e,height:t}}getPattern(t){const i=this.patterns[t],r=this.getImage(t);if(!r)return null;if(i&&i.position.version===r.version)return i.position;if(i)i.position.version=r.version;else{const i={w:r.data.width+2,h:r.data.height+2,x:0,y:0},n=new e.ImagePosition(i,r);this.patterns[t]={bin:i,position:n}}return this._updatePatternAtlas(),this.patterns[t].position}bind(e){const t=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new l(e,this.atlasImage,t.RGBA),this.atlasTexture.bind(t.LINEAR,t.CLAMP_TO_EDGE)}_updatePatternAtlas(){const t=[];for(const e in this.patterns)t.push(this.patterns[e].bin);const{w:i,h:r}=e.potpack(t),n=this.atlasImage;n.resize({width:i||1,height:r||1});for(const t in this.patterns){const{bin:i}=this.patterns[t],r=i.x+1,o=i.y+1,a=this.images[t].data,s=a.width,l=a.height;e.RGBAImage.copy(a,n,{x:0,y:0},{x:r,y:o},{width:s,height:l}),e.RGBAImage.copy(a,n,{x:0,y:l-1},{x:r,y:o-1},{width:s,height:1}),e.RGBAImage.copy(a,n,{x:0,y:0},{x:r,y:o+l},{width:s,height:1}),e.RGBAImage.copy(a,n,{x:s-1,y:0},{x:r-1,y:o},{width:1,height:l}),e.RGBAImage.copy(a,n,{x:0,y:0},{x:r+s,y:o},{width:1,height:l})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(t){for(const i of t){if(this.callbackDispatchedThisFrame[i])continue;this.callbackDispatchedThisFrame[i]=!0;const t=this.images[i];t||e.warnOnce(`Image with ID: "${i}" was not found`),c(t)&&this.updateImage(i,t)}}}const h=1e20;function p(e,t,i,r,n,o,a,s,l){for(let c=t;c<t+r;c++)d(e,i*o+c,o,n,a,s,l);for(let c=i;c<i+n;c++)d(e,c*o+t,1,r,a,s,l)}function d(e,t,i,r,n,o,a){o[0]=0,a[0]=-h,a[1]=h,n[0]=e[t];for(let s=1,l=0,c=0;s<r;s++){n[s]=e[t+s*i];const r=s*s;do{const e=o[l];c=(n[s]-n[e]+r-e*e)/(s-e)/2}while(c<=a[l]&&--l>-1);l++,o[l]=s,a[l]=c,a[l+1]=h}for(let s=0,l=0;s<r;s++){for(;a[l+1]<s;)l++;const r=o[l],c=s-r;e[t+s*i]=n[r]+c*c}}class f{constructor(e,t){this.requestManager=e,this.localIdeographFontFamily=t,this.entries={}}setURL(e){this.url=e}getGlyphs(t,i){const r=[];for(const e in t)for(const i of t[e])r.push({stack:e,id:i});e.asyncAll(r,(({stack:e,id:t},i)=>{let r=this.entries[e];r||(r=this.entries[e]={glyphs:{},requests:{},ranges:{}});let n=r.glyphs[t];if(void 0!==n)return void i(null,{stack:e,id:t,glyph:n});if(n=this._tinySDF(r,e,t),n)return r.glyphs[t]=n,void i(null,{stack:e,id:t,glyph:n});const o=Math.floor(t/256);if(256*o>65535)return void i(new Error("glyphs > 65535 not supported"));if(r.ranges[o])return void i(null,{stack:e,id:t,glyph:n});let a=r.requests[o];a||(a=r.requests[o]=[],f.loadGlyphRange(e,o,this.url,this.requestManager,((e,t)=>{if(t){for(const e in t)this._doesCharSupportLocalGlyph(+e)||(r.glyphs[+e]=t[+e]);r.ranges[o]=!0}for(const i of a)i(e,t);delete r.requests[o]}))),a.push(((r,n)=>{r?i(r):n&&i(null,{stack:e,id:t,glyph:n[t]||null})}))}),((e,t)=>{if(e)i(e);else if(t){const e={};for(const{stack:i,id:r,glyph:n}of t)(e[i]||(e[i]={}))[r]=n&&{id:n.id,bitmap:n.bitmap.clone(),metrics:n.metrics};i(null,e)}}))}_doesCharSupportLocalGlyph(t){return!!this.localIdeographFontFamily&&(e.unicodeBlockLookup["CJK Unified Ideographs"](t)||e.unicodeBlockLookup["Hangul Syllables"](t)||e.unicodeBlockLookup.Hiragana(t)||e.unicodeBlockLookup.Katakana(t))}_tinySDF(t,i,r){const n=this.localIdeographFontFamily;if(!n)return;if(!this._doesCharSupportLocalGlyph(r))return;let o=t.tinySDF;if(!o){let e="400";/bold/i.test(i)?e="900":/medium/i.test(i)?e="500":/light/i.test(i)&&(e="200"),o=t.tinySDF=new f.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:n,fontWeight:e})}const a=o.draw(String.fromCharCode(r));return{id:r,bitmap:new e.AlphaImage({width:a.width||30,height:a.height||30},a.data),metrics:{width:a.glyphWidth||24,height:a.glyphHeight||24,left:a.glyphLeft||0,top:a.glyphTop-27||-8,advance:a.glyphAdvance||24}}}}f.loadGlyphRange=function(t,i,r,n,o){const a=256*i,s=a+255,l=n.transformRequest(r.replace("{fontstack}",t).replace("{range}",`${a}-${s}`),e.ResourceType.Glyphs);e.getArrayBuffer(l,((t,i)=>{if(t)o(t);else if(i){const t={};for(const r of e.parseGlyphPbf(i))t[r.id]=r;o(null,t)}}))},f.TinySDF=class{constructor({fontSize:e=24,buffer:t=3,radius:i=8,cutoff:r=.25,fontFamily:n="sans-serif",fontWeight:o="normal",fontStyle:a="normal"}={}){this.buffer=t,this.cutoff=r,this.radius=i;const s=this.size=e+4*t,l=this._createCanvas(s),c=this.ctx=l.getContext("2d",{willReadFrequently:!0});c.font=`${a} ${o} ${e}px ${n}`,c.textBaseline="alphabetic",c.textAlign="left",c.fillStyle="black",this.gridOuter=new Float64Array(s*s),this.gridInner=new Float64Array(s*s),this.f=new Float64Array(s),this.z=new Float64Array(s+1),this.v=new Uint16Array(s)}_createCanvas(e){const t=document.createElement("canvas");return t.width=t.height=e,t}draw(e){const{width:t,actualBoundingBoxAscent:i,actualBoundingBoxDescent:r,actualBoundingBoxLeft:n,actualBoundingBoxRight:o}=this.ctx.measureText(e),a=Math.ceil(i),s=Math.min(this.size-this.buffer,Math.ceil(o-n)),l=Math.min(this.size-this.buffer,a+Math.ceil(r)),c=s+2*this.buffer,u=l+2*this.buffer,d=Math.max(c*u,0),f=new Uint8ClampedArray(d),m={data:f,width:c,height:u,glyphWidth:s,glyphHeight:l,glyphTop:a,glyphLeft:0,glyphAdvance:t};if(0===s||0===l)return m;const{ctx:g,buffer:y,gridInner:_,gridOuter:x}=this;g.clearRect(y,y,s,l),g.fillText(e,y,y+a);const b=g.getImageData(y,y,s,l);x.fill(h,0,d),_.fill(0,0,d);for(let e=0;e<l;e++)for(let t=0;t<s;t++){const i=b.data[4*(e*s+t)+3]/255;if(0===i)continue;const r=(e+y)*c+t+y;if(1===i)x[r]=0,_[r]=h;else{const e=.5-i;x[r]=e>0?e*e:0,_[r]=e<0?e*e:0}}p(x,0,0,c,u,c,this.f,this.v,this.z),p(_,y,y,s,l,c,this.f,this.v,this.z);for(let e=0;e<d;e++){const t=Math.sqrt(x[e])-Math.sqrt(_[e]);f[e]=Math.round(255-255*(t/this.radius+this.cutoff))}return m}};const m=new e.Properties({anchor:new e.DataConstantProperty(e.spec.light.anchor),position:new class{constructor(){this.specification=e.spec.light.position}possiblyEvaluate(t,i){return e.sphericalToCartesian(t.expression.evaluate(i))}interpolate(t,i,r){return{x:e.number(t.x,i.x,r),y:e.number(t.y,i.y,r),z:e.number(t.z,i.z,r)}}},color:new e.DataConstantProperty(e.spec.light.color),intensity:new e.DataConstantProperty(e.spec.light.intensity)}),g="-transition";class y extends e.Evented{constructor(t){super(),this._transitionable=new e.Transitionable(m),this.setLight(t),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(t,i={}){if(!this._validate(e.validateLight,t,i))for(const e in t){const i=t[e];e.endsWith(g)?this._transitionable.setTransition(e.slice(0,-g.length),i):this._transitionable.setValue(e,i)}}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(t,i,r){return(!r||!1!==r.validate)&&e.emitValidationErrors(this,t.call(e.validateStyle,e.extend({value:i,style:{glyphs:!0,sprite:!0},styleSpec:e.spec})))}}class _{constructor(e,t){this.width=e,this.height=t,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(e,t){const i=e.join(",")+String(t);return this.dashEntry[i]||(this.dashEntry[i]=this.addDash(e,t)),this.dashEntry[i]}getDashRanges(e,t,i){const r=[];let n=e.length%2==1?-e[e.length-1]*i:0,o=e[0]*i,a=!0;r.push({left:n,right:o,isDash:a,zeroLength:0===e[0]});let s=e[0];for(let t=1;t<e.length;t++){a=!a;const l=e[t];n=s*i,s+=l,o=s*i,r.push({left:n,right:o,isDash:a,zeroLength:0===l})}return r}addRoundDash(e,t,i){const r=t/2;for(let t=-i;t<=i;t++){const n=this.width*(this.nextRow+i+t);let o=0,a=e[o];for(let s=0;s<this.width;s++){s/a.right>1&&(a=e[++o]);const l=Math.abs(s-a.left),c=Math.abs(s-a.right),u=Math.min(l,c);let h;const p=t/i*(r+1);if(a.isDash){const e=r-Math.abs(p);h=Math.sqrt(u*u+e*e)}else h=r-Math.sqrt(u*u+p*p);this.data[n+s]=Math.max(0,Math.min(255,h+128))}}}addRegularDash(e){for(let t=e.length-1;t>=0;--t){const i=e[t],r=e[t+1];i.zeroLength?e.splice(t,1):r&&r.isDash===i.isDash&&(r.left=i.left,e.splice(t,1))}const t=e[0],i=e[e.length-1];t.isDash===i.isDash&&(t.left=i.left-this.width,i.right=t.right+this.width);const r=this.width*this.nextRow;let n=0,o=e[n];for(let t=0;t<this.width;t++){t/o.right>1&&(o=e[++n]);const i=Math.abs(t-o.left),a=Math.abs(t-o.right),s=Math.min(i,a);this.data[r+t]=Math.max(0,Math.min(255,(o.isDash?s:-s)+128))}}addDash(t,i){const r=i?7:0,n=2*r+1;if(this.nextRow+n>this.height)return e.warnOnce("LineAtlas out of space"),null;let o=0;for(let e=0;e<t.length;e++)o+=t[e];if(0!==o){const e=this.width/o,n=this.getDashRanges(t,this.width,e);i?this.addRoundDash(n,e,r):this.addRegularDash(n)}const a={y:(this.nextRow+r+.5)/this.height,height:2*r/this.height,width:o};return this.nextRow+=n,this.dirty=!0,a}bind(e){const t=e.gl;this.texture?(t.bindTexture(t.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.width,this.height,t.ALPHA,t.UNSIGNED_BYTE,this.data))):(this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.ALPHA,this.width,this.height,0,t.ALPHA,t.UNSIGNED_BYTE,this.data))}}class x{constructor(t,i){this.workerPool=t,this.actors=[],this.currentActor=0,this.id=e.uniqueId();const r=this.workerPool.acquire(this.id);for(let e=0;e<r.length;e++){const t=new x.Actor(r[e],i,this.id);t.name=`Worker ${e}`,this.actors.push(t)}if(!this.actors.length)throw new Error("No actors found")}broadcast(t,i,r){e.asyncAll(this.actors,((e,r)=>{e.send(t,i,r)}),r=r||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach((e=>{e.remove()})),this.actors=[],this.workerPool.release(this.id)}}function b(t,i,r){const n=function(i,n){if(i)return r(i);if(n){const i=e.pick(e.extend(n,t),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);n.vector_layers&&(i.vectorLayers=n.vector_layers,i.vectorLayerIds=i.vectorLayers.map((e=>e.id))),r(null,i)}};return t.url?e.getJSON(i.transformRequest(t.url,e.ResourceType.Source),n):e.exported.frame((()=>n(null,t)))}x.Actor=e.Actor;class v{constructor(t,i,r){this.bounds=e.LngLatBounds.convert(this.validateBounds(t)),this.minzoom=i||0,this.maxzoom=r||24}validateBounds(e){return Array.isArray(e)&&4===e.length?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]}contains(t){const i=Math.pow(2,t.z),r=Math.floor(e.mercatorXfromLng(this.bounds.getWest())*i),n=Math.floor(e.mercatorYfromLat(this.bounds.getNorth())*i),o=Math.ceil(e.mercatorXfromLng(this.bounds.getEast())*i),a=Math.ceil(e.mercatorYfromLat(this.bounds.getSouth())*i);return t.x>=r&&t.x<o&&t.y>=n&&t.y<a}}class w extends e.Evented{constructor(t,i,r,n){if(super(),this.id=t,this.dispatcher=r,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,e.extend(this,e.pick(i,["url","scheme","tileSize","promoteId"])),this._options=e.extend({type:"vector"},i),this._collectResourceTiming=i.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(n)}load(){this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=b(this._options,this.map._requestManager,((t,i)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),t?this.fire(new e.ErrorEvent(t)):i&&(e.extend(this,i),i.bounds&&(this.tileBounds=new v(i.bounds,this.minzoom,this.maxzoom)),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))}))}loaded(){return this._loaded}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}onAdd(e){this.map=e,this.load()}setSourceProperty(e){this._tileJSONRequest&&this._tileJSONRequest.cancel(),e(),this.load()}setTiles(e){return this.setSourceProperty((()=>{this._options.tiles=e})),this}setUrl(e){return this.setSourceProperty((()=>{this.url=e,this._options.url=e})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return e.extend({},this._options)}loadTile(t,i){const r=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),n={request:this.map._requestManager.transformRequest(r,e.ResourceType.Tile),uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function o(r,n){return delete t.request,t.aborted?i(null):r&&404!==r.status?i(r):(n&&n.resourceTiming&&(t.resourceTiming=n.resourceTiming),this.map._refreshExpiredTiles&&n&&t.setExpiryData(n),t.loadVectorData(n,this.map.painter),e.cacheEntryPossiblyAdded(this.dispatcher),i(null),void(t.reloadCallback&&(this.loadTile(t,t.reloadCallback),t.reloadCallback=null)))}n.request.collectResourceTiming=this._collectResourceTiming,t.actor&&"expired"!==t.state?"loading"===t.state?t.reloadCallback=i:t.request=t.actor.send("reloadTile",n,o.bind(this)):(t.actor=this.dispatcher.getActor(),t.request=t.actor.send("loadTile",n,o.bind(this)))}abortTile(e){e.request&&(e.request.cancel(),delete e.request),e.actor&&e.actor.send("abortTile",{uid:e.uid,type:this.type,source:this.id},void 0)}unloadTile(e){e.unloadVectorData(),e.actor&&e.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class A extends e.Evented{constructor(t,i,r,n){super(),this.id=t,this.dispatcher=r,this.setEventedParent(n),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=e.extend({type:"raster"},i),e.extend(this,e.pick(i,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=b(this._options,this.map._requestManager,((t,i)=>{this._tileJSONRequest=null,this._loaded=!0,t?this.fire(new e.ErrorEvent(t)):i&&(e.extend(this,i),i.bounds&&(this.tileBounds=new v(i.bounds,this.minzoom,this.maxzoom)),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))}))}loaded(){return this._loaded}onAdd(e){this.map=e,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return e.extend({},this._options)}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}loadTile(t,i){const r=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);t.request=e.getImage(this.map._requestManager.transformRequest(r,e.ResourceType.Tile),((r,n,o)=>{if(delete t.request,t.aborted)t.state="unloaded",i(null);else if(r)t.state="errored",i(r);else if(n){this.map._refreshExpiredTiles&&t.setExpiryData(o);const r=this.map.painter.context,a=r.gl;t.texture=this.map.painter.getTileTexture(n.width),t.texture?t.texture.update(n,{useMipmap:!0}):(t.texture=new l(r,n,a.RGBA,{useMipmap:!0}),t.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST),r.extTextureFilterAnisotropic&&a.texParameterf(a.TEXTURE_2D,r.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,r.extTextureFilterAnisotropicMax)),t.state="loaded",e.cacheEntryPossiblyAdded(this.dispatcher),i(null)}}))}abortTile(e,t){e.request&&(e.request.cancel(),delete e.request),t()}unloadTile(e,t){e.texture&&this.map.painter.saveTileTexture(e.texture),t()}hasTransition(){return!1}}let E;class I extends A{constructor(t,i,r,n){super(t,i,r,n),this.type="raster-dem",this.maxzoom=22,this._options=e.extend({type:"raster-dem"},i),this.encoding=i.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(t,i){const r=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function n(e,r){e&&(t.state="errored",i(e)),r&&(t.dem=r,t.needsHillshadePrepare=!0,t.needsTerrainPrepare=!0,t.state="loaded",i(null))}t.request=e.getImage(this.map._requestManager.transformRequest(r,e.ResourceType.Tile),function(r,o){if(delete t.request,t.aborted)t.state="unloaded",i(null);else if(r)t.state="errored",i(r);else if(o){this.map._refreshExpiredTiles&&t.setExpiryData(o),delete o.cacheControl,delete o.expires;const i=e.isImageBitmap(o)&&(null==E&&(E="undefined"!=typeof OffscreenCanvas&&new OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof createImageBitmap),E)?o:e.exported.getImageData(o,1),r={uid:t.uid,coord:t.tileID,source:this.id,rawImageData:i,encoding:this.encoding};t.actor&&"expired"!==t.state||(t.actor=this.dispatcher.getActor(),t.actor.send("loadDEMTile",r,n.bind(this)))}}.bind(this)),t.neighboringTiles=this._getNeighboringTiles(t.tileID)}_getNeighboringTiles(t){const i=t.canonical,r=Math.pow(2,i.z),n=(i.x-1+r)%r,o=0===i.x?t.wrap-1:t.wrap,a=(i.x+1+r)%r,s=i.x+1===r?t.wrap+1:t.wrap,l={};return l[new e.OverscaledTileID(t.overscaledZ,o,i.z,n,i.y).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,i.z,a,i.y).key]={backfilled:!1},i.y>0&&(l[new e.OverscaledTileID(t.overscaledZ,o,i.z,n,i.y-1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,t.wrap,i.z,i.x,i.y-1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,i.z,a,i.y-1).key]={backfilled:!1}),i.y+1<r&&(l[new e.OverscaledTileID(t.overscaledZ,o,i.z,n,i.y+1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,t.wrap,i.z,i.x,i.y+1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,i.z,a,i.y+1).key]={backfilled:!1}),l}unloadTile(e){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded",e.actor&&e.actor.send("removeDEMTile",{uid:e.uid,source:this.id})}}class D extends e.Evented{constructor(t,i,r,n){super(),this.id=t,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=r.getActor(),this.setEventedParent(n),this._data=i.data,this._options=e.extend({},i),this._collectResourceTiming=i.collectResourceTiming,void 0!==i.maxzoom&&(this.maxzoom=i.maxzoom),i.type&&(this.type=i.type),i.attribution&&(this.attribution=i.attribution),this.promoteId=i.promoteId;const o=e.EXTENT/this.tileSize;this.workerOptions=e.extend({source:this.id,cluster:i.cluster||!1,geojsonVtOptions:{buffer:(void 0!==i.buffer?i.buffer:128)*o,tolerance:(void 0!==i.tolerance?i.tolerance:.375)*o,extent:e.EXTENT,maxZoom:this.maxzoom,lineMetrics:i.lineMetrics||!1,generateId:i.generateId||!1},superclusterOptions:{maxZoom:void 0!==i.clusterMaxZoom?i.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,i.clusterMinPoints||2),extent:e.EXTENT,radius:(i.clusterRadius||50)*o,log:!1,generateId:i.generateId||!1},clusterProperties:i.clusterProperties,filter:i.filter},i.workerOptions)}load(){this._updateWorkerData("metadata")}onAdd(e){this.map=e,this.load()}setData(e){return this._data=e,this._updateWorkerData("content"),this}getClusterExpansionZoom(e,t){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:e,source:this.id},t),this}getClusterChildren(e,t){return this.actor.send("geojson.getClusterChildren",{clusterId:e,source:this.id},t),this}getClusterLeaves(e,t,i,r){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:e,limit:t,offset:i},r),this}_updateWorkerData(t){const i=e.extend({},this.workerOptions),r=this._data;"string"==typeof r?(i.request=this.map._requestManager.transformRequest(e.exported.resolveURL(r),e.ResourceType.Source),i.request.collectResourceTiming=this._collectResourceTiming):i.data=JSON.stringify(r),this._pendingLoads++,this.fire(new e.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,i,((i,r)=>{if(this._pendingLoads--,this._removed||r&&r.abandoned)return void this.fire(new e.Event("dataabort",{dataType:"source",sourceDataType:t}));let n=null;if(r&&r.resourceTiming&&r.resourceTiming[this.id]&&(n=r.resourceTiming[this.id].slice(0)),i)return void this.fire(new e.ErrorEvent(i));const o={dataType:"source",sourceDataType:t};this._collectResourceTiming&&n&&n.length>0&&e.extend(o,{resourceTiming:n}),this.fire(new e.Event("data",o))}))}loaded(){return 0===this._pendingLoads}loadTile(e,t){const i=e.actor?"reloadTile":"loadTile";e.actor=this.actor;const r={type:this.type,uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};e.request=this.actor.send(i,r,((r,n)=>(delete e.request,e.unloadVectorData(),e.aborted?t(null):r?t(r):(e.loadVectorData(n,this.map.painter,"reloadTile"===i),t(null)))))}abortTile(e){e.request&&(e.request.cancel(),delete e.request),e.aborted=!0}unloadTile(e){e.unloadVectorData(),this.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return e.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var T=e.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class C extends e.Evented{constructor(e,t,i,r){super(),this.id=e,this.dispatcher=i,this.coordinates=t.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(r),this.options=t}load(t,i){this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this.url=this.options.url,e.getImage(this.map._requestManager.transformRequest(this.url,e.ResourceType.Image),((r,n)=>{this._loaded=!0,r?this.fire(new e.ErrorEvent(r)):n&&(this.image=n,t&&(this.coordinates=t),i&&i(),this._finishLoading())}))}loaded(){return this._loaded}updateImage(e){return this.image&&e.url?(this.options.url=e.url,this.load(e.coordinates,(()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(e){this.map=e,this.load()}setCoordinates(t){this.coordinates=t;const i=t.map(e.MercatorCoordinate.fromLngLat);this.tileID=function(t){let i=1/0,r=1/0,n=-1/0,o=-1/0;for(const e of t)i=Math.min(i,e.x),r=Math.min(r,e.y),n=Math.max(n,e.x),o=Math.max(o,e.y);const a=Math.max(n-i,o-r),s=Math.max(0,Math.floor(-Math.log(a)/Math.LN2)),l=Math.pow(2,s);return new e.CanonicalTileID(s,Math.floor((i+n)/2*l),Math.floor((r+o)/2*l))}(i),this.minzoom=this.maxzoom=this.tileID.z;const r=i.map((e=>this.tileID.getTilePoint(e)._round()));return this._boundsArray=new e.RasterBoundsArray,this._boundsArray.emplaceBack(r[0].x,r[0].y,0,0),this._boundsArray.emplaceBack(r[1].x,r[1].y,e.EXTENT,0),this._boundsArray.emplaceBack(r[3].x,r[3].y,0,e.EXTENT),this._boundsArray.emplaceBack(r[2].x,r[2].y,e.EXTENT,e.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const t=this.map.painter.context,i=t.gl;this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,T.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new l(t,this.image,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE));for(const e in this.tiles){const t=this.tiles[e];"loaded"!==t.state&&(t.state="loaded",t.texture=this.texture)}}loadTile(e,t){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={},t(null)):(e.state="errored",t(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class M extends C{constructor(e,t,i,r){super(e,t,i,r),this.roundZoom=!0,this.type="video",this.options=t}load(){this._loaded=!1;const t=this.options;this.urls=[];for(const i of t.urls)this.urls.push(this.map._requestManager.transformRequest(i,e.ResourceType.Source).url);e.getVideo(this.urls,((t,i)=>{this._loaded=!0,t?this.fire(new e.ErrorEvent(t)):i&&(this.video=i,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading())}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(t){if(this.video){const i=this.video.seekable;t<i.start(0)||t>i.end(0)?this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${i.start(0)} and ${i.end(0)}-second mark.`))):this.video.currentTime=t}}getVideo(){return this.video}onAdd(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const t=this.map.painter.context,i=t.gl;this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,T.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),i.texSubImage2D(i.TEXTURE_2D,0,0,0,i.RGBA,i.UNSIGNED_BYTE,this.video)):(this.texture=new l(t,this.video,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE));for(const e in this.tiles){const t=this.tiles[e];"loaded"!==t.state&&(t.state="loaded",t.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class S extends C{constructor(t,i,r,n){super(t,i,r,n),i.coordinates?Array.isArray(i.coordinates)&&4===i.coordinates.length&&!i.coordinates.some((e=>!Array.isArray(e)||2!==e.length||e.some((e=>"number"!=typeof e))))||this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${t}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${t}`,null,'missing required property "coordinates"'))),i.animate&&"boolean"!=typeof i.animate&&this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${t}`,null,'optional "animate" property must be a boolean value'))),i.canvas?"string"==typeof i.canvas||i.canvas instanceof HTMLCanvasElement||this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${t}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${t}`,null,'missing required property "canvas"'))),this.options=i,this.animate=void 0===i.animate||i.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new e.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),this._hasInvalidDimensions())return;if(0===Object.keys(this.tiles).length)return;const i=this.map.painter.context,r=i.gl;this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,T.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(t||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new l(i,this.canvas,r.RGBA,{premultiply:!0});for(const e in this.tiles){const t=this.tiles[e];"loaded"!==t.state&&(t.state="loaded",t.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const e of[this.canvas.width,this.canvas.height])if(isNaN(e)||e<=0)return!0;return!1}}const P={vector:w,raster:A,"raster-dem":I,geojson:D,video:M,image:C,canvas:S};function R(t,i){const r=e.create();return e.translate(r,r,[1,1,0]),e.scale(r,r,[.5*t.width,.5*t.height,1]),e.multiply(r,r,t.calculatePosMatrix(i.toUnwrapped()))}function k(e,t,i,r,n,o){const a=function(e,t,i){if(e)for(const r of e){const e=t[r];if(e&&e.source===i&&"fill-extrusion"===e.type)return!0}else for(const e in t){const r=t[e];if(r.source===i&&"fill-extrusion"===r.type)return!0}return!1}(n&&n.layers,t,e.id),s=o.maxPitchScaleFactor(),l=e.tilesIn(r,s,a);l.sort(z);const c=[];for(const r of l)c.push({wrappedTileID:r.tileID.wrapped().key,queryResults:r.tile.queryRenderedFeatures(t,i,e._state,r.queryGeometry,r.cameraQueryGeometry,r.scale,n,o,s,R(e.transform,r.tileID))});const u=function(e){const t={},i={};for(const r of e){const e=r.queryResults,n=r.wrappedTileID,o=i[n]=i[n]||{};for(const i in e){const r=e[i],n=o[i]=o[i]||{},a=t[i]=t[i]||[];for(const e of r)n[e.featureIndex]||(n[e.featureIndex]=!0,a.push(e))}}return t}(c);for(const t in u)u[t].forEach((t=>{const i=t.feature,r=e.getFeatureState(i.layer["source-layer"],i.id);i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=r}));return u}function z(e,t){const i=e.tileID,r=t.tileID;return i.overscaledZ-r.overscaledZ||i.canonical.y-r.canonical.y||i.wrap-r.wrap||i.canonical.x-r.canonical.x}class L{constructor(t,i){this.tileID=t,this.uid=e.uniqueId(),this.uses=0,this.tileSize=i,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.textures=[],this.textureCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(t){const i=t+this.timeAdded;i<e.exported.now()||this.fadeEndTime&&i<this.fadeEndTime||(this.fadeEndTime=i)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}clearTextures(e){this.demTexture&&e.saveTileTexture(this.demTexture),this.textures.forEach((t=>e.saveTileTexture(t))),this.demTexture=null,this.textures=[],this.textureCoords={}}loadVectorData(t,i,r){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(e,t){const i={};if(!t)return i;for(const r of e){const e=r.layerIds.map((e=>t.getLayer(e))).filter(Boolean);if(0!==e.length){r.layers=e,r.stateDependentLayerIds&&(r.stateDependentLayers=r.stateDependentLayerIds.map((t=>e.filter((e=>e.id===t))[0])));for(const t of e)i[t.id]=r}}return i}(t.buckets,i.style),this.hasSymbolBuckets=!1;for(const t in this.buckets){const i=this.buckets[t];if(i instanceof e.SymbolBucket){if(this.hasSymbolBuckets=!0,!r)break;i.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const t in this.buckets){const i=this.buckets[t];if(i instanceof e.SymbolBucket&&i.hasRTLText){this.hasRTLText=!0,e.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const e in this.buckets){const t=this.buckets[e];this.queryPadding=Math.max(this.queryPadding,i.style.getLayer(e).queryRadius(t))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new e.CollisionBoxArray}unloadVectorData(){for(const e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(e){return this.buckets[e.id]}upload(e){for(const t in this.buckets){const i=this.buckets[t];i.uploadPending()&&i.upload(e)}const t=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new l(e,this.imageAtlas.image,t.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new l(e,this.glyphAtlasImage,t.ALPHA),this.glyphAtlasImage=null)}prepare(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}queryRenderedFeatures(e,t,i,r,n,o,a,s,l,c){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:r,cameraQueryGeometry:n,scale:o,tileSize:this.tileSize,pixelPosMatrix:c,transform:s,params:a,queryPadding:this.queryPadding*l},e,t,i):{}}querySourceFeatures(t,i){const r=this.latestFeatureIndex;if(!r||!r.rawTileData)return;const n=r.loadVTLayers(),o=i?i.sourceLayer:"",a=n._geojsonTileLayer||n[o];if(!a)return;const s=e.createFilter(i&&i.filter),{z:l,x:c,y:u}=this.tileID.canonical,h={z:l,x:c,y:u};for(let i=0;i<a.length;i++){const n=a.feature(i);if(s.needGeometry){const t=e.toEvaluationFeature(n,!0);if(!s.filter(new e.EvaluationParameters(this.tileID.overscaledZ),t,this.tileID.canonical))continue}else if(!s.filter(new e.EvaluationParameters(this.tileID.overscaledZ),n))continue;const p=r.getId(n,o),d=new e.GeoJSONFeature(n,l,c,u,p);d.tile=h,t.push(d)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(t){const i=this.expirationTime;if(t.cacheControl){const i=e.parseCacheControl(t.cacheControl);i["max-age"]&&(this.expirationTime=Date.now()+1e3*i["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){const e=Date.now();let t=!1;if(this.expirationTime>e)t=!1;else if(i)if(this.expirationTime<i)t=!0;else{const r=this.expirationTime-i;r?this.expirationTime=e+Math.max(r,3e4):t=!0}else t=!0;t?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(e,t){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(e).length)return;const i=this.latestFeatureIndex.loadVTLayers();for(const r in this.buckets){if(!t.style.hasLayer(r))continue;const n=this.buckets[r],o=n.layers[0].sourceLayer||"_geojsonTileLayer",a=i[o],s=e[o];if(!a||!s||0===Object.keys(s).length)continue;n.update(s,a,this.imageAtlas&&this.imageAtlas.patternPositions||{});const l=t&&t.style&&t.style.getLayer(r);l&&(this.queryPadding=Math.max(this.queryPadding,l.queryRadius(n)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<e.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(t){this.symbolFadeHoldUntil=e.exported.now()+t}setDependencies(e,t){const i={};for(const e of t)i[e]=!0;this.dependencies[e]=i}hasDependency(e,t){for(const i of e){const e=this.dependencies[i];if(e)for(const i of t)if(e[i])return!0}return!1}}class B{constructor(e,t){this.max=e,this.onRemove=t,this.reset()}reset(){for(const e in this.data)for(const t of this.data[e])t.timeout&&clearTimeout(t.timeout),this.onRemove(t.value);return this.data={},this.order=[],this}add(e,t,i){const r=e.wrapped().key;void 0===this.data[r]&&(this.data[r]=[]);const n={value:t,timeout:void 0};if(void 0!==i&&(n.timeout=setTimeout((()=>{this.remove(e,n)}),i)),this.data[r].push(n),this.order.push(r),this.order.length>this.max){const e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this}has(e){return e.wrapped().key in this.data}getAndRemove(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}_getAndRemoveByKey(e){const t=this.data[e].shift();return t.timeout&&clearTimeout(t.timeout),0===this.data[e].length&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),t.value}getByKey(e){const t=this.data[e];return t?t[0].value:null}get(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}remove(e,t){if(!this.has(e))return this;const i=e.wrapped().key,r=void 0===t?0:this.data[i].indexOf(t),n=this.data[i][r];return this.data[i].splice(r,1),n.timeout&&clearTimeout(n.timeout),0===this.data[i].length&&delete this.data[i],this.onRemove(n.value),this.order.splice(this.order.indexOf(i),1),this}setMaxSize(e){for(this.max=e;this.order.length>this.max;){const e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this}filter(e){const t=[];for(const i in this.data)for(const r of this.data[i])e(r.value)||t.push(r);for(const e of t)this.remove(e.value.tileID,e)}}class F{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(t,i,r){const n=String(i);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][n]=this.stateChanges[t][n]||{},e.extend(this.stateChanges[t][n],r),null===this.deletedStates[t]){this.deletedStates[t]={};for(const e in this.state[t])e!==n&&(this.deletedStates[t][e]=null)}else if(this.deletedStates[t]&&null===this.deletedStates[t][n]){this.deletedStates[t][n]={};for(const e in this.state[t][n])r[e]||(this.deletedStates[t][n][e]=null)}else for(const e in r)this.deletedStates[t]&&this.deletedStates[t][n]&&null===this.deletedStates[t][n][e]&&delete this.deletedStates[t][n][e]}removeFeatureState(e,t,i){if(null===this.deletedStates[e])return;const r=String(t);if(this.deletedStates[e]=this.deletedStates[e]||{},i&&void 0!==t)null!==this.deletedStates[e][r]&&(this.deletedStates[e][r]=this.deletedStates[e][r]||{},this.deletedStates[e][r][i]=null);else if(void 0!==t)if(this.stateChanges[e]&&this.stateChanges[e][r])for(i in this.deletedStates[e][r]={},this.stateChanges[e][r])this.deletedStates[e][r][i]=null;else this.deletedStates[e][r]=null;else this.deletedStates[e]=null}getState(t,i){const r=String(i),n=e.extend({},(this.state[t]||{})[r],(this.stateChanges[t]||{})[r]);if(null===this.deletedStates[t])return{};if(this.deletedStates[t]){const e=this.deletedStates[t][i];if(null===e)return{};for(const t in e)delete n[t]}return n}initializeTileState(e,t){e.setFeatureState(this.state,t)}coalesceChanges(t,i){const r={};for(const t in this.stateChanges){this.state[t]=this.state[t]||{};const i={};for(const r in this.stateChanges[t])this.state[t][r]||(this.state[t][r]={}),e.extend(this.state[t][r],this.stateChanges[t][r]),i[r]=this.state[t][r];r[t]=i}for(const t in this.deletedStates){this.state[t]=this.state[t]||{};const i={};if(null===this.deletedStates[t])for(const e in this.state[t])i[e]={},this.state[t][e]={};else for(const e in this.deletedStates[t]){if(null===this.deletedStates[t][e])this.state[t][e]={};else for(const i of Object.keys(this.deletedStates[t][e]))delete this.state[t][e][i];i[e]=this.state[t][e]}r[t]=r[t]||{},e.extend(r[t],i)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(r).length)for(const e in t)t[e].setFeatureState(r,i)}}class N extends e.Evented{constructor(t,i,r){super(),this.id=t,this.dispatcher=r,this.on("data",(e=>{"source"===e.dataType&&"metadata"===e.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===e.dataType&&"content"===e.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform,this.terrain))})),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=function(t,i,r,n){const o=new P[i.type](t,i,r,n);if(o.id!==t)throw new Error(`Expected Source id to be ${t} instead of ${o.id}`);return e.bindAll(["load","abort","unload","serialize","prepare"],o),o}(t,i,r,this),this._tiles={},this._cache=new B(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new F}onAdd(e){this.map=e,this._maxTileCacheSize=e?e._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(e)}onRemove(e){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(e)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(const e in this._tiles){const t=this._tiles[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(e,t){return this._source.loadTile(e,t)}_unloadTile(e){if(this._source.unloadTile)return this._source.unloadTile(e,(()=>{}))}_abortTile(t){this._source.abortTile&&this._source.abortTile(t,(()=>{})),this._source.fire(new e.Event("dataabort",{tile:t,coord:t.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(e){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const t in this._tiles){const i=this._tiles[t];i.upload(e),i.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map((e=>e.tileID)).sort(O).map((e=>e.key))}getRenderableIds(t){const i=[];for(const e in this._tiles)this._isIdRenderable(e,t)&&i.push(this._tiles[e]);return t?i.sort(((t,i)=>{const r=t.tileID,n=i.tileID,o=new e.pointGeometry(r.canonical.x,r.canonical.y)._rotate(this.transform.angle),a=new e.pointGeometry(n.canonical.x,n.canonical.y)._rotate(this.transform.angle);return r.overscaledZ-n.overscaledZ||a.y-o.y||a.x-o.x})).map((e=>e.tileID.key)):i.map((e=>e.tileID)).sort(O).map((e=>e.key))}hasRenderableParent(e){const t=this.findLoadedParent(e,0);return!!t&&this._isIdRenderable(t.tileID.key)}_isIdRenderable(e,t){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(t||!this._tiles[e].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const e in this._tiles)"errored"!==this._tiles[e].state&&this._reloadTile(e,"reloading")}}_reloadTile(e,t){const i=this._tiles[e];i&&("loading"!==i.state&&(i.state=t),this._loadTile(i,this._tileLoaded.bind(this,i,e,t)))}_tileLoaded(t,i,r,n){if(n)return t.state="errored",void(404!==n.status?this._source.fire(new e.ErrorEvent(n,{tile:t})):this.update(this.transform,this.terrain));t.timeAdded=e.exported.now(),"expired"===r&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(i,t),"raster-dem"===this.getSource().type&&t.dem&&this._backfillDEM(t),this._state.initializeTileState(t,this.map?this.map.painter:null),t.aborted||this._source.fire(new e.Event("data",{dataType:"source",tile:t,coord:t.tileID}))}_backfillDEM(e){const t=this.getRenderableIds();for(let r=0;r<t.length;r++){const n=t[r];if(e.neighboringTiles&&e.neighboringTiles[n]){const t=this.getTileByID(n);i(e,t),i(t,e)}}function i(e,t){e.needsHillshadePrepare=!0,e.needsTerrainPrepare=!0;let i=t.tileID.canonical.x-e.tileID.canonical.x;const r=t.tileID.canonical.y-e.tileID.canonical.y,n=Math.pow(2,e.tileID.canonical.z),o=t.tileID.key;0===i&&0===r||Math.abs(r)>1||(Math.abs(i)>1&&(1===Math.abs(i+n)?i+=n:1===Math.abs(i-n)&&(i-=n)),t.dem&&e.dem&&(e.dem.backfillBorder(t.dem,i,r),e.neighboringTiles&&e.neighboringTiles[o]&&(e.neighboringTiles[o].backfilled=!0)))}}getTile(e){return this.getTileByID(e.key)}getTileByID(e){return this._tiles[e]}_retainLoadedChildren(e,t,i,r){for(const n in this._tiles){let o=this._tiles[n];if(r[n]||!o.hasData()||o.tileID.overscaledZ<=t||o.tileID.overscaledZ>i)continue;let a=o.tileID;for(;o&&o.tileID.overscaledZ>t+1;){const e=o.tileID.scaledTo(o.tileID.overscaledZ-1);o=this._tiles[e.key],o&&o.hasData()&&(a=e)}let s=a;for(;s.overscaledZ>t;)if(s=s.scaledTo(s.overscaledZ-1),e[s.key]){r[a.key]=a;break}}}findLoadedParent(e,t){if(e.key in this._loadedParentTiles){const i=this._loadedParentTiles[e.key];return i&&i.tileID.overscaledZ>=t?i:null}for(let i=e.overscaledZ-1;i>=t;i--){const t=e.scaledTo(i),r=this._getLoadedTile(t);if(r)return r}}_getLoadedTile(e){const t=this._tiles[e.key];return t&&t.hasData()?t:this._cache.getByKey(e.wrapped().key)}updateCacheSize(e){const t=Math.ceil(e.width/this._source.tileSize)+1,i=Math.ceil(e.height/this._source.tileSize)+1,r=Math.floor(t*i*5),n="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,r):r;this._cache.setMaxSize(n)}handleWrapJump(e){const t=Math.round((e-(void 0===this._prevLng?e:this._prevLng))/360);if(this._prevLng=e,t){const e={};for(const i in this._tiles){const r=this._tiles[i];r.tileID=r.tileID.unwrapTo(r.tileID.wrap+t),e[r.tileID.key]=r}this._tiles=e;for(const e in this._timers)clearTimeout(this._timers[e]),delete this._timers[e];for(const e in this._tiles)this._setTileReloadTimer(e,this._tiles[e])}}update(t,i){if(this.transform=t,this.terrain=i,!this._sourceLoaded||this._paused)return;let r;this.updateCacheSize(t),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?r=t.getVisibleUnwrappedCoordinates(this._source.tileID).map((t=>new e.OverscaledTileID(t.canonical.z,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y))):(r=t.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:i}),this._source.hasTile&&(r=r.filter((e=>this._source.hasTile(e))))):r=[];const n=t.coveringZoomLevel(this._source),o=Math.max(n-N.maxOverzooming,this._source.minzoom),a=Math.max(n+N.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const e={};for(const t of r)if(t.canonical.z>this._source.minzoom){const i=t.scaledTo(t.canonical.z-1);e[i.key]=i;const r=t.scaledTo(Math.max(this._source.minzoom,Math.min(t.canonical.z,5)));e[r.key]=r}r=r.concat(Object.values(e))}const s=this._updateRetainedTiles(r,n);if(G(this._source.type)){const t={},l={},c=Object.keys(s);for(const i of c){const r=s[i],n=this._tiles[i];if(!n||n.fadeEndTime&&n.fadeEndTime<=e.exported.now())continue;const a=this.findLoadedParent(r,o);a&&(this._addTile(a.tileID),t[a.tileID.key]=a.tileID),l[i]=r}this._retainLoadedChildren(l,n,a,s);for(const e in t)s[e]||(this._coveredTiles[e]=!0,s[e]=t[e]);if(i){const e={},t={};for(const i of r)this._tiles[i.key].hasData()?e[i.key]=i:t[i.key]=i;for(const i in t){const r=t[i].children(this._source.maxzoom);this._tiles[r[0].key]&&this._tiles[r[1].key]&&this._tiles[r[2].key]&&this._tiles[r[3].key]&&(e[r[0].key]=s[r[0].key]=r[0],e[r[1].key]=s[r[1].key]=r[1],e[r[2].key]=s[r[2].key]=r[2],e[r[3].key]=s[r[3].key]=r[3],delete t[i])}for(const i in t){const r=this.findLoadedParent(t[i],this._source.minzoom);if(r){e[r.tileID.key]=s[r.tileID.key]=r.tileID;for(const t in e)e[t].isChildOf(r.tileID)&&delete e[t]}}for(const t in this._tiles)e[t]||(this._coveredTiles[t]=!0)}}for(const e in s)this._tiles[e].clearFadeHold();const l=e.keysDifference(this._tiles,s);for(const e of l){const t=this._tiles[e];t.hasSymbolBuckets&&!t.holdingForFade()?t.setHoldDuration(this.map._fadeDuration):t.hasSymbolBuckets&&!t.symbolFadeFinished()||this._removeTile(e)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(e)}_updateRetainedTiles(e,t){const i={},r={},n=Math.max(t-N.maxOverzooming,this._source.minzoom),o=Math.max(t+N.maxUnderzooming,this._source.minzoom),a={};for(const r of e){const e=this._addTile(r);i[r.key]=r,e.hasData()||t<this._source.maxzoom&&(a[r.key]=r)}this._retainLoadedChildren(a,t,o,i);for(const o of e){let e=this._tiles[o.key];if(e.hasData())continue;if(t+1>this._source.maxzoom){const e=o.children(this._source.maxzoom)[0],t=this.getTile(e);if(t&&t.hasData()){i[e.key]=e;continue}}else{const e=o.children(this._source.maxzoom);if(i[e[0].key]&&i[e[1].key]&&i[e[2].key]&&i[e[3].key])continue}let a=e.wasRequested();for(let t=o.overscaledZ-1;t>=n;--t){const n=o.scaledTo(t);if(r[n.key])break;if(r[n.key]=!0,e=this.getTile(n),!e&&a&&(e=this._addTile(n)),e&&(i[n.key]=n,a=e.wasRequested(),e.hasData()))break}}return i}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const e in this._tiles){const t=[];let i,r=this._tiles[e].tileID;for(;r.overscaledZ>0;){if(r.key in this._loadedParentTiles){i=this._loadedParentTiles[r.key];break}t.push(r.key);const e=r.scaledTo(r.overscaledZ-1);if(i=this._getLoadedTile(e),i)break;r=e}for(const e of t)this._loadedParentTiles[e]=i}}_addTile(t){let i=this._tiles[t.key];if(i)return i;i=this._cache.getAndRemove(t),i&&(this._setTileReloadTimer(t.key,i),i.tileID=t,this._state.initializeTileState(i,this.map?this.map.painter:null),this._cacheTimers[t.key]&&(clearTimeout(this._cacheTimers[t.key]),delete this._cacheTimers[t.key],this._setTileReloadTimer(t.key,i)));const r=i;return i||(i=new L(t,this._source.tileSize*t.overscaleFactor()),this._loadTile(i,this._tileLoaded.bind(this,i,t.key,i.state))),i.uses++,this._tiles[t.key]=i,r||this._source.fire(new e.Event("dataloading",{tile:i,coord:i.tileID,dataType:"source"})),i}_setTileReloadTimer(e,t){e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);const i=t.getExpiryTimeout();i&&(this._timers[e]=setTimeout((()=>{this._reloadTile(e,"expired"),delete this._timers[e]}),i))}_removeTile(e){const t=this._tiles[e];t&&(t.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),t.uses>0||(t.hasData()&&"reloading"!==t.state?this._cache.add(t.tileID,t,t.getExpiryTimeout()):(t.aborted=!0,this._abortTile(t),this._unloadTile(t))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const e in this._tiles)this._removeTile(e);this._cache.reset()}tilesIn(t,i,r){const n=[],o=this.transform;if(!o)return n;const a=r?o.getCameraQueryGeometry(t):t,s=t.map((e=>o.pointCoordinate(e,this.terrain))),l=a.map((e=>o.pointCoordinate(e,this.terrain))),c=this.getIds();let u=1/0,h=1/0,p=-1/0,d=-1/0;for(const e of l)u=Math.min(u,e.x),h=Math.min(h,e.y),p=Math.max(p,e.x),d=Math.max(d,e.y);for(let t=0;t<c.length;t++){const r=this._tiles[c[t]];if(r.holdingForFade())continue;const a=r.tileID,f=Math.pow(2,o.zoom-r.tileID.overscaledZ),m=i*r.queryPadding*e.EXTENT/r.tileSize/f,g=[a.getTilePoint(new e.MercatorCoordinate(u,h)),a.getTilePoint(new e.MercatorCoordinate(p,d))];if(g[0].x-m<e.EXTENT&&g[0].y-m<e.EXTENT&&g[1].x+m>=0&&g[1].y+m>=0){const e=s.map((e=>a.getTilePoint(e))),t=l.map((e=>a.getTilePoint(e)));n.push({tile:r,tileID:a,queryGeometry:e,cameraQueryGeometry:t,scale:f})}}return n}getVisibleCoordinates(e){const t=this.getRenderableIds(e).map((e=>this._tiles[e].tileID));for(const e of t)e.posMatrix=this.transform.calculatePosMatrix(e.toUnwrapped());return t}hasTransition(){if(this._source.hasTransition())return!0;if(G(this._source.type))for(const t in this._tiles){const i=this._tiles[t];if(void 0!==i.fadeEndTime&&i.fadeEndTime>=e.exported.now())return!0}return!1}setFeatureState(e,t,i){this._state.updateState(e=e||"_geojsonTileLayer",t,i)}removeFeatureState(e,t,i){this._state.removeFeatureState(e=e||"_geojsonTileLayer",t,i)}getFeatureState(e,t){return this._state.getState(e=e||"_geojsonTileLayer",t)}setDependencies(e,t,i){const r=this._tiles[e];r&&r.setDependencies(t,i)}reloadTilesForDependencies(e,t){for(const i in this._tiles)this._tiles[i].hasDependency(e,t)&&this._reloadTile(i,"reloading");this._cache.filter((i=>!i.hasDependency(e,t)))}}function O(e,t){const i=Math.abs(2*e.wrap)-+(e.wrap<0),r=Math.abs(2*t.wrap)-+(t.wrap<0);return e.overscaledZ-t.overscaledZ||r-i||t.canonical.y-e.canonical.y||t.canonical.x-e.canonical.x}function G(e){return"raster"===e||"image"===e||"video"===e}N.maxOverzooming=10,N.maxUnderzooming=3;const U="mapboxgl_preloaded_worker_pool";class V{constructor(){this.active={}}acquire(e){if(!this.workers)for(this.workers=[];this.workers.length<V.workerCount;)this.workers.push(new Worker(vn.workerUrl));return this.active[e]=!0,this.workers.slice()}release(e){delete this.active[e],0===this.numActive()&&(this.workers.forEach((e=>{e.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[U]}numActive(){return Object.keys(this.active).length}}const $=Math.floor(e.exported.hardwareConcurrency/2);let q;function j(){return q||(q=new V),q}function Z(t,i){const r={};for(const e in t)"ref"!==e&&(r[e]=t[e]);return e.refProperties.forEach((e=>{e in i&&(r[e]=i[e])})),r}function W(e){e=e.slice();const t=Object.create(null);for(let i=0;i<e.length;i++)t[e[i].id]=e[i];for(let i=0;i<e.length;i++)"ref"in e[i]&&(e[i]=Z(e[i],t[e[i].ref]));return e}V.workerCount=Math.max(Math.min($,6),1);const X={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function H(e,t,i){i.push({command:X.addSource,args:[e,t[e]]})}function Y(e,t,i){t.push({command:X.removeSource,args:[e]}),i[e]=!0}function K(e,t,i,r){Y(e,i,r),H(e,t,i)}function J(e,t,i){let r;for(r in e[i])if(Object.prototype.hasOwnProperty.call(e[i],r)&&"data"!==r&&!n(e[i][r],t[i][r]))return!1;for(r in t[i])if(Object.prototype.hasOwnProperty.call(t[i],r)&&"data"!==r&&!n(e[i][r],t[i][r]))return!1;return!0}function Q(e,t,i,r,o,a){let s;for(s in t=t||{},e=e||{})Object.prototype.hasOwnProperty.call(e,s)&&(n(e[s],t[s])||i.push({command:a,args:[r,s,t[s],o]}));for(s in t)Object.prototype.hasOwnProperty.call(t,s)&&!Object.prototype.hasOwnProperty.call(e,s)&&(n(e[s],t[s])||i.push({command:a,args:[r,s,t[s],o]}))}function ee(e){return e.id}function te(e,t){return e[t.id]=t,e}class ie{constructor(e,t){this.reset(e,t)}reset(e,t){this.points=e||[],this._distances=[0];for(let e=1;e<this.points.length;e++)this._distances[e]=this._distances[e-1]+this.points[e].dist(this.points[e-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(t||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(t){if(1===this.points.length)return this.points[0];t=e.clamp(t,0,1);let i=1,r=this._distances[i];const n=t*this.paddedLength+this.padding;for(;r<n&&i<this._distances.length;)r=this._distances[++i];const o=i-1,a=this._distances[o],s=r-a,l=s>0?(n-a)/s:0;return this.points[o].mult(1-l).add(this.points[i].mult(l))}}function re(e,t){let i=!0;return"always"===e||"never"!==e&&"never"!==t||(i=!1),i}class ne{constructor(e,t,i){const r=this.boxCells=[],n=this.circleCells=[];this.xCellCount=Math.ceil(e/i),this.yCellCount=Math.ceil(t/i);for(let e=0;e<this.xCellCount*this.yCellCount;e++)r.push([]),n.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=t,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/t,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(e,t,i,r,n){this._forEachCell(t,i,r,n,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(t),this.bboxes.push(i),this.bboxes.push(r),this.bboxes.push(n)}insertCircle(e,t,i,r){this._forEachCell(t-r,i-r,t+r,i+r,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(t),this.circles.push(i),this.circles.push(r)}_insertBoxCell(e,t,i,r,n,o){this.boxCells[n].push(o)}_insertCircleCell(e,t,i,r,n,o){this.circleCells[n].push(o)}_query(e,t,i,r,n,o,a){if(i<0||e>this.width||r<0||t>this.height)return[];const s=[];if(e<=0&&t<=0&&this.width<=i&&this.height<=r){if(n)return[{key:null,x1:e,y1:t,x2:i,y2:r}];for(let e=0;e<this.boxKeys.length;e++)s.push({key:this.boxKeys[e],x1:this.bboxes[4*e],y1:this.bboxes[4*e+1],x2:this.bboxes[4*e+2],y2:this.bboxes[4*e+3]});for(let e=0;e<this.circleKeys.length;e++){const t=this.circles[3*e],i=this.circles[3*e+1],r=this.circles[3*e+2];s.push({key:this.circleKeys[e],x1:t-r,y1:i-r,x2:t+r,y2:i+r})}}else this._forEachCell(e,t,i,r,this._queryCell,s,{hitTest:n,overlapMode:o,seenUids:{box:{},circle:{}}},a);return s}query(e,t,i,r){return this._query(e,t,i,r,!1,null)}hitTest(e,t,i,r,n,o){return this._query(e,t,i,r,!0,n,o).length>0}hitTestCircle(e,t,i,r,n){const o=e-i,a=e+i,s=t-i,l=t+i;if(a<0||o>this.width||l<0||s>this.height)return!1;const c=[];return this._forEachCell(o,s,a,l,this._queryCellCircle,c,{hitTest:!0,overlapMode:r,circle:{x:e,y:t,radius:i},seenUids:{box:{},circle:{}}},n),c.length>0}_queryCell(e,t,i,r,n,o,a,s){const{seenUids:l,hitTest:c,overlapMode:u}=a,h=this.boxCells[n];if(null!==h){const n=this.bboxes;for(const a of h)if(!l.box[a]){l.box[a]=!0;const h=4*a,p=this.boxKeys[a];if(e<=n[h+2]&&t<=n[h+3]&&i>=n[h+0]&&r>=n[h+1]&&(!s||s(p))&&(!c||!re(u,p.overlapMode))&&(o.push({key:p,x1:n[h],y1:n[h+1],x2:n[h+2],y2:n[h+3]}),c))return!0}}const p=this.circleCells[n];if(null!==p){const n=this.circles;for(const a of p)if(!l.circle[a]){l.circle[a]=!0;const h=3*a,p=this.circleKeys[a];if(this._circleAndRectCollide(n[h],n[h+1],n[h+2],e,t,i,r)&&(!s||s(p))&&(!c||!re(u,p.overlapMode))){const e=n[h],t=n[h+1],i=n[h+2];if(o.push({key:p,x1:e-i,y1:t-i,x2:e+i,y2:t+i}),c)return!0}}}return!1}_queryCellCircle(e,t,i,r,n,o,a,s){const{circle:l,seenUids:c,overlapMode:u}=a,h=this.boxCells[n];if(null!==h){const e=this.bboxes;for(const t of h)if(!c.box[t]){c.box[t]=!0;const i=4*t,r=this.boxKeys[t];if(this._circleAndRectCollide(l.x,l.y,l.radius,e[i+0],e[i+1],e[i+2],e[i+3])&&(!s||s(r))&&!re(u,r.overlapMode))return o.push(!0),!0}}const p=this.circleCells[n];if(null!==p){const e=this.circles;for(const t of p)if(!c.circle[t]){c.circle[t]=!0;const i=3*t,r=this.circleKeys[t];if(this._circlesCollide(e[i],e[i+1],e[i+2],l.x,l.y,l.radius)&&(!s||s(r))&&!re(u,r.overlapMode))return o.push(!0),!0}}}_forEachCell(e,t,i,r,n,o,a,s){const l=this._convertToXCellCoord(e),c=this._convertToYCellCoord(t),u=this._convertToXCellCoord(i),h=this._convertToYCellCoord(r);for(let p=l;p<=u;p++)for(let l=c;l<=h;l++)if(n.call(this,e,t,i,r,this.xCellCount*l+p,o,a,s))return}_convertToXCellCoord(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))}_convertToYCellCoord(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))}_circlesCollide(e,t,i,r,n,o){const a=r-e,s=n-t,l=i+o;return l*l>a*a+s*s}_circleAndRectCollide(e,t,i,r,n,o,a){const s=(o-r)/2,l=Math.abs(e-(r+s));if(l>s+i)return!1;const c=(a-n)/2,u=Math.abs(t-(n+c));if(u>c+i)return!1;if(l<=s||u<=c)return!0;const h=l-s,p=u-c;return h*h+p*p<=i*i}}function oe(t,i,r,n,o){const a=e.create();return i?(e.scale(a,a,[1/o,1/o,1]),r||e.rotateZ(a,a,n.angle)):e.multiply(a,n.labelPlaneMatrix,t),a}function ae(t,i,r,n,o){if(i){const i=e.clone(t);return e.scale(i,i,[o,o,1]),r||e.rotateZ(i,i,-n.angle),i}return n.glCoordMatrix}function se(t,i,r){let n;r?(n=[t.x,t.y,r(t.x,t.y),1],e.transformMat4(n,n,i)):(n=[t.x,t.y,0,1],_e(n,n,i));const o=n[3];return{point:new e.pointGeometry(n[0]/o,n[1]/o),signedDistanceFromCamera:o}}function le(e,t){return.5+e/t*.5}function ce(e,t){const i=e[0]/e[3],r=e[1]/e[3];return i>=-t[0]&&i<=t[0]&&r>=-t[1]&&r<=t[1]}function ue(t,i,r,n,o,a,s,l,c,u){const h=n?t.textSizeData:t.iconSizeData,p=e.evaluateSizeForZoom(h,r.transform.zoom),d=[256/r.width*2+1,256/r.height*2+1],f=n?t.text.dynamicLayoutVertexArray:t.icon.dynamicLayoutVertexArray;f.clear();const m=t.lineVertexArray,g=n?t.text.placedSymbolArray:t.icon.placedSymbolArray,y=r.transform.width/r.transform.height;let _=!1;for(let n=0;n<g.length;n++){const x=g.get(n);if(x.hidden||x.writingMode===e.WritingMode.vertical&&!_){ye(x.numGlyphs,f);continue}let b;if(_=!1,u?(b=[x.anchorX,x.anchorY,u(x.anchorX,x.anchorY),1],e.transformMat4(b,b,i)):(b=[x.anchorX,x.anchorY,0,1],_e(b,b,i)),!ce(b,d)){ye(x.numGlyphs,f);continue}const v=le(r.transform.cameraToCenterDistance,b[3]),w=e.evaluateSizeForFeature(h,p,x),A=s?w/v:w*v,E=new e.pointGeometry(x.anchorX,x.anchorY),I=se(E,o,u).point,D={},T=de(x,A,!1,l,i,o,a,t.glyphOffsetArray,m,f,I,E,D,y,c,u);_=T.useVertical,(T.notEnoughRoom||_||T.needsFlipping&&de(x,A,!0,l,i,o,a,t.glyphOffsetArray,m,f,I,E,D,y,c,u).notEnoughRoom)&&ye(x.numGlyphs,f)}n?t.text.dynamicLayoutVertexBuffer.updateData(f):t.icon.dynamicLayoutVertexBuffer.updateData(f)}function he(e,t,i,r,n,o,a,s,l,c,u,h,p){const d=s.glyphStartIndex+s.numGlyphs,f=s.lineStartIndex,m=s.lineStartIndex+s.lineLength,g=t.getoffsetX(s.glyphStartIndex),y=t.getoffsetX(d-1),_=me(e*g,i,r,n,o,a,s.segment,f,m,l,c,u,h,p);if(!_)return null;const x=me(e*y,i,r,n,o,a,s.segment,f,m,l,c,u,h,p);return x?{first:_,last:x}:null}function pe(t,i,r,n){return t===e.WritingMode.horizontal&&Math.abs(r.y-i.y)>Math.abs(r.x-i.x)*n?{useVertical:!0}:(t===e.WritingMode.vertical?i.y<r.y:i.x>r.x)?{needsFlipping:!0}:null}function de(t,i,r,n,o,a,s,l,c,u,h,p,d,f,m,g){const y=i/24,_=t.lineOffsetX*y,x=t.lineOffsetY*y;let b;if(t.numGlyphs>1){const e=t.glyphStartIndex+t.numGlyphs,i=t.lineStartIndex,o=t.lineStartIndex+t.lineLength,u=he(y,l,_,x,r,h,p,t,c,a,d,m,g);if(!u)return{notEnoughRoom:!0};const v=se(u.first.point,s,g).point,w=se(u.last.point,s,g).point;if(n&&!r){const e=pe(t.writingMode,v,w,f);if(e)return e}b=[u.first];for(let n=t.glyphStartIndex+1;n<e-1;n++)b.push(me(y*l.getoffsetX(n),_,x,r,h,p,t.segment,i,o,c,a,d,m,g));b.push(u.last)}else{if(n&&!r){const i=se(p,o,g).point,r=t.lineStartIndex+t.segment+1,n=new e.pointGeometry(c.getx(r),c.gety(r)),a=se(n,o,g),s=a.signedDistanceFromCamera>0?a.point:fe(p,n,i,1,o,g),l=pe(t.writingMode,i,s,f);if(l)return l}const i=me(y*l.getoffsetX(t.glyphStartIndex),_,x,r,h,p,t.segment,t.lineStartIndex,t.lineStartIndex+t.lineLength,c,a,d,m,g);if(!i)return{notEnoughRoom:!0};b=[i]}for(const t of b)e.addDynamicAttributes(u,t.point,t.angle);return{}}function fe(e,t,i,r,n,o){const a=se(e.add(e.sub(t)._unit()),n,o).point,s=i.sub(a);return i.add(s._mult(r/s.mag()))}function me(t,i,r,n,o,a,s,l,c,u,h,p,d,f){const m=n?t-i:t+i;let g=m>0?1:-1,y=0;n&&(g*=-1,y=Math.PI),g<0&&(y+=Math.PI);let _=g>0?l+s:l+s+1,x=o,b=o,v=0,w=0;const A=Math.abs(m),E=[];for(;v+w<=A;){if(_+=g,_<l||_>=c)return null;if(b=x,E.push(x),x=p[_],void 0===x){const t=new e.pointGeometry(u.getx(_),u.gety(_)),i=se(t,h,f);if(i.signedDistanceFromCamera>0)x=p[_]=i.point;else{const i=_-g;x=fe(0===v?a:new e.pointGeometry(u.getx(i),u.gety(i)),t,b,A-v+1,h,f)}}v+=w,w=b.dist(x)}const I=(A-v)/w,D=x.sub(b),T=D.mult(I)._add(b);T._add(D._unit()._perp()._mult(r*g));const C=y+Math.atan2(x.y-b.y,x.x-b.x);return E.push(T),{point:T,angle:d?C:0,path:E}}const ge=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ye(e,t){for(let i=0;i<e;i++){const e=t.length;t.resize(e+4),t.float32.set(ge,3*e)}}function _e(e,t,i){const r=t[0],n=t[1];return e[0]=i[0]*r+i[4]*n+i[12],e[1]=i[1]*r+i[5]*n+i[13],e[3]=i[3]*r+i[7]*n+i[15],e}const xe=100;class be{constructor(e,t=new ne(e.width+200,e.height+200,25),i=new ne(e.width+200,e.height+200,25)){this.transform=e,this.grid=t,this.ignoredGrid=i,this.pitchfactor=Math.cos(e._pitch)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+xe,this.screenBottomBoundary=e.height+xe,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(e,t,i,r,n,o){const a=this.projectAndGetPerspectiveRatio(r,e.anchorPointX,e.anchorPointY,o),s=i*a.perspectiveRatio,l=e.x1*s+a.point.x,c=e.y1*s+a.point.y,u=e.x2*s+a.point.x,h=e.y2*s+a.point.y;return!this.isInsideGrid(l,c,u,h)||"always"!==t&&this.grid.hitTest(l,c,u,h,t,n)||a.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[l,c,u,h],offscreen:this.isOffscreen(l,c,u,h)}}placeCollisionCircles(t,i,r,n,o,a,s,l,c,u,h,p,d,f){const m=[],g=new e.pointGeometry(i.anchorX,i.anchorY),y=se(g,a,f),_=le(this.transform.cameraToCenterDistance,y.signedDistanceFromCamera),x=(u?o/_:o*_)/e.ONE_EM,b=se(g,s,f).point,v=he(x,n,i.lineOffsetX*x,i.lineOffsetY*x,!1,b,g,i,r,s,{},!1,f);let w=!1,A=!1,E=!0;if(v){const i=.5*p*_+d,r=new e.pointGeometry(-100,-100),n=new e.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),o=new ie,a=v.first,s=v.last;let u=[];for(let e=a.path.length-1;e>=1;e--)u.push(a.path[e]);for(let e=1;e<s.path.length;e++)u.push(s.path[e]);const g=2.5*i;if(l){const e=u.map((e=>se(e,l,f)));u=e.some((e=>e.signedDistanceFromCamera<=0))?[]:e.map((e=>e.point))}let y=[];if(u.length>0){const t=u[0].clone(),i=u[0].clone();for(let e=1;e<u.length;e++)t.x=Math.min(t.x,u[e].x),t.y=Math.min(t.y,u[e].y),i.x=Math.max(i.x,u[e].x),i.y=Math.max(i.y,u[e].y);y=t.x>=r.x&&i.x<=n.x&&t.y>=r.y&&i.y<=n.y?[u]:i.x<r.x||t.x>n.x||i.y<r.y||t.y>n.y?[]:e.clipLine([u],r.x,r.y,n.x,n.y)}for(const e of y){o.reset(e,.25*i);let r=0;r=o.length<=.5*i?1:Math.ceil(o.paddedLength/g)+1;for(let e=0;e<r;e++){const n=e/Math.max(r-1,1),a=o.lerp(n),s=a.x+xe,l=a.y+xe;m.push(s,l,i,0);const u=s-i,p=l-i,d=s+i,f=l+i;if(E=E&&this.isOffscreen(u,p,d,f),A=A||this.isInsideGrid(u,p,d,f),"always"!==t&&this.grid.hitTestCircle(s,l,i,t,h)&&(w=!0,!c))return{circles:[],offscreen:!1,collisionDetected:w}}}}return{circles:!c&&w||!A||_<this.perspectiveRatioCutoff?[]:m,offscreen:E,collisionDetected:w}}queryRenderedSymbols(t){if(0===t.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const i=[];let r=1/0,n=1/0,o=-1/0,a=-1/0;for(const s of t){const t=new e.pointGeometry(s.x+xe,s.y+xe);r=Math.min(r,t.x),n=Math.min(n,t.y),o=Math.max(o,t.x),a=Math.max(a,t.y),i.push(t)}const s=this.grid.query(r,n,o,a).concat(this.ignoredGrid.query(r,n,o,a)),l={},c={};for(const t of s){const r=t.key;if(void 0===l[r.bucketInstanceId]&&(l[r.bucketInstanceId]={}),l[r.bucketInstanceId][r.featureIndex])continue;const n=[new e.pointGeometry(t.x1,t.y1),new e.pointGeometry(t.x2,t.y1),new e.pointGeometry(t.x2,t.y2),new e.pointGeometry(t.x1,t.y2)];e.polygonIntersectsPolygon(i,n)&&(l[r.bucketInstanceId][r.featureIndex]=!0,void 0===c[r.bucketInstanceId]&&(c[r.bucketInstanceId]=[]),c[r.bucketInstanceId].push(r.featureIndex))}return c}insertCollisionBox(e,t,i,r,n,o){(i?this.ignoredGrid:this.grid).insert({bucketInstanceId:r,featureIndex:n,collisionGroupID:o,overlapMode:t},e[0],e[1],e[2],e[3])}insertCollisionCircles(e,t,i,r,n,o){const a=i?this.ignoredGrid:this.grid,s={bucketInstanceId:r,featureIndex:n,collisionGroupID:o,overlapMode:t};for(let t=0;t<e.length;t+=4)a.insertCircle(s,e[t],e[t+1],e[t+2])}projectAndGetPerspectiveRatio(t,i,r,n){let o;return n?(o=[i,r,n(i,r),1],e.transformMat4(o,o,t)):(o=[i,r,0,1],_e(o,o,t)),{point:new e.pointGeometry((o[0]/o[3]+1)/2*this.transform.width+xe,(-o[1]/o[3]+1)/2*this.transform.height+xe),perspectiveRatio:.5+this.transform.cameraToCenterDistance/o[3]*.5}}isOffscreen(e,t,i,r){return i<xe||e>=this.screenRightBoundary||r<xe||t>this.screenBottomBoundary}isInsideGrid(e,t,i,r){return i>=0&&e<this.gridRightBoundary&&r>=0&&t<this.gridBottomBoundary}getViewportMatrix(){const t=e.identity([]);return e.translate(t,t,[-100,-100,0]),t}}function ve(t,i,r){return i*(e.EXTENT/(t.tileSize*Math.pow(2,r-t.tileID.overscaledZ)))}class we{constructor(e,t,i,r){this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?t:-t))):r&&i?1:0,this.placed=i}isHidden(){return 0===this.opacity&&!this.placed}}class Ae{constructor(e,t,i,r,n){this.text=new we(e?e.text:null,t,i,n),this.icon=new we(e?e.icon:null,t,r,n)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Ee{constructor(e,t,i){this.text=e,this.icon=t,this.skipFade=i}}class Ie{constructor(){this.invProjMatrix=e.create(),this.viewportMatrix=e.create(),this.circles=[]}}class De{constructor(e,t,i,r,n){this.bucketInstanceId=e,this.featureIndex=t,this.sourceLayerIndex=i,this.bucketIndex=r,this.tileID=n}}class Te{constructor(e){this.crossSourceCollisions=e,this.maxGroupID=0,this.collisionGroups={}}get(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){const t=++this.maxGroupID;this.collisionGroups[e]={ID:t,predicate:e=>e.collisionGroupID===t}}return this.collisionGroups[e]}}function Ce(t,i,r,n,o){const{horizontalAlign:a,verticalAlign:s}=e.getAnchorAlignment(t),l=-(a-.5)*i,c=-(s-.5)*r,u=e.evaluateVariableOffset(t,n);return new e.pointGeometry(l+u[0]*o,c+u[1]*o)}function Me(t,i,r,n,o,a){const{x1:s,x2:l,y1:c,y2:u,anchorPointX:h,anchorPointY:p}=t,d=new e.pointGeometry(i,r);return n&&d._rotate(o?a:-a),{x1:s+d.x,y1:c+d.y,x2:l+d.x,y2:u+d.y,anchorPointX:h,anchorPointY:p}}class Se{constructor(e,t,i,r,n){this.transform=e.clone(),this.terrain=t,this.collisionIndex=new be(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=i,this.retainedQueryData={},this.collisionGroups=new Te(r),this.collisionCircleArrays={},this.prevPlacement=n,n&&(n.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(t,i,r,n){const o=r.getBucket(i),a=r.latestFeatureIndex;if(!o||!a||i.id!==o.layerIds[0])return;const s=r.collisionBoxArray,l=o.layers[0].layout,c=Math.pow(2,this.transform.zoom-r.tileID.overscaledZ),u=r.tileSize/e.EXTENT,h=this.transform.calculatePosMatrix(r.tileID.toUnwrapped()),p="map"===l.get("text-pitch-alignment"),d="map"===l.get("text-rotation-alignment"),f=ve(r,1,this.transform.zoom),m=oe(h,p,d,this.transform,f);let g=null;if(p){const t=ae(h,p,d,this.transform,f);g=e.multiply([],this.transform.labelPlaneMatrix,t)}this.retainedQueryData[o.bucketInstanceId]=new De(o.bucketInstanceId,a,o.sourceLayerIndex,o.index,r.tileID);const y={bucket:o,layout:l,posMatrix:h,textLabelPlaneMatrix:m,labelToScreenMatrix:g,scale:c,textPixelRatio:u,holdingForFade:r.holdingForFade(),collisionBoxArray:s,partiallyEvaluatedTextSize:e.evaluateSizeForZoom(o.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(o.sourceID)};if(n)for(const e of o.sortKeyRanges){const{sortKey:i,symbolInstanceStart:r,symbolInstanceEnd:n}=e;t.push({sortKey:i,symbolInstanceStart:r,symbolInstanceEnd:n,parameters:y})}else t.push({symbolInstanceStart:0,symbolInstanceEnd:o.symbolInstances.length,parameters:y})}attemptAnchorPlacement(e,t,i,r,n,o,a,s,l,c,u,h,p,d,f,m){const g=[h.textOffset0,h.textOffset1],y=Ce(e,i,r,g,n),_=this.collisionIndex.placeCollisionBox(Me(t,y.x,y.y,o,a,this.transform.angle),u,s,l,c.predicate,m);if((!f||0!==this.collisionIndex.placeCollisionBox(Me(f,y.x,y.y,o,a,this.transform.angle),u,s,l,c.predicate,m).box.length)&&_.box.length>0){let t;if(this.prevPlacement&&this.prevPlacement.variableOffsets[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID].text&&(t=this.prevPlacement.variableOffsets[h.crossTileID].anchor),0===h.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[h.crossTileID]={textOffset:g,width:i,height:r,anchor:e,textBoxScale:n,prevAnchor:t},this.markUsedJustification(p,e,h,d),p.allowVerticalPlacement&&(this.markUsedOrientation(p,d,h),this.placedOrientations[h.crossTileID]=d),{shift:y,placedGlyphBoxes:_}}}placeLayerBucketPart(t,i,r){const{bucket:n,layout:o,posMatrix:a,textLabelPlaneMatrix:s,labelToScreenMatrix:l,textPixelRatio:c,holdingForFade:u,collisionBoxArray:h,partiallyEvaluatedTextSize:p,collisionGroup:d}=t.parameters,f=o.get("text-optional"),m=o.get("icon-optional"),g=e.getOverlapMode(o,"text-overlap","text-allow-overlap"),y="always"===g,_=e.getOverlapMode(o,"icon-overlap","icon-allow-overlap"),x="always"===_,b="map"===o.get("text-rotation-alignment"),v="map"===o.get("text-pitch-alignment"),w="none"!==o.get("icon-text-fit"),A="viewport-y"===o.get("symbol-z-order"),E=y&&(x||!n.hasIconData()||m),I=x&&(y||!n.hasTextData()||f);!n.collisionArrays&&h&&n.deserializeCollisionBoxes(h);const D=(t,h)=>{if(i[t.crossTileID])return;if(u)return void(this.placements[t.crossTileID]=new Ee(!1,!1,!1));let x=!1,A=!1,D=!0,T=null,C={box:null,offscreen:null},M={box:null,offscreen:null},S=null,P=null,R=null,k=0,z=0,L=0;h.textFeatureIndex?k=h.textFeatureIndex:t.useRuntimeCollisionCircles&&(k=t.featureIndex),h.verticalTextFeatureIndex&&(z=h.verticalTextFeatureIndex);const B=this.retainedQueryData[n.bucketInstanceId].tileID,F=this.terrain?(e,t)=>this.terrain.getElevation(B,e,t):null;for(const e of["textBox","verticalTextBox","iconBox","verticalIconBox"]){const t=h[e];t&&(t.elevation=F?F(t.anchorPointX,t.anchorPointY):0)}const N=h.textBox;if(N){const i=i=>{let r=e.WritingMode.horizontal;if(n.allowVerticalPlacement&&!i&&this.prevPlacement){const e=this.prevPlacement.placedOrientations[t.crossTileID];e&&(this.placedOrientations[t.crossTileID]=e,r=e,this.markUsedOrientation(n,r,t))}return r},r=(i,r)=>{if(n.allowVerticalPlacement&&t.numVerticalGlyphVertices>0&&h.verticalTextBox){for(const t of n.writingModes)if(t===e.WritingMode.vertical?(C=r(),M=C):C=i(),C&&C.box&&C.box.length)break}else C=i()};if(o.get("text-variable-anchor")){let s=o.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[t.crossTileID]){const e=this.prevPlacement.variableOffsets[t.crossTileID];s.indexOf(e.anchor)>0&&(s=s.filter((t=>t!==e.anchor)),s.unshift(e.anchor))}const l=(e,i,r)=>{const o=e.x2-e.x1,l=e.y2-e.y1,u=t.textBoxScale,h=w&&"never"===_?i:null;let p={box:[],offscreen:!1};const f="never"!==g?2*s.length:s.length;for(let i=0;i<f;++i){const f=this.attemptAnchorPlacement(s[i%s.length],e,o,l,u,b,v,c,a,d,i>=s.length?g:"never",t,n,r,h,F);if(f&&(p=f.placedGlyphBoxes,p&&p.box&&p.box.length)){x=!0,T=f.shift;break}}return p};r((()=>l(N,h.iconBox,e.WritingMode.horizontal)),(()=>{const i=h.verticalTextBox;return n.allowVerticalPlacement&&!(C&&C.box&&C.box.length)&&t.numVerticalGlyphVertices>0&&i?l(i,h.verticalIconBox,e.WritingMode.vertical):{box:null,offscreen:null}})),C&&(x=C.box,D=C.offscreen);const u=i(C&&C.box);if(!x&&this.prevPlacement){const e=this.prevPlacement.variableOffsets[t.crossTileID];e&&(this.variableOffsets[t.crossTileID]=e,this.markUsedJustification(n,e.anchor,t,u))}}else{const o=(e,i)=>{const r=this.collisionIndex.placeCollisionBox(e,g,c,a,d.predicate,F);return r&&r.box&&r.box.length&&(this.markUsedOrientation(n,i,t),this.placedOrientations[t.crossTileID]=i),r};r((()=>o(N,e.WritingMode.horizontal)),(()=>{const i=h.verticalTextBox;return n.allowVerticalPlacement&&t.numVerticalGlyphVertices>0&&i?o(i,e.WritingMode.vertical):{box:null,offscreen:null}})),i(C&&C.box&&C.box.length)}}if(S=C,x=S&&S.box&&S.box.length>0,D=S&&S.offscreen,t.useRuntimeCollisionCircles){const i=n.text.placedSymbolArray.get(t.centerJustifiedTextSymbolIndex),c=e.evaluateSizeForFeature(n.textSizeData,p,i),u=o.get("text-padding");P=this.collisionIndex.placeCollisionCircles(g,i,n.lineVertexArray,n.glyphOffsetArray,c,a,s,l,r,v,d.predicate,t.collisionCircleDiameter,u,F),P.circles.length&&P.collisionDetected&&!r&&e.warnOnce("Collisions detected, but collision boxes are not shown"),x=y||P.circles.length>0&&!P.collisionDetected,D=D&&P.offscreen}if(h.iconFeatureIndex&&(L=h.iconFeatureIndex),h.iconBox){const e=e=>{const t=w&&T?Me(e,T.x,T.y,b,v,this.transform.angle):e;return this.collisionIndex.placeCollisionBox(t,_,c,a,d.predicate,F)};M&&M.box&&M.box.length&&h.verticalIconBox?(R=e(h.verticalIconBox),A=R.box.length>0):(R=e(h.iconBox),A=R.box.length>0),D=D&&R.offscreen}const O=f||0===t.numHorizontalGlyphVertices&&0===t.numVerticalGlyphVertices,G=m||0===t.numIconVertices;if(O||G?G?O||(A=A&&x):x=A&&x:A=x=A&&x,x&&S&&S.box&&this.collisionIndex.insertCollisionBox(S.box,g,o.get("text-ignore-placement"),n.bucketInstanceId,M&&M.box&&z?z:k,d.ID),A&&R&&this.collisionIndex.insertCollisionBox(R.box,_,o.get("icon-ignore-placement"),n.bucketInstanceId,L,d.ID),P&&(x&&this.collisionIndex.insertCollisionCircles(P.circles,g,o.get("text-ignore-placement"),n.bucketInstanceId,k,d.ID),r)){const e=n.bucketInstanceId;let t=this.collisionCircleArrays[e];void 0===t&&(t=this.collisionCircleArrays[e]=new Ie);for(let e=0;e<P.circles.length;e+=4)t.circles.push(P.circles[e+0]),t.circles.push(P.circles[e+1]),t.circles.push(P.circles[e+2]),t.circles.push(P.collisionDetected?1:0)}if(0===t.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");if(0===n.bucketInstanceId)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[t.crossTileID]=new Ee(x||E,A||I,D||n.justReloaded),i[t.crossTileID]=!0};if(A){if(0!==t.symbolInstanceStart)throw new Error("bucket.bucketInstanceId should be 0");const e=n.getSortedSymbolIndexes(this.transform.angle);for(let t=e.length-1;t>=0;--t){const i=e[t];D(n.symbolInstances.get(i),n.collisionArrays[i])}}else for(let e=t.symbolInstanceStart;e<t.symbolInstanceEnd;e++)D(n.symbolInstances.get(e),n.collisionArrays[e]);if(r&&n.bucketInstanceId in this.collisionCircleArrays){const t=this.collisionCircleArrays[n.bucketInstanceId];e.invert(t.invProjMatrix,a),t.viewportMatrix=this.collisionIndex.getViewportMatrix()}n.justReloaded=!1}markUsedJustification(t,i,r,n){let o;o=n===e.WritingMode.vertical?r.verticalPlacedTextSymbolIndex:{left:r.leftJustifiedTextSymbolIndex,center:r.centerJustifiedTextSymbolIndex,right:r.rightJustifiedTextSymbolIndex}[e.getAnchorJustification(i)];const a=[r.leftJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.rightJustifiedTextSymbolIndex,r.verticalPlacedTextSymbolIndex];for(const e of a)e>=0&&(t.text.placedSymbolArray.get(e).crossTileID=o>=0&&e!==o?0:r.crossTileID)}markUsedOrientation(t,i,r){const n=i===e.WritingMode.horizontal||i===e.WritingMode.horizontalOnly?i:0,o=i===e.WritingMode.vertical?i:0,a=[r.leftJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.rightJustifiedTextSymbolIndex];for(const e of a)t.text.placedSymbolArray.get(e).placedOrientation=n;r.verticalPlacedTextSymbolIndex&&(t.text.placedSymbolArray.get(r.verticalPlacedTextSymbolIndex).placedOrientation=o)}commit(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;const t=this.prevPlacement;let i=!1;this.prevZoomAdjustment=t?t.zoomAdjustment(this.transform.zoom):0;const r=t?t.symbolFadeChange(e):1,n=t?t.opacities:{},o=t?t.variableOffsets:{},a=t?t.placedOrientations:{};for(const e in this.placements){const t=this.placements[e],o=n[e];o?(this.opacities[e]=new Ae(o,r,t.text,t.icon),i=i||t.text!==o.text.placed||t.icon!==o.icon.placed):(this.opacities[e]=new Ae(null,r,t.text,t.icon,t.skipFade),i=i||t.text||t.icon)}for(const e in n){const t=n[e];if(!this.opacities[e]){const n=new Ae(t,r,!1,!1);n.isHidden()||(this.opacities[e]=n,i=i||t.text.placed||t.icon.placed)}}for(const e in o)this.variableOffsets[e]||!this.opacities[e]||this.opacities[e].isHidden()||(this.variableOffsets[e]=o[e]);for(const e in a)this.placedOrientations[e]||!this.opacities[e]||this.opacities[e].isHidden()||(this.placedOrientations[e]=a[e]);if(t&&void 0===t.lastPlacementChangeTime)throw new Error("Last placement time for previous placement is not defined");i?this.lastPlacementChangeTime=e:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=t?t.lastPlacementChangeTime:e)}updateLayerOpacities(e,t){const i={};for(const r of t){const t=r.getBucket(e);t&&r.latestFeatureIndex&&e.id===t.layerIds[0]&&this.updateBucketOpacities(t,i,r.collisionBoxArray)}}updateBucketOpacities(t,i,r){t.hasTextData()&&t.text.opacityVertexArray.clear(),t.hasIconData()&&t.icon.opacityVertexArray.clear(),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexArray.clear(),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexArray.clear();const n=t.layers[0].layout,o=new Ae(null,0,!1,!1,!0),a=n.get("text-allow-overlap"),s=n.get("icon-allow-overlap"),l=n.get("text-variable-anchor"),c="map"===n.get("text-rotation-alignment"),u="map"===n.get("text-pitch-alignment"),h="none"!==n.get("icon-text-fit"),p=new Ae(null,0,a&&(s||!t.hasIconData()||n.get("icon-optional")),s&&(a||!t.hasTextData()||n.get("text-optional")),!0);!t.collisionArrays&&r&&(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData())&&t.deserializeCollisionBoxes(r);const d=(e,t,i)=>{for(let r=0;r<t/4;r++)e.opacityVertexArray.emplaceBack(i)};for(let r=0;r<t.symbolInstances.length;r++){const n=t.symbolInstances.get(r),{numHorizontalGlyphVertices:a,numVerticalGlyphVertices:s,crossTileID:f}=n;let m=this.opacities[f];i[f]?m=o:m||(m=p,this.opacities[f]=m),i[f]=!0;const g=n.numIconVertices>0,y=this.placedOrientations[n.crossTileID],_=y===e.WritingMode.vertical,x=y===e.WritingMode.horizontal||y===e.WritingMode.horizontalOnly;if(a>0||s>0){const e=Oe(m.text);d(t.text,a,_?Ge:e),d(t.text,s,x?Ge:e);const i=m.text.isHidden();[n.rightJustifiedTextSymbolIndex,n.centerJustifiedTextSymbolIndex,n.leftJustifiedTextSymbolIndex].forEach((e=>{e>=0&&(t.text.placedSymbolArray.get(e).hidden=i||_?1:0)})),n.verticalPlacedTextSymbolIndex>=0&&(t.text.placedSymbolArray.get(n.verticalPlacedTextSymbolIndex).hidden=i||x?1:0);const r=this.variableOffsets[n.crossTileID];r&&this.markUsedJustification(t,r.anchor,n,y);const o=this.placedOrientations[n.crossTileID];o&&(this.markUsedJustification(t,"left",n,o),this.markUsedOrientation(t,o,n))}if(g){const e=Oe(m.icon),i=!(h&&n.verticalPlacedIconSymbolIndex&&_);n.placedIconSymbolIndex>=0&&(d(t.icon,n.numIconVertices,i?e:Ge),t.icon.placedSymbolArray.get(n.placedIconSymbolIndex).hidden=m.icon.isHidden()),n.verticalPlacedIconSymbolIndex>=0&&(d(t.icon,n.numVerticalIconVertices,i?Ge:e),t.icon.placedSymbolArray.get(n.verticalPlacedIconSymbolIndex).hidden=m.icon.isHidden())}if(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData()){const i=t.collisionArrays[r];if(i){let r=new e.pointGeometry(0,0);if(i.textBox||i.verticalTextBox){let e=!0;if(l){const t=this.variableOffsets[f];t?(r=Ce(t.anchor,t.width,t.height,t.textOffset,t.textBoxScale),c&&r._rotate(u?this.transform.angle:-this.transform.angle)):e=!1}i.textBox&&Pe(t.textCollisionBox.collisionVertexArray,m.text.placed,!e||_,r.x,r.y),i.verticalTextBox&&Pe(t.textCollisionBox.collisionVertexArray,m.text.placed,!e||x,r.x,r.y)}const n=Boolean(!x&&i.verticalIconBox);i.iconBox&&Pe(t.iconCollisionBox.collisionVertexArray,m.icon.placed,n,h?r.x:0,h?r.y:0),i.verticalIconBox&&Pe(t.iconCollisionBox.collisionVertexArray,m.icon.placed,!n,h?r.x:0,h?r.y:0)}}}if(t.sortFeatures(this.transform.angle),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexBuffer&&t.iconCollisionBox.collisionVertexBuffer.updateData(t.iconCollisionBox.collisionVertexArray),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexBuffer&&t.textCollisionBox.collisionVertexBuffer.updateData(t.textCollisionBox.collisionVertexArray),t.text.opacityVertexArray.length!==t.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${t.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${t.text.layoutVertexArray.length}) / 4`);if(t.icon.opacityVertexArray.length!==t.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${t.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${t.icon.layoutVertexArray.length}) / 4`);if(t.bucketInstanceId in this.collisionCircleArrays){const e=this.collisionCircleArrays[t.bucketInstanceId];t.placementInvProjMatrix=e.invProjMatrix,t.placementViewportMatrix=e.viewportMatrix,t.collisionCircleArray=e.circles,delete this.collisionCircleArrays[t.bucketInstanceId]}}symbolFadeChange(e){return 0===this.fadeDuration?1:(e-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(e){return Math.max(0,(this.transform.zoom-e)/1.5)}hasTransitions(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(e,t){const i=this.zoomAtLastRecencyCheck===t?1-this.zoomAdjustment(t):1;return this.zoomAtLastRecencyCheck=t,this.commitTime+this.fadeDuration*i>e}setStale(){this.stale=!0}}function Pe(e,t,i,r,n){e.emplaceBack(t?1:0,i?1:0,r||0,n||0),e.emplaceBack(t?1:0,i?1:0,r||0,n||0),e.emplaceBack(t?1:0,i?1:0,r||0,n||0),e.emplaceBack(t?1:0,i?1:0,r||0,n||0)}const Re=Math.pow(2,25),ke=Math.pow(2,24),ze=Math.pow(2,17),Le=Math.pow(2,16),Be=Math.pow(2,9),Fe=Math.pow(2,8),Ne=Math.pow(2,1);function Oe(e){if(0===e.opacity&&!e.placed)return 0;if(1===e.opacity&&e.placed)return 4294967295;const t=e.placed?1:0,i=Math.floor(127*e.opacity);return i*Re+t*ke+i*ze+t*Le+i*Be+t*Fe+i*Ne+t}const Ge=0;class Ue{constructor(e){this._sortAcrossTiles="viewport-y"!==e.layout.get("symbol-z-order")&&!e.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(e,t,i,r,n){const o=this._bucketParts;for(;this._currentTileIndex<e.length;)if(t.getBucketParts(o,r,e[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,n())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,o.sort(((e,t)=>e.sortKey-t.sortKey)));this._currentPartIndex<o.length;)if(t.placeLayerBucketPart(o[this._currentPartIndex],this._seenCrossTileIDs,i),this._currentPartIndex++,n())return!0;return!1}}class Ve{constructor(e,t,i,r,n,o,a,s){this.placement=new Se(e,t,o,a,s),this._currentPlacementIndex=i.length-1,this._forceFullPlacement=r,this._showCollisionBoxes=n,this._done=!1}isDone(){return this._done}continuePlacement(t,i,r){const n=e.exported.now(),o=()=>{const t=e.exported.now()-n;return!this._forceFullPlacement&&t>2};for(;this._currentPlacementIndex>=0;){const e=i[t[this._currentPlacementIndex]],n=this.placement.collisionIndex.transform.zoom;if("symbol"===e.type&&(!e.minzoom||e.minzoom<=n)&&(!e.maxzoom||e.maxzoom>n)){if(this._inProgressLayer||(this._inProgressLayer=new Ue(e)),this._inProgressLayer.continuePlacement(r[e.source],this.placement,this._showCollisionBoxes,e,o))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(e){return this.placement.commit(e),this.placement}}const $e=512/e.EXTENT/2;class qe{constructor(e,t,i){this.tileID=e,this.indexedSymbolInstances={},this.bucketInstanceId=i;for(let i=0;i<t.length;i++){const r=t.get(i),n=r.key;this.indexedSymbolInstances[n]||(this.indexedSymbolInstances[n]=[]),this.indexedSymbolInstances[n].push({crossTileID:r.crossTileID,coord:this.getScaledCoordinates(r,e)})}}getScaledCoordinates(t,i){const r=$e/Math.pow(2,i.canonical.z-this.tileID.canonical.z);return{x:Math.floor((i.canonical.x*e.EXTENT+t.anchorX)*r),y:Math.floor((i.canonical.y*e.EXTENT+t.anchorY)*r)}}findMatches(e,t,i){const r=this.tileID.canonical.z<t.canonical.z?1:Math.pow(2,this.tileID.canonical.z-t.canonical.z);for(let n=0;n<e.length;n++){const o=e.get(n);if(o.crossTileID)continue;const a=this.indexedSymbolInstances[o.key];if(!a)continue;const s=this.getScaledCoordinates(o,t);for(const e of a)if(Math.abs(e.coord.x-s.x)<=r&&Math.abs(e.coord.y-s.y)<=r&&!i[e.crossTileID]){i[e.crossTileID]=!0,o.crossTileID=e.crossTileID;break}}}}class je{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Ze{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(e){const t=Math.round((e-this.lng)/360);if(0!==t)for(const e in this.indexes){const i=this.indexes[e],r={};for(const e in i){const n=i[e];n.tileID=n.tileID.unwrapTo(n.tileID.wrap+t),r[n.tileID.key]=n}this.indexes[e]=r}this.lng=e}addBucket(e,t,i){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===t.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(let e=0;e<t.symbolInstances.length;e++)t.symbolInstances.get(e).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]={});const r=this.usedCrossTileIDs[e.overscaledZ];for(const i in this.indexes){const n=this.indexes[i];if(Number(i)>e.overscaledZ)for(const i in n){const o=n[i];o.tileID.isChildOf(e)&&o.findMatches(t.symbolInstances,e,r)}else{const o=n[e.scaledTo(Number(i)).key];o&&o.findMatches(t.symbolInstances,e,r)}}for(let e=0;e<t.symbolInstances.length;e++){const n=t.symbolInstances.get(e);n.crossTileID||(n.crossTileID=i.generate(),r[n.crossTileID]=!0)}return void 0===this.indexes[e.overscaledZ]&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new qe(e,t.symbolInstances,t.bucketInstanceId),!0}removeBucketCrossTileIDs(e,t){for(const i in t.indexedSymbolInstances)for(const r of t.indexedSymbolInstances[i])delete this.usedCrossTileIDs[e][r.crossTileID]}removeStaleBuckets(e){let t=!1;for(const i in this.indexes){const r=this.indexes[i];for(const n in r)e[r[n].bucketInstanceId]||(this.removeBucketCrossTileIDs(i,r[n]),delete r[n],t=!0)}return t}}class We{constructor(){this.layerIndexes={},this.crossTileIDs=new je,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(e,t,i){let r=this.layerIndexes[e.id];void 0===r&&(r=this.layerIndexes[e.id]=new Ze);let n=!1;const o={};r.handleWrapJump(i);for(const i of t){const t=i.getBucket(e);t&&e.id===t.layerIds[0]&&(t.bucketInstanceId||(t.bucketInstanceId=++this.maxBucketInstanceId),r.addBucket(i.tileID,t,this.crossTileIDs)&&(n=!0),o[t.bucketInstanceId]=!0)}return r.removeStaleBuckets(o)&&(n=!0),n}pruneUnusedLayers(e){const t={};e.forEach((e=>{t[e]=!0}));for(const e in this.layerIndexes)t[e]||delete this.layerIndexes[e]}}var Xe=e.createLayout([{name:"a_pos",type:"Int16",components:2}]);class He extends e.Evented{constructor(e){super(),this.sourceCache=e,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.renderHistory=[],this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,this.renderHistorySize=e._cache.max,e.usedForTerrain=!0,e.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null;for(const e in this._tiles){const t=this._tiles[e];t.textures.forEach((e=>e.destroy())),t.textures=[]}}update(t,i){this.sourceCache.update(t,i),this._renderableTilesKeys=[];for(const r of t.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:i}))this._renderableTilesKeys.push(r.key),this._tiles[r.key]||(r.posMatrix=new Float64Array(16),e.ortho(r.posMatrix,0,e.EXTENT,0,e.EXTENT,0,1),this._tiles[r.key]=new L(r,this.tileSize))}removeOutdated(e){const t={};this.renderHistory=this.renderHistory.filter(((e,t)=>this.renderHistory.indexOf(e)===t)).slice(0,this.renderHistorySize);for(const e of this._renderableTilesKeys)t[e]=!0;for(const e of this.renderHistory)t[e]=!0;for(const i in this._tiles)t[i]||(this._tiles[i].clearTextures(e),delete this._tiles[i])}getRenderableTiles(){return this._renderableTilesKeys.map((e=>this.getTileByID(e)))}getTileByID(e){return this._tiles[e]}getTerrainCoords(t){const i={};for(const r of this._renderableTilesKeys){const n=this._tiles[r].tileID;if(n.canonical.equals(t.canonical)){const n=t.clone();n.posMatrix=new Float64Array(16),e.ortho(n.posMatrix,0,e.EXTENT,0,e.EXTENT,0,1),i[r]=n}else if(n.canonical.isChildOf(t.canonical)){const o=t.clone();o.posMatrix=new Float64Array(16);const a=n.canonical.z-t.canonical.z,s=n.canonical.x-(n.canonical.x>>a<<a),l=n.canonical.y-(n.canonical.y>>a<<a),c=e.EXTENT>>a;e.ortho(o.posMatrix,0,c,0,c,0,1),e.translate(o.posMatrix,o.posMatrix,[-s*c,-l*c,0]),i[r]=o}else if(t.canonical.isChildOf(n.canonical)){const o=t.clone();o.posMatrix=new Float64Array(16);const a=t.canonical.z-n.canonical.z,s=t.canonical.x-(t.canonical.x>>a<<a),l=t.canonical.y-(t.canonical.y>>a<<a),c=e.EXTENT>>a;e.ortho(o.posMatrix,0,e.EXTENT,0,e.EXTENT,0,1),e.translate(o.posMatrix,o.posMatrix,[s*c,l*c,0]),e.scale(o.posMatrix,o.posMatrix,[1/2**a,1/2**a,0]),i[r]=o}}return i}getSourceTile(e,t){const i=this.sourceCache._source;let r=e.overscaledZ-this.deltaZoom;if(r>i.maxzoom&&(r=i.maxzoom),r<i.minzoom)return null;this._sourceTileCache[e.key]||(this._sourceTileCache[e.key]=e.scaledTo(r).key);let n=this.sourceCache.getTileByID(this._sourceTileCache[e.key]);if((!n||!n.dem)&&t)for(;r>=i.minzoom&&(!n||!n.dem);)n=this.sourceCache.getTileByID(e.scaledTo(r--).key);return n}tilesAfterTime(e=Date.now()){return Object.values(this._tiles).filter((t=>t.timeLoaded>=e))}}class Ye{constructor(e,t,i){this.style=e,this.sourceCache=new He(t),this.options=i,this.exaggeration="number"==typeof i.exaggeration?i.exaggeration:1,this.elevationOffset="number"==typeof i.elevationOffset?i.elevationOffset:450,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024,this.clearRerenderCache()}getDEMElevation(t,i,r,n=e.EXTENT){if(!(i>=0&&i<n&&r>=0&&r<n))return this.elevationOffset;let o=0;const a=this.getTerrainData(t);if(a.tile&&a.tile.dem){const t=e.transformMat4$1([],[i/n*e.EXTENT,r/n*e.EXTENT],a.u_terrain_matrix),s=[t[0]*a.tile.dem.dim,t[1]*a.tile.dem.dim],l=[Math.floor(s[0]),Math.floor(s[1])],c=a.tile.dem.get(l[0],l[1]),u=a.tile.dem.get(l[0],l[1]+1),h=a.tile.dem.get(l[0]+1,l[1]),p=a.tile.dem.get(l[0]+1,l[1]+1);o=e.number(e.number(c,u,s[0]-l[0]),e.number(h,p,s[0]-l[0]),s[1]-l[1])}return o}rememberForRerender(e,t){for(const i in this.sourceCache._tiles){const r=this.sourceCache._tiles[i];(r.tileID.equals(t)||r.tileID.isChildOf(t))&&(e===this.sourceCache.sourceCache.id&&(r.timeLoaded=Date.now()),this._rerender[e]=this._rerender[e]||{},this._rerender[e][r.tileID.key]=!0)}}needsRerender(e,t){return this._rerender[e]&&this._rerender[e][t.key]}clearRerenderCache(){this._rerender={}}getElevation(t,i,r,n=e.EXTENT){return(this.getDEMElevation(t,i,r,n)+this.elevationOffset)*this.exaggeration}getTerrainData(t){if(!this._emptyDemTexture){const t=this.style.map.painter.context,i=new e.RGBAImage({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new l(t,i,t.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new l(t,new e.RGBAImage({width:1,height:1}),t.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(t.gl.NEAREST,t.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=e.identity([])}const i=this.sourceCache.getSourceTile(t,!0);if(i&&i.dem&&(!i.demTexture||i.needsTerrainPrepare)){const e=this.style.map.painter.context;i.demTexture=this.style.map.painter.getTileTexture(i.dem.stride),i.demTexture?i.demTexture.update(i.dem.getPixels(),{premultiply:!1}):i.demTexture=new l(e,i.dem.getPixels(),e.gl.RGBA,{premultiply:!1}),i.demTexture.bind(e.gl.NEAREST,e.gl.CLAMP_TO_EDGE),i.needsTerrainPrepare=!1}const r=i&&i+i.tileID.key+t.key;if(r&&!this._demMatrixCache[r]){const r=this.sourceCache.sourceCache._source.maxzoom;let n=t.canonical.z-i.tileID.canonical.z;t.overscaledZ>t.canonical.z&&(t.canonical.z>=r?n=t.canonical.z-r:e.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const o=t.canonical.x-(t.canonical.x>>n<<n),a=t.canonical.y-(t.canonical.y>>n<<n),s=e.fromScaling(new Float64Array(16),[1/(e.EXTENT<<n),1/(e.EXTENT<<n),0]);e.translate(s,s,[o*e.EXTENT,a*e.EXTENT,0]),this._demMatrixCache[t.key]={matrix:s,coord:t}}return{u_depth:2,u_terrain:3,u_terrain_dim:i&&i.dem&&i.dem.dim||1,u_terrain_matrix:r?this._demMatrixCache[t.key].matrix:this._emptyDemMatrix,u_terrain_unpack:i&&i.dem&&i.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_offset:this.elevationOffset,u_terrain_exaggeration:this.exaggeration,texture:(i&&i.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:i}}getRTTFramebuffer(){const e=this.style.map.painter;if(!this._rttFramebuffer){const t=this.sourceCache.tileSize*this.qualityFactor;this._rttFramebuffer=e.context.createFramebuffer(t,t,!0),this._rttFramebuffer.depthAttachment.set(e.context.createRenderbuffer(e.context.gl.DEPTH_COMPONENT16,t,t))}return this._rttFramebuffer}getFramebuffer(e){const t=this.style.map.painter,i=t.width/devicePixelRatio,r=t.height/devicePixelRatio;return!this._fbo||this._fbo.width===i&&this._fbo.height===r||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new l(t.context,{width:i,height:r,data:null},t.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(t.context.gl.NEAREST,t.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new l(t.context,{width:i,height:r,data:null},t.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(t.context.gl.NEAREST,t.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=t.context.createFramebuffer(i,r,!0),this._fbo.depthAttachment.set(t.context.createRenderbuffer(t.context.gl.DEPTH_COMPONENT16,i,r))),this._fbo.colorAttachment.set("coords"===e?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const t=this.style.map.painter.context;if(this._coordsTexture)return this._coordsTexture;const i=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let e=0,t=0;e<this._coordsTextureSize;e++)for(let r=0;r<this._coordsTextureSize;r++,t+=4)i[t+0]=255&r,i[t+1]=255&e,i[t+2]=r>>8<<4|e>>8,i[t+3]=0;const r=new e.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(i.buffer)),n=new l(t,r,t.gl.RGBA,{premultiply:!1});return n.bind(t.gl.NEAREST,t.gl.CLAMP_TO_EDGE),this._coordsTexture=n,n}pointCoordinate(t){const i=new Uint8Array(4),r=this.style.map.painter,n=r.context,o=n.gl;n.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),o.readPixels(t.x,r.height/devicePixelRatio-t.y-1,1,1,o.RGBA,o.UNSIGNED_BYTE,i),n.bindFramebuffer.set(null);const a=i[0]+(i[2]>>4<<8),s=i[1]+((15&i[2])<<8),l=this.coordsIndex[255-i[3]],c=l&&this.sourceCache.getTileByID(l);if(!c)return null;const u=this._coordsTextureSize,h=(1<<c.tileID.canonical.z)*u;return new e.MercatorCoordinate((c.tileID.canonical.x*u+a)/h,(c.tileID.canonical.y*u+s)/h,this.getElevation(c.tileID,a,s,u))}getTerrainMesh(){if(this._mesh)return this._mesh;const t=this.style.map.painter.context,i=new e.PosArray,r=new e.TriangleIndexArray,n=this.meshSize,o=e.EXTENT/n,a=n*n;for(let e=0;e<=n;e++)for(let t=0;t<=n;t++)i.emplaceBack(t*o,e*o);for(let e=0;e<a;e+=n+1)for(let t=0;t<n;t++)r.emplaceBack(t+e,n+t+e+1,n+t+e+2),r.emplaceBack(t+e,n+t+e+2,t+e+1);return this._mesh={indexBuffer:t.createIndexBuffer(r),vertexBuffer:t.createVertexBuffer(i,Xe.members),segments:e.SegmentVector.simpleSegment(0,0,i.length,r.length)},this._mesh}getMinMaxElevation(e){const t=this.getTerrainData(e).tile,i={minElevation:null,maxElevation:null};return t&&t.dem&&(i.minElevation=(t.dem.min+this.elevationOffset)*this.exaggeration,i.maxElevation=(t.dem.max+this.elevationOffset)*this.exaggeration),i}}const Ke=(t,i)=>e.emitValidationErrors(t,i&&i.filter((e=>"source.canvas"!==e.identifier))),Je=e.pick(X,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Qe=e.pick(X,["setCenter","setZoom","setBearing","setPitch"]),et=function(){const t={},i=e.spec.$version;for(const r in e.spec.$root){const n=e.spec.$root[r];if(n.required){let e=null;e="version"===r?i:"array"===n.type?[]:{},null!=e&&(t[r]=e)}}return t}();class tt extends e.Evented{constructor(t,i={}){super(),this.map=t,this.dispatcher=new x(j(),this),this.imageManager=new u,this.imageManager.setEventedParent(this),this.glyphManager=new f(t._requestManager,i.localIdeographFontFamily),this.lineAtlas=new _(256,512),this.crossTileSymbolIndex=new We,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new e.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",e.getReferrer());const r=this;this._rtlTextPluginCallback=tt.registerForPluginStateChange((t=>{r.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:t.pluginStatus,pluginURL:t.pluginURL},((t,i)=>{if(e.triggerPluginCompletionEvent(t),i&&i.every((e=>e)))for(const e in r.sourceCaches)r.sourceCaches[e].reload()}))})),this.on("data",(e=>{if("source"!==e.dataType||"metadata"!==e.sourceDataType)return;const t=this.sourceCaches[e.sourceId];if(!t)return;const i=t.getSource();if(i&&i.vectorLayerIds)for(const e in this._layers){const t=this._layers[e];t.source===i.id&&this._validateLayer(t)}}))}loadURL(t,i={}){this.fire(new e.Event("dataloading",{dataType:"style"}));const r="boolean"!=typeof i.validate||i.validate,n=this.map._requestManager.transformRequest(t,e.ResourceType.Style);this._request=e.getJSON(n,((t,i)=>{this._request=null,t?this.fire(new e.ErrorEvent(t)):i&&this._load(i,r)}))}loadJSON(t,i={}){this.fire(new e.Event("dataloading",{dataType:"style"})),this._request=e.exported.frame((()=>{this._request=null,this._load(t,!1!==i.validate)}))}loadEmpty(){this.fire(new e.Event("dataloading",{dataType:"style"})),this._load(et,!1)}_load(t,i){if(i&&Ke(this,e.validateStyle(t)))return;this._loaded=!0,this.stylesheet=t;for(const e in t.sources)this.addSource(e,t.sources[e],{validate:!1});t.sprite?this._loadSprite(t.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(t.glyphs);const r=W(this.stylesheet.layers);this._order=r.map((e=>e.id)),this._layers={},this._serializedLayers={};for(let t of r)t=e.createStyleLayer(t),t.setEventedParent(this,{layer:{id:t.id}}),this._layers[t.id]=t,this._serializedLayers[t.id]=t.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new y(this.stylesheet.light),this.setTerrain(this.stylesheet.terrain),this.fire(new e.Event("data",{dataType:"style"})),this.fire(new e.Event("style.load"))}_loadSprite(t){this._spriteRequest=function(t,i,r,n){let o,a,s;const l=r>1?"@2x":"";let c=e.getJSON(i.transformRequest(i.normalizeSpriteURL(t,l,".json"),e.ResourceType.SpriteJSON),((e,t)=>{c=null,s||(s=e,o=t,h())})),u=e.getImage(i.transformRequest(i.normalizeSpriteURL(t,l,".png"),e.ResourceType.SpriteImage),((e,t)=>{u=null,s||(s=e,a=t,h())}));function h(){if(s)n(s);else if(o&&a){const t=e.exported.getImageData(a),i={};for(const r in o){const{width:n,height:a,x:s,y:l,sdf:c,pixelRatio:u,stretchX:h,stretchY:p,content:d}=o[r],f=new e.RGBAImage({width:n,height:a});e.RGBAImage.copy(t,f,{x:s,y:l},{x:0,y:0},{width:n,height:a}),i[r]={data:f,pixelRatio:u,sdf:c,stretchX:h,stretchY:p,content:d}}n(null,i)}}return{cancel(){c&&(c.cancel(),c=null),u&&(u.cancel(),u=null)}}}(t,this.map._requestManager,this.map.getPixelRatio(),((t,i)=>{if(this._spriteRequest=null,t)this.fire(new e.ErrorEvent(t));else if(i)for(const e in i)this.imageManager.addImage(e,i[e]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new e.Event("data",{dataType:"style"}))}))}_validateLayer(t){const i=this.sourceCaches[t.source];if(!i)return;const r=t.sourceLayer;if(!r)return;const n=i.getSource();("geojson"===n.type||n.vectorLayerIds&&-1===n.vectorLayerIds.indexOf(r))&&this.fire(new e.ErrorEvent(new Error(`Source layer "${r}" does not exist on source "${n.id}" as specified by style layer "${t.id}".`)))}loaded(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(const e in this.sourceCaches)if(!this.sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(e){const t=[];for(const i of e){const e=this._layers[i];"custom"!==e.type&&t.push(e.serialize())}return t}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const e in this.sourceCaches)if(this.sourceCaches[e].hasTransition())return!0;for(const e in this._layers)if(this._layers[e].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(t){if(!this._loaded)return;const i=this._changed;if(this._changed){const e=Object.keys(this._updatedLayers),i=Object.keys(this._removedLayers);(e.length||i.length)&&this._updateWorkerLayers(e,i);for(const e in this._updatedSources){const t=this._updatedSources[e];if("reload"===t)this._reloadSource(e);else{if("clear"!==t)throw new Error(`Invalid action ${t}`);this._clearSource(e)}}this._updateTilesForChangedImages();for(const e in this._updatedPaintProps)this._layers[e].updateTransitions(t);this.light.updateTransitions(t),this._resetUpdates()}const r={};for(const e in this.sourceCaches){const t=this.sourceCaches[e];r[e]=t.used,t.used=!1}for(const e of this._order){const i=this._layers[e];i.recalculate(t,this._availableImages),!i.isHidden(t.zoom)&&i.source&&(this.sourceCaches[i.source].used=!0)}for(const t in r){const i=this.sourceCaches[t];r[t]!==i.used&&i.fire(new e.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:t}))}this.light.recalculate(t),this.z=t.zoom,i&&this.fire(new e.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const e=Object.keys(this._changedImages);if(e.length){for(const t in this.sourceCaches)this.sourceCaches[t].reloadTilesForDependencies(["icons","patterns"],e);this._changedImages={}}}_updateWorkerLayers(e,t){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(e),removedIds:t})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setTerrain(t){if(this._checkLoaded(),this._terrainDataCallback&&this.off("data",this._terrainDataCallback),this._terrainfreezeElevationCallback&&this.map.off("freezeElevation",this._terrainfreezeElevationCallback),t){const e=this.sourceCaches[t.source];if(!e)throw new Error(`cannot load terrain, because there exists no source with ID: ${t.source}`);this.terrain=new Ye(this,e,t),this.map.transform.updateElevation(this.terrain),this._terrainfreezeElevationCallback=e=>{e.freeze?this.map.transform.freezeElevation=!0:(this.map.transform.freezeElevation=!1,this.map.transform.recalculateZoom(this.terrain))},this._terrainDataCallback=e=>{e.tile&&(e.sourceId===t.source?(this.map.transform.updateElevation(this.terrain),this.terrain.rememberForRerender(e.sourceId,e.tile.tileID)):"geojson"===e.source.type&&this.terrain.rememberForRerender(e.sourceId,e.tile.tileID))},this.on("data",this._terrainDataCallback),this.map.on("freezeElevation",this._terrainfreezeElevationCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.map.transform.updateElevation(this.terrain);this.map.fire(new e.Event("terrain",{terrain:t}))}setState(t){if(this._checkLoaded(),Ke(this,e.validateStyle(t)))return!1;(t=e.clone$1(t)).layers=W(t.layers);const i=function(e,t){if(!e)return[{command:X.setStyle,args:[t]}];let i=[];try{if(!n(e.version,t.version))return[{command:X.setStyle,args:[t]}];n(e.center,t.center)||i.push({command:X.setCenter,args:[t.center]}),n(e.zoom,t.zoom)||i.push({command:X.setZoom,args:[t.zoom]}),n(e.bearing,t.bearing)||i.push({command:X.setBearing,args:[t.bearing]}),n(e.pitch,t.pitch)||i.push({command:X.setPitch,args:[t.pitch]}),n(e.sprite,t.sprite)||i.push({command:X.setSprite,args:[t.sprite]}),n(e.glyphs,t.glyphs)||i.push({command:X.setGlyphs,args:[t.glyphs]}),n(e.transition,t.transition)||i.push({command:X.setTransition,args:[t.transition]}),n(e.light,t.light)||i.push({command:X.setLight,args:[t.light]});const r={},o=[];!function(e,t,i,r){let o;for(o in t=t||{},e=e||{})Object.prototype.hasOwnProperty.call(e,o)&&(Object.prototype.hasOwnProperty.call(t,o)||Y(o,i,r));for(o in t)Object.prototype.hasOwnProperty.call(t,o)&&(Object.prototype.hasOwnProperty.call(e,o)?n(e[o],t[o])||("geojson"===e[o].type&&"geojson"===t[o].type&&J(e,t,o)?i.push({command:X.setGeoJSONSourceData,args:[o,t[o].data]}):K(o,t,i,r)):H(o,t,i))}(e.sources,t.sources,o,r);const a=[];e.layers&&e.layers.forEach((e=>{r[e.source]?i.push({command:X.removeLayer,args:[e.id]}):a.push(e)})),i=i.concat(o),function(e,t,i){t=t||[];const r=(e=e||[]).map(ee),o=t.map(ee),a=e.reduce(te,{}),s=t.reduce(te,{}),l=r.slice(),c=Object.create(null);let u,h,p,d,f,m,g;for(u=0,h=0;u<r.length;u++)p=r[u],Object.prototype.hasOwnProperty.call(s,p)?h++:(i.push({command:X.removeLayer,args:[p]}),l.splice(l.indexOf(p,h),1));for(u=0,h=0;u<o.length;u++)p=o[o.length-1-u],l[l.length-1-u]!==p&&(Object.prototype.hasOwnProperty.call(a,p)?(i.push({command:X.removeLayer,args:[p]}),l.splice(l.lastIndexOf(p,l.length-h),1)):h++,m=l[l.length-u],i.push({command:X.addLayer,args:[s[p],m]}),l.splice(l.length-u,0,p),c[p]=!0);for(u=0;u<o.length;u++)if(p=o[u],d=a[p],f=s[p],!c[p]&&!n(d,f))if(n(d.source,f.source)&&n(d["source-layer"],f["source-layer"])&&n(d.type,f.type)){for(g in Q(d.layout,f.layout,i,p,null,X.setLayoutProperty),Q(d.paint,f.paint,i,p,null,X.setPaintProperty),n(d.filter,f.filter)||i.push({command:X.setFilter,args:[p,f.filter]}),n(d.minzoom,f.minzoom)&&n(d.maxzoom,f.maxzoom)||i.push({command:X.setLayerZoomRange,args:[p,f.minzoom,f.maxzoom]}),d)Object.prototype.hasOwnProperty.call(d,g)&&"layout"!==g&&"paint"!==g&&"filter"!==g&&"metadata"!==g&&"minzoom"!==g&&"maxzoom"!==g&&(0===g.indexOf("paint.")?Q(d[g],f[g],i,p,g.slice(6),X.setPaintProperty):n(d[g],f[g])||i.push({command:X.setLayerProperty,args:[p,g,f[g]]}));for(g in f)Object.prototype.hasOwnProperty.call(f,g)&&!Object.prototype.hasOwnProperty.call(d,g)&&"layout"!==g&&"paint"!==g&&"filter"!==g&&"metadata"!==g&&"minzoom"!==g&&"maxzoom"!==g&&(0===g.indexOf("paint.")?Q(d[g],f[g],i,p,g.slice(6),X.setPaintProperty):n(d[g],f[g])||i.push({command:X.setLayerProperty,args:[p,g,f[g]]}))}else i.push({command:X.removeLayer,args:[p]}),m=l[l.lastIndexOf(p)+1],i.push({command:X.addLayer,args:[f,m]})}(a,t.layers,i)}catch(e){console.warn("Unable to compute style diff:",e),i=[{command:X.setStyle,args:[t]}]}return i}(this.serialize(),t).filter((e=>!(e.command in Qe)));if(0===i.length)return!1;const r=i.filter((e=>!(e.command in Je)));if(r.length>0)throw new Error(`Unimplemented: ${r.map((e=>e.command)).join(", ")}.`);return i.forEach((e=>{"setTransition"!==e.command&&this[e.command].apply(this,e.args)})),this.stylesheet=t,!0}addImage(t,i){if(this.getImage(t))return this.fire(new e.ErrorEvent(new Error(`An image named "${t}" already exists.`)));this.imageManager.addImage(t,i),this._afterImageUpdated(t)}updateImage(e,t){this.imageManager.updateImage(e,t)}getImage(e){return this.imageManager.getImage(e)}removeImage(t){if(!this.getImage(t))return this.fire(new e.ErrorEvent(new Error(`An image named "${t}" does not exist.`)));this.imageManager.removeImage(t),this._afterImageUpdated(t)}_afterImageUpdated(t){this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new e.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(t,i,r={}){if(this._checkLoaded(),void 0!==this.sourceCaches[t])throw new Error(`Source "${t}" already exists.`);if(!i.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(i).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(i.type)>=0&&this._validate(e.validateStyle.source,`sources.${t}`,i,null,r))return;this.map&&this.map._collectResourceTiming&&(i.collectResourceTiming=!0);const n=this.sourceCaches[t]=new N(t,i,this.dispatcher);n.style=this,n.setEventedParent(this,(()=>({isSourceLoaded:this.loaded(),source:n.serialize(),sourceId:t}))),n.onAdd(this.map),this._changed=!0}removeSource(t){if(this._checkLoaded(),void 0===this.sourceCaches[t])throw new Error("There is no source with this ID");for(const i in this._layers)if(this._layers[i].source===t)return this.fire(new e.ErrorEvent(new Error(`Source "${t}" cannot be removed while layer "${i}" is using it.`)));const i=this.sourceCaches[t];delete this.sourceCaches[t],delete this._updatedSources[t],i.fire(new e.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:t})),i.setEventedParent(null),i.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(e,t){if(this._checkLoaded(),void 0===this.sourceCaches[e])throw new Error(`There is no source with this ID=${e}`);const i=this.sourceCaches[e].getSource();if("geojson"!==i.type)throw new Error(`geojsonSource.type is ${i.type}, which is !== 'geojson`);i.setData(t),this._changed=!0}getSource(e){return this.sourceCaches[e]&&this.sourceCaches[e].getSource()}addLayer(t,i,r={}){this._checkLoaded();const n=t.id;if(this.getLayer(n))return void this.fire(new e.ErrorEvent(new Error(`Layer "${n}" already exists on this map.`)));let o;if("custom"===t.type){if(Ke(this,e.validateCustomStyleLayer(t)))return;o=e.createStyleLayer(t)}else{if("object"==typeof t.source&&(this.addSource(n,t.source),t=e.clone$1(t),t=e.extend(t,{source:n})),this._validate(e.validateStyle.layer,`layers.${n}`,t,{arrayIndex:-1},r))return;o=e.createStyleLayer(t),this._validateLayer(o),o.setEventedParent(this,{layer:{id:n}}),this._serializedLayers[o.id]=o.serialize()}const a=i?this._order.indexOf(i):this._order.length;if(i&&-1===a)this.fire(new e.ErrorEvent(new Error(`Cannot add layer "${n}" before non-existing layer "${i}".`)));else{if(this._order.splice(a,0,n),this._layerOrderChanged=!0,this._layers[n]=o,this._removedLayers[n]&&o.source&&"custom"!==o.type){const e=this._removedLayers[n];delete this._removedLayers[n],e.type!==o.type?this._updatedSources[o.source]="clear":(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause())}this._updateLayer(o),o.onAdd&&o.onAdd(this.map)}}moveLayer(t,i){if(this._checkLoaded(),this._changed=!0,!this._layers[t])return void this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be moved.`)));if(t===i)return;const r=this._order.indexOf(t);this._order.splice(r,1);const n=i?this._order.indexOf(i):this._order.length;i&&-1===n?this.fire(new e.ErrorEvent(new Error(`Cannot move layer "${t}" before non-existing layer "${i}".`))):(this._order.splice(n,0,t),this._layerOrderChanged=!0)}removeLayer(t){this._checkLoaded();const i=this._layers[t];if(!i)return void this.fire(new e.ErrorEvent(new Error(`Cannot remove non-existing layer "${t}".`)));i.setEventedParent(null);const r=this._order.indexOf(t);this._order.splice(r,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=i,delete this._layers[t],delete this._serializedLayers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],i.onRemove&&i.onRemove(this.map)}getLayer(e){return this._layers[e]}hasLayer(e){return e in this._layers}setLayerZoomRange(t,i,r){this._checkLoaded();const n=this.getLayer(t);n?n.minzoom===i&&n.maxzoom===r||(null!=i&&(n.minzoom=i),null!=r&&(n.maxzoom=r),this._updateLayer(n)):this.fire(new e.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${t}".`)))}setFilter(t,i,r={}){this._checkLoaded();const o=this.getLayer(t);if(o){if(!n(o.filter,i))return null==i?(o.filter=void 0,void this._updateLayer(o)):void(this._validate(e.validateStyle.filter,`layers.${o.id}.filter`,i,null,r)||(o.filter=e.clone$1(i),this._updateLayer(o)))}else this.fire(new e.ErrorEvent(new Error(`Cannot filter non-existing layer "${t}".`)))}getFilter(t){return e.clone$1(this.getLayer(t).filter)}setLayoutProperty(t,i,r,o={}){this._checkLoaded();const a=this.getLayer(t);a?n(a.getLayoutProperty(i),r)||(a.setLayoutProperty(i,r,o),this._updateLayer(a)):this.fire(new e.ErrorEvent(new Error(`Cannot style non-existing layer "${t}".`)))}getLayoutProperty(t,i){const r=this.getLayer(t);if(r)return r.getLayoutProperty(i);this.fire(new e.ErrorEvent(new Error(`Cannot get style of non-existing layer "${t}".`)))}setPaintProperty(t,i,r,o={}){this._checkLoaded();const a=this.getLayer(t);a?n(a.getPaintProperty(i),r)||(a.setPaintProperty(i,r,o)&&this._updateLayer(a),this._changed=!0,this._updatedPaintProps[t]=!0):this.fire(new e.ErrorEvent(new Error(`Cannot style non-existing layer "${t}".`)))}getPaintProperty(e,t){return this.getLayer(e).getPaintProperty(t)}setFeatureState(t,i){this._checkLoaded();const r=t.source,n=t.sourceLayer,o=this.sourceCaches[r];if(void 0===o)return void this.fire(new e.ErrorEvent(new Error(`The source '${r}' does not exist in the map's style.`)));const a=o.getSource().type;"geojson"===a&&n?this.fire(new e.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==a||n?(void 0===t.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),o.setFeatureState(n,t.id,i)):this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(t,i){this._checkLoaded();const r=t.source,n=this.sourceCaches[r];if(void 0===n)return void this.fire(new e.ErrorEvent(new Error(`The source '${r}' does not exist in the map's style.`)));const o=n.getSource().type,a="vector"===o?t.sourceLayer:void 0;"vector"!==o||a?i&&"string"!=typeof t.id&&"number"!=typeof t.id?this.fire(new e.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):n.removeFeatureState(a,t.id,i):this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(t){this._checkLoaded();const i=t.source,r=t.sourceLayer,n=this.sourceCaches[i];if(void 0!==n)return"vector"!==n.getSource().type||r?(void 0===t.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),n.getFeatureState(r,t.id)):void this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new e.ErrorEvent(new Error(`The source '${i}' does not exist in the map's style.`)))}getTransition(){return e.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){return e.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:e.mapObject(this.sourceCaches,(e=>e.serialize())),layers:this._serializeLayers(this._order)},(e=>void 0!==e))}_updateLayer(e){this._updatedLayers[e.id]=!0,e.source&&!this._updatedSources[e.source]&&"raster"!==this.sourceCaches[e.source].getSource().type&&(this._updatedSources[e.source]="reload",this.sourceCaches[e.source].pause()),this._changed=!0}_flattenAndSortRenderedFeatures(e){const t=e=>"fill-extrusion"===this._layers[e].type,i={},r=[];for(let n=this._order.length-1;n>=0;n--){const o=this._order[n];if(t(o)){i[o]=n;for(const t of e){const e=t[o];if(e)for(const t of e)r.push(t)}}}r.sort(((e,t)=>t.intersectionZ-e.intersectionZ));const n=[];for(let o=this._order.length-1;o>=0;o--){const a=this._order[o];if(t(a))for(let e=r.length-1;e>=0;e--){const t=r[e].feature;if(i[t.layer.id]<o)break;n.push(t),r.pop()}else for(const t of e){const e=t[a];if(e)for(const t of e)n.push(t.feature)}}return n}queryRenderedFeatures(t,i,r){i&&i.filter&&this._validate(e.validateStyle.filter,"queryRenderedFeatures.filter",i.filter,null,i);const n={};if(i&&i.layers){if(!Array.isArray(i.layers))return this.fire(new e.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const t of i.layers){const i=this._layers[t];if(!i)return this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be queried for features.`))),[];n[i.source]=!0}}const o=[];i.availableImages=this._availableImages;for(const e in this.sourceCaches)i.layers&&!n[e]||o.push(k(this.sourceCaches[e],this._layers,this._serializedLayers,t,i,r));return this.placement&&o.push(function(e,t,i,r,n,o,a){const s={},l=o.queryRenderedSymbols(r),c=[];for(const e of Object.keys(l).map(Number))c.push(a[e]);c.sort(z);for(const i of c){const r=i.featureIndex.lookupSymbolFeatures(l[i.bucketInstanceId],t,i.bucketIndex,i.sourceLayerIndex,n.filter,n.layers,n.availableImages,e);for(const e in r){const t=s[e]=s[e]||[],n=r[e];n.sort(((e,t)=>{const r=i.featureSortOrder;if(r){const i=r.indexOf(e.featureIndex);return r.indexOf(t.featureIndex)-i}return t.featureIndex-e.featureIndex}));for(const e of n)t.push(e)}}for(const t in s)s[t].forEach((r=>{const n=r.feature,o=i[e[t].source].getFeatureState(n.layer["source-layer"],n.id);n.source=n.layer.source,n.layer["source-layer"]&&(n.sourceLayer=n.layer["source-layer"]),n.state=o}));return s}(this._layers,this._serializedLayers,this.sourceCaches,t,i,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(o)}querySourceFeatures(t,i){i&&i.filter&&this._validate(e.validateStyle.filter,"querySourceFeatures.filter",i.filter,null,i);const r=this.sourceCaches[t];return r?function(e,t){const i=e.getRenderableIds().map((t=>e.getTileByID(t))),r=[],n={};for(let e=0;e<i.length;e++){const o=i[e],a=o.tileID.canonical.key;n[a]||(n[a]=!0,o.querySourceFeatures(r,t))}return r}(r,i):[]}addSourceType(e,t,i){return tt.getSourceType(e)?i(new Error(`A source type called "${e}" already exists.`)):(tt.setSourceType(e,t),t.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:e,url:t.workerSourceURL},i):i(null,null))}getLight(){return this.light.getLight()}setLight(t,i={}){this._checkLoaded();const r=this.light.getLight();let o=!1;for(const e in t)if(!n(t[e],r[e])){o=!0;break}if(!o)return;const a={now:e.exported.now(),transition:e.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(t,i),this.light.updateTransitions(a)}_validate(t,i,r,n,o={}){return(!o||!1!==o.validate)&&Ke(this,t.call(e.validateStyle,e.extend({key:i,style:this.serialize(),value:r,styleSpec:e.spec},n)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),e.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const e in this._layers)this._layers[e].setEventedParent(null);for(const e in this.sourceCaches){const t=this.sourceCaches[e];t.setEventedParent(null),t.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(e){this.sourceCaches[e].clearTiles()}_reloadSource(e){this.sourceCaches[e].resume(),this.sourceCaches[e].reload()}_updateSources(e){for(const t in this.sourceCaches)this.sourceCaches[t].update(e,this.terrain)}_generateCollisionBoxes(){for(const e in this.sourceCaches)this._reloadSource(e)}_updatePlacement(t,i,r,n,o=!1){let a=!1,s=!1;const l={};for(const e of this._order){const i=this._layers[e];if("symbol"!==i.type)continue;if(!l[i.source]){const e=this.sourceCaches[i.source];l[i.source]=e.getRenderableIds(!0).map((t=>e.getTileByID(t))).sort(((e,t)=>t.tileID.overscaledZ-e.tileID.overscaledZ||(e.tileID.isLessThan(t.tileID)?-1:1)))}const r=this.crossTileSymbolIndex.addLayer(i,l[i.source],t.center.lng);a=a||r}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((o=o||this._layerOrderChanged||0===r)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(e.exported.now(),t.zoom))&&(this.pauseablePlacement=new Ve(t,this.terrain,this._order,o,i,r,n,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,l),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(e.exported.now()),s=!0),a&&this.pauseablePlacement.placement.setStale()),s||a)for(const e of this._order){const t=this._layers[e];"symbol"===t.type&&this.placement.updateLayerOpacities(t,l[t.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(e.exported.now())}_releaseSymbolFadeTiles(){for(const e in this.sourceCaches)this.sourceCaches[e].releaseSymbolFadeTiles()}getImages(e,t,i){this.imageManager.getImages(t.icons,i),this._updateTilesForChangedImages();const r=this.sourceCaches[t.source];r&&r.setDependencies(t.tileID.key,t.type,t.icons)}getGlyphs(e,t,i){this.glyphManager.getGlyphs(t.stacks,i)}getResource(t,i,r){return e.makeRequest(i,r)}}tt.getSourceType=function(e){return P[e]},tt.setSourceType=function(e,t){P[e]=t},tt.registerForPluginStateChange=e.registerForPluginStateChange;var it="attribute vec2 a_pos;uniform mat4 u_matrix;varying vec2 v_texture_pos;varying float v_depth;void main() {v_texture_pos=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);v_depth=gl_Position.z/gl_Position.w;}";const rt={prelude:nt("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}\n#ifdef TERRAIN3D\nuniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_offset;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;\n#endif\nconst highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {\n#ifdef TERRAIN3D\nhighp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));\n#else\nreturn 1.0;\n#endif\n}float calculate_visibility(vec4 pos) {\n#ifdef TERRAIN3D\nvec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;\n#else\nreturn 1.0;\n#endif\n}float ele(vec2 pos) {\n#ifdef TERRAIN3D\nvec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;\n#else\nreturn 0.0;\n#endif\n}float get_elevation(vec2 pos) {\n#ifdef TERRAIN3D\nvec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return (elevation+u_terrain_offset)*u_terrain_exaggeration;\n#else\nreturn 0.0;\n#endif\n}"),background:nt("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:nt("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:nt("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),clippingMask:nt("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:nt("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),heatmapTexture:nt("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:nt("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:nt("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:nt("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:nt("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),fillOutline:nt("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillOutlinePattern:nt("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillPattern:nt("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),fillExtrusion:nt("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;\n#ifdef TERRAIN3D\nattribute vec2 a_centroid;\n#endif\nvarying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;\n#ifdef TERRAIN3D\nfloat baseDelta=10.0;float ele=get_elevation(a_centroid);\n#else\nfloat baseDelta=0.0;float ele=0.0;\n#endif\nbase=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),fillExtrusionPattern:nt("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;\n#ifdef TERRAIN3D\nattribute vec2 a_centroid;\n#endif\nvarying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;\n#ifdef TERRAIN3D\nfloat baseDelta=10.0;float ele=get_elevation(a_centroid);\n#else\nfloat baseDelta=0.0;float ele=0.0;\n#endif\nbase=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),hillshadePrepare:nt("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:nt("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:nt("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),lineGradient:nt("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),linePattern:nt("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),lineSDF:nt("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),raster:nt("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:nt("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}"),symbolSDF:nt("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),symbolTextAndIcon:nt("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}"),terrain:nt("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",it),terrainDepth:nt("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",it),terrainCoords:nt("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",it)};function nt(e,t){const i=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,r=t.match(/attribute ([\w]+) ([\w]+)/g),n=e.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),o=t.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),a=o?o.concat(n):n,s={};return{fragmentSource:e=e.replace(i,((e,t,i,r,n)=>(s[n]=!0,"define"===t?`\n#ifndef HAS_UNIFORM_u_${n}\nvarying ${i} ${r} ${n};\n#else\nuniform ${i} ${r} u_${n};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${n}\n    ${i} ${r} ${n} = u_${n};\n#endif\n`))),vertexSource:t=t.replace(i,((e,t,i,r,n)=>{const o="float"===r?"vec2":"vec4",a=n.match(/color/)?"color":o;return s[n]?"define"===t?`\n#ifndef HAS_UNIFORM_u_${n}\nuniform lowp float u_${n}_t;\nattribute ${i} ${o} a_${n};\nvarying ${i} ${r} ${n};\n#else\nuniform ${i} ${r} u_${n};\n#endif\n`:"vec4"===a?`\n#ifndef HAS_UNIFORM_u_${n}\n    ${n} = a_${n};\n#else\n    ${i} ${r} ${n} = u_${n};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${n}\n    ${n} = unpack_mix_${a}(a_${n}, u_${n}_t);\n#else\n    ${i} ${r} ${n} = u_${n};\n#endif\n`:"define"===t?`\n#ifndef HAS_UNIFORM_u_${n}\nuniform lowp float u_${n}_t;\nattribute ${i} ${o} a_${n};\n#else\nuniform ${i} ${r} u_${n};\n#endif\n`:"vec4"===a?`\n#ifndef HAS_UNIFORM_u_${n}\n    ${i} ${r} ${n} = a_${n};\n#else\n    ${i} ${r} ${n} = u_${n};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${n}\n    ${i} ${r} ${n} = unpack_mix_${a}(a_${n}, u_${n}_t);\n#else\n    ${i} ${r} ${n} = u_${n};\n#endif\n`})),staticAttributes:r,staticUniforms:a}}class ot{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(e,t,i,r,n,o,a,s,l){this.context=e;let c=this.boundPaintVertexBuffers.length!==r.length;for(let e=0;!c&&e<r.length;e++)this.boundPaintVertexBuffers[e]!==r[e]&&(c=!0);e.extVertexArrayObject&&this.vao&&this.boundProgram===t&&this.boundLayoutVertexBuffer===i&&!c&&this.boundIndexBuffer===n&&this.boundVertexOffset===o&&this.boundDynamicVertexBuffer===a&&this.boundDynamicVertexBuffer2===s&&this.boundDynamicVertexBuffer3===l?(e.bindVertexArrayOES.set(this.vao),a&&a.bind(),n&&n.dynamicDraw&&n.bind(),s&&s.bind(),l&&l.bind()):this.freshBind(t,i,r,n,o,a,s,l)}freshBind(e,t,i,r,n,o,a,s){let l;const c=e.numAttributes,u=this.context,h=u.gl;if(u.extVertexArrayObject)this.vao&&this.destroy(),this.vao=u.extVertexArrayObject.createVertexArrayOES(),u.bindVertexArrayOES.set(this.vao),l=0,this.boundProgram=e,this.boundLayoutVertexBuffer=t,this.boundPaintVertexBuffers=i,this.boundIndexBuffer=r,this.boundVertexOffset=n,this.boundDynamicVertexBuffer=o,this.boundDynamicVertexBuffer2=a,this.boundDynamicVertexBuffer3=s;else{l=u.currentNumAttributes||0;for(let e=c;e<l;e++)h.disableVertexAttribArray(e)}t.enableAttributes(h,e);for(const t of i)t.enableAttributes(h,e);o&&o.enableAttributes(h,e),a&&a.enableAttributes(h,e),s&&s.enableAttributes(h,e),t.bind(),t.setVertexAttribPointers(h,e,n);for(const t of i)t.bind(),t.setVertexAttribPointers(h,e,n);o&&(o.bind(),o.setVertexAttribPointers(h,e,n)),r&&r.bind(),a&&(a.bind(),a.setVertexAttribPointers(h,e,n)),s&&(s.bind(),s.setVertexAttribPointers(h,e,n)),u.currentNumAttributes=c}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function at(e){const t=[];for(let i=0;i<e.length;i++){if(null===e[i])continue;const r=e[i].split(" ");t.push(r.pop())}return t}class st{constructor(t,i,r,n,o,a,s){const l=t.gl;this.program=l.createProgram();const c=at(r.staticAttributes),u=n?n.getBinderAttributes():[],h=c.concat(u),p=rt.prelude.staticUniforms?at(rt.prelude.staticUniforms):[],d=r.staticUniforms?at(r.staticUniforms):[],f=n?n.getBinderUniforms():[],m=p.concat(d).concat(f),g=[];for(const e of m)g.indexOf(e)<0&&g.push(e);const y=n?n.defines():[];a&&y.push("#define OVERDRAW_INSPECTOR;"),s&&y.push("#define TERRAIN3D;");const _=y.concat(rt.prelude.fragmentSource,r.fragmentSource).join("\n"),x=y.concat(rt.prelude.vertexSource,r.vertexSource).join("\n"),b=l.createShader(l.FRAGMENT_SHADER);if(l.isContextLost())return void(this.failedToCreate=!0);l.shaderSource(b,_),l.compileShader(b),l.attachShader(this.program,b);const v=l.createShader(l.VERTEX_SHADER);if(l.isContextLost())return void(this.failedToCreate=!0);l.shaderSource(v,x),l.compileShader(v),l.attachShader(this.program,v),this.attributes={};const w={};this.numAttributes=h.length;for(let e=0;e<this.numAttributes;e++)h[e]&&(l.bindAttribLocation(this.program,e,h[e]),this.attributes[h[e]]=e);l.linkProgram(this.program),l.deleteShader(v),l.deleteShader(b);for(let e=0;e<g.length;e++){const t=g[e];if(t&&!w[t]){const e=l.getUniformLocation(this.program,t);e&&(w[t]=e)}}this.fixedUniforms=o(t,w),this.terrainUniforms=((t,i)=>({u_depth:new e.Uniform1i(t,i.u_depth),u_terrain:new e.Uniform1i(t,i.u_terrain),u_terrain_dim:new e.Uniform1f(t,i.u_terrain_dim),u_terrain_matrix:new e.UniformMatrix4f(t,i.u_terrain_matrix),u_terrain_unpack:new e.Uniform4f(t,i.u_terrain_unpack),u_terrain_offset:new e.Uniform1f(t,i.u_terrain_offset),u_terrain_exaggeration:new e.Uniform1f(t,i.u_terrain_exaggeration)}))(t,w),this.binderUniforms=n?n.getUniforms(t,w):[]}draw(e,t,i,r,n,o,a,s,l,c,u,h,p,d,f,m,g,y){const _=e.gl;if(this.failedToCreate)return;if(e.program.set(this.program),e.setDepthMode(i),e.setStencilMode(r),e.setColorMode(n),e.setCullFace(o),s){e.activeTexture.set(_.TEXTURE2),_.bindTexture(_.TEXTURE_2D,s.depthTexture),e.activeTexture.set(_.TEXTURE3),_.bindTexture(_.TEXTURE_2D,s.texture);for(const e in this.terrainUniforms)this.terrainUniforms[e].set(s[e])}for(const e in this.fixedUniforms)this.fixedUniforms[e].set(a[e]);f&&f.setUniforms(e,this.binderUniforms,p,{zoom:d});let x=0;switch(t){case _.LINES:x=2;break;case _.TRIANGLES:x=3;break;case _.LINE_STRIP:x=1}for(const i of h.get()){const r=i.vaos||(i.vaos={});(r[l]||(r[l]=new ot)).bind(e,this,c,f?f.getPaintVertexBuffers():[],u,i.vertexOffset,m,g,y),_.drawElements(t,i.primitiveLength*x,_.UNSIGNED_SHORT,i.primitiveOffset*x*2)}}}function lt(e,t,i){const r=1/ve(i,1,t.transform.tileZoom),n=Math.pow(2,i.tileID.overscaledZ),o=i.tileSize*Math.pow(2,t.transform.tileZoom)/n,a=o*(i.tileID.canonical.x+i.tileID.wrap*n),s=o*i.tileID.canonical.y;return{u_image:0,u_texsize:i.imageAtlasTexture.size,u_scale:[r,e.fromScale,e.toScale],u_fade:e.t,u_pixel_coord_upper:[a>>16,s>>16],u_pixel_coord_lower:[65535&a,65535&s]}}const ct=(t,i,r,n)=>{const o=i.style.light,a=o.properties.get("position"),s=[a.x,a.y,a.z],l=e.create$1();"viewport"===o.properties.get("anchor")&&e.fromRotation(l,-i.transform.angle),e.transformMat3(s,s,l);const c=o.properties.get("color");return{u_matrix:t,u_lightpos:s,u_lightintensity:o.properties.get("intensity"),u_lightcolor:[c.r,c.g,c.b],u_vertical_gradient:+r,u_opacity:n}},ut=(t,i,r,n,o,a,s)=>e.extend(ct(t,i,r,n),lt(a,i,s),{u_height_factor:-Math.pow(2,o.overscaledZ)/s.tileSize/8}),ht=e=>({u_matrix:e}),pt=(t,i,r,n)=>e.extend(ht(t),lt(r,i,n)),dt=(e,t)=>({u_matrix:e,u_world:t}),ft=(t,i,r,n,o)=>e.extend(pt(t,i,r,n),{u_world:o}),mt=(e,t,i,r)=>{const n=e.transform;let o,a;if("map"===r.paint.get("circle-pitch-alignment")){const e=ve(i,1,n.zoom);o=!0,a=[e,e]}else o=!1,a=n.pixelsToGLUnits;return{u_camera_to_center_distance:n.cameraToCenterDistance,u_scale_with_map:+("map"===r.paint.get("circle-pitch-scale")),u_matrix:e.translatePosMatrix(t.posMatrix,i,r.paint.get("circle-translate"),r.paint.get("circle-translate-anchor")),u_pitch_with_map:+o,u_device_pixel_ratio:e.pixelRatio,u_extrude_scale:a}},gt=(e,t,i)=>{const r=ve(i,1,t.zoom),n=Math.pow(2,t.zoom-i.tileID.overscaledZ),o=i.tileID.overscaleFactor();return{u_matrix:e,u_camera_to_center_distance:t.cameraToCenterDistance,u_pixels_to_tile_units:r,u_extrude_scale:[t.pixelsToGLUnits[0]/(r*n),t.pixelsToGLUnits[1]/(r*n)],u_overscale_factor:o}},yt=(e,t,i=1)=>({u_matrix:e,u_color:t,u_overlay:0,u_overlay_scale:i}),_t=e=>({u_matrix:e}),xt=(e,t,i,r)=>({u_matrix:e,u_extrude_scale:ve(t,1,i),u_intensity:r});function bt(t,i){const r=Math.pow(2,i.canonical.z),n=i.canonical.y;return[new e.MercatorCoordinate(0,n/r).toLngLat().lat,new e.MercatorCoordinate(0,(n+1)/r).toLngLat().lat]}const vt=(e,t,i,r)=>{const n=e.transform;return{u_matrix:Dt(e,t,i,r),u_ratio:1/ve(t,1,n.zoom),u_device_pixel_ratio:e.pixelRatio,u_units_to_pixels:[1/n.pixelsToGLUnits[0],1/n.pixelsToGLUnits[1]]}},wt=(t,i,r,n,o)=>e.extend(vt(t,i,r,o),{u_image:0,u_image_height:n}),At=(e,t,i,r,n)=>{const o=e.transform,a=It(t,o);return{u_matrix:Dt(e,t,i,n),u_texsize:t.imageAtlasTexture.size,u_ratio:1/ve(t,1,o.zoom),u_device_pixel_ratio:e.pixelRatio,u_image:0,u_scale:[a,r.fromScale,r.toScale],u_fade:r.t,u_units_to_pixels:[1/o.pixelsToGLUnits[0],1/o.pixelsToGLUnits[1]]}},Et=(t,i,r,n,o,a)=>{const s=t.lineAtlas,l=It(i,t.transform),c="round"===r.layout.get("line-cap"),u=s.getDash(n.from,c),h=s.getDash(n.to,c),p=u.width*o.fromScale,d=h.width*o.toScale;return e.extend(vt(t,i,r,a),{u_patternscale_a:[l/p,-u.height/2],u_patternscale_b:[l/d,-h.height/2],u_sdfgamma:s.width/(256*Math.min(p,d)*t.pixelRatio)/2,u_image:0,u_tex_y_a:u.y,u_tex_y_b:h.y,u_mix:o.t})};function It(e,t){return 1/ve(e,1,t.tileZoom)}function Dt(e,t,i,r){return e.translatePosMatrix(r?r.posMatrix:t.tileID.posMatrix,t,i.paint.get("line-translate"),i.paint.get("line-translate-anchor"))}const Tt=(e,t,i,r,n)=>{return{u_matrix:e,u_tl_parent:t,u_scale_parent:i,u_buffer_scale:1,u_fade_t:r.mix,u_opacity:r.opacity*n.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:n.paint.get("raster-brightness-min"),u_brightness_high:n.paint.get("raster-brightness-max"),u_saturation_factor:(a=n.paint.get("raster-saturation"),a>0?1-1/(1.001-a):-a),u_contrast_factor:(o=n.paint.get("raster-contrast"),o>0?1/(1-o):1+o),u_spin_weights:Ct(n.paint.get("raster-hue-rotate"))};var o,a};function Ct(e){e*=Math.PI/180;const t=Math.sin(e),i=Math.cos(e);return[(2*i+1)/3,(-Math.sqrt(3)*t-i+1)/3,(Math.sqrt(3)*t-i+1)/3]}const Mt=(e,t,i,r,n,o,a,s,l,c)=>{const u=n.transform;return{u_is_size_zoom_constant:+("constant"===e||"source"===e),u_is_size_feature_constant:+("constant"===e||"camera"===e),u_size_t:t?t.uSizeT:0,u_size:t?t.uSize:0,u_camera_to_center_distance:u.cameraToCenterDistance,u_pitch:u.pitch/360*2*Math.PI,u_rotate_symbol:+i,u_aspect_ratio:u.width/u.height,u_fade_change:n.options.fadeDuration?n.symbolFadeChange:1,u_matrix:o,u_label_plane_matrix:a,u_coord_matrix:s,u_is_text:+l,u_pitch_with_map:+r,u_texsize:c,u_texture:0}},St=(t,i,r,n,o,a,s,l,c,u,h)=>{const p=o.transform;return e.extend(Mt(t,i,r,n,o,a,s,l,c,u),{u_gamma_scale:n?Math.cos(p._pitch)*p.cameraToCenterDistance:1,u_device_pixel_ratio:o.pixelRatio,u_is_halo:+h})},Pt=(t,i,r,n,o,a,s,l,c,u)=>e.extend(St(t,i,r,n,o,a,s,l,!0,c,!0),{u_texsize_icon:u,u_texture_icon:1}),Rt=(e,t,i)=>({u_matrix:e,u_opacity:t,u_color:i}),kt=(t,i,r,n,o,a)=>e.extend(function(e,t,i,r){const n=i.imageManager.getPattern(e.from.toString()),o=i.imageManager.getPattern(e.to.toString()),{width:a,height:s}=i.imageManager.getPixelSize(),l=Math.pow(2,r.tileID.overscaledZ),c=r.tileSize*Math.pow(2,i.transform.tileZoom)/l,u=c*(r.tileID.canonical.x+r.tileID.wrap*l),h=c*r.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:n.tl,u_pattern_br_a:n.br,u_pattern_tl_b:o.tl,u_pattern_br_b:o.br,u_texsize:[a,s],u_mix:t.t,u_pattern_size_a:n.displaySize,u_pattern_size_b:o.displaySize,u_scale_a:t.fromScale,u_scale_b:t.toScale,u_tile_units_to_pixels:1/ve(r,1,i.transform.tileZoom),u_pixel_coord_upper:[u>>16,h>>16],u_pixel_coord_lower:[65535&u,65535&h]}}(n,a,r,o),{u_matrix:t,u_opacity:i}),zt={fillExtrusion:(t,i)=>({u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_lightpos:new e.Uniform3f(t,i.u_lightpos),u_lightintensity:new e.Uniform1f(t,i.u_lightintensity),u_lightcolor:new e.Uniform3f(t,i.u_lightcolor),u_vertical_gradient:new e.Uniform1f(t,i.u_vertical_gradient),u_opacity:new e.Uniform1f(t,i.u_opacity)}),fillExtrusionPattern:(t,i)=>({u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_lightpos:new e.Uniform3f(t,i.u_lightpos),u_lightintensity:new e.Uniform1f(t,i.u_lightintensity),u_lightcolor:new e.Uniform3f(t,i.u_lightcolor),u_vertical_gradient:new e.Uniform1f(t,i.u_vertical_gradient),u_height_factor:new e.Uniform1f(t,i.u_height_factor),u_image:new e.Uniform1i(t,i.u_image),u_texsize:new e.Uniform2f(t,i.u_texsize),u_pixel_coord_upper:new e.Uniform2f(t,i.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,i.u_pixel_coord_lower),u_scale:new e.Uniform3f(t,i.u_scale),u_fade:new e.Uniform1f(t,i.u_fade),u_opacity:new e.Uniform1f(t,i.u_opacity)}),fill:(t,i)=>({u_matrix:new e.UniformMatrix4f(t,i.u_matrix)}),fillPattern:(t,i)=>({u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_image:new e.Uniform1i(t,i.u_image),u_texsize:new e.Uniform2f(t,i.u_texsize),u_pixel_coord_upper:new e.Uniform2f(t,i.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,i.u_pixel_coord_lower),u_scale:new e.Uniform3f(t,i.u_scale),u_fade:new e.Uniform1f(t,i.u_fade)}),fillOutline:(t,i)=>({u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_world:new e.Uniform2f(t,i.u_world)}),fillOutlinePattern:(t,i)=>({u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_world:new e.Uniform2f(t,i.u_world),u_image:new e.Uniform1i(t,i.u_image),u_texsize:new e.Uniform2f(t,i.u_texsize),u_pixel_coord_upper:new e.Uniform2f(t,i.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,i.u_pixel_coord_lower),u_scale:new e.Uniform3f(t,i.u_scale),u_fade:new e.Uniform1f(t,i.u_fade)}),circle:(t,i)=>({u_camera_to_center_distance:new e.Uniform1f(t,i.u_camera_to_center_distance),u_scale_with_map:new e.Uniform1i(t,i.u_scale_with_map),u_pitch_with_map:new e.Uniform1i(t,i.u_pitch_with_map),u_extrude_scale:new e.Uniform2f(t,i.u_extrude_scale),u_device_pixel_ratio:new e.Uniform1f(t,i.u_device_pixel_ratio),u_matrix:new e.UniformMatrix4f(t,i.u_matrix)}),collisionBox:(t,i)=>({u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_camera_to_center_distance:new e.Uniform1f(t,i.u_camera_to_center_distance),u_pixels_to_tile_units:new e.Uniform1f(t,i.u_pixels_to_tile_units),u_extrude_scale:new e.Uniform2f(t,i.u_extrude_scale),u_overscale_factor:new e.Uniform1f(t,i.u_overscale_factor)}),collisionCircle:(t,i)=>({u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_inv_matrix:new e.UniformMatrix4f(t,i.u_inv_matrix),u_camera_to_center_distance:new e.Uniform1f(t,i.u_camera_to_center_distance),u_viewport_size:new e.Uniform2f(t,i.u_viewport_size)}),debug:(t,i)=>({u_color:new e.UniformColor(t,i.u_color),u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_overlay:new e.Uniform1i(t,i.u_overlay),u_overlay_scale:new e.Uniform1f(t,i.u_overlay_scale)}),clippingMask:(t,i)=>({u_matrix:new e.UniformMatrix4f(t,i.u_matrix)}),heatmap:(t,i)=>({u_extrude_scale:new e.Uniform1f(t,i.u_extrude_scale),u_intensity:new e.Uniform1f(t,i.u_intensity),u_matrix:new e.UniformMatrix4f(t,i.u_matrix)}),heatmapTexture:(t,i)=>({u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_world:new e.Uniform2f(t,i.u_world),u_image:new e.Uniform1i(t,i.u_image),u_color_ramp:new e.Uniform1i(t,i.u_color_ramp),u_opacity:new e.Uniform1f(t,i.u_opacity)}),hillshade:(t,i)=>({u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_image:new e.Uniform1i(t,i.u_image),u_latrange:new e.Uniform2f(t,i.u_latrange),u_light:new e.Uniform2f(t,i.u_light),u_shadow:new e.UniformColor(t,i.u_shadow),u_highlight:new e.UniformColor(t,i.u_highlight),u_accent:new e.UniformColor(t,i.u_accent)}),hillshadePrepare:(t,i)=>({u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_image:new e.Uniform1i(t,i.u_image),u_dimension:new e.Uniform2f(t,i.u_dimension),u_zoom:new e.Uniform1f(t,i.u_zoom),u_unpack:new e.Uniform4f(t,i.u_unpack)}),line:(t,i)=>({u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_ratio:new e.Uniform1f(t,i.u_ratio),u_device_pixel_ratio:new e.Uniform1f(t,i.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(t,i.u_units_to_pixels)}),lineGradient:(t,i)=>({u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_ratio:new e.Uniform1f(t,i.u_ratio),u_device_pixel_ratio:new e.Uniform1f(t,i.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(t,i.u_units_to_pixels),u_image:new e.Uniform1i(t,i.u_image),u_image_height:new e.Uniform1f(t,i.u_image_height)}),linePattern:(t,i)=>({u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_texsize:new e.Uniform2f(t,i.u_texsize),u_ratio:new e.Uniform1f(t,i.u_ratio),u_device_pixel_ratio:new e.Uniform1f(t,i.u_device_pixel_ratio),u_image:new e.Uniform1i(t,i.u_image),u_units_to_pixels:new e.Uniform2f(t,i.u_units_to_pixels),u_scale:new e.Uniform3f(t,i.u_scale),u_fade:new e.Uniform1f(t,i.u_fade)}),lineSDF:(t,i)=>({u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_ratio:new e.Uniform1f(t,i.u_ratio),u_device_pixel_ratio:new e.Uniform1f(t,i.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(t,i.u_units_to_pixels),u_patternscale_a:new e.Uniform2f(t,i.u_patternscale_a),u_patternscale_b:new e.Uniform2f(t,i.u_patternscale_b),u_sdfgamma:new e.Uniform1f(t,i.u_sdfgamma),u_image:new e.Uniform1i(t,i.u_image),u_tex_y_a:new e.Uniform1f(t,i.u_tex_y_a),u_tex_y_b:new e.Uniform1f(t,i.u_tex_y_b),u_mix:new e.Uniform1f(t,i.u_mix)}),raster:(t,i)=>({u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_tl_parent:new e.Uniform2f(t,i.u_tl_parent),u_scale_parent:new e.Uniform1f(t,i.u_scale_parent),u_buffer_scale:new e.Uniform1f(t,i.u_buffer_scale),u_fade_t:new e.Uniform1f(t,i.u_fade_t),u_opacity:new e.Uniform1f(t,i.u_opacity),u_image0:new e.Uniform1i(t,i.u_image0),u_image1:new e.Uniform1i(t,i.u_image1),u_brightness_low:new e.Uniform1f(t,i.u_brightness_low),u_brightness_high:new e.Uniform1f(t,i.u_brightness_high),u_saturation_factor:new e.Uniform1f(t,i.u_saturation_factor),u_contrast_factor:new e.Uniform1f(t,i.u_contrast_factor),u_spin_weights:new e.Uniform3f(t,i.u_spin_weights)}),symbolIcon:(t,i)=>({u_is_size_zoom_constant:new e.Uniform1i(t,i.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(t,i.u_is_size_feature_constant),u_size_t:new e.Uniform1f(t,i.u_size_t),u_size:new e.Uniform1f(t,i.u_size),u_camera_to_center_distance:new e.Uniform1f(t,i.u_camera_to_center_distance),u_pitch:new e.Uniform1f(t,i.u_pitch),u_rotate_symbol:new e.Uniform1i(t,i.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(t,i.u_aspect_ratio),u_fade_change:new e.Uniform1f(t,i.u_fade_change),u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(t,i.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(t,i.u_coord_matrix),u_is_text:new e.Uniform1i(t,i.u_is_text),u_pitch_with_map:new e.Uniform1i(t,i.u_pitch_with_map),u_texsize:new e.Uniform2f(t,i.u_texsize),u_texture:new e.Uniform1i(t,i.u_texture)}),symbolSDF:(t,i)=>({u_is_size_zoom_constant:new e.Uniform1i(t,i.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(t,i.u_is_size_feature_constant),u_size_t:new e.Uniform1f(t,i.u_size_t),u_size:new e.Uniform1f(t,i.u_size),u_camera_to_center_distance:new e.Uniform1f(t,i.u_camera_to_center_distance),u_pitch:new e.Uniform1f(t,i.u_pitch),u_rotate_symbol:new e.Uniform1i(t,i.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(t,i.u_aspect_ratio),u_fade_change:new e.Uniform1f(t,i.u_fade_change),u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(t,i.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(t,i.u_coord_matrix),u_is_text:new e.Uniform1i(t,i.u_is_text),u_pitch_with_map:new e.Uniform1i(t,i.u_pitch_with_map),u_texsize:new e.Uniform2f(t,i.u_texsize),u_texture:new e.Uniform1i(t,i.u_texture),u_gamma_scale:new e.Uniform1f(t,i.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(t,i.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(t,i.u_is_halo)}),symbolTextAndIcon:(t,i)=>({u_is_size_zoom_constant:new e.Uniform1i(t,i.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(t,i.u_is_size_feature_constant),u_size_t:new e.Uniform1f(t,i.u_size_t),u_size:new e.Uniform1f(t,i.u_size),u_camera_to_center_distance:new e.Uniform1f(t,i.u_camera_to_center_distance),u_pitch:new e.Uniform1f(t,i.u_pitch),u_rotate_symbol:new e.Uniform1i(t,i.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(t,i.u_aspect_ratio),u_fade_change:new e.Uniform1f(t,i.u_fade_change),u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(t,i.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(t,i.u_coord_matrix),u_is_text:new e.Uniform1i(t,i.u_is_text),u_pitch_with_map:new e.Uniform1i(t,i.u_pitch_with_map),u_texsize:new e.Uniform2f(t,i.u_texsize),u_texsize_icon:new e.Uniform2f(t,i.u_texsize_icon),u_texture:new e.Uniform1i(t,i.u_texture),u_texture_icon:new e.Uniform1i(t,i.u_texture_icon),u_gamma_scale:new e.Uniform1f(t,i.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(t,i.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(t,i.u_is_halo)}),background:(t,i)=>({u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_opacity:new e.Uniform1f(t,i.u_opacity),u_color:new e.UniformColor(t,i.u_color)}),backgroundPattern:(t,i)=>({u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_opacity:new e.Uniform1f(t,i.u_opacity),u_image:new e.Uniform1i(t,i.u_image),u_pattern_tl_a:new e.Uniform2f(t,i.u_pattern_tl_a),u_pattern_br_a:new e.Uniform2f(t,i.u_pattern_br_a),u_pattern_tl_b:new e.Uniform2f(t,i.u_pattern_tl_b),u_pattern_br_b:new e.Uniform2f(t,i.u_pattern_br_b),u_texsize:new e.Uniform2f(t,i.u_texsize),u_mix:new e.Uniform1f(t,i.u_mix),u_pattern_size_a:new e.Uniform2f(t,i.u_pattern_size_a),u_pattern_size_b:new e.Uniform2f(t,i.u_pattern_size_b),u_scale_a:new e.Uniform1f(t,i.u_scale_a),u_scale_b:new e.Uniform1f(t,i.u_scale_b),u_pixel_coord_upper:new e.Uniform2f(t,i.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,i.u_pixel_coord_lower),u_tile_units_to_pixels:new e.Uniform1f(t,i.u_tile_units_to_pixels)}),terrain:(t,i)=>({u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_texture:new e.Uniform1i(t,i.u_texture)}),terrainDepth:(t,i)=>({u_matrix:new e.UniformMatrix4f(t,i.u_matrix)}),terrainCoords:(t,i)=>({u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_texture:new e.Uniform1i(t,i.u_texture),u_terrain_coords_id:new e.Uniform1f(t,i.u_terrain_coords_id)})};class Lt{constructor(e,t,i){this.context=e;const r=e.gl;this.buffer=r.createBuffer(),this.dynamicDraw=Boolean(i),this.context.unbindVAO(),e.bindElementBuffer.set(this.buffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(e){const t=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Bt={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Ft{constructor(e,t,i,r){this.length=t.length,this.attributes=i,this.itemSize=t.bytesPerElement,this.dynamicDraw=r,this.context=e;const n=e.gl;this.buffer=n.createBuffer(),e.bindVertexBuffer.set(this.buffer),n.bufferData(n.ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?n.DYNAMIC_DRAW:n.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(e){if(e.length!==this.length)throw new Error(`Length of new data is ${e.length}, which doesn't match current length of ${this.length}`);const t=this.context.gl;this.bind(),t.bufferSubData(t.ARRAY_BUFFER,0,e.arrayBuffer)}enableAttributes(e,t){for(let i=0;i<this.attributes.length;i++){const r=t.attributes[this.attributes[i].name];void 0!==r&&e.enableVertexAttribArray(r)}}setVertexAttribPointers(e,t,i){for(let r=0;r<this.attributes.length;r++){const n=this.attributes[r],o=t.attributes[n.name];void 0!==o&&e.vertexAttribPointer(o,n.components,e[Bt[n.type]],!1,this.itemSize,n.offset+this.itemSize*(i||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Nt{constructor(e){this.gl=e.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(e){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Ot extends Nt{getDefault(){return e.Color.transparent}set(e){const t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class Gt extends Nt{getDefault(){return 1}set(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1)}}class Ut extends Nt{getDefault(){return 0}set(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1)}}class Vt extends Nt{getDefault(){return[!0,!0,!0,!0]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class $t extends Nt{getDefault(){return!0}set(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1)}}class qt extends Nt{getDefault(){return 255}set(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1)}}class jt extends Nt{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(e){const t=this.current;(e.func!==t.func||e.ref!==t.ref||e.mask!==t.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)}}class Zt extends Nt{getDefault(){const e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)}}class Wt extends Nt{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.STENCIL_TEST):t.disable(t.STENCIL_TEST),this.current=e,this.dirty=!1}}class Xt extends Nt{getDefault(){return[0,1]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)}}class Ht extends Nt{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST),this.current=e,this.dirty=!1}}class Yt extends Nt{getDefault(){return this.gl.LESS}set(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1)}}class Kt extends Nt{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.BLEND):t.disable(t.BLEND),this.current=e,this.dirty=!1}}class Jt extends Nt{getDefault(){const e=this.gl;return[e.ONE,e.ZERO]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1)}}class Qt extends Nt{getDefault(){return e.Color.transparent}set(e){const t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class ei extends Nt{getDefault(){return this.gl.FUNC_ADD}set(e){(e!==this.current||this.dirty)&&(this.gl.blendEquation(e),this.current=e,this.dirty=!1)}}class ti extends Nt{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.CULL_FACE):t.disable(t.CULL_FACE),this.current=e,this.dirty=!1}}class ii extends Nt{getDefault(){return this.gl.BACK}set(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1)}}class ri extends Nt{getDefault(){return this.gl.CCW}set(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1)}}class ni extends Nt{getDefault(){return null}set(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1)}}class oi extends Nt{getDefault(){return this.gl.TEXTURE0}set(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1)}}class ai extends Nt{getDefault(){const e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class si extends Nt{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,e),this.current=e,this.dirty=!1}}class li extends Nt{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindRenderbuffer(t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class ci extends Nt{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindTexture(t.TEXTURE_2D,e),this.current=e,this.dirty=!1}}class ui extends Nt{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class hi extends Nt{getDefault(){return null}set(e){const t=this.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class pi extends Nt{constructor(e){super(e),this.vao=e.extVertexArrayObject}getDefault(){return null}set(e){this.vao&&(e!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(e),this.current=e,this.dirty=!1)}}class di extends Nt{getDefault(){return 4}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1}}class fi extends Nt{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1}}class mi extends Nt{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1}}class gi extends Nt{constructor(e,t){super(e),this.context=e,this.parent=t}getDefault(){return null}}class yi extends gi{setDirty(){this.dirty=!0}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}}class _i extends gi{set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class xi{constructor(e,t,i,r){this.context=e,this.width=t,this.height=i;const n=e.gl,o=this.framebuffer=n.createFramebuffer();if(this.colorAttachment=new yi(e,o),r&&(this.depthAttachment=new _i(e,o)),n.checkFramebufferStatus(n.FRAMEBUFFER)!==n.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const e=this.context.gl,t=this.colorAttachment.get();if(t&&e.deleteTexture(t),this.depthAttachment){const t=this.depthAttachment.get();t&&e.deleteRenderbuffer(t)}e.deleteFramebuffer(this.framebuffer)}}class bi{constructor(e,t,i){this.blendFunction=e,this.blendColor=t,this.mask=i}}bi.Replace=[1,0],bi.disabled=new bi(bi.Replace,e.Color.transparent,[!1,!1,!1,!1]),bi.unblended=new bi(bi.Replace,e.Color.transparent,[!0,!0,!0,!0]),bi.alphaBlended=new bi([1,771],e.Color.transparent,[!0,!0,!0,!0]);class vi{constructor(e){this.gl=e,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Ot(this),this.clearDepth=new Gt(this),this.clearStencil=new Ut(this),this.colorMask=new Vt(this),this.depthMask=new $t(this),this.stencilMask=new qt(this),this.stencilFunc=new jt(this),this.stencilOp=new Zt(this),this.stencilTest=new Wt(this),this.depthRange=new Xt(this),this.depthTest=new Ht(this),this.depthFunc=new Yt(this),this.blend=new Kt(this),this.blendFunc=new Jt(this),this.blendColor=new Qt(this),this.blendEquation=new ei(this),this.cullFace=new ti(this),this.cullFaceSide=new ii(this),this.frontFace=new ri(this),this.program=new ni(this),this.activeTexture=new oi(this),this.viewport=new ai(this),this.bindFramebuffer=new si(this),this.bindRenderbuffer=new li(this),this.bindTexture=new ci(this),this.bindVertexBuffer=new ui(this),this.bindElementBuffer=new hi(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new pi(this),this.pixelStoreUnpack=new di(this),this.pixelStoreUnpackPremultiplyAlpha=new fi(this),this.pixelStoreUnpackFlipY=new mi(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=e.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(e.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=e.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=e.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(e,t){return new Lt(this,e,t)}createVertexBuffer(e,t,i){return new Ft(this,e,t,i)}createRenderbuffer(e,t,i){const r=this.gl,n=r.createRenderbuffer();return this.bindRenderbuffer.set(n),r.renderbufferStorage(r.RENDERBUFFER,e,t,i),this.bindRenderbuffer.set(null),n}createFramebuffer(e,t,i){return new xi(this,e,t,i)}clear({color:e,depth:t}){const i=this.gl;let r=0;e&&(r|=i.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==t&&(r|=i.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(t),this.depthMask.set(!0)),i.clear(r)}setCullFace(e){!1===e.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))}setDepthMode(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)}setStencilMode(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)}setColorMode(e){n(e.blendFunction,bi.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class wi{constructor(e,t,i){this.func=e,this.mask=t,this.range=i}}wi.ReadOnly=!1,wi.ReadWrite=!0,wi.disabled=new wi(519,wi.ReadOnly,[0,1]);const Ai=7680;class Ei{constructor(e,t,i,r,n,o){this.test=e,this.ref=t,this.mask=i,this.fail=r,this.depthFail=n,this.pass=o}}Ei.disabled=new Ei({func:519,mask:0},0,0,Ai,Ai,Ai);class Ii{constructor(e,t,i){this.enable=e,this.mode=t,this.frontFace=i}}let Di;function Ti(t,i,r,n,o,a,s){const l=t.context,c=l.gl,u=t.useProgram("collisionBox"),h=[];let p=0,d=0;for(let f=0;f<n.length;f++){const m=n[f],g=i.getTile(m),y=g.getBucket(r);if(!y)continue;let _=m.posMatrix;0===o[0]&&0===o[1]||(_=t.translatePosMatrix(m.posMatrix,g,o,a));const x=s?y.textCollisionBox:y.iconCollisionBox,b=y.collisionCircleArray;if(b.length>0){const i=e.create(),r=_;e.mul(i,y.placementInvProjMatrix,t.transform.glCoordMatrix),e.mul(i,i,y.placementViewportMatrix),h.push({circleArray:b,circleOffset:d,transform:r,invTransform:i,coord:m}),p+=b.length/4,d=p}x&&u.draw(l,c.LINES,wi.disabled,Ei.disabled,t.colorModeForRenderPass(),Ii.disabled,gt(_,t.transform,g),t.style.terrain&&t.style.terrain.getTerrainData(m),r.id,x.layoutVertexBuffer,x.indexBuffer,x.segments,null,t.transform.zoom,null,null,x.collisionVertexBuffer)}if(!s||!h.length)return;const f=t.useProgram("collisionCircle"),m=new e.CollisionCircleLayoutArray;m.resize(4*p),m._trim();let g=0;for(const e of h)for(let t=0;t<e.circleArray.length/4;t++){const i=4*t,r=e.circleArray[i+0],n=e.circleArray[i+1],o=e.circleArray[i+2],a=e.circleArray[i+3];m.emplace(g++,r,n,o,a,0),m.emplace(g++,r,n,o,a,1),m.emplace(g++,r,n,o,a,2),m.emplace(g++,r,n,o,a,3)}(!Di||Di.length<2*p)&&(Di=function(t){const i=2*t,r=new e.QuadTriangleArray;r.resize(i),r._trim();for(let e=0;e<i;e++){const t=6*e;r.uint16[t+0]=4*e+0,r.uint16[t+1]=4*e+1,r.uint16[t+2]=4*e+2,r.uint16[t+3]=4*e+2,r.uint16[t+4]=4*e+3,r.uint16[t+5]=4*e+0}return r}(p));const y=l.createIndexBuffer(Di,!0),_=l.createVertexBuffer(m,e.collisionCircleLayout.members,!0);for(const i of h){const n={u_matrix:i.transform,u_inv_matrix:i.invTransform,u_camera_to_center_distance:(x=t.transform).cameraToCenterDistance,u_viewport_size:[x.width,x.height]};f.draw(l,c.TRIANGLES,wi.disabled,Ei.disabled,t.colorModeForRenderPass(),Ii.disabled,n,t.style.terrain&&t.style.terrain.getTerrainData(i.coord),r.id,_,y,e.SegmentVector.simpleSegment(0,2*i.circleOffset,i.circleArray.length,i.circleArray.length/2),null,t.transform.zoom,null,null,null)}var x;_.destroy(),y.destroy()}Ii.disabled=new Ii(!1,1029,2305),Ii.backCCW=new Ii(!0,1029,2305);const Ci=e.identity(new Float32Array(16));function Mi(t,i,r,n,o,a){const{horizontalAlign:s,verticalAlign:l}=e.getAnchorAlignment(t),c=-(s-.5)*i,u=-(l-.5)*r,h=e.evaluateVariableOffset(t,n);return new e.pointGeometry((c/o+h[0])*a,(u/o+h[1])*a)}function Si(t,i,r,n,o,a,s,l,c,u,h){const p=t.text.placedSymbolArray,d=t.text.dynamicLayoutVertexArray,f=t.icon.dynamicLayoutVertexArray,m={};d.clear();for(let f=0;f<p.length;f++){const g=p.get(f),y=t.allowVerticalPlacement&&!g.placedOrientation,_=g.hidden||!g.crossTileID||y?null:n[g.crossTileID];if(_){const n=new e.pointGeometry(g.anchorX,g.anchorY),p=se(n,r?s:a,h),f=le(o.cameraToCenterDistance,p.signedDistanceFromCamera);let y=e.evaluateSizeForFeature(t.textSizeData,c,g)*f/e.ONE_EM;r&&(y*=t.tilePixelRatio/l);const{width:x,height:b,anchor:v,textOffset:w,textBoxScale:A}=_,E=Mi(v,x,b,w,A,y),I=r?se(n.add(E),a,h).point:p.point.add(i?E.rotate(-o.angle):E),D=t.allowVerticalPlacement&&g.placedOrientation===e.WritingMode.vertical?Math.PI/2:0;for(let t=0;t<g.numGlyphs;t++)e.addDynamicAttributes(d,I,D);u&&g.associatedIconIndex>=0&&(m[g.associatedIconIndex]={shiftedAnchor:I,angle:D})}else ye(g.numGlyphs,d)}if(u){f.clear();const i=t.icon.placedSymbolArray;for(let t=0;t<i.length;t++){const r=i.get(t);if(r.hidden)ye(r.numGlyphs,f);else{const i=m[t];if(i)for(let t=0;t<r.numGlyphs;t++)e.addDynamicAttributes(f,i.shiftedAnchor,i.angle);else ye(r.numGlyphs,f)}}t.icon.dynamicLayoutVertexBuffer.updateData(f)}t.text.dynamicLayoutVertexBuffer.updateData(d)}function Pi(e,t,i){return i.iconsInText&&t?"symbolTextAndIcon":e?"symbolSDF":"symbolIcon"}function Ri(t,i,r,n,o,a,s,l,c,u,h,p){const d=t.context,f=d.gl,m=t.transform,g="map"===l,y="map"===c,_="viewport"!==l&&"point"!==r.layout.get("symbol-placement"),x=g&&!y&&!_,b=!r.layout.get("symbol-sort-key").isConstant();let v=!1;const w=t.depthModeForSublayer(0,wi.ReadOnly),A=r.layout.get("text-variable-anchor"),E=[];for(const l of n){const n=i.getTile(l),c=n.getBucket(r);if(!c)continue;const h=o?c.text:c.icon;if(!h||!h.segments.get().length)continue;const p=h.programConfigurations.get(r.id),d=o||c.sdfIcons,w=o?c.textSizeData:c.iconSizeData,I=y||0!==m.pitch,D=t.useProgram(Pi(d,o,c),p),T=e.evaluateSizeForZoom(w,m.zoom),C=t.style.terrain&&t.style.terrain.getTerrainData(l);let M,S,P,R,k=[0,0],z=null;if(o){if(S=n.glyphAtlasTexture,P=f.LINEAR,M=n.glyphAtlasTexture.size,c.iconsInText){k=n.imageAtlasTexture.size,z=n.imageAtlasTexture;const e="composite"===w.kind||"camera"===w.kind;R=I||t.options.rotating||t.options.zooming||e?f.LINEAR:f.NEAREST}}else{const e=1!==r.layout.get("icon-size").constantOr(0)||c.iconsNeedLinear;S=n.imageAtlasTexture,P=d||t.options.rotating||t.options.zooming||e||I?f.LINEAR:f.NEAREST,M=n.imageAtlasTexture.size}const L=ve(n,1,t.transform.zoom),B=oe(l.posMatrix,y,g,t.transform,L),F=ae(l.posMatrix,y,g,t.transform,L),N=A&&c.hasTextData(),O="none"!==r.layout.get("icon-text-fit")&&N&&c.hasIconData();if(_){const e=t.style.terrain?(e,i)=>t.style.terrain.getElevation(l,e,i):null,i="map"===r.layout.get("text-rotation-alignment");ue(c,l.posMatrix,t,o,B,F,y,u,i,e)}const G=t.translatePosMatrix(l.posMatrix,n,a,s),U=_||o&&A||O?Ci:B,V=t.translatePosMatrix(F,n,a,s,!0),$=d&&0!==r.paint.get(o?"text-halo-width":"icon-halo-width").constantOr(1);let q;q=d?c.iconsInText?Pt(w.kind,T,x,y,t,G,U,V,M,k):St(w.kind,T,x,y,t,G,U,V,o,M,!0):Mt(w.kind,T,x,y,t,G,U,V,o,M);const j={program:D,buffers:h,uniformValues:q,atlasTexture:S,atlasTextureIcon:z,atlasInterpolation:P,atlasInterpolationIcon:R,isSDF:d,hasHalo:$};if(b&&c.canOverlap){v=!0;const t=h.segments.get();for(const i of t)E.push({segments:new e.SegmentVector([i]),sortKey:i.sortKey,state:j,terrainData:C})}else E.push({segments:h.segments,sortKey:0,state:j,terrainData:C})}v&&E.sort(((e,t)=>e.sortKey-t.sortKey));for(const e of E){const i=e.state;if(d.activeTexture.set(f.TEXTURE0),i.atlasTexture.bind(i.atlasInterpolation,f.CLAMP_TO_EDGE),i.atlasTextureIcon&&(d.activeTexture.set(f.TEXTURE1),i.atlasTextureIcon&&i.atlasTextureIcon.bind(i.atlasInterpolationIcon,f.CLAMP_TO_EDGE)),i.isSDF){const n=i.uniformValues;i.hasHalo&&(n.u_is_halo=1,ki(i.buffers,e.segments,r,t,i.program,w,h,p,n,e.terrainData)),n.u_is_halo=0}ki(i.buffers,e.segments,r,t,i.program,w,h,p,i.uniformValues,e.terrainData)}}function ki(e,t,i,r,n,o,a,s,l,c){const u=r.context;n.draw(u,u.gl.TRIANGLES,o,a,s,Ii.disabled,l,c,i.id,e.layoutVertexBuffer,e.indexBuffer,t,i.paint,r.transform.zoom,e.programConfigurations.get(i.id),e.dynamicLayoutVertexBuffer,e.opacityVertexBuffer)}function zi(e,t,i,r,n,o,a){const s=e.context.gl,l=i.paint.get("fill-pattern"),c=l&&l.constantOr(1),u=i.getCrossfadeParameters();let h,p,d,f,m;a?(p=c&&!i.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",h=s.LINES):(p=c?"fillPattern":"fill",h=s.TRIANGLES);for(const g of r){const r=t.getTile(g);if(c&&!r.patternsLoaded())continue;const y=r.getBucket(i);if(!y)continue;const _=y.programConfigurations.get(i.id),x=e.useProgram(p,_),b=e.style.terrain&&e.style.terrain.getTerrainData(g);c&&(e.context.activeTexture.set(s.TEXTURE0),r.imageAtlasTexture.bind(s.LINEAR,s.CLAMP_TO_EDGE),_.updatePaintBuffers(u));const v=l.constantOr(null);if(v&&r.imageAtlas){const e=r.imageAtlas,t=e.patternPositions[v.to.toString()],i=e.patternPositions[v.from.toString()];t&&i&&_.setConstantPatternPositions(t,i)}const w=b?g:null,A=e.translatePosMatrix(w?w.posMatrix:g.posMatrix,r,i.paint.get("fill-translate"),i.paint.get("fill-translate-anchor"));if(a){f=y.indexBuffer2,m=y.segments2;const t=[s.drawingBufferWidth,s.drawingBufferHeight];d="fillOutlinePattern"===p&&c?ft(A,e,u,r,t):dt(A,t)}else f=y.indexBuffer,m=y.segments,d=c?pt(A,e,u,r):ht(A);x.draw(e.context,h,n,e.stencilModeForClipping(g),o,Ii.disabled,d,b,i.id,y.layoutVertexBuffer,f,m,i.paint,e.transform.zoom,_)}}function Li(e,t,i,r,n,o,a){const s=e.context,l=s.gl,c=i.paint.get("fill-extrusion-pattern"),u=c.constantOr(1),h=i.getCrossfadeParameters(),p=i.paint.get("fill-extrusion-opacity");for(const d of r){const r=t.getTile(d),f=r.getBucket(i);if(!f)continue;const m=e.style.terrain&&e.style.terrain.getTerrainData(d),g=f.programConfigurations.get(i.id),y=e.useProgram(u?"fillExtrusionPattern":"fillExtrusion",g);u&&(e.context.activeTexture.set(l.TEXTURE0),r.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),g.updatePaintBuffers(h));const _=c.constantOr(null);if(_&&r.imageAtlas){const e=r.imageAtlas,t=e.patternPositions[_.to.toString()],i=e.patternPositions[_.from.toString()];t&&i&&g.setConstantPatternPositions(t,i)}const x=e.translatePosMatrix(d.posMatrix,r,i.paint.get("fill-extrusion-translate"),i.paint.get("fill-extrusion-translate-anchor")),b=i.paint.get("fill-extrusion-vertical-gradient"),v=u?ut(x,e,b,p,d,h,r):ct(x,e,b,p);y.draw(s,s.gl.TRIANGLES,n,o,a,Ii.backCCW,v,m,i.id,f.layoutVertexBuffer,f.indexBuffer,f.segments,i.paint,e.transform.zoom,g,e.style.terrain&&f.centroidVertexBuffer)}}function Bi(e,t,i,r,n,o,a){const s=e.context,l=s.gl,c=i.fbo;if(!c)return;const u=e.useProgram("hillshade"),h=e.style.terrain&&e.style.terrain.getTerrainData(t);s.activeTexture.set(l.TEXTURE0),l.bindTexture(l.TEXTURE_2D,c.colorAttachment.get()),u.draw(s,l.TRIANGLES,n,o,a,Ii.disabled,((e,t,i,r)=>{const n=i.paint.get("hillshade-shadow-color"),o=i.paint.get("hillshade-highlight-color"),a=i.paint.get("hillshade-accent-color");let s=i.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===i.paint.get("hillshade-illumination-anchor")&&(s-=e.transform.angle);const l=!e.options.moving;return{u_matrix:r?r.posMatrix:e.transform.calculatePosMatrix(t.tileID.toUnwrapped(),l),u_image:0,u_latrange:bt(0,t.tileID),u_light:[i.paint.get("hillshade-exaggeration"),s],u_shadow:n,u_highlight:o,u_accent:a}})(e,i,r,h?t:null),h,r.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments)}function Fi(t,i,r,n,o,a){const s=t.context,c=s.gl,u=i.dem;if(u&&u.data){const h=u.dim,p=u.stride,d=u.getPixels();if(s.activeTexture.set(c.TEXTURE1),s.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||t.getTileTexture(p),i.demTexture){const e=i.demTexture;e.update(d,{premultiply:!1}),e.bind(c.NEAREST,c.CLAMP_TO_EDGE)}else i.demTexture=new l(s,d,c.RGBA,{premultiply:!1}),i.demTexture.bind(c.NEAREST,c.CLAMP_TO_EDGE);s.activeTexture.set(c.TEXTURE0);let f=i.fbo;if(!f){const e=new l(s,{width:h,height:h,data:null},c.RGBA);e.bind(c.LINEAR,c.CLAMP_TO_EDGE),f=i.fbo=s.createFramebuffer(h,h,!0),f.colorAttachment.set(e.texture)}s.bindFramebuffer.set(f.framebuffer),s.viewport.set([0,0,h,h]),t.useProgram("hillshadePrepare").draw(s,c.TRIANGLES,n,o,a,Ii.disabled,((t,i)=>{const r=i.stride,n=e.create();return e.ortho(n,0,e.EXTENT,-e.EXTENT,0,0,1),e.translate(n,n,[0,-e.EXTENT,0]),{u_matrix:n,u_image:1,u_dimension:[r,r],u_zoom:t.overscaledZ,u_unpack:i.getUnpackVector()}})(i.tileID,u),null,r.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments),i.needsHillshadePrepare=!1}}function Ni(t,i,r,n,o,a){const s=n.paint.get("raster-fade-duration");if(!a&&s>0){const n=e.exported.now(),a=(n-t.timeAdded)/s,l=i?(n-i.timeAdded)/s:-1,c=r.getSource(),u=o.coveringZoomLevel({tileSize:c.tileSize,roundZoom:c.roundZoom}),h=!i||Math.abs(i.tileID.overscaledZ-u)>Math.abs(t.tileID.overscaledZ-u),p=h&&t.refreshedUponExpiration?1:e.clamp(h?a:1-l,0,1);return t.refreshedUponExpiration&&a>=1&&(t.refreshedUponExpiration=!1),i?{opacity:1,mix:1-p}:{opacity:p,mix:0}}return{opacity:1,mix:0}}const Oi=new e.Color(1,0,0,1),Gi=new e.Color(0,1,0,1),Ui=new e.Color(0,0,1,1),Vi=new e.Color(1,0,1,1),$i=new e.Color(0,1,1,1);function qi(e,t,i,r){Zi(e,0,t+i/2,e.transform.width,i,r)}function ji(e,t,i,r){Zi(e,t-i/2,0,i,e.transform.height,r)}function Zi(e,t,i,r,n,o){const a=e.context,s=a.gl;s.enable(s.SCISSOR_TEST),s.scissor(t*e.pixelRatio,i*e.pixelRatio,r*e.pixelRatio,n*e.pixelRatio),a.clear({color:o}),s.disable(s.SCISSOR_TEST)}function Wi(t,i,r){const n=t.context,o=n.gl,a=r.posMatrix,s=t.useProgram("debug"),l=wi.disabled,c=Ei.disabled,u=t.colorModeForRenderPass(),h="$debug",p=t.style.terrain&&t.style.terrain.getTerrainData(r);n.activeTexture.set(o.TEXTURE0),t.emptyTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE);const d=i.getTileByID(r.key).latestRawTileData,f=Math.floor((d&&d.byteLength||0)/1024),m=i.getTile(r).tileSize,g=512/Math.min(m,512)*(r.overscaledZ/t.transform.zoom)*.5;let y=r.canonical.toString();r.overscaledZ!==r.canonical.z&&(y+=` => ${r.overscaledZ}`),function(e,t){e.initDebugOverlayCanvas();const i=e.debugOverlayCanvas,r=e.context.gl,n=e.debugOverlayCanvas.getContext("2d");n.clearRect(0,0,i.width,i.height),n.shadowColor="white",n.shadowBlur=2,n.lineWidth=1.5,n.strokeStyle="white",n.textBaseline="top",n.font="bold 36px Open Sans, sans-serif",n.fillText(t,5,5),n.strokeText(t,5,5),e.debugOverlayTexture.update(i),e.debugOverlayTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE)}(t,`${y} ${f}kB`),s.draw(n,o.TRIANGLES,l,c,bi.alphaBlended,Ii.disabled,yt(a,e.Color.transparent,g),null,h,t.debugBuffer,t.quadTriangleIndexBuffer,t.debugSegments),s.draw(n,o.LINE_STRIP,l,c,u,Ii.disabled,yt(a,e.Color.red),p,h,t.debugBuffer,t.tileBorderIndexBuffer,t.debugSegments)}function Xi(e,t,i){const r=e.context,n=r.gl,o=e.colorModeForRenderPass(),a=new wi(n.LEQUAL,wi.ReadWrite,e.depthRangeFor3D),s=e.useProgram("terrain"),l=t.getTerrainMesh(),c=t.getTerrainData(i.tileID);r.bindFramebuffer.set(null),r.viewport.set([0,0,e.width,e.height]),r.activeTexture.set(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,t.getRTTFramebuffer().colorAttachment.get());const u=e.transform.calculatePosMatrix(i.tileID.toUnwrapped());s.draw(r,n.TRIANGLES,a,Ei.disabled,o,Ii.backCCW,{u_matrix:u,u_texture:0},c,"terrain",l.vertexBuffer,l.indexBuffer,l.segments)}function Hi(e,t,i,r){const n=e.context,o=i.tileSize*t.qualityFactor;i.textures[r]||(i.textures[r]=e.getTileTexture(o)||new l(n,{width:o,height:o,data:null},n.gl.RGBA),i.textures[r].bind(n.gl.LINEAR,n.gl.CLAMP_TO_EDGE),0===r&&t.sourceCache.renderHistory.unshift(i.tileID.key));const a=t.getRTTFramebuffer();a.colorAttachment.set(i.textures[r].texture),n.bindFramebuffer.set(a.framebuffer),n.viewport.set([0,0,o,o])}class Yi{constructor(e){this._coordsDescendingInv={},this._coordsDescendingInvStr={},this.painter=e,this._renderToTexture={background:!0,fill:!0,line:!0,raster:!0},this._coordsDescendingInv={},this._coordsDescendingInvStr={},this._stacks=[],this._prevType=null,this._rerender={},this._renderableTiles=e.style.terrain.sourceCache.getRenderableTiles(),this._init()}_init(){const e=this.painter.style,t=e.terrain;for(const i in e.sourceCaches){this._coordsDescendingInv[i]={};const r=e.sourceCaches[i].getVisibleCoordinates();for(const e of r){const r=t.sourceCache.getTerrainCoords(e);for(const e in r)this._coordsDescendingInv[i][e]||(this._coordsDescendingInv[i][e]=[]),this._coordsDescendingInv[i][e].push(r[e])}}for(const t of e._order){const i=e._layers[t],r=i.source;if(this._renderToTexture[i.type]&&!this._coordsDescendingInvStr[r]){this._coordsDescendingInvStr[r]={};for(const e in this._coordsDescendingInv[r])this._coordsDescendingInvStr[r][e]=this._coordsDescendingInv[r][e].map((e=>e.key)).sort().join()}}return this._renderableTiles.forEach((e=>{for(const i in this._coordsDescendingInvStr){const r=this._coordsDescendingInvStr[i][e.tileID.key];r&&r!==e.textureCoords[i]&&e.clearTextures(this.painter),t.needsRerender(i,e.tileID)&&e.clearTextures(this.painter)}this._rerender[e.tileID.key]=!e.textures.length})),t.clearRerenderCache(),t.sourceCache.removeOutdated(this.painter),this}renderLayer(t){const i=t.type,r=this.painter,n=r.style._order,o=r.currentLayer,a=o+1===n.length;if(this._renderToTexture[i]&&(this._prevType&&this._renderToTexture[this._prevType]||this._stacks.push([]),this._prevType=i,this._stacks[this._stacks.length-1].push(n[o]),!a))return!0;if(this._renderToTexture[this._prevType]||"hillshade"===i||this._renderToTexture[i]&&a){this._prevType=i;const a=this._stacks.length-1,s=this._stacks[a]||[];for(const t of this._renderableTiles){if(Hi(r,r.style.terrain,t,a),this._rerender[t.tileID.key]){r.context.clear({color:e.Color.transparent});for(let e=0;e<s.length;e++){const i=r.style._layers[s[e]],n=i.source?this._coordsDescendingInv[i.source][t.tileID.key]:[t.tileID];r._renderTileClippingMasks(i,n),r.renderLayer(r,r.style.sourceCaches[i.source],i,n),i.source&&(t.textureCoords[i.source]=this._coordsDescendingInvStr[i.source][t.tileID.key])}}Xi(r,r.style.terrain,t)}if("hillshade"===i){this._stacks.push([n[o]]);for(const i of this._renderableTiles){const n=this._coordsDescendingInv[t.source][i.tileID.key];Hi(r,r.style.terrain,i,this._stacks.length-1),r.context.clear({color:e.Color.transparent}),r._renderTileClippingMasks(t,n),r.renderLayer(r,r.style.sourceCaches[t.source],t,n),Xi(r,r.style.terrain,i)}return!0}return this._renderToTexture[i]}return!1}}const Ki={symbol:function(t,i,r,n,o){if("translucent"!==t.renderPass)return;const a=Ei.disabled,s=t.colorModeForRenderPass();r.layout.get("text-variable-anchor")&&function(t,i,r,n,o,a,s){const l=i.transform,c="map"===o,u="map"===a;for(const o of t){const t=n.getTile(o),a=t.getBucket(r);if(!a||!a.text||!a.text.segments.get().length)continue;const h=e.evaluateSizeForZoom(a.textSizeData,l.zoom),p=ve(t,1,i.transform.zoom),d=oe(o.posMatrix,u,c,i.transform,p),f="none"!==r.layout.get("icon-text-fit")&&a.hasIconData();if(h){const e=Math.pow(2,l.zoom-t.tileID.overscaledZ);Si(a,c,u,s,l,d,o.posMatrix,e,h,f,i.style.terrain?(e,t)=>i.style.terrain.getElevation(o,e,t):null)}}}(n,t,r,i,r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),o),0!==r.paint.get("icon-opacity").constantOr(1)&&Ri(t,i,r,n,!1,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),r.layout.get("icon-rotation-alignment"),r.layout.get("icon-pitch-alignment"),r.layout.get("icon-keep-upright"),a,s),0!==r.paint.get("text-opacity").constantOr(1)&&Ri(t,i,r,n,!0,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),r.layout.get("text-keep-upright"),a,s),i.map.showCollisionBoxes&&(Ti(t,i,r,n,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),!0),Ti(t,i,r,n,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),!1))},circle:function(t,i,r,n){if("translucent"!==t.renderPass)return;const o=r.paint.get("circle-opacity"),a=r.paint.get("circle-stroke-width"),s=r.paint.get("circle-stroke-opacity"),l=!r.layout.get("circle-sort-key").isConstant();if(0===o.constantOr(1)&&(0===a.constantOr(1)||0===s.constantOr(1)))return;const c=t.context,u=c.gl,h=t.depthModeForSublayer(0,wi.ReadOnly),p=Ei.disabled,d=t.colorModeForRenderPass(),f=[];for(let o=0;o<n.length;o++){const a=n[o],s=i.getTile(a),c=s.getBucket(r);if(!c)continue;const u=c.programConfigurations.get(r.id),h=t.useProgram("circle",u),p=c.layoutVertexBuffer,d=c.indexBuffer,m=t.style.terrain&&t.style.terrain.getTerrainData(a),g={programConfiguration:u,program:h,layoutVertexBuffer:p,indexBuffer:d,uniformValues:mt(t,a,s,r),terrainData:m};if(l){const t=c.segments.get();for(const i of t)f.push({segments:new e.SegmentVector([i]),sortKey:i.sortKey,state:g})}else f.push({segments:c.segments,sortKey:0,state:g})}l&&f.sort(((e,t)=>e.sortKey-t.sortKey));for(const e of f){const{programConfiguration:i,program:n,layoutVertexBuffer:o,indexBuffer:a,uniformValues:s,terrainData:l}=e.state;n.draw(c,u.TRIANGLES,h,p,d,Ii.disabled,s,l,r.id,o,a,e.segments,r.paint,t.transform.zoom,i)}},heatmap:function(t,i,r,n){if(0!==r.paint.get("heatmap-opacity"))if("offscreen"===t.renderPass){const o=t.context,a=o.gl,s=Ei.disabled,l=new bi([a.ONE,a.ONE],e.Color.transparent,[!0,!0,!0,!0]);!function(e,t,i){const r=e.gl;e.activeTexture.set(r.TEXTURE1),e.viewport.set([0,0,t.width/4,t.height/4]);let n=i.heatmapFbo;if(n)r.bindTexture(r.TEXTURE_2D,n.colorAttachment.get()),e.bindFramebuffer.set(n.framebuffer);else{const o=r.createTexture();r.bindTexture(r.TEXTURE_2D,o),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),n=i.heatmapFbo=e.createFramebuffer(t.width/4,t.height/4,!1),function(e,t,i,r){const n=e.gl;n.texImage2D(n.TEXTURE_2D,0,n.RGBA,t.width/4,t.height/4,0,n.RGBA,e.extRenderToTextureHalfFloat?e.extTextureHalfFloat.HALF_FLOAT_OES:n.UNSIGNED_BYTE,null),r.colorAttachment.set(i)}(e,t,o,n)}}(o,t,r),o.clear({color:e.Color.transparent});for(let e=0;e<n.length;e++){const c=n[e];if(i.hasRenderableParent(c))continue;const u=i.getTile(c),h=u.getBucket(r);if(!h)continue;const p=h.programConfigurations.get(r.id),d=t.useProgram("heatmap",p),{zoom:f}=t.transform;d.draw(o,a.TRIANGLES,wi.disabled,s,l,Ii.disabled,xt(c.posMatrix,u,f,r.paint.get("heatmap-intensity")),null,r.id,h.layoutVertexBuffer,h.indexBuffer,h.segments,r.paint,t.transform.zoom,p)}o.viewport.set([0,0,t.width,t.height])}else"translucent"===t.renderPass&&(t.context.setColorMode(t.colorModeForRenderPass()),function(t,i){const r=t.context,n=r.gl,o=i.heatmapFbo;if(!o)return;r.activeTexture.set(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,o.colorAttachment.get()),r.activeTexture.set(n.TEXTURE1);let a=i.colorRampTexture;a||(a=i.colorRampTexture=new l(r,i.colorRamp,n.RGBA)),a.bind(n.LINEAR,n.CLAMP_TO_EDGE),t.useProgram("heatmapTexture").draw(r,n.TRIANGLES,wi.disabled,Ei.disabled,t.colorModeForRenderPass(),Ii.disabled,((t,i,r,n)=>{const o=e.create();e.ortho(o,0,t.width,t.height,0,0,1);const a=t.context.gl;return{u_matrix:o,u_world:[a.drawingBufferWidth,a.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:i.paint.get("heatmap-opacity")}})(t,i),null,i.id,t.viewportBuffer,t.quadTriangleIndexBuffer,t.viewportSegments,i.paint,t.transform.zoom)}(t,r))},line:function(t,i,r,n){if("translucent"!==t.renderPass)return;const o=r.paint.get("line-opacity"),a=r.paint.get("line-width");if(0===o.constantOr(1)||0===a.constantOr(1))return;const s=t.depthModeForSublayer(0,wi.ReadOnly),c=t.colorModeForRenderPass(),u=r.paint.get("line-dasharray"),h=r.paint.get("line-pattern"),p=h.constantOr(1),d=r.paint.get("line-gradient"),f=r.getCrossfadeParameters(),m=p?"linePattern":u?"lineSDF":d?"lineGradient":"line",g=t.context,y=g.gl;let _=!0;for(const o of n){const n=i.getTile(o);if(p&&!n.patternsLoaded())continue;const a=n.getBucket(r);if(!a)continue;const x=a.programConfigurations.get(r.id),b=t.context.program.get(),v=t.useProgram(m,x),w=_||v.program!==b,A=t.style.terrain&&t.style.terrain.getTerrainData(o),E=h.constantOr(null);if(E&&n.imageAtlas){const e=n.imageAtlas,t=e.patternPositions[E.to.toString()],i=e.patternPositions[E.from.toString()];t&&i&&x.setConstantPatternPositions(t,i)}const I=A?o:null,D=p?At(t,n,r,f,I):u?Et(t,n,r,u,f,I):d?wt(t,n,r,a.lineClipsArray.length,I):vt(t,n,r,I);if(p)g.activeTexture.set(y.TEXTURE0),n.imageAtlasTexture.bind(y.LINEAR,y.CLAMP_TO_EDGE),x.updatePaintBuffers(f);else if(u&&(w||t.lineAtlas.dirty))g.activeTexture.set(y.TEXTURE0),t.lineAtlas.bind(g);else if(d){const n=a.gradients[r.id];let s=n.texture;if(r.gradientVersion!==n.version){let c=256;if(r.stepInterpolant){const r=i.getSource().maxzoom,n=o.canonical.z===r?Math.ceil(1<<t.transform.maxZoom-o.canonical.z):1;c=e.clamp(e.nextPowerOfTwo(a.maxLineLength/e.EXTENT*1024*n),256,g.maxTextureSize)}n.gradient=e.renderColorRamp({expression:r.gradientExpression(),evaluationKey:"lineProgress",resolution:c,image:n.gradient||void 0,clips:a.lineClipsArray}),n.texture?n.texture.update(n.gradient):n.texture=new l(g,n.gradient,y.RGBA),n.version=r.gradientVersion,s=n.texture}g.activeTexture.set(y.TEXTURE0),s.bind(r.stepInterpolant?y.NEAREST:y.LINEAR,y.CLAMP_TO_EDGE)}v.draw(g,y.TRIANGLES,s,t.stencilModeForClipping(o),c,Ii.disabled,D,A,r.id,a.layoutVertexBuffer,a.indexBuffer,a.segments,r.paint,t.transform.zoom,x,a.layoutVertexBuffer2),_=!1}},fill:function(t,i,r,n){const o=r.paint.get("fill-color"),a=r.paint.get("fill-opacity");if(0===a.constantOr(1))return;const s=t.colorModeForRenderPass(),l=r.paint.get("fill-pattern"),c=t.opaquePassEnabledForLayer()&&!l.constantOr(1)&&1===o.constantOr(e.Color.transparent).a&&1===a.constantOr(0)?"opaque":"translucent";if(t.renderPass===c){const e=t.depthModeForSublayer(1,"opaque"===t.renderPass?wi.ReadWrite:wi.ReadOnly);zi(t,i,r,n,e,s,!1)}if("translucent"===t.renderPass&&r.paint.get("fill-antialias")){const e=t.depthModeForSublayer(r.getPaintProperty("fill-outline-color")?2:0,wi.ReadOnly);zi(t,i,r,n,e,s,!0)}},"fill-extrusion":function(e,t,i,r){const n=i.paint.get("fill-extrusion-opacity");if(0!==n&&"translucent"===e.renderPass){const o=new wi(e.context.gl.LEQUAL,wi.ReadWrite,e.depthRangeFor3D);if(1!==n||i.paint.get("fill-extrusion-pattern").constantOr(1))Li(e,t,i,r,o,Ei.disabled,bi.disabled),Li(e,t,i,r,o,e.stencilModeFor3D(),e.colorModeForRenderPass());else{const n=e.colorModeForRenderPass();Li(e,t,i,r,o,Ei.disabled,n)}}},hillshade:function(e,t,i,r){if("offscreen"!==e.renderPass&&"translucent"!==e.renderPass)return;const n=e.context,o=e.depthModeForSublayer(0,wi.ReadOnly),a=e.colorModeForRenderPass(),[s,l]="translucent"===e.renderPass?e.stencilConfigForOverlap(r):[{},r];for(const r of l){const n=t.getTile(r);void 0!==n.needsHillshadePrepare&&n.needsHillshadePrepare&&"offscreen"===e.renderPass?Fi(e,n,i,o,Ei.disabled,a):"translucent"===e.renderPass&&Bi(e,r,n,i,o,s[r.overscaledZ],a)}n.viewport.set([0,0,e.width,e.height])},raster:function(e,t,i,r){if("translucent"!==e.renderPass)return;if(0===i.paint.get("raster-opacity"))return;if(!r.length)return;const n=e.context,o=n.gl,a=t.getSource(),s=e.useProgram("raster"),l=e.colorModeForRenderPass(),[c,u]=a instanceof C?[{},r]:e.stencilConfigForOverlap(r),h=u[u.length-1].overscaledZ,p=!e.options.moving;for(const r of u){const u=e.depthModeForSublayer(r.overscaledZ-h,1===i.paint.get("raster-opacity")?wi.ReadWrite:wi.ReadOnly,o.LESS),d=t.getTile(r);d.registerFadeDuration(i.paint.get("raster-fade-duration"));const f=t.findLoadedParent(r,0),m=Ni(d,f,t,i,e.transform,e.style.terrain);let g,y;const _="nearest"===i.paint.get("raster-resampling")?o.NEAREST:o.LINEAR;n.activeTexture.set(o.TEXTURE0),d.texture.bind(_,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),n.activeTexture.set(o.TEXTURE1),f?(f.texture.bind(_,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),g=Math.pow(2,f.tileID.overscaledZ-d.tileID.overscaledZ),y=[d.tileID.canonical.x*g%1,d.tileID.canonical.y*g%1]):d.texture.bind(_,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST);const x=e.style.terrain&&e.style.terrain.getTerrainData(r),b=x?r:null,v=b?b.posMatrix:e.transform.calculatePosMatrix(r.toUnwrapped(),p),w=Tt(v,y||[0,0],g||1,m,i);a instanceof C?s.draw(n,o.TRIANGLES,u,Ei.disabled,l,Ii.disabled,w,x,i.id,a.boundsBuffer,e.quadTriangleIndexBuffer,a.boundsSegments):s.draw(n,o.TRIANGLES,u,c[r.overscaledZ],l,Ii.disabled,w,x,i.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments)}},background:function(e,t,i,r){const n=i.paint.get("background-color"),o=i.paint.get("background-opacity");if(0===o)return;const a=e.context,s=a.gl,l=e.transform,c=l.tileSize,u=i.paint.get("background-pattern");if(e.isPatternMissing(u))return;const h=!u&&1===n.a&&1===o&&e.opaquePassEnabledForLayer()?"opaque":"translucent";if(e.renderPass!==h)return;const p=Ei.disabled,d=e.depthModeForSublayer(0,"opaque"===h?wi.ReadWrite:wi.ReadOnly),f=e.colorModeForRenderPass(),m=e.useProgram(u?"backgroundPattern":"background"),g=r||l.coveringTiles({tileSize:c,terrain:e.style.terrain});u&&(a.activeTexture.set(s.TEXTURE0),e.imageManager.bind(e.context));const y=i.getCrossfadeParameters();for(const t of g){const l=r?t.posMatrix:e.transform.calculatePosMatrix(t.toUnwrapped()),h=u?kt(l,o,e,u,{tileID:t,tileSize:c},y):Rt(l,o,n),g=e.style.terrain&&e.style.terrain.getTerrainData(t);m.draw(a,s.TRIANGLES,d,p,f,Ii.disabled,h,g,i.id,e.tileExtentBuffer,e.quadTriangleIndexBuffer,e.tileExtentSegments)}},debug:function(e,t,i){for(let r=0;r<i.length;r++)Wi(e,t,i[r])},custom:function(e,t,i){const r=e.context,n=i.implementation;if("offscreen"===e.renderPass){const t=n.prerender;t&&(e.setCustomLayerDefaults(),r.setColorMode(e.colorModeForRenderPass()),t.call(n,r.gl,e.transform.customLayerMatrix()),r.setDirty(),e.setBaseState())}else if("translucent"===e.renderPass){e.setCustomLayerDefaults(),r.setColorMode(e.colorModeForRenderPass()),r.setStencilMode(Ei.disabled);const t="3d"===n.renderingMode?new wi(e.context.gl.LEQUAL,wi.ReadWrite,e.depthRangeFor3D):e.depthModeForSublayer(0,wi.ReadOnly);r.setDepthMode(t),n.render(r.gl,e.transform.customLayerMatrix()),r.setDirty(),e.setBaseState(),r.bindFramebuffer.set(null)}}};class Ji{constructor(t,i){this.context=new vi(t),this.transform=i,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:e.create(),renderTime:0},this.setup(),this.numSublayers=N.maxUnderzooming+N.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new We,this.gpuTimers={}}resize(e,t,i){if(this.width=e*i,this.height=t*i,this.pixelRatio=i,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const e of this.style._order)this.style._layers[e].resize()}setup(){const t=this.context,i=new e.PosArray;i.emplaceBack(0,0),i.emplaceBack(e.EXTENT,0),i.emplaceBack(0,e.EXTENT),i.emplaceBack(e.EXTENT,e.EXTENT),this.tileExtentBuffer=t.createVertexBuffer(i,Xe.members),this.tileExtentSegments=e.SegmentVector.simpleSegment(0,0,4,2);const r=new e.PosArray;r.emplaceBack(0,0),r.emplaceBack(e.EXTENT,0),r.emplaceBack(0,e.EXTENT),r.emplaceBack(e.EXTENT,e.EXTENT),this.debugBuffer=t.createVertexBuffer(r,Xe.members),this.debugSegments=e.SegmentVector.simpleSegment(0,0,4,5);const n=new e.RasterBoundsArray;n.emplaceBack(0,0,0,0),n.emplaceBack(e.EXTENT,0,e.EXTENT,0),n.emplaceBack(0,e.EXTENT,0,e.EXTENT),n.emplaceBack(e.EXTENT,e.EXTENT,e.EXTENT,e.EXTENT),this.rasterBoundsBuffer=t.createVertexBuffer(n,T.members),this.rasterBoundsSegments=e.SegmentVector.simpleSegment(0,0,4,2);const o=new e.PosArray;o.emplaceBack(0,0),o.emplaceBack(1,0),o.emplaceBack(0,1),o.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(o,Xe.members),this.viewportSegments=e.SegmentVector.simpleSegment(0,0,4,2);const a=new e.LineStripIndexArray;a.emplaceBack(0),a.emplaceBack(1),a.emplaceBack(3),a.emplaceBack(2),a.emplaceBack(0),this.tileBorderIndexBuffer=t.createIndexBuffer(a);const s=new e.TriangleIndexArray;s.emplaceBack(0,1,2),s.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(s),this.emptyTexture=new l(t,{width:1,height:1,data:new Uint8Array([0,0,0,0])},t.gl.RGBA);const c=this.context.gl;this.stencilClearMode=new Ei({func:c.ALWAYS,mask:0},0,255,c.ZERO,c.ZERO,c.ZERO)}clearStencil(){const t=this.context,i=t.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const r=e.create();e.ortho(r,0,this.width,this.height,0,0,1),e.scale(r,r,[i.drawingBufferWidth,i.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(t,i.TRIANGLES,wi.disabled,this.stencilClearMode,bi.disabled,Ii.disabled,_t(r),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(e,t){if(this.currentStencilSource===e.source||!e.isTileClipped()||!t||!t.length)return;this.currentStencilSource=e.source;const i=this.context,r=i.gl;this.nextStencilID+t.length>256&&this.clearStencil(),i.setColorMode(bi.disabled),i.setDepthMode(wi.disabled);const n=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const e of t){const t=this._tileClippingMaskIDs[e.key]=this.nextStencilID++,o=this.style.terrain&&this.style.terrain.getTerrainData(e);n.draw(i,r.TRIANGLES,wi.disabled,new Ei({func:r.ALWAYS,mask:0},t,255,r.KEEP,r.KEEP,r.REPLACE),bi.disabled,Ii.disabled,_t(e.posMatrix),o,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const e=this.nextStencilID++,t=this.context.gl;return new Ei({func:t.NOTEQUAL,mask:255},e,255,t.KEEP,t.KEEP,t.REPLACE)}stencilModeForClipping(e){const t=this.context.gl;return new Ei({func:t.EQUAL,mask:255},this._tileClippingMaskIDs[e.key],0,t.KEEP,t.KEEP,t.REPLACE)}stencilConfigForOverlap(e){const t=this.context.gl,i=e.sort(((e,t)=>t.overscaledZ-e.overscaledZ)),r=i[i.length-1].overscaledZ,n=i[0].overscaledZ-r+1;if(n>1){this.currentStencilSource=void 0,this.nextStencilID+n>256&&this.clearStencil();const e={};for(let i=0;i<n;i++)e[i+r]=new Ei({func:t.GEQUAL,mask:255},i+this.nextStencilID,255,t.KEEP,t.KEEP,t.REPLACE);return this.nextStencilID+=n,[e,i]}return[{[r]:Ei.disabled},i]}colorModeForRenderPass(){const t=this.context.gl;if(this._showOverdrawInspector){const i=1/8;return new bi([t.CONSTANT_COLOR,t.ONE],new e.Color(i,i,i,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?bi.unblended:bi.alphaBlended}depthModeForSublayer(e,t,i){if(!this.opaquePassEnabledForLayer())return wi.disabled;const r=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon;return new wi(i||this.context.gl.LEQUAL,t,[r,r])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(t,i){this.style=t,this.options=i,this.lineAtlas=t.lineAtlas,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(e.exported.now()),this.imageManager.beginFrame();const r=this.style._order,n=this.style.sourceCaches,o=this.style.terrain&&new Yi(this);for(const e in n){const t=n[e];t.used&&t.prepare(this.context)}const a={},s={},l={};for(const e in n){const t=n[e];a[e]=t.getVisibleCoordinates(),s[e]=a[e].slice().reverse(),l[e]=t.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let e=0;e<r.length;e++)if(this.style._layers[r[e]].is3D()){this.opaquePassCutoff=e;break}if(o){this.opaquePassCutoff=0;const t=this.style.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!e.equals(this.terrainFacilitator.matrix,this.transform.projMatrix)||t.length)&&(e.copy(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(t,i){const r=t.context,n=r.gl,o=bi.unblended,a=new wi(n.LEQUAL,wi.ReadWrite,[0,1]),s=i.getTerrainMesh(),l=i.sourceCache.getRenderableTiles(),c=t.useProgram("terrainDepth");r.bindFramebuffer.set(i.getFramebuffer("depth").framebuffer),r.viewport.set([0,0,t.width/devicePixelRatio,t.height/devicePixelRatio]),r.clear({color:e.Color.transparent,depth:1});for(const e of l){const l=i.getTerrainData(e.tileID),u=t.transform.calculatePosMatrix(e.tileID.toUnwrapped());c.draw(r,n.TRIANGLES,a,Ei.disabled,o,Ii.backCCW,{u_matrix:u},l,"terrain",s.vertexBuffer,s.indexBuffer,s.segments)}r.bindFramebuffer.set(null),r.viewport.set([0,0,t.width,t.height])}(this,this.style.terrain),function(t,i){const r=t.context,n=r.gl,o=bi.unblended,a=new wi(n.LEQUAL,wi.ReadWrite,[0,1]),s=i.getTerrainMesh(),l=i.getCoordsTexture(),c=i.sourceCache.getRenderableTiles(),u=t.useProgram("terrainCoords");r.bindFramebuffer.set(i.getFramebuffer("coords").framebuffer),r.viewport.set([0,0,t.width/devicePixelRatio,t.height/devicePixelRatio]),r.clear({color:e.Color.transparent,depth:1}),i.coordsIndex=[];for(const e of c){const c=i.getTerrainData(e.tileID);r.activeTexture.set(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,l.texture);const h=t.transform.calculatePosMatrix(e.tileID.toUnwrapped());u.draw(r,n.TRIANGLES,a,Ei.disabled,o,Ii.backCCW,{u_matrix:h,u_terrain_coords_id:(255-i.coordsIndex.length)/255,u_texture:0},c,"terrain",s.vertexBuffer,s.indexBuffer,s.segments),i.coordsIndex.push(e.tileID.key)}r.bindFramebuffer.set(null),r.viewport.set([0,0,t.width,t.height])}(this,this.style.terrain))}this.renderPass="offscreen";for(const e of r){const t=this.style._layers[e];if(!t.hasOffscreenPass()||t.isHidden(this.transform.zoom))continue;const i=s[t.source];("custom"===t.type||i.length)&&this.renderLayer(this,n[t.source],t,i)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:i.showOverdrawInspector?e.Color.black:e.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=i.showOverdrawInspector,this.depthRangeFor3D=[0,1-(t._order.length+2)*this.numSublayers*this.depthEpsilon],!o)for(this.renderPass="opaque",this.currentLayer=r.length-1;this.currentLayer>=0;this.currentLayer--){const e=this.style._layers[r[this.currentLayer]],t=n[e.source],i=a[e.source];this._renderTileClippingMasks(e,i),this.renderLayer(this,t,e,i)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<r.length;this.currentLayer++){const e=this.style._layers[r[this.currentLayer]],t=n[e.source];if(o&&o.renderLayer(e))continue;const i=("symbol"===e.type?l:s)[e.source];this._renderTileClippingMasks(e,a[e.source]),this.renderLayer(this,t,e,i)}if(this.options.showTileBoundaries){let e,t;Object.values(this.style._layers).forEach((i=>{i.source&&!i.isHidden(this.transform.zoom)&&(i.source!==(t&&t.id)&&(t=this.style.sourceCaches[i.source]),(!e||e.getSource().maxzoom<t.getSource().maxzoom)&&(e=t))})),e&&Ki.debug(this,e,e.getVisibleCoordinates())}this.options.showPadding&&function(e){const t=e.transform.padding;qi(e,e.transform.height-(t.top||0),3,Oi),qi(e,t.bottom||0,3,Gi),ji(e,t.left||0,3,Ui),ji(e,e.transform.width-(t.right||0),3,Vi);const i=e.transform.centerPoint;!function(e,t,i,r){Zi(e,t-1,i-10,2,20,r),Zi(e,t-10,i-1,20,2,r)}(e,i.x,e.transform.height-i.y,$i)}(this),this.context.setDefault()}renderLayer(e,t,i,r){i.isHidden(this.transform.zoom)||("background"===i.type||"custom"===i.type||(r||[]).length)&&(this.id=i.id,this.gpuTimingStart(i),Ki[i.type](e,t,i,r,this.style.placement.variableOffsets),this.gpuTimingEnd())}gpuTimingStart(e){if(!this.options.gpuTiming)return;const t=this.context.extTimerQuery;let i=this.gpuTimers[e.id];i||(i=this.gpuTimers[e.id]={calls:0,cpuTime:0,query:t.createQueryEXT()}),i.calls++,t.beginQueryEXT(t.TIME_ELAPSED_EXT,i.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const e=this.context.extTimerQuery;e.endQueryEXT(e.TIME_ELAPSED_EXT)}collectGpuTimers(){const e=this.gpuTimers;return this.gpuTimers={},e}queryGpuTimers(e){const t={};for(const i in e){const r=e[i],n=this.context.extTimerQuery,o=n.getQueryObjectEXT(r.query,n.QUERY_RESULT_EXT)/1e6;n.deleteQueryEXT(r.query),t[i]=o}return t}translatePosMatrix(t,i,r,n,o){if(!r[0]&&!r[1])return t;const a=o?"map"===n?this.transform.angle:0:"viewport"===n?-this.transform.angle:0;if(a){const e=Math.sin(a),t=Math.cos(a);r=[r[0]*t-r[1]*e,r[0]*e+r[1]*t]}const s=[o?r[0]:ve(i,r[0],this.transform.zoom),o?r[1]:ve(i,r[1],this.transform.zoom),0],l=new Float32Array(16);return e.translate(l,t,s),l}saveTileTexture(e){const t=this._tileTextures[e.size[0]];t?t.push(e):this._tileTextures[e.size[0]]=[e]}getTileTexture(e){const t=this._tileTextures[e];return t&&t.length>0?t.pop():null}isPatternMissing(e){if(!e)return!1;if(!e.from||!e.to)return!0;const t=this.imageManager.getPattern(e.from.toString()),i=this.imageManager.getPattern(e.to.toString());return!t||!i}useProgram(e,t){this.cache=this.cache||{};const i=e+(t?t.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.terrain?"/terrain":"");return this.cache[i]||(this.cache[i]=new st(this.context,e,rt[e],t,zt[e],this._showOverdrawInspector,this.style.terrain)),this.cache[i]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new l(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class Qi{constructor(e,t){this.points=e,this.planes=t}static fromInvProjectionMatrix(t,i,r){const n=Math.pow(2,r),o=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((r=>{const o=1/(r=e.transformMat4([],r,t))[3]/i*n;return e.mul$1(r,r,[o,o,1/r[3],o])})),a=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((t=>{const i=e.sub([],o[t[0]],o[t[1]]),r=e.sub([],o[t[2]],o[t[1]]),n=e.normalize([],e.cross([],i,r)),a=-e.dot(n,o[t[1]]);return n.concat(a)}));return new Qi(o,a)}}class er{constructor(t,i){this.min=t,this.max=i,this.center=e.scale$1([],e.add([],this.min,this.max),.5)}quadrant(t){const i=[t%2==0,t<2],r=e.clone$2(this.min),n=e.clone$2(this.max);for(let e=0;e<i.length;e++)r[e]=i[e]?this.min[e]:this.center[e],n[e]=i[e]?this.center[e]:this.max[e];return n[2]=this.max[2],new er(r,n)}distanceX(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}distanceY(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}intersects(t){const i=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let r=!0;for(let n=0;n<t.planes.length;n++){const o=t.planes[n];let a=0;for(let t=0;t<i.length;t++)e.dot$1(o,i[t])>=0&&a++;if(0===a)return 0;a!==i.length&&(r=!1)}if(r)return 2;for(let e=0;e<3;e++){let i=Number.MAX_VALUE,r=-Number.MAX_VALUE;for(let n=0;n<t.points.length;n++){const o=t.points[n][e]-this.min[e];i=Math.min(i,o),r=Math.max(r,o)}if(r<0||i>this.max[e]-this.min[e])return 0}return 1}}class tr{constructor(e=0,t=0,i=0,r=0){if(isNaN(e)||e<0||isNaN(t)||t<0||isNaN(i)||i<0||isNaN(r)||r<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=e,this.bottom=t,this.left=i,this.right=r}interpolate(t,i,r){return null!=i.top&&null!=t.top&&(this.top=e.number(t.top,i.top,r)),null!=i.bottom&&null!=t.bottom&&(this.bottom=e.number(t.bottom,i.bottom,r)),null!=i.left&&null!=t.left&&(this.left=e.number(t.left,i.left,r)),null!=i.right&&null!=t.right&&(this.right=e.number(t.right,i.right,r)),this}getCenter(t,i){const r=e.clamp((this.left+t-this.right)/2,0,t),n=e.clamp((this.top+i-this.bottom)/2,0,i);return new e.pointGeometry(r,n)}equals(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right}clone(){return new tr(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class ir{constructor(t,i,r,n,o){this.tileSize=512,this.maxValidLatitude=85.051129,this.freezeElevation=!1,this._renderWorldCopies=void 0===o||!!o,this._minZoom=t||0,this._maxZoom=i||22,this._minPitch=null==r?0:r,this._maxPitch=null==n?60:n,this.setMaxBounds(),this.width=0,this.height=0,this._center=new e.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new tr,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const e=new ir(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return e.tileSize=this.tileSize,e.latRange=this.latRange,e.width=this.width,e.height=this.height,e._center=this._center,e._elevation=this._elevation,e.zoom=this.zoom,e.angle=this.angle,e._fov=this._fov,e._pitch=this._pitch,e._unmodified=this._unmodified,e._edgeInsets=this._edgeInsets.clone(),e._calcMatrices(),e}get minZoom(){return this._minZoom}set minZoom(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))}get maxZoom(){return this._maxZoom}set maxZoom(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))}get minPitch(){return this._minPitch}set minPitch(e){this._minPitch!==e&&(this._minPitch=e,this.pitch=Math.max(this.pitch,e))}get maxPitch(){return this._maxPitch}set maxPitch(e){this._maxPitch!==e&&(this._maxPitch=e,this.pitch=Math.min(this.pitch,e))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(e){void 0===e?e=!0:null===e&&(e=!1),this._renderWorldCopies=e}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new e.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(t){const i=-e.wrap(t,-180,180)*Math.PI/180;var r;this.angle!==i&&(this._unmodified=!1,this.angle=i,this._calcMatrices(),this.rotationMatrix=(r=new e.ARRAY_TYPE(4),e.ARRAY_TYPE!=Float32Array&&(r[1]=0,r[2]=0),r[0]=1,r[3]=1,r),function(e,t,i){var r=t[0],n=t[1],o=t[2],a=t[3],s=Math.sin(i),l=Math.cos(i);e[0]=r*l+o*s,e[1]=n*l+a*s,e[2]=r*-s+o*l,e[3]=n*-s+a*l}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(t){const i=e.clamp(t,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==i&&(this._unmodified=!1,this._pitch=i,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(e){e=Math.max(.01,Math.min(60,e)),this._fov!==e&&(this._unmodified=!1,this._fov=e/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(e){const t=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==t&&(this._unmodified=!1,this._zoom=t,this.scale=this.zoomScale(t),this.tileZoom=Math.floor(t),this.zoomFraction=t-this.tileZoom,this._constrain(),this._calcMatrices())}get center(){return this._center}set center(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(e){e!==this._elevation&&(this._elevation=e,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(e){return this._edgeInsets.equals(e)}interpolatePadding(e,t,i){this._unmodified=!1,this._edgeInsets.interpolate(e,t,i),this._constrain(),this._calcMatrices()}coveringZoomLevel(e){const t=(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize));return Math.max(0,t)}getVisibleUnwrappedCoordinates(t){const i=[new e.UnwrappedTileID(0,t)];if(this._renderWorldCopies){const r=this.pointCoordinate(new e.pointGeometry(0,0)),n=this.pointCoordinate(new e.pointGeometry(this.width,0)),o=this.pointCoordinate(new e.pointGeometry(this.width,this.height)),a=this.pointCoordinate(new e.pointGeometry(0,this.height)),s=Math.floor(Math.min(r.x,n.x,o.x,a.x)),l=Math.floor(Math.max(r.x,n.x,o.x,a.x)),c=1;for(let r=s-c;r<=l+c;r++)0!==r&&i.push(new e.UnwrappedTileID(r,t))}return i}coveringTiles(t){var i,r;let n=this.coveringZoomLevel(t);const o=n;if(void 0!==t.minzoom&&n<t.minzoom)return[];void 0!==t.maxzoom&&n>t.maxzoom&&(n=t.maxzoom);const a=this.pointCoordinate(this.getCameraPoint()),s=e.MercatorCoordinate.fromLngLat(this.center),l=Math.pow(2,n),c=[l*a.x,l*a.y,0],u=[l*s.x,l*s.y,0],h=Qi.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,n);let p=t.minzoom||0;!t.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(p=n);const d=t.terrain?2/Math.min(this.tileSize,t.tileSize)*this.tileSize:3,f=e=>({aabb:new er([e*l,0,0],[(e+1)*l,l,0]),zoom:0,x:0,y:0,wrap:e,fullyVisible:!1}),m=[],g=[],y=n,_=t.reparseOverscaled?o:n;if(this._renderWorldCopies)for(let e=1;e<=3;e++)m.push(f(-e)),m.push(f(e));for(m.push(f(0));m.length>0;){const n=m.pop(),o=n.x,a=n.y;let s=n.fullyVisible;if(!s){const e=n.aabb.intersects(h);if(0===e)continue;s=2===e}const l=t.terrain?c:u,f=n.aabb.distanceX(l),x=n.aabb.distanceY(l),b=Math.max(Math.abs(f),Math.abs(x)),v=d+(1<<y-n.zoom)-2;if(n.zoom===y||b>v&&n.zoom>=p){const t=y-n.zoom,i=c[0]-.5-(o<<t),r=c[1]-.5-(a<<t);g.push({tileID:new e.OverscaledTileID(n.zoom===y?_:n.zoom,n.wrap,n.zoom,o,a),distanceSq:e.sqrLen([u[0]-.5-o,u[1]-.5-a]),tileDistanceToCamera:Math.sqrt(i*i+r*r)})}else for(let l=0;l<4;l++){const c=(o<<1)+l%2,u=(a<<1)+(l>>1),h=n.zoom+1;let p=n.aabb.quadrant(l);if(t.terrain){const o=new e.OverscaledTileID(h,n.wrap,h,c,u),a=t.terrain.getMinMaxElevation(o),s=null!==(i=a.minElevation)&&void 0!==i?i:this.elevation,l=null!==(r=a.maxElevation)&&void 0!==r?r:this.elevation;p=new er([p.min[0],p.min[1],s],[p.max[0],p.max[1],l])}m.push({aabb:p,zoom:h,x:c,y:u,wrap:n.wrap,fullyVisible:s})}}return g.sort(((e,t)=>e.distanceSq-t.distanceSq)).map((e=>e.tileID))}resize(e,t){this.width=e,this.height=t,this.pixelsToGLUnits=[2/e,-2/t],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(e){return Math.pow(2,e)}scaleZoom(e){return Math.log(e)/Math.LN2}project(t){const i=e.clamp(t.lat,-this.maxValidLatitude,this.maxValidLatitude);return new e.pointGeometry(e.mercatorXfromLng(t.lng)*this.worldSize,e.mercatorYfromLat(i)*this.worldSize)}unproject(t){return new e.MercatorCoordinate(t.x/this.worldSize,t.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}updateElevation(e){this.freezeElevation||(this.elevation=e?this.getElevation(this._center,e):0)}getElevation(t,i){const r=e.MercatorCoordinate.fromLngLat(t),n=(1<<this.tileZoom)*e.EXTENT,o=r.x*n,a=r.y*n,s=Math.floor(o/e.EXTENT),l=Math.floor(a/e.EXTENT),c=new e.OverscaledTileID(this.tileZoom,0,this.tileZoom,s,l);return i.getElevation(c,o%e.EXTENT,a%e.EXTENT,e.EXTENT)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(t){const i=this.pointLocation(this.centerPoint,t),r=this.getElevation(i,t);if(!(this.elevation-r))return;const n=this.getCameraPosition(),o=e.MercatorCoordinate.fromLngLat(n.lngLat,n.altitude),a=e.MercatorCoordinate.fromLngLat(i,r),s=o.x-a.x,l=o.y-a.y,c=o.z-a.z,u=Math.sqrt(s*s+l*l+c*c),h=this.scaleZoom(this.cameraToCenterDistance/u/this.tileSize);this._elevation=r,this._center=i,this.zoom=h}setLocationAtPoint(t,i){const r=this.pointCoordinate(i),n=this.pointCoordinate(this.centerPoint),o=this.locationCoordinate(t),a=new e.MercatorCoordinate(o.x-(r.x-n.x),o.y-(r.y-n.y));this.center=this.coordinateLocation(a),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(e,t){return t?this.coordinatePoint(this.locationCoordinate(e),this.getElevation(e,t),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(e))}pointLocation(e,t){return this.coordinateLocation(this.pointCoordinate(e,t))}locationCoordinate(t){return e.MercatorCoordinate.fromLngLat(t)}coordinateLocation(e){return e&&e.toLngLat()}pointCoordinate(t,i){if(i){const e=i.pointCoordinate(t);if(null!=e)return e}const r=[t.x,t.y,0,1],n=[t.x,t.y,1,1];e.transformMat4(r,r,this.pixelMatrixInverse),e.transformMat4(n,n,this.pixelMatrixInverse);const o=r[3],a=n[3],s=r[1]/o,l=n[1]/a,c=r[2]/o,u=n[2]/a,h=c===u?0:(0-c)/(u-c);return new e.MercatorCoordinate(e.number(r[0]/o,n[0]/a,h)/this.worldSize,e.number(s,l,h)/this.worldSize)}coordinatePoint(t,i=0,r=this.pixelMatrix){const n=[t.x*this.worldSize,t.y*this.worldSize,i,1];return e.transformMat4(n,n,r),new e.pointGeometry(n[0]/n[3],n[1]/n[3])}getBounds(){const t=Math.max(0,this.height/2-this.getHorizon());return(new e.LngLatBounds).extend(this.pointLocation(new e.pointGeometry(0,t))).extend(this.pointLocation(new e.pointGeometry(this.width,t))).extend(this.pointLocation(new e.pointGeometry(this.width,this.height))).extend(this.pointLocation(new e.pointGeometry(0,this.height)))}getMaxBounds(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new e.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(e){e?(this.lngRange=[e.getWest(),e.getEast()],this.latRange=[e.getSouth(),e.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(t,i=!1){const r=t.key,n=i?this._alignedPosMatrixCache:this._posMatrixCache;if(n[r])return n[r];const o=t.canonical,a=this.worldSize/this.zoomScale(o.z),s=o.x+Math.pow(2,o.z)*t.wrap,l=e.identity(new Float64Array(16));return e.translate(l,l,[s*a,o.y*a,0]),e.scale(l,l,[a/e.EXTENT,a/e.EXTENT,1]),e.multiply(l,i?this.alignedProjMatrix:this.projMatrix,l),n[r]=new Float32Array(l),n[r]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let t,i,r,n,o=-90,a=90,s=-180,l=180;const c=this.size,u=this._unmodified;if(this.latRange){const i=this.latRange;o=e.mercatorYfromLat(i[1])*this.worldSize,a=e.mercatorYfromLat(i[0])*this.worldSize,t=a-o<c.y?c.y/(a-o):0}if(this.lngRange){const t=this.lngRange;s=e.wrap(e.mercatorXfromLng(t[0])*this.worldSize,0,this.worldSize),l=e.wrap(e.mercatorXfromLng(t[1])*this.worldSize,0,this.worldSize),l<s&&(l+=this.worldSize),i=l-s<c.x?c.x/(l-s):0}const h=this.point,p=Math.max(i||0,t||0);if(p)return this.center=this.unproject(new e.pointGeometry(i?(l+s)/2:h.x,t?(a+o)/2:h.y)),this.zoom+=this.scaleZoom(p),this._unmodified=u,void(this._constraining=!1);if(this.latRange){const e=h.y,t=c.y/2;e-t<o&&(n=o+t),e+t>a&&(n=a-t)}if(this.lngRange){const t=(s+l)/2,i=e.wrap(h.x,t-this.worldSize/2,t+this.worldSize/2),n=c.x/2;i-n<s&&(r=s+n),i+n>l&&(r=l-n)}void 0===r&&void 0===n||(this.center=this.unproject(new e.pointGeometry(void 0!==r?r:h.x,void 0!==n?n:h.y)).wrap()),this._unmodified=u,this._constraining=!1}_calcMatrices(){if(!this.height)return;const t=this.centerOffset,i=this.point.x,r=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=e.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;let n=e.identity(new Float64Array(16));e.scale(n,n,[this.width/2,-this.height/2,1]),e.translate(n,n,[1,-1,0]),this.labelPlaneMatrix=n,n=e.identity(new Float64Array(16)),e.scale(n,n,[1,-1,1]),e.translate(n,n,[-1,-1,0]),e.scale(n,n,[2/this.width,2/this.height,1]),this.glCoordMatrix=n,this.cameraToSeaLevelDistance=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch);const o=Math.PI/2+this._pitch,a=this._fov*(.5+t.y/this.height),s=Math.sin(a)*this.cameraToSeaLevelDistance/Math.sin(e.clamp(Math.PI-o-a,.01,Math.PI-.01)),l=this.getHorizon(),c=2*Math.atan(l/this.cameraToCenterDistance)*(.5+t.y/(2*l)),u=Math.sin(c)*this.cameraToSeaLevelDistance/Math.sin(e.clamp(Math.PI-o-c,.01,Math.PI-.01)),h=Math.cos(Math.PI/2-this._pitch)*s+this.cameraToSeaLevelDistance,p=Math.cos(Math.PI/2-this._pitch)*u+this.cameraToSeaLevelDistance,d=1.01*Math.min(h,p),f=this.height/50;n=new Float64Array(16),e.perspective(n,this._fov,this.width/this.height,f,d),n[8]=2*-t.x/this.width,n[9]=2*t.y/this.height,e.scale(n,n,[1,-1,1]),e.translate(n,n,[0,0,-this.cameraToCenterDistance]),e.rotateX(n,n,this._pitch),e.rotateZ(n,n,this.angle),e.translate(n,n,[-i,-r,0]),this.mercatorMatrix=e.scale([],n,[this.worldSize,this.worldSize,this.worldSize]),e.scale(n,n,[1,1,this._pixelPerMeter]),this.pixelMatrix=e.multiply(new Float64Array(16),this.labelPlaneMatrix,n),e.translate(n,n,[0,0,-this.elevation]),this.projMatrix=n,this.invProjMatrix=e.invert([],n),this.pixelMatrix3D=e.multiply(new Float64Array(16),this.labelPlaneMatrix,n);const m=this.width%2/2,g=this.height%2/2,y=Math.cos(this.angle),_=Math.sin(this.angle),x=i-Math.round(i)+y*m+_*g,b=r-Math.round(r)+y*g+_*m,v=new Float64Array(n);if(e.translate(v,v,[x>.5?x-1:x,b>.5?b-1:b,0]),this.alignedProjMatrix=v,n=e.invert(new Float64Array(16),this.pixelMatrix),!n)throw new Error("failed to invert matrix");this.pixelMatrixInverse=n,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const t=this.pointCoordinate(new e.pointGeometry(0,0)),i=[t.x*this.worldSize,t.y*this.worldSize,0,1];return e.transformMat4(i,i,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const t=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new e.pointGeometry(0,t))}getCameraQueryGeometry(t){const i=this.getCameraPoint();if(1===t.length)return[t[0],i];{let r=i.x,n=i.y,o=i.x,a=i.y;for(const e of t)r=Math.min(r,e.x),n=Math.min(n,e.y),o=Math.max(o,e.x),a=Math.max(a,e.y);return[new e.pointGeometry(r,n),new e.pointGeometry(o,n),new e.pointGeometry(o,a),new e.pointGeometry(r,a),new e.pointGeometry(r,n)]}}}class rr{constructor(t){this._hashName=t&&encodeURIComponent(t),e.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(e,t){let i=!1,r=null;const n=()=>{r=null,i&&(e(),r=setTimeout(n,300),i=!1)};return()=>(i=!0,r||n(),r)}(this._updateHashUnthrottled.bind(this))}addTo(e){return this._map=e,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(e){const t=this._map.getCenter(),i=Math.round(100*this._map.getZoom())/100,r=Math.ceil((i*Math.LN2+Math.log(512/360/.5))/Math.LN10),n=Math.pow(10,r),o=Math.round(t.lng*n)/n,a=Math.round(t.lat*n)/n,s=this._map.getBearing(),l=this._map.getPitch();let c="";if(c+=e?`/${o}/${a}/${i}`:`${i}/${a}/${o}`,(s||l)&&(c+="/"+Math.round(10*s)/10),l&&(c+=`/${Math.round(l)}`),this._hashName){const e=this._hashName;let t=!1;const i=window.location.hash.slice(1).split("&").map((i=>{const r=i.split("=")[0];return r===e?(t=!0,`${r}=${c}`):i})).filter((e=>e));return t||i.push(`${e}=${c}`),`#${i.join("&")}`}return`#${c}`}_getCurrentHash(){const e=window.location.hash.replace("#","");if(this._hashName){let t;return e.split("&").map((e=>e.split("="))).forEach((e=>{e[0]===this._hashName&&(t=e)})),(t&&t[1]||"").split("/")}return e.split("/")}_onHashChange(){const e=this._getCurrentHash();if(e.length>=3&&!e.some((e=>isNaN(e)))){const t=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(e[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+e[2],+e[1]],zoom:+e[0],bearing:t,pitch:+(e[4]||0)}),!0}return!1}_updateHashUnthrottled(){const e=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,e)}catch(e){}}}const nr={linearity:.3,easing:e.bezier(0,0,.3,1)},or=e.extend({deceleration:2500,maxSpeed:1400},nr),ar=e.extend({deceleration:20,maxSpeed:1400},nr),sr=e.extend({deceleration:1e3,maxSpeed:360},nr),lr=e.extend({deceleration:1e3,maxSpeed:90},nr);class cr{constructor(e){this._map=e,this.clear()}clear(){this._inertiaBuffer=[]}record(t){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:e.exported.now(),settings:t})}_drainInertiaBuffer(){const t=this._inertiaBuffer,i=e.exported.now();for(;t.length>0&&i-t[0].time>160;)t.shift()}_onMoveEnd(t){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const i={zoom:0,bearing:0,pitch:0,pan:new e.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:e}of this._inertiaBuffer)i.zoom+=e.zoomDelta||0,i.bearing+=e.bearingDelta||0,i.pitch+=e.pitchDelta||0,e.panDelta&&i.pan._add(e.panDelta),e.around&&(i.around=e.around),e.pinchAround&&(i.pinchAround=e.pinchAround);const r=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,n={};if(i.pan.mag()){const o=hr(i.pan.mag(),r,e.extend({},or,t||{}));n.offset=i.pan.mult(o.amount/i.pan.mag()),n.center=this._map.transform.center,ur(n,o)}if(i.zoom){const e=hr(i.zoom,r,ar);n.zoom=this._map.transform.zoom+e.amount,ur(n,e)}if(i.bearing){const t=hr(i.bearing,r,sr);n.bearing=this._map.transform.bearing+e.clamp(t.amount,-179,179),ur(n,t)}if(i.pitch){const e=hr(i.pitch,r,lr);n.pitch=this._map.transform.pitch+e.amount,ur(n,e)}if(n.zoom||n.bearing){const e=void 0===i.pinchAround?i.around:i.pinchAround;n.around=e?this._map.unproject(e):this._map.getCenter()}return this.clear(),e.extend(n,{noMoveStart:!0})}}function ur(e,t){(!e.duration||e.duration<t.duration)&&(e.duration=t.duration,e.easing=t.easing)}function hr(t,i,r){const{maxSpeed:n,linearity:o,deceleration:a}=r,s=e.clamp(t*o/(i/1e3),-n,n),l=Math.abs(s)/(a*o);return{easing:r.easing,duration:1e3*l,amount:s*(l/2)}}class pr extends e.Event{constructor(t,i,r,n={}){const a=o.mousePos(i.getCanvasContainer(),r),s=i.unproject(a);super(t,e.extend({point:a,lngLat:s,originalEvent:r},n)),this._defaultPrevented=!1,this.target=i}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class dr extends e.Event{constructor(t,i,r){const n="touchend"===t?r.changedTouches:r.touches,a=o.touchPos(i.getCanvasContainer(),n),s=a.map((e=>i.unproject(e))),l=a.reduce(((e,t,i,r)=>e.add(t.div(r.length))),new e.pointGeometry(0,0));super(t,{points:a,point:l,lngLats:s,lngLat:i.unproject(l),originalEvent:r}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class fr extends e.Event{constructor(e,t,i){super(e,{originalEvent:i}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class mr{constructor(e,t){this._map=e,this._clickTolerance=t.clickTolerance}reset(){delete this._mousedownPos}wheel(e){return this._firePreventable(new fr(e.type,this._map,e))}mousedown(e,t){return this._mousedownPos=t,this._firePreventable(new pr(e.type,this._map,e))}mouseup(e){this._map.fire(new pr(e.type,this._map,e))}click(e,t){this._mousedownPos&&this._mousedownPos.dist(t)>=this._clickTolerance||this._map.fire(new pr(e.type,this._map,e))}dblclick(e){return this._firePreventable(new pr(e.type,this._map,e))}mouseover(e){this._map.fire(new pr(e.type,this._map,e))}mouseout(e){this._map.fire(new pr(e.type,this._map,e))}touchstart(e){return this._firePreventable(new dr(e.type,this._map,e))}touchmove(e){this._map.fire(new dr(e.type,this._map,e))}touchend(e){this._map.fire(new dr(e.type,this._map,e))}touchcancel(e){this._map.fire(new dr(e.type,this._map,e))}_firePreventable(e){if(this._map.fire(e),e.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class gr{constructor(e){this._map=e}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(e){this._map.fire(new pr(e.type,this._map,e))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new pr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(e){this._delayContextMenu?this._contextMenuEvent=e:this._ignoreContextMenu||this._map.fire(new pr(e.type,this._map,e)),this._map.listens("contextmenu")&&e.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class yr{constructor(e,t){this._map=e,this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=t.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(e,t){this.isEnabled()&&e.shiftKey&&0===e.button&&(o.disableDrag(),this._startPos=this._lastPos=t,this._active=!0)}mousemoveWindow(e,t){if(!this._active)return;const i=t;if(this._lastPos.equals(i)||!this._box&&i.dist(this._startPos)<this._clickTolerance)return;const r=this._startPos;this._lastPos=i,this._box||(this._box=o.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",e));const n=Math.min(r.x,i.x),a=Math.max(r.x,i.x),s=Math.min(r.y,i.y),l=Math.max(r.y,i.y);o.setTransform(this._box,`translate(${n}px,${s}px)`),this._box.style.width=a-n+"px",this._box.style.height=l-s+"px"}mouseupWindow(t,i){if(!this._active)return;if(0!==t.button)return;const r=this._startPos,n=i;if(this.reset(),o.suppressClick(),r.x!==n.x||r.y!==n.y)return this._map.fire(new e.Event("boxzoomend",{originalEvent:t})),{cameraAnimation:e=>e.fitScreenCoordinates(r,n,this._map.getBearing(),{linear:!0})};this._fireEvent("boxzoomcancel",t)}keydown(e){this._active&&27===e.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",e))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(o.remove(this._box),this._box=null),o.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(t,i){return this._map.fire(new e.Event(t,{originalEvent:i}))}}function _r(e,t){if(e.length!==t.length)throw new Error(`The number of touches and points are not equal - touches ${e.length}, points ${t.length}`);const i={};for(let r=0;r<e.length;r++)i[e[r].identifier]=t[r];return i}class xr{constructor(e){this.reset(),this.numTouches=e.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(t,i,r){(this.centroid||r.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=t.timeStamp),r.length===this.numTouches&&(this.centroid=function(t){const i=new e.pointGeometry(0,0);for(const e of t)i._add(e);return i.div(t.length)}(i),this.touches=_r(r,i)))}touchmove(e,t,i){if(this.aborted||!this.centroid)return;const r=_r(i,t);for(const e in this.touches){const t=this.touches[e],i=r[e];(!i||i.dist(t)>30)&&(this.aborted=!0)}}touchend(e,t,i){if((!this.centroid||e.timeStamp-this.startTime>500)&&(this.aborted=!0),0===i.length){const e=!this.aborted&&this.centroid;if(this.reset(),e)return e}}}class br{constructor(e){this.singleTap=new xr(e),this.numTaps=e.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(e,t,i){this.singleTap.touchstart(e,t,i)}touchmove(e,t,i){this.singleTap.touchmove(e,t,i)}touchend(e,t,i){const r=this.singleTap.touchend(e,t,i);if(r){const t=e.timeStamp-this.lastTime<500,i=!this.lastTap||this.lastTap.dist(r)<30;if(t&&i||this.reset(),this.count++,this.lastTime=e.timeStamp,this.lastTap=r,this.count===this.numTaps)return this.reset(),r}}}class vr{constructor(){this._zoomIn=new br({numTouches:1,numTaps:2}),this._zoomOut=new br({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(e,t,i){this._zoomIn.touchstart(e,t,i),this._zoomOut.touchstart(e,t,i)}touchmove(e,t,i){this._zoomIn.touchmove(e,t,i),this._zoomOut.touchmove(e,t,i)}touchend(e,t,i){const r=this._zoomIn.touchend(e,t,i),n=this._zoomOut.touchend(e,t,i);return r?(this._active=!0,e.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:t=>t.easeTo({duration:300,zoom:t.getZoom()+1,around:t.unproject(r)},{originalEvent:e})}):n?(this._active=!0,e.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:t=>t.easeTo({duration:300,zoom:t.getZoom()-1,around:t.unproject(n)},{originalEvent:e})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const wr={0:1,2:2};class Ar{constructor(e){this.reset(),this._clickTolerance=e.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(e,t){return!1}_move(e,t){return{}}mousedown(e,t){if(this._lastPoint)return;const i=o.mouseButton(e);this._correctButton(e,i)&&(this._lastPoint=t,this._eventButton=i)}mousemoveWindow(e,t){const i=this._lastPoint;if(i)if(e.preventDefault(),function(e,t){const i=wr[t];return void 0===e.buttons||(e.buttons&i)!==i}(e,this._eventButton))this.reset();else if(this._moved||!(t.dist(i)<this._clickTolerance))return this._moved=!0,this._lastPoint=t,this._move(i,t)}mouseupWindow(e){this._lastPoint&&o.mouseButton(e)===this._eventButton&&(this._moved&&o.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Er extends Ar{mousedown(e,t){super.mousedown(e,t),this._lastPoint&&(this._active=!0)}_correctButton(e,t){return 0===t&&!e.ctrlKey}_move(e,t){return{around:t,panDelta:t.sub(e)}}}class Ir extends Ar{_correctButton(e,t){return 0===t&&e.ctrlKey||2===t}_move(e,t){const i=.8*(t.x-e.x);if(i)return this._active=!0,{bearingDelta:i}}contextmenu(e){e.preventDefault()}}class Dr extends Ar{_correctButton(e,t){return 0===t&&e.ctrlKey||2===t}_move(e,t){const i=-.5*(t.y-e.y);if(i)return this._active=!0,{pitchDelta:i}}contextmenu(e){e.preventDefault()}}class Tr{constructor(e,t){this._minTouches=e.cooperativeGestures?2:1,this._clickTolerance=e.clickTolerance||1,this._map=t,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new e.pointGeometry(0,0),setTimeout((()=>{this._cancelCooperativeMessage=!1}),200)}touchstart(e,t,i){return this._calculateTransform(e,t,i)}touchmove(e,t,i){if(this._map._cooperativeGestures&&(2===this._minTouches&&i.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(e,!1,i.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(i.length<this._minTouches))return e.preventDefault(),this._calculateTransform(e,t,i)}touchend(e,t,i){this._calculateTransform(e,t,i),this._active&&i.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(t,i,r){r.length>0&&(this._active=!0);const n=_r(r,i),o=new e.pointGeometry(0,0),a=new e.pointGeometry(0,0);let s=0;for(const e in n){const t=n[e],i=this._touches[e];i&&(o._add(t),a._add(t.sub(i)),s++,n[e]=t)}if(this._touches=n,s<this._minTouches||!a.mag())return;const l=a.div(s);return this._sum._add(l),this._sum.mag()<this._clickTolerance?void 0:{around:o.div(s),panDelta:l}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Cr{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(e){}_move(e,t,i){return{}}touchstart(e,t,i){this._firstTwoTouches||i.length<2||(this._firstTwoTouches=[i[0].identifier,i[1].identifier],this._start([t[0],t[1]]))}touchmove(e,t,i){if(!this._firstTwoTouches)return;e.preventDefault();const[r,n]=this._firstTwoTouches,o=Mr(i,t,r),a=Mr(i,t,n);if(!o||!a)return;const s=this._aroundCenter?null:o.add(a).div(2);return this._move([o,a],s,e)}touchend(e,t,i){if(!this._firstTwoTouches)return;const[r,n]=this._firstTwoTouches,a=Mr(i,t,r),s=Mr(i,t,n);a&&s||(this._active&&o.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(e){this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Mr(e,t,i){for(let r=0;r<e.length;r++)if(e[r].identifier===i)return t[r]}function Sr(e,t){return Math.log(e/t)/Math.LN2}class Pr extends Cr{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(e){this._startDistance=this._distance=e[0].dist(e[1])}_move(e,t){const i=this._distance;if(this._distance=e[0].dist(e[1]),this._active||!(Math.abs(Sr(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Sr(this._distance,i),pinchAround:t}}}function Rr(e,t){return 180*e.angleWith(t)/Math.PI}class kr extends Cr{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1])}_move(e,t){const i=this._vector;if(this._vector=e[0].sub(e[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Rr(this._vector,i),pinchAround:t}}_isBelowThreshold(e){this._minDiameter=Math.min(this._minDiameter,e.mag());const t=25/(Math.PI*this._minDiameter)*360,i=Rr(e,this._startVector);return Math.abs(i)<t}}function zr(e){return Math.abs(e.y)>Math.abs(e.x)}class Lr extends Cr{constructor(e){super(),this._map=e}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(e,t,i){super.touchstart(e,t,i),this._currentTouchCount=i.length}_start(e){this._lastPoints=e,zr(e[0].sub(e[1]))&&(this._valid=!1)}_move(e,t,i){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const r=e[0].sub(this._lastPoints[0]),n=e[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(r,n,i.timeStamp),this._valid?(this._lastPoints=e,this._active=!0,{pitchDelta:(r.y+n.y)/2*-.5}):void 0}gestureBeginsVertically(e,t,i){if(void 0!==this._valid)return this._valid;const r=e.mag()>=2,n=t.mag()>=2;if(!r&&!n)return;if(!r||!n)return void 0===this._firstMove&&(this._firstMove=i),i-this._firstMove<100&&void 0;const o=e.y>0==t.y>0;return zr(e)&&zr(t)&&o}}const Br={panStep:100,bearingStep:15,pitchStep:10};class Fr{constructor(){const e=Br;this._panStep=e.panStep,this._bearingStep=e.bearingStep,this._pitchStep=e.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(e){if(e.altKey||e.ctrlKey||e.metaKey)return;let t=0,i=0,r=0,n=0,o=0;switch(e.keyCode){case 61:case 107:case 171:case 187:t=1;break;case 189:case 109:case 173:t=-1;break;case 37:e.shiftKey?i=-1:(e.preventDefault(),n=-1);break;case 39:e.shiftKey?i=1:(e.preventDefault(),n=1);break;case 38:e.shiftKey?r=1:(e.preventDefault(),o=-1);break;case 40:e.shiftKey?r=-1:(e.preventDefault(),o=1);break;default:return}return this._rotationDisabled&&(i=0,r=0),{cameraAnimation:a=>{const s=a.getZoom();a.easeTo({duration:300,easeId:"keyboardHandler",easing:Nr,zoom:t?Math.round(s)+t*(e.shiftKey?2:1):s,bearing:a.getBearing()+i*this._bearingStep,pitch:a.getPitch()+r*this._pitchStep,offset:[-n*this._panStep,-o*this._panStep],center:a.getCenter()},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Nr(e){return e*(2-e)}const Or=4.000244140625;class Gr{constructor(t,i){this._map=t,this._el=t.getCanvasContainer(),this._handler=i,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,e.bindAll(["_onTimeout"],this)}setZoomRate(e){this._defaultZoomRate=e}setWheelZoomRate(e){this._wheelZoomRate=e}isEnabled(){return!!this._enabled}isActive(){return!!this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=e&&"center"===e.around)}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(t){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!this._map._metaPress)return;t.preventDefault()}let i=t.deltaMode===WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY;const r=e.exported.now(),n=r-(this._lastWheelEventTime||0);this._lastWheelEventTime=r,0!==i&&i%Or==0?this._type="wheel":0!==i&&Math.abs(i)<4?this._type="trackpad":n>400?(this._type=null,this._lastValue=i,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(n*i)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,i+=this._lastValue)),t.shiftKey&&i&&(i/=4),this._type&&(this._lastWheelEvent=t,this._delta-=i,this._active||this._start(t)),t.preventDefault()}_onTimeout(e){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(e)}_start(t){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const i=o.mousePos(this._el,t);this._around=e.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(i)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId)return;if(this._frameId=null,!this.isActive())return;const t=this._map.transform;if(0!==this._delta){const e="wheel"===this._type&&Math.abs(this._delta)>Or?this._wheelZoomRate:this._defaultZoomRate;let i=2/(1+Math.exp(-Math.abs(this._delta*e)));this._delta<0&&0!==i&&(i=1/i);const r="number"==typeof this._targetZoom?t.zoomScale(this._targetZoom):t.scale;this._targetZoom=Math.min(t.maxZoom,Math.max(t.minZoom,t.scaleZoom(r*i))),"wheel"===this._type&&(this._startZoom=t.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const i="number"==typeof this._targetZoom?this._targetZoom:t.zoom,r=this._startZoom,n=this._easing;let o,a=!1;if("wheel"===this._type&&r&&n){const t=Math.min((e.exported.now()-this._lastWheelEventTime)/200,1),s=n(t);o=e.number(r,i,s),t<1?this._frameId||(this._frameId=!0):a=!0}else o=i,a=!0;return this._active=!0,a&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!a,zoomDelta:o-t.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(t){let i=e.ease;if(this._prevEase){const t=this._prevEase,r=(e.exported.now()-t.start)/t.duration,n=t.easing(r+.01)-t.easing(r),o=.27/Math.sqrt(n*n+1e-4)*.01,a=Math.sqrt(.0729-o*o);i=e.bezier(o,a,.25,1)}return this._prevEase={start:e.exported.now(),duration:t,easing:i},i}reset(){this._active=!1}}class Ur{constructor(e,t){this._clickZoom=e,this._tapZoom=t}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Vr{constructor(){this.reset()}reset(){this._active=!1}dblclick(e,t){return e.preventDefault(),{cameraAnimation:i=>{i.easeTo({duration:300,zoom:i.getZoom()+(e.shiftKey?-1:1),around:i.unproject(t)},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class $r{constructor(){this._tap=new br({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(e,t,i){this._swipePoint||(this._tapTime&&e.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?i.length>0&&(this._swipePoint=t[0],this._swipeTouch=i[0].identifier):this._tap.touchstart(e,t,i))}touchmove(e,t,i){if(this._tapTime){if(this._swipePoint){if(i[0].identifier!==this._swipeTouch)return;const r=t[0],n=r.y-this._swipePoint.y;return this._swipePoint=r,e.preventDefault(),this._active=!0,{zoomDelta:n/128}}}else this._tap.touchmove(e,t,i)}touchend(e,t,i){this._tapTime?this._swipePoint&&0===i.length&&this.reset():this._tap.touchend(e,t,i)&&(this._tapTime=e.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class qr{constructor(e,t,i){this._el=e,this._mousePan=t,this._touchPan=i}enable(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class jr{constructor(e,t,i){this._pitchWithRotate=e.pitchWithRotate,this._mouseRotate=t,this._mousePitch=i}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Zr{constructor(e,t,i,r){this._el=e,this._touchZoom=t,this._touchRotate=i,this._tapDragZoom=r,this._rotationDisabled=!1,this._enabled=!0}enable(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Wr=e=>e.zoom||e.drag||e.pitch||e.rotate;class Xr extends e.Event{}function Hr(e){return e.panDelta&&e.panDelta.mag()||e.zoomDelta||e.bearingDelta||e.pitchDelta}class Yr{constructor(t,i){this._map=t,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new cr(t),this._bearingSnap=i.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(i),e.bindAll(["handleEvent","handleWindowEvent"],this);const r=this._el;this._listeners=[[r,"touchstart",{passive:!0}],[r,"touchmove",{passive:!1}],[r,"touchend",void 0],[r,"touchcancel",void 0],[r,"mousedown",void 0],[r,"mousemove",void 0],[r,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[r,"mouseover",void 0],[r,"mouseout",void 0],[r,"dblclick",void 0],[r,"click",void 0],[r,"keydown",{capture:!1}],[r,"keyup",void 0],[r,"wheel",{passive:!1}],[r,"contextmenu",void 0],[window,"blur",void 0]];for(const[e,t,i]of this._listeners)o.addEventListener(e,t,e===document?this.handleWindowEvent:this.handleEvent,i)}destroy(){for(const[e,t,i]of this._listeners)o.removeEventListener(e,t,e===document?this.handleWindowEvent:this.handleEvent,i)}_addDefaultHandlers(e){const t=this._map,i=t.getCanvasContainer();this._add("mapEvent",new mr(t,e));const r=t.boxZoom=new yr(t,e);this._add("boxZoom",r);const n=new vr,o=new Vr;t.doubleClickZoom=new Ur(o,n),this._add("tapZoom",n),this._add("clickZoom",o);const a=new $r;this._add("tapDragZoom",a);const s=t.touchPitch=new Lr(t);this._add("touchPitch",s);const l=new Ir(e),c=new Dr(e);t.dragRotate=new jr(e,l,c),this._add("mouseRotate",l,["mousePitch"]),this._add("mousePitch",c,["mouseRotate"]);const u=new Er(e),h=new Tr(e,t);t.dragPan=new qr(i,u,h),this._add("mousePan",u),this._add("touchPan",h,["touchZoom","touchRotate"]);const p=new kr,d=new Pr;t.touchZoomRotate=new Zr(i,d,p,a),this._add("touchRotate",p,["touchPan","touchZoom"]),this._add("touchZoom",d,["touchPan","touchRotate"]);const f=t.scrollZoom=new Gr(t,this);this._add("scrollZoom",f,["mousePan"]);const m=t.keyboard=new Fr;this._add("keyboard",m),this._add("blockableMapEvent",new gr(t));for(const i of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])e.interactive&&e[i]&&t[i].enable(e[i])}_add(e,t,i){this._handlers.push({handlerName:e,handler:t,allowed:i}),this._handlersById[e]=t}stop(e){if(!this._updatingCamera){for(const{handler:e}of this._handlers)e.reset();this._inertia.clear(),this._fireEvents({},{},e),this._changes=[]}}isActive(){for(const{handler:e}of this._handlers)if(e.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(Wr(this._eventsInProgress))||this.isZooming()}_blockedByActive(e,t,i){for(const r in e)if(r!==i&&(!t||t.indexOf(r)<0))return!0;return!1}handleWindowEvent(e){this.handleEvent(e,`${e.type}Window`)}_getMapTouches(e){const t=[];for(const i of e)this._el.contains(i.target)&&t.push(i);return t}handleEvent(e,t){if("blur"===e.type)return void this.stop(!0);this._updatingCamera=!0;const i="renderFrame"===e.type?void 0:e,r={needsRenderFrame:!1},n={},a={},s=e.touches,l=s?this._getMapTouches(s):void 0,c=l?o.touchPos(this._el,l):o.mousePos(this._el,e);for(const{handlerName:o,handler:s,allowed:u}of this._handlers){if(!s.isEnabled())continue;let h;this._blockedByActive(a,u,o)?s.reset():s[t||e.type]&&(h=s[t||e.type](e,c,l),this.mergeHandlerResult(r,n,h,o,i),h&&h.needsRenderFrame&&this._triggerRenderFrame()),(h||s.isActive())&&(a[o]=s)}const u={};for(const e in this._previousActiveHandlers)a[e]||(u[e]=i);this._previousActiveHandlers=a,(Object.keys(u).length||Hr(r))&&(this._changes.push([r,n,u]),this._triggerRenderFrame()),(Object.keys(a).length||Hr(r))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:h}=r;h&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],h(this._map))}mergeHandlerResult(t,i,r,n,o){if(!r)return;e.extend(t,r);const a={handlerName:n,originalEvent:r.originalEvent||o};void 0!==r.zoomDelta&&(i.zoom=a),void 0!==r.panDelta&&(i.drag=a),void 0!==r.pitchDelta&&(i.pitch=a),void 0!==r.bearingDelta&&(i.rotate=a)}_applyChanges(){const t={},i={},r={};for(const[n,o,a]of this._changes)n.panDelta&&(t.panDelta=(t.panDelta||new e.pointGeometry(0,0))._add(n.panDelta)),n.zoomDelta&&(t.zoomDelta=(t.zoomDelta||0)+n.zoomDelta),n.bearingDelta&&(t.bearingDelta=(t.bearingDelta||0)+n.bearingDelta),n.pitchDelta&&(t.pitchDelta=(t.pitchDelta||0)+n.pitchDelta),void 0!==n.around&&(t.around=n.around),void 0!==n.pinchAround&&(t.pinchAround=n.pinchAround),n.noInertia&&(t.noInertia=n.noInertia),e.extend(i,o),e.extend(r,a);this._updateMapTransform(t,i,r),this._changes=[]}_updateMapTransform(t,i,r){const n=this._map,o=n.transform,a=n.style&&n.style.terrain;if(!(Hr(t)||a&&this._drag))return this._fireEvents(i,r,!0);let{panDelta:s,zoomDelta:l,bearingDelta:c,pitchDelta:u,around:h,pinchAround:p}=t;void 0!==p&&(h=p),n._stop(!0),h=h||n.transform.centerPoint;const d=o.pointLocation(s?h.sub(s):h);c&&(o.bearing+=c),u&&(o.pitch+=u),l&&(o.zoom+=l),a?i.drag&&!this._drag?(this._drag={center:o.centerPoint,lngLat:o.pointLocation(h),point:h,handlerName:i.drag.handlerName},n.fire(new e.Event("freezeElevation",{freeze:!0}))):this._drag&&r[this._drag.handlerName]?(n.fire(new e.Event("freezeElevation",{freeze:!1})),this._drag=null):i.drag&&this._drag&&(o.center=o.pointLocation(o.centerPoint.sub(s))):o.setLocationAtPoint(d,h),this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(i,r,!0)}_fireEvents(t,i,r){const n=Wr(this._eventsInProgress),o=Wr(t),a={};for(const e in t){const{originalEvent:i}=t[e];this._eventsInProgress[e]||(a[`${e}start`]=i),this._eventsInProgress[e]=t[e]}!n&&o&&this._fireEvent("movestart",o.originalEvent);for(const e in a)this._fireEvent(e,a[e]);o&&this._fireEvent("move",o.originalEvent);for(const e in t){const{originalEvent:i}=t[e];this._fireEvent(e,i)}const s={};let l;for(const e in this._eventsInProgress){const{handlerName:t,originalEvent:r}=this._eventsInProgress[e];this._handlersById[t].isActive()||(delete this._eventsInProgress[e],l=i[t]||r,s[`${e}end`]=l)}for(const e in s)this._fireEvent(e,s[e]);const c=Wr(this._eventsInProgress);if(r&&(n||o)&&!c){this._updatingCamera=!0;const t=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),i=e=>0!==e&&-this._bearingSnap<e&&e<this._bearingSnap;t?(i(t.bearing||this._map.getBearing())&&(t.bearing=0),this._map.easeTo(t,{originalEvent:l})):(this._map.fire(new e.Event("moveend",{originalEvent:l})),i(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(t,i){this._map.fire(new e.Event(t,i?{originalEvent:i}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((e=>{delete this._frameId,this.handleEvent(new Xr("renderFrame",{timeStamp:e})),this._applyChanges()}))}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}const Kr={extend:(t,...i)=>e.extend(t,...i),run(e){e()},logToElement(e,t=!1,i="log"){const r=window.document.getElementById(i);r&&(t&&(r.innerHTML=""),r.innerHTML+=`<br>${e}`)}};class Jr extends e.Evented{constructor(t,i){super(),this._moving=!1,this._zooming=!1,this.transform=t,this._bearingSnap=i.bearingSnap,e.bindAll(["_renderFrameCallback"],this)}getCenter(){return new e.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(e,t){return this.jumpTo({center:e},t)}panBy(t,i,r){return t=e.pointGeometry.convert(t).mult(-1),this.panTo(this.transform.center,e.extend({offset:t},i),r)}panTo(t,i,r){return this.easeTo(e.extend({center:t},i),r)}getZoom(){return this.transform.zoom}setZoom(e,t){return this.jumpTo({zoom:e},t),this}zoomTo(t,i,r){return this.easeTo(e.extend({zoom:t},i),r)}zoomIn(e,t){return this.zoomTo(this.getZoom()+1,e,t),this}zoomOut(e,t){return this.zoomTo(this.getZoom()-1,e,t),this}getBearing(){return this.transform.bearing}setBearing(e,t){return this.jumpTo({bearing:e},t),this}getPadding(){return this.transform.padding}setPadding(e,t){return this.jumpTo({padding:e},t),this}rotateTo(t,i,r){return this.easeTo(e.extend({bearing:t},i),r)}resetNorth(t,i){return this.rotateTo(0,e.extend({duration:1e3},t),i),this}resetNorthPitch(t,i){return this.easeTo(e.extend({bearing:0,pitch:0,duration:1e3},t),i),this}snapToNorth(e,t){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,t):this}getPitch(){return this.transform.pitch}setPitch(e,t){return this.jumpTo({pitch:e},t),this}cameraForBounds(t,i){t=e.LngLatBounds.convert(t);const r=i&&i.bearing||0;return this._cameraForBoxAndBearing(t.getNorthWest(),t.getSouthEast(),r,i)}_cameraForBoxAndBearing(t,i,r,n){const o={top:0,bottom:0,right:0,left:0};if("number"==typeof(n=e.extend({padding:o,offset:[0,0],maxZoom:this.transform.maxZoom},n)).padding){const e=n.padding;n.padding={top:e,bottom:e,right:e,left:e}}n.padding=e.extend(o,n.padding);const a=this.transform,s=a.padding,l=a.project(e.LngLat.convert(t)),c=a.project(e.LngLat.convert(i)),u=l.rotate(-r*Math.PI/180),h=c.rotate(-r*Math.PI/180),p=new e.pointGeometry(Math.max(u.x,h.x),Math.max(u.y,h.y)),d=new e.pointGeometry(Math.min(u.x,h.x),Math.min(u.y,h.y)),f=p.sub(d),m=(a.width-(s.left+s.right+n.padding.left+n.padding.right))/f.x,g=(a.height-(s.top+s.bottom+n.padding.top+n.padding.bottom))/f.y;if(g<0||m<0)return void e.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const y=Math.min(a.scaleZoom(a.scale*Math.min(m,g)),n.maxZoom),_=e.pointGeometry.convert(n.offset),x=new e.pointGeometry((n.padding.left-n.padding.right)/2,(n.padding.top-n.padding.bottom)/2).rotate(r*Math.PI/180),b=_.add(x).mult(a.scale/a.zoomScale(y));return{center:a.unproject(l.add(c).div(2).sub(b)),zoom:y,bearing:r}}fitBounds(e,t,i){return this._fitInternal(this.cameraForBounds(e,t),t,i)}fitScreenCoordinates(t,i,r,n,o){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(e.pointGeometry.convert(t)),this.transform.pointLocation(e.pointGeometry.convert(i)),r,n),n,o)}_fitInternal(t,i,r){return t?(delete(i=e.extend(t,i)).padding,i.linear?this.easeTo(i,r):this.flyTo(i,r)):this}jumpTo(t,i){this.stop();const r=this.transform;let n=!1,o=!1,a=!1;return"zoom"in t&&r.zoom!==+t.zoom&&(n=!0,r.zoom=+t.zoom),void 0!==t.center&&(r.center=e.LngLat.convert(t.center)),"bearing"in t&&r.bearing!==+t.bearing&&(o=!0,r.bearing=+t.bearing),"pitch"in t&&r.pitch!==+t.pitch&&(a=!0,r.pitch=+t.pitch),null==t.padding||r.isPaddingEqual(t.padding)||(r.padding=t.padding),this.fire(new e.Event("movestart",i)).fire(new e.Event("move",i)),n&&this.fire(new e.Event("zoomstart",i)).fire(new e.Event("zoom",i)).fire(new e.Event("zoomend",i)),o&&this.fire(new e.Event("rotatestart",i)).fire(new e.Event("rotate",i)).fire(new e.Event("rotateend",i)),a&&this.fire(new e.Event("pitchstart",i)).fire(new e.Event("pitch",i)).fire(new e.Event("pitchend",i)),this.fire(new e.Event("moveend",i))}calculateCameraOptionsFromTo(t,i,r,n=0){const o=e.MercatorCoordinate.fromLngLat(t,i),a=e.MercatorCoordinate.fromLngLat(r,n),s=a.x-o.x,l=a.y-o.y,c=a.z-o.z,u=Math.hypot(s,l,c);if(0===u)throw new Error("Can't calculate camera options with same From and To");const h=Math.hypot(s,l),p=this.transform.scaleZoom(this.transform.cameraToCenterDistance/u/this.transform.tileSize),d=180*Math.atan2(s,-l)/Math.PI;let f=180*Math.acos(h/u)/Math.PI;return f=c<0?90-f:90+f,{center:a.toLngLat(),zoom:p,pitch:f,bearing:d}}easeTo(t,i){this._stop(!1,t.easeId),(!1===(t=e.extend({offset:[0,0],duration:500,easing:e.ease},t)).animate||!t.essential&&e.exported.prefersReducedMotion)&&(t.duration=0);const r=this.transform,n=this.getZoom(),o=this.getBearing(),a=this.getPitch(),s=this.getPadding(),l="zoom"in t?+t.zoom:n,c="bearing"in t?this._normalizeBearing(t.bearing,o):o,u="pitch"in t?+t.pitch:a,h="padding"in t?t.padding:r.padding,p=e.pointGeometry.convert(t.offset);let d=r.centerPoint.add(p);const f=r.pointLocation(d),m=e.LngLat.convert(t.center||f);this._normalizeCenter(m);const g=r.project(f),y=r.project(m).sub(g),_=r.zoomScale(l-n);let x,b;t.around&&(x=e.LngLat.convert(t.around),b=r.locationPoint(x));const v={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||l!==n,this._rotating=this._rotating||o!==c,this._pitching=this._pitching||u!==a,this._padding=!r.isPaddingEqual(h),this._easeId=t.easeId,this._prepareEase(i,t.noMoveStart,v),this._ease((t=>{if(this._zooming&&(r.zoom=e.number(n,l,t)),this._rotating&&(r.bearing=e.number(o,c,t)),this._pitching&&(r.pitch=e.number(a,u,t)),this._padding&&(r.interpolatePadding(s,h,t),d=r.centerPoint.add(p)),x)r.setLocationAtPoint(x,b);else{const e=r.zoomScale(r.zoom-n),i=l>n?Math.min(2,_):Math.max(.5,_),o=Math.pow(i,1-t),a=r.unproject(g.add(y.mult(t*o)).mult(e));r.setLocationAtPoint(r.renderWorldCopies?a.wrap():a,d)}this._fireMoveEvents(i)}),(e=>{this._afterEase(i,e)}),t),this}_prepareEase(t,i,r={}){this._moving=!0,this.fire(new e.Event("freezeElevation",{freeze:!0})),i||r.moving||this.fire(new e.Event("movestart",t)),this._zooming&&!r.zooming&&this.fire(new e.Event("zoomstart",t)),this._rotating&&!r.rotating&&this.fire(new e.Event("rotatestart",t)),this._pitching&&!r.pitching&&this.fire(new e.Event("pitchstart",t))}_fireMoveEvents(t){this.fire(new e.Event("move",t)),this._zooming&&this.fire(new e.Event("zoom",t)),this._rotating&&this.fire(new e.Event("rotate",t)),this._pitching&&this.fire(new e.Event("pitch",t))}_afterEase(t,i){if(this._easeId&&i&&this._easeId===i)return;delete this._easeId,this.fire(new e.Event("freezeElevation",{freeze:!1}));const r=this._zooming,n=this._rotating,o=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,r&&this.fire(new e.Event("zoomend",t)),n&&this.fire(new e.Event("rotateend",t)),o&&this.fire(new e.Event("pitchend",t)),this.fire(new e.Event("moveend",t))}flyTo(t,i){if(!t.essential&&e.exported.prefersReducedMotion){const r=e.pick(t,["center","zoom","bearing","pitch","around"]);return this.jumpTo(r,i)}this.stop(),t=e.extend({offset:[0,0],speed:1.2,curve:1.42,easing:e.ease},t);const r=this.transform,n=this.getZoom(),o=this.getBearing(),a=this.getPitch(),s=this.getPadding(),l="zoom"in t?e.clamp(+t.zoom,r.minZoom,r.maxZoom):n,c="bearing"in t?this._normalizeBearing(t.bearing,o):o,u="pitch"in t?+t.pitch:a,h="padding"in t?t.padding:r.padding,p=r.zoomScale(l-n),d=e.pointGeometry.convert(t.offset);let f=r.centerPoint.add(d);const m=r.pointLocation(f),g=e.LngLat.convert(t.center||m);this._normalizeCenter(g);const y=r.project(m),_=r.project(g).sub(y);let x=t.curve;const b=Math.max(r.width,r.height),v=b/p,w=_.mag();if("minZoom"in t){const i=e.clamp(Math.min(t.minZoom,n,l),r.minZoom,r.maxZoom),o=b/r.zoomScale(i-n);x=Math.sqrt(o/w*2)}const A=x*x;function E(e){const t=(v*v-b*b+(e?-1:1)*A*A*w*w)/(2*(e?v:b)*A*w);return Math.log(Math.sqrt(t*t+1)-t)}function I(e){return(Math.exp(e)-Math.exp(-e))/2}function D(e){return(Math.exp(e)+Math.exp(-e))/2}const T=E(0);let C=function(e){return D(T)/D(T+x*e)},M=function(e){return b*((D(T)*(I(t=T+x*e)/D(t))-I(T))/A)/w;var t},S=(E(1)-T)/x;if(Math.abs(w)<1e-6||!isFinite(S)){if(Math.abs(b-v)<1e-6)return this.easeTo(t,i);const e=v<b?-1:1;S=Math.abs(Math.log(v/b))/x,M=function(){return 0},C=function(t){return Math.exp(e*x*t)}}return t.duration="duration"in t?+t.duration:1e3*S/("screenSpeed"in t?+t.screenSpeed/x:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0),this._zooming=!0,this._rotating=o!==c,this._pitching=u!==a,this._padding=!r.isPaddingEqual(h),this._prepareEase(i,!1),this._ease((t=>{const p=t*S,m=1/C(p);r.zoom=1===t?l:n+r.scaleZoom(m),this._rotating&&(r.bearing=e.number(o,c,t)),this._pitching&&(r.pitch=e.number(a,u,t)),this._padding&&(r.interpolatePadding(s,h,t),f=r.centerPoint.add(d));const x=1===t?g:r.unproject(y.add(_.mult(M(p))).mult(m));r.setLocationAtPoint(r.renderWorldCopies?x.wrap():x,f),this._fireMoveEvents(i)}),(()=>this._afterEase(i)),t),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(e,t){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const e=this._onEaseEnd;delete this._onEaseEnd,e.call(this,t)}if(!e){const e=this.handlers;e&&e.stop(!1)}return this}_ease(t,i,r){!1===r.animate||0===r.duration?(t(1),i()):(this._easeStart=e.exported.now(),this._easeOptions=r,this._onEaseFrame=t,this._onEaseEnd=i,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const t=Math.min((e.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(t)),t<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(t,i){t=e.wrap(t,-180,180);const r=Math.abs(t-i);return Math.abs(t-360-i)<r&&(t-=360),Math.abs(t+360-i)<r&&(t+=360),t}_normalizeCenter(e){const t=this.transform;if(!t.renderWorldCopies||t.lngRange)return;const i=e.lng-t.center.lng;e.lng+=i>180?-360:i<-180?360:0}}class Qr{constructor(t={}){this.options=t,e.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(e){return this._map=e,this._compact=this.options&&this.options.compact,this._container=o.create("details","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=o.create("summary","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=o.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){o.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(e,t){const i=this._map._getUIString(`AttributionControl.${t}`);e.title=i,e.setAttribute("aria-label",i)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")):(this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show"),this._container.removeAttribute("open")))}_updateData(e){!e||"metadata"!==e.sourceDataType&&"visibility"!==e.sourceDataType&&"style"!==e.dataType&&"terrain"!==e.type||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let e=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=e.concat(this.options.customAttribution.map((e=>"string"!=typeof e?"":e))):"string"==typeof this.options.customAttribution&&e.push(this.options.customAttribution)),this._map.style.stylesheet){const e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}const t=this._map.style.sourceCaches;for(const i in t){const r=t[i];if(r.used||r.usedForTerrain){const t=r.getSource();t.attribution&&e.indexOf(t.attribution)<0&&e.push(t.attribution)}}e=e.filter((e=>String(e).trim())),e.sort(((e,t)=>e.length-t.length)),e=e.filter(((t,i)=>{for(let r=i+1;r<e.length;r++)if(e[r].indexOf(t)>=0)return!1;return!0}));const i=e.join(" | ");i!==this._attribHTML&&(this._attribHTML=i,e.length?(this._innerContainer.innerHTML=i,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1===this._compact?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","mapboxgl-compact","maplibregl-compact-show","mapboxgl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")}}class en{constructor(t={}){this.options=t,e.bindAll(["_updateCompact"],this)}getDefaultPosition(){return"bottom-left"}onAdd(e){this._map=e,this._compact=this.options&&this.options.compact,this._container=o.create("div","maplibregl-ctrl mapboxgl-ctrl");const t=o.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return t.target="_blank",t.rel="noopener nofollow",t.href="https://maplibre.org/",t.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),t.setAttribute("rel","noopener nofollow"),this._container.appendChild(t),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){o.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}_updateCompact(){const e=this._container.children;if(e.length){const t=e[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1!==this._compact&&t.classList.add("maplibregl-compact","mapboxgl-compact"):t.classList.remove("maplibregl-compact","mapboxgl-compact")}}}class tn{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(e){const t=++this._id;return this._queue.push({callback:e,id:t,cancelled:!1}),t}remove(e){const t=this._currentlyRunning,i=t?this._queue.concat(t):this._queue;for(const t of i)if(t.id===e)return void(t.cancelled=!0)}run(e=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const t=this._currentlyRunning=this._queue;this._queue=[];for(const i of t)if(!i.cancelled&&(i.callback(e),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const rn={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"},nn={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},on={showCompass:!0,showZoom:!0,visualizePitch:!1};class an{constructor(t,i,r=!1){this._clickTolerance=10,this.element=i,this.mouseRotate=new Ir({clickTolerance:t.dragRotate._mouseRotate._clickTolerance}),this.map=t,r&&(this.mousePitch=new Dr({clickTolerance:t.dragRotate._mousePitch._clickTolerance})),e.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),o.addEventListener(i,"mousedown",this.mousedown),o.addEventListener(i,"touchstart",this.touchstart,{passive:!1}),o.addEventListener(i,"touchmove",this.touchmove),o.addEventListener(i,"touchend",this.touchend),o.addEventListener(i,"touchcancel",this.reset)}down(e,t){this.mouseRotate.mousedown(e,t),this.mousePitch&&this.mousePitch.mousedown(e,t),o.disableDrag()}move(e,t){const i=this.map,r=this.mouseRotate.mousemoveWindow(e,t);if(r&&r.bearingDelta&&i.setBearing(i.getBearing()+r.bearingDelta),this.mousePitch){const r=this.mousePitch.mousemoveWindow(e,t);r&&r.pitchDelta&&i.setPitch(i.getPitch()+r.pitchDelta)}}off(){const e=this.element;o.removeEventListener(e,"mousedown",this.mousedown),o.removeEventListener(e,"touchstart",this.touchstart,{passive:!1}),o.removeEventListener(e,"touchmove",this.touchmove),o.removeEventListener(e,"touchend",this.touchend),o.removeEventListener(e,"touchcancel",this.reset),this.offTemp()}offTemp(){o.enableDrag(),o.removeEventListener(window,"mousemove",this.mousemove),o.removeEventListener(window,"mouseup",this.mouseup)}mousedown(t){this.down(e.extend({},t,{ctrlKey:!0,preventDefault:()=>t.preventDefault()}),o.mousePos(this.element,t)),o.addEventListener(window,"mousemove",this.mousemove),o.addEventListener(window,"mouseup",this.mouseup)}mousemove(e){this.move(e,o.mousePos(this.element,e))}mouseup(e){this.mouseRotate.mouseupWindow(e),this.mousePitch&&this.mousePitch.mouseupWindow(e),this.offTemp()}touchstart(e){1!==e.targetTouches.length?this.reset():(this._startPos=this._lastPos=o.touchPos(this.element,e.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>e.preventDefault()},this._startPos))}touchmove(e){1!==e.targetTouches.length?this.reset():(this._lastPos=o.touchPos(this.element,e.targetTouches)[0],this.move({preventDefault:()=>e.preventDefault()},this._lastPos))}touchend(e){0===e.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function sn(t,i,r){if(t=new e.LngLat(t.lng,t.lat),i){const n=new e.LngLat(t.lng-360,t.lat),o=new e.LngLat(t.lng+360,t.lat),a=r.locationPoint(t).distSqr(i);r.locationPoint(n).distSqr(i)<a?t=n:r.locationPoint(o).distSqr(i)<a&&(t=o)}for(;Math.abs(t.lng-r.center.lng)>180;){const e=r.locationPoint(t);if(e.x>=0&&e.y>=0&&e.x<=r.width&&e.y<=r.height)break;t.lng>r.center.lng?t.lng-=360:t.lng+=360}return t}const ln={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function cn(e,t,i){const r=e.classList;for(const e in ln)r.remove(`maplibregl-${i}-anchor-${e}`,`mapboxgl-${i}-anchor-${e}`);r.add(`maplibregl-${i}-anchor-${t}`,`mapboxgl-${i}-anchor-${t}`)}class un extends e.Evented{constructor(t,i){if(super(),(t instanceof HTMLElement||i)&&(t=e.extend({element:t},i)),e.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=t&&t.anchor||"center",this._color=t&&t.color||"#3FB1CE",this._scale=t&&t.scale||1,this._draggable=t&&t.draggable||!1,this._clickTolerance=t&&t.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=t&&t.rotation||0,this._rotationAlignment=t&&t.rotationAlignment||"auto",this._pitchAlignment=t&&t.pitchAlignment&&"auto"!==t.pitchAlignment?t.pitchAlignment:this._rotationAlignment,t&&t.element)this._element=t.element,this._offset=e.pointGeometry.convert(t&&t.offset||[0,0]);else{this._defaultMarker=!0,this._element=o.create("div"),this._element.setAttribute("aria-label","Map marker");const i=o.createNS("http://www.w3.org/2000/svg","svg"),r=41,n=27;i.setAttributeNS(null,"display","block"),i.setAttributeNS(null,"height",`${r}px`),i.setAttributeNS(null,"width",`${n}px`),i.setAttributeNS(null,"viewBox",`0 0 ${n} ${r}`);const a=o.createNS("http://www.w3.org/2000/svg","g");a.setAttributeNS(null,"stroke","none"),a.setAttributeNS(null,"stroke-width","1"),a.setAttributeNS(null,"fill","none"),a.setAttributeNS(null,"fill-rule","evenodd");const s=o.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"fill-rule","nonzero");const l=o.createNS("http://www.w3.org/2000/svg","g");l.setAttributeNS(null,"transform","translate(3.0, 29.0)"),l.setAttributeNS(null,"fill","#000000");const c=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const e of c){const t=o.createNS("http://www.w3.org/2000/svg","ellipse");t.setAttributeNS(null,"opacity","0.04"),t.setAttributeNS(null,"cx","10.5"),t.setAttributeNS(null,"cy","5.80029008"),t.setAttributeNS(null,"rx",e.rx),t.setAttributeNS(null,"ry",e.ry),l.appendChild(t)}const u=o.createNS("http://www.w3.org/2000/svg","g");u.setAttributeNS(null,"fill",this._color);const h=o.createNS("http://www.w3.org/2000/svg","path");h.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),u.appendChild(h);const p=o.createNS("http://www.w3.org/2000/svg","g");p.setAttributeNS(null,"opacity","0.25"),p.setAttributeNS(null,"fill","#000000");const d=o.createNS("http://www.w3.org/2000/svg","path");d.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),p.appendChild(d);const f=o.createNS("http://www.w3.org/2000/svg","g");f.setAttributeNS(null,"transform","translate(6.0, 7.0)"),f.setAttributeNS(null,"fill","#FFFFFF");const m=o.createNS("http://www.w3.org/2000/svg","g");m.setAttributeNS(null,"transform","translate(8.0, 8.0)");const g=o.createNS("http://www.w3.org/2000/svg","circle");g.setAttributeNS(null,"fill","#000000"),g.setAttributeNS(null,"opacity","0.25"),g.setAttributeNS(null,"cx","5.5"),g.setAttributeNS(null,"cy","5.5"),g.setAttributeNS(null,"r","5.4999962");const y=o.createNS("http://www.w3.org/2000/svg","circle");y.setAttributeNS(null,"fill","#FFFFFF"),y.setAttributeNS(null,"cx","5.5"),y.setAttributeNS(null,"cy","5.5"),y.setAttributeNS(null,"r","5.4999962"),m.appendChild(g),m.appendChild(y),s.appendChild(l),s.appendChild(u),s.appendChild(p),s.appendChild(f),s.appendChild(m),i.appendChild(s),i.setAttributeNS(null,"height",r*this._scale+"px"),i.setAttributeNS(null,"width",n*this._scale+"px"),this._element.appendChild(i),this._offset=e.pointGeometry.convert(t&&t.offset||[0,-14])}this._element.classList.add("maplibregl-marker","mapboxgl-marker"),this._element.addEventListener("dragstart",(e=>{e.preventDefault()})),this._element.addEventListener("mousedown",(e=>{e.preventDefault()})),cn(this._element,this._anchor,"marker"),this._popup=null}addTo(e){return this.remove(),this._map=e,e.getCanvasContainer().appendChild(this._element),e.on("move",this._update),e.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),o.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(t){return this._lngLat=e.LngLat.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(e){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),e){if(!("offset"in e.options)){const t=38.1,i=13.5,r=Math.sqrt(Math.pow(i,2)/2);e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-t],"bottom-left":[r,-1*(t-i+r)],"bottom-right":[-r,-1*(t-i+r)],left:[i,-1*(t-i)],right:[-i,-1*(t-i)]}:this._offset}this._popup=e,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(e){const t=e.code,i=e.charCode||e.keyCode;"Space"!==t&&"Enter"!==t&&32!==i&&13!==i||this.togglePopup()}_onMapClick(e){const t=e.originalEvent.target,i=this._element;this._popup&&(t===i||i.contains(t))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const e=this._popup;return e?(e.isOpen()?e.remove():e.addTo(this._map),this):this}_update(e){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=sn(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let t="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?t=`rotateZ(${this._rotation}deg)`:"map"===this._rotationAlignment&&(t=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let i="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?i="rotateX(0deg)":"map"===this._pitchAlignment&&(i=`rotateX(${this._map.getPitch()}deg)`),e&&"moveend"!==e.type||(this._pos=this._pos.round()),o.setTransform(this._element,`${ln[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${i} ${t}`),this._map.style&&this._map.style.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout((()=>{const e=this._map.unproject(this._pos),t=40075016.686*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=e.distanceTo(this._lngLat)>20*t?"0.2":"1.0",this._opacityTimeout=null}),100))}getOffset(){return this._offset}setOffset(t){return this._offset=e.pointGeometry.convert(t),this._update(),this}_onMove(t){if(!this._isDragging){const e=this._clickTolerance||this._map._clickTolerance;this._isDragging=t.point.dist(this._pointerdownPos)>=e}this._isDragging&&(this._pos=t.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new e.Event("dragstart"))),this.fire(new e.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new e.Event("dragend")),this._state="inactive"}_addDragHandler(e){this._element.contains(e.originalEvent.target)&&(e.preventDefault(),this._positionDelta=e.point.sub(this._pos).add(this._offset),this._pointerdownPos=e.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(e){return this._draggable=!!e,this._map&&(e?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(e){return this._rotation=e||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(e){return this._rotationAlignment=e||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(e){return this._pitchAlignment=e&&"auto"!==e?e:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const hn={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let pn,dn=0,fn=!1;const mn={maxWidth:100,unit:"metric"};function gn(e,t,i){const r=i&&i.maxWidth||100,n=e._container.clientHeight/2,o=e.unproject([0,n]),a=e.unproject([r,n]),s=o.distanceTo(a);if(i&&"imperial"===i.unit){const i=3.2808*s;i>5280?yn(t,r,i/5280,e._getUIString("ScaleControl.Miles")):yn(t,r,i,e._getUIString("ScaleControl.Feet"))}else i&&"nautical"===i.unit?yn(t,r,s/1852,e._getUIString("ScaleControl.NauticalMiles")):s>=1e3?yn(t,r,s/1e3,e._getUIString("ScaleControl.Kilometers")):yn(t,r,s,e._getUIString("ScaleControl.Meters"))}function yn(e,t,i,r){const n=function(e){const t=Math.pow(10,`${Math.floor(e)}`.length-1);let i=e/t;return i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:i>=1?1:function(e){const t=Math.pow(10,Math.ceil(-Math.log(e)/Math.LN10));return Math.round(e*t)/t}(i),t*i}(i);e.style.width=t*(n/i)+"px",e.innerHTML=`${n}&nbsp;${r}`}const _n={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},xn=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function bn(t){if(t){if("number"==typeof t){const i=Math.round(Math.sqrt(.5*Math.pow(t,2)));return{center:new e.pointGeometry(0,0),top:new e.pointGeometry(0,t),"top-left":new e.pointGeometry(i,i),"top-right":new e.pointGeometry(-i,i),bottom:new e.pointGeometry(0,-t),"bottom-left":new e.pointGeometry(i,-i),"bottom-right":new e.pointGeometry(-i,-i),left:new e.pointGeometry(t,0),right:new e.pointGeometry(-t,0)}}if(t instanceof e.pointGeometry||Array.isArray(t)){const i=e.pointGeometry.convert(t);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:e.pointGeometry.convert(t.center||[0,0]),top:e.pointGeometry.convert(t.top||[0,0]),"top-left":e.pointGeometry.convert(t["top-left"]||[0,0]),"top-right":e.pointGeometry.convert(t["top-right"]||[0,0]),bottom:e.pointGeometry.convert(t.bottom||[0,0]),"bottom-left":e.pointGeometry.convert(t["bottom-left"]||[0,0]),"bottom-right":e.pointGeometry.convert(t["bottom-right"]||[0,0]),left:e.pointGeometry.convert(t.left||[0,0]),right:e.pointGeometry.convert(t.right||[0,0])}}return bn(new e.pointGeometry(0,0))}const vn={supported:t,setRTLTextPlugin:e.setRTLTextPlugin,getRTLTextPluginStatus:e.getRTLTextPluginStatus,Map:class extends Jr{constructor(t){var i;if(e.PerformanceUtils.mark(e.PerformanceMarkers.create),null!=(t=e.extend({},nn,t)).minZoom&&null!=t.maxZoom&&t.minZoom>t.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=t.minPitch&&null!=t.maxPitch&&t.minPitch>t.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=t.minPitch&&t.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=t.maxPitch&&t.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new ir(t.minZoom,t.maxZoom,t.minPitch,t.maxPitch,t.renderWorldCopies),{bearingSnap:t.bearingSnap}),this._interactive=t.interactive,this._cooperativeGestures=t.cooperativeGestures,this._maxTileCacheSize=t.maxTileCacheSize,this._failIfMajorPerformanceCaveat=t.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=t.preserveDrawingBuffer,this._antialias=t.antialias,this._trackResize=t.trackResize,this._bearingSnap=t.bearingSnap,this._refreshExpiredTiles=t.refreshExpiredTiles,this._fadeDuration=t.fadeDuration,this._crossSourceCollisions=t.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=t.collectResourceTiming,this._renderTaskQueue=new tn,this._controls=[],this._mapId=e.uniqueId(),this._locale=e.extend({},rn,t.locale),this._clickTolerance=t.clickTolerance,this._pixelRatio=null!==(i=t.pixelRatio)&&void 0!==i?i:devicePixelRatio,this._requestManager=new a(t.transformRequest),"string"==typeof t.container){if(this._container=document.getElementById(t.container),!this._container)throw new Error(`Container '${t.container}' not found.`)}else{if(!(t.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=t.container}if(t.maxBounds&&this.setMaxBounds(t.maxBounds),e.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),this.on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})),"undefined"!=typeof window&&(addEventListener("online",this._onWindowOnline,!1),addEventListener("resize",this._onWindowResize,!1),addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new Yr(this,t),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=t.hash&&new rr("string"==typeof t.hash&&t.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:t.center,zoom:t.zoom,bearing:t.bearing,pitch:t.pitch}),t.bounds&&(this.resize(),this.fitBounds(t.bounds,e.extend({},t.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=t.localIdeographFontFamily,t.style&&this.setStyle(t.style,{localIdeographFontFamily:t.localIdeographFontFamily}),t.attributionControl&&this.addControl(new Qr({customAttribution:t.customAttribution})),t.maplibreLogo&&this.addControl(new en,t.logoPosition),this.on("style.load",(()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)})),this.on("data",(t=>{this._update("style"===t.dataType),this.fire(new e.Event(`${t.dataType}data`,t))})),this.on("dataloading",(t=>{this.fire(new e.Event(`${t.dataType}dataloading`,t))})),this.on("dataabort",(t=>{this.fire(new e.Event("sourcedataabort",t))}))}_getMapId(){return this._mapId}addControl(t,i){if(void 0===i&&(i=t.getDefaultPosition?t.getDefaultPosition():"top-right"),!t||!t.onAdd)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const r=t.onAdd(this);this._controls.push(t);const n=this._controlPositions[i];return-1!==i.indexOf("bottom")?n.insertBefore(r,n.firstChild):n.appendChild(r),this}removeControl(t){if(!t||!t.onRemove)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(t);return i>-1&&this._controls.splice(i,1),t.onRemove(this),this}hasControl(e){return this._controls.indexOf(e)>-1}calculateCameraOptionsFromTo(e,t,i,r){return null==r&&this.style.terrain&&(r=this.transform.getElevation(i,this.style.terrain)),super.calculateCameraOptionsFromTo(e,t,i,r)}resize(t){const i=this._containerDimensions(),r=i[0],n=i[1];this._resizeCanvas(r,n,this.getPixelRatio()),this.transform.resize(r,n),this.painter.resize(r,n,this.getPixelRatio());const o=!this._moving;return o&&(this.stop(),this.fire(new e.Event("movestart",t)).fire(new e.Event("move",t))),this.fire(new e.Event("resize",t)),o&&this.fire(new e.Event("moveend",t)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(e){const[t,i]=this._containerDimensions();this._pixelRatio=e,this._resizeCanvas(t,i,e),this.painter.resize(t,i,e)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(t){return this.transform.setMaxBounds(e.LngLatBounds.convert(t)),this._update()}setMinZoom(e){if((e=null==e?-2:e)>=-2&&e<=this.transform.maxZoom)return this.transform.minZoom=e,this._update(),this.getZoom()<e&&this.setZoom(e),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(e){if((e=null==e?22:e)>=this.transform.minZoom)return this.transform.maxZoom=e,this._update(),this.getZoom()>e&&this.setZoom(e),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(e){if((e=null==e?0:e)<0)throw new Error("minPitch must be greater than or equal to 0");if(e>=0&&e<=this.transform.maxPitch)return this.transform.minPitch=e,this._update(),this.getPitch()<e&&this.setPitch(e),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(e){if((e=null==e?60:e)>85)throw new Error("maxPitch must be less than or equal to 85");if(e>=this.transform.minPitch)return this.transform.maxPitch=e,this._update(),this.getPitch()>e&&this.setPitch(e),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(e){return this.transform.renderWorldCopies=e,this._update()}project(t){return this.transform.locationPoint(e.LngLat.convert(t),this.style&&this.style.terrain)}unproject(t){return this.transform.pointLocation(e.pointGeometry.convert(t),this.style&&this.style.terrain)}isMoving(){return this._moving||this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers.isRotating()}_createDelegatedListener(e,t,i){if("mouseenter"===e||"mouseover"===e){let r=!1;const n=n=>{const o=this.getLayer(t)?this.queryRenderedFeatures(n.point,{layers:[t]}):[];o.length?r||(r=!0,i.call(this,new pr(e,this,n.originalEvent,{features:o}))):r=!1};return{layer:t,listener:i,delegates:{mousemove:n,mouseout:()=>{r=!1}}}}if("mouseleave"===e||"mouseout"===e){let r=!1;const n=n=>{(this.getLayer(t)?this.queryRenderedFeatures(n.point,{layers:[t]}):[]).length?r=!0:r&&(r=!1,i.call(this,new pr(e,this,n.originalEvent)))},o=t=>{r&&(r=!1,i.call(this,new pr(e,this,t.originalEvent)))};return{layer:t,listener:i,delegates:{mousemove:n,mouseout:o}}}{const r=e=>{const r=this.getLayer(t)?this.queryRenderedFeatures(e.point,{layers:[t]}):[];r.length&&(e.features=r,i.call(this,e),delete e.features)};return{layer:t,listener:i,delegates:{[e]:r}}}}on(e,t,i){if(void 0===i)return super.on(e,t);const r=this._createDelegatedListener(e,t,i);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[e]=this._delegatedListeners[e]||[],this._delegatedListeners[e].push(r);for(const e in r.delegates)this.on(e,r.delegates[e]);return this}once(e,t,i){if(void 0===i)return super.once(e,t);const r=this._createDelegatedListener(e,t,i);for(const e in r.delegates)this.once(e,r.delegates[e]);return this}off(e,t,i){return void 0===i?super.off(e,t):(this._delegatedListeners&&this._delegatedListeners[e]&&(r=>{const n=this._delegatedListeners[e];for(let e=0;e<n.length;e++){const r=n[e];if(r.layer===t&&r.listener===i){for(const e in r.delegates)this.off(e,r.delegates[e]);return n.splice(e,1),this}}})(),this)}queryRenderedFeatures(t,i){if(!this.style)return[];let r;if(void 0!==i||void 0===t||t instanceof e.pointGeometry||Array.isArray(t)||(i=t,t=void 0),i=i||{},(t=t||[[0,0],[this.transform.width,this.transform.height]])instanceof e.pointGeometry||"number"==typeof t[0])r=[e.pointGeometry.convert(t)];else{const i=e.pointGeometry.convert(t[0]),n=e.pointGeometry.convert(t[1]);r=[i,new e.pointGeometry(n.x,i.y),n,new e.pointGeometry(i.x,n.y),i]}return this.style.queryRenderedFeatures(r,i,this.transform)}querySourceFeatures(e,t){return this.style.querySourceFeatures(e,t)}setStyle(t,i){return!1!==(i=e.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},i)).diff&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&t?(this._diffStyle(t,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(t,i))}setTransformRequest(e){return this._requestManager.setTransformRequest(e),this}_getUIString(e){const t=this._locale[e];if(null==t)throw new Error(`Missing UI string '${e}'`);return t}_updateStyle(e,t){return this.style&&(this.style.setEventedParent(null),this.style._remove()),e?(this.style=new tt(this,t||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof e?this.style.loadURL(e):this.style.loadJSON(e),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new tt(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(t,i){if("string"==typeof t){const r=this._requestManager.transformRequest(t,e.ResourceType.Style);e.getJSON(r,((t,r)=>{t?this.fire(new e.ErrorEvent(t)):r&&this._updateDiff(r,i)}))}else"object"==typeof t&&this._updateDiff(t,i)}_updateDiff(t,i){try{this.style.setState(t)&&this._update(!0)}catch(r){e.warnOnce(`Unable to perform style diff: ${r.message||r.error||r}.  Rebuilding the style from scratch.`),this._updateStyle(t,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():e.warnOnce("There is no style added to the map.")}addSource(e,t){return this._lazyInitEmptyStyle(),this.style.addSource(e,t),this._update(!0)}isSourceLoaded(t){const i=this.style&&this.style.sourceCaches[t];if(void 0!==i)return i.loaded();this.fire(new e.ErrorEvent(new Error(`There is no source with ID '${t}'`)))}setTerrain(e){return this.style.setTerrain(e),this}getTerrain(){return this.style.terrain&&this.style.terrain.options}areTilesLoaded(){const e=this.style&&this.style.sourceCaches;for(const t in e){const i=e[t]._tiles;for(const e in i){const t=i[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}}return!0}addSourceType(e,t,i){return this._lazyInitEmptyStyle(),this.style.addSourceType(e,t,i)}removeSource(e){return this.style.removeSource(e),this._update(!0)}getSource(e){return this.style.getSource(e)}addImage(t,i,{pixelRatio:r=1,sdf:n=!1,stretchX:o,stretchY:a,content:s}={}){if(this._lazyInitEmptyStyle(),i instanceof HTMLImageElement||e.isImageBitmap(i)){const{width:l,height:c,data:u}=e.exported.getImageData(i);this.style.addImage(t,{data:new e.RGBAImage({width:l,height:c},u),pixelRatio:r,stretchX:o,stretchY:a,content:s,sdf:n,version:0})}else{if(void 0===i.width||void 0===i.height)return this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:l,height:c,data:u}=i,h=i;this.style.addImage(t,{data:new e.RGBAImage({width:l,height:c},new Uint8Array(u)),pixelRatio:r,stretchX:o,stretchY:a,content:s,sdf:n,version:0,userImage:h}),h.onAdd&&h.onAdd(this,t)}}}updateImage(t,i){const r=this.style.getImage(t);if(!r)return this.fire(new e.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const n=i instanceof HTMLImageElement||e.isImageBitmap(i)?e.exported.getImageData(i):i,{width:o,height:a,data:s}=n;if(void 0===o||void 0===a)return this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(o!==r.data.width||a!==r.data.height)return this.fire(new e.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const l=!(i instanceof HTMLImageElement||e.isImageBitmap(i));r.data.replace(s,l),this.style.updateImage(t,r)}hasImage(t){return t?!!this.style.getImage(t):(this.fire(new e.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(e){this.style.removeImage(e)}loadImage(t,i){e.getImage(this._requestManager.transformRequest(t,e.ResourceType.Image),i)}listImages(){return this.style.listImages()}addLayer(e,t){return this._lazyInitEmptyStyle(),this.style.addLayer(e,t),this._update(!0)}moveLayer(e,t){return this.style.moveLayer(e,t),this._update(!0)}removeLayer(e){return this.style.removeLayer(e),this._update(!0)}getLayer(e){return this.style.getLayer(e)}setLayerZoomRange(e,t,i){return this.style.setLayerZoomRange(e,t,i),this._update(!0)}setFilter(e,t,i={}){return this.style.setFilter(e,t,i),this._update(!0)}getFilter(e){return this.style.getFilter(e)}setPaintProperty(e,t,i,r={}){return this.style.setPaintProperty(e,t,i,r),this._update(!0)}getPaintProperty(e,t){return this.style.getPaintProperty(e,t)}setLayoutProperty(e,t,i,r={}){return this.style.setLayoutProperty(e,t,i,r),this._update(!0)}getLayoutProperty(e,t){return this.style.getLayoutProperty(e,t)}setLight(e,t={}){return this._lazyInitEmptyStyle(),this.style.setLight(e,t),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(e,t){return this.style.setFeatureState(e,t),this._update()}removeFeatureState(e,t){return this.style.removeFeatureState(e,t),this._update()}getFeatureState(e){return this.style.getFeatureState(e)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let e=0,t=0;return this._container&&(e=this._container.clientWidth||400,t=this._container.clientHeight||300),[e,t]}_setupContainer(){const e=this._container;e.classList.add("maplibregl-map","mapboxgl-map");const t=this._canvasContainer=o.create("div","maplibregl-canvas-container mapboxgl-canvas-container",e);this._interactive&&t.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=o.create("canvas","maplibregl-canvas mapboxgl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const i=this._containerDimensions();this._resizeCanvas(i[0],i[1],this.getPixelRatio());const r=this._controlContainer=o.create("div","maplibregl-control-container mapboxgl-control-container",e),n=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((e=>{n[e]=o.create("div",`maplibregl-ctrl-${e} mapboxgl-ctrl-${e}`,r)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){const e=this._container;this._metaPress=!1,this._cooperativeGesturesScreen=o.create("div","maplibregl-cooperative-gesture-screen",e);let t="Control",i="boolean"!=typeof this._cooperativeGestures&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";0===navigator.platform.indexOf("Mac")&&(i="boolean"!=typeof this._cooperativeGestures&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use  + scroll to zoom the map",t="Meta"),this._cooperativeGesturesScreen.innerHTML=`\n            <div class="maplibregl-desktop-message">${i}</div>\n            <div class="maplibregl-mobile-message">${"boolean"!=typeof this._cooperativeGestures&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>\n        `,document.addEventListener("keydown",(e=>{e.key===t&&(this._metaPress=!0)})),document.addEventListener("keyup",(e=>{e.key===t&&(this._metaPress=!1)})),this._canvasContainer.addEventListener("wheel",(e=>{this._onCooperativeGesture(e,this._metaPress,1)}),!1),this._canvasContainer.classList.remove("mapboxgl-touch-drag-pan","maplibregl-touch-drag-pan")}_resizeCanvas(e,t,i){this._canvas.width=i*e,this._canvas.height=i*t,this._canvas.style.width=`${e}px`,this._canvas.style.height=`${t}px`}_setupPainter(){const i=e.extend({},t.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),r=this._canvas.getContext("webgl",i)||this._canvas.getContext("experimental-webgl",i);r?(this.painter=new Ji(r,this.transform),e.exported$1.testSupport(r)):this.fire(new e.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(t){t.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new e.Event("webglcontextlost",{originalEvent:t}))}_contextRestored(t){this._setupPainter(),this.resize(),this._update(),this.fire(new e.Event("webglcontextrestored",{originalEvent:t}))}_onMapScroll(e){if(e.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}_onCooperativeGesture(e,t,i){return!t&&i<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout((()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")}),100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(e){return this.style?(this._styleDirty=this._styleDirty||e,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(e){return this._update(),this._renderTaskQueue.add(e)}_cancelRenderFrame(e){this._renderTaskQueue.remove(e)}_render(t){let i,r=0;const n=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(i=n.createQueryEXT(),n.beginQueryEXT(n.TIME_ELAPSED_EXT,i),r=e.exported.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(t),this._removed)return;let o=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const t=this.transform.zoom,i=e.exported.now();this.style.zoomHistory.update(t,i);const r=new e.EvaluationParameters(t,{now:i,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),n=r.crossFadingFactor();1===n&&n===this._crossFadingFactor||(o=!0,this._crossFadingFactor=n),this.style.update(r)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.style.terrain&&this.style.terrain.sourceCache.update(this.transform,this.style.terrain),this.transform.updateElevation(this.style.terrain),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new e.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,e.PerformanceUtils.mark(e.PerformanceMarkers.load),this.fire(new e.Event("load"))),this.style&&(this.style.hasTransitions()||o)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const t=e.exported.now()-r;n.endQueryEXT(n.TIME_ELAPSED_EXT,i),setTimeout((()=>{const r=n.getQueryObjectEXT(i,n.QUERY_RESULT_EXT)/1e6;n.deleteQueryEXT(i),this.fire(new e.Event("gpu-timing-frame",{cpuTime:t,gpuTime:r}))}),50)}if(this.listens("gpu-timing-layer")){const t=this.painter.collectGpuTimers();setTimeout((()=>{const i=this.painter.queryGpuTimers(t);this.fire(new e.Event("gpu-timing-layer",{layerTimes:i}))}),50)}const a=this._sourcesDirty||this._styleDirty||this._placementDirty;return a||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new e.Event("idle")),!this._loaded||this._fullyLoaded||a||(this._fullyLoaded=!0,e.PerformanceUtils.mark(e.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){this._hash&&this._hash.remove();for(const e of this._controls)e.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),"undefined"!=typeof window&&(removeEventListener("resize",this._onWindowResize,!1),removeEventListener("orientationchange",this._onWindowResize,!1),removeEventListener("online",this._onWindowOnline,!1));const t=this.painter.context.gl.getExtension("WEBGL_lose_context");t&&t.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),o.remove(this._canvasContainer),o.remove(this._controlContainer),this._cooperativeGestures&&o.remove(this._cooperativeGesturesScreen),this._container.classList.remove("maplibregl-map","mapboxgl-map"),e.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new e.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=e.exported.frame((t=>{e.PerformanceUtils.frame(t),this._frame=null,this._render(t)})))}_onWindowOnline(){this._update()}_onWindowResize(e){this._trackResize&&this.resize({originalEvent:e})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(e){this._showTileBoundaries!==e&&(this._showTileBoundaries=e,this._update())}get showPadding(){return!!this._showPadding}set showPadding(e){this._showPadding!==e&&(this._showPadding=e,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(e){this._showCollisionBoxes!==e&&(this._showCollisionBoxes=e,e?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(e){this._showOverdrawInspector!==e&&(this._showOverdrawInspector=e,this._update())}get repaint(){return!!this._repaint}set repaint(e){this._repaint!==e&&(this._repaint=e,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(e){this._vertices=e,this._update()}_setCacheLimits(t,i){e.setCacheLimits(t,i)}get version(){return"2.4.0"}},NavigationControl:class{constructor(t){this.options=e.extend({},on,t),this._container=o.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(e=>e.preventDefault())),this.options.showZoom&&(e.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",(e=>this._map.zoomIn({},{originalEvent:e}))),o.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",(e=>this._map.zoomOut({},{originalEvent:e}))),o.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(e.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",(e=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:e}):this._map.resetNorth({},{originalEvent:e})})),this._compassIcon=o.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const e=this._map.getZoom(),t=e===this._map.getMaxZoom(),i=e===this._map.getMinZoom();this._zoomInButton.disabled=t,this._zoomOutButton.disabled=i,this._zoomInButton.setAttribute("aria-disabled",t.toString()),this._zoomOutButton.setAttribute("aria-disabled",i.toString())}_rotateCompassArrow(){const e=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=e}onAdd(e){return this._map=e,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new an(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){o.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(e,t){const i=o.create("button",e,this._container);return i.type="button",i.addEventListener("click",t),i}_setButtonTitle(e,t){const i=this._map._getUIString(`NavigationControl.${t}`);e.title=i,e.setAttribute("aria-label",i)}},GeolocateControl:class extends e.Evented{constructor(t){super(),this.options=e.extend({},hn,t),e.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(e){var t;return this._map=e,this._container=o.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),t=this._setupUI,void 0!==pn?t(pn):void 0!==window.navigator.permissions?window.navigator.permissions.query({name:"geolocation"}).then((e=>{pn="denied"!==e.state,t(pn)})):(pn=!!window.navigator.geolocation,t(pn)),this._container}onRemove(){void 0!==this._geolocationWatchID&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),o.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,dn=0,fn=!1}_isOutOfMapMaxBounds(e){const t=this._map.getMaxBounds(),i=e.coords;return t&&(i.longitude<t.getWest()||i.longitude>t.getEast()||i.latitude<t.getSouth()||i.latitude>t.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_onSuccess(t){if(this._map){if(this._isOutOfMapMaxBounds(t))return this._setErrorState(),this.fire(new e.Event("outofmaxbounds",t)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(t),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new e.Event("geolocate",t)),this._finish()}}_updateCamera(t){const i=new e.LngLat(t.coords.longitude,t.coords.latitude),r=t.coords.accuracy,n=this._map.getBearing(),o=e.extend({bearing:n},this.options.fitBoundsOptions);this._map.fitBounds(i.toBounds(r),o,{geolocateSource:!0})}_updateMarker(t){if(t){const i=new e.LngLat(t.coords.longitude,t.coords.latitude);this._accuracyCircleMarker.setLngLat(i).addTo(this._map),this._userLocationDotMarker.setLngLat(i).addTo(this._map),this._accuracy=t.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const e=this._map._container.clientHeight/2,t=this._map.unproject([0,e]),i=this._map.unproject([1,e]),r=t.distanceTo(i),n=Math.ceil(2*this._accuracy/r);this._circleElement.style.width=`${n}px`,this._circleElement.style.height=`${n}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(t){if(this._map){if(this.options.trackUserLocation)if(1===t.code){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=e,this._geolocateButton.setAttribute("aria-label",e),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===t.code&&fn)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new e.Event("error",t)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(t){if(this._container.addEventListener("contextmenu",(e=>e.preventDefault())),this._geolocateButton=o.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),o.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===t){e.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const t=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=t,this._geolocateButton.setAttribute("aria-label",t)}else{const e=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=e,this._geolocateButton.setAttribute("aria-label",e)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=o.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new un(this._dotElement),this._circleElement=o.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new un({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(t=>{t.geolocateSource||"ACTIVE_LOCK"!==this._watchState||t.originalEvent&&"resize"===t.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this.fire(new e.Event("trackuserlocationend")))}))}trigger(){if(!this._setup)return e.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new e.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":dn--,fn=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new e.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new e.Event("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let e;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),dn++,dn>1?(e={maximumAge:6e5,timeout:0},fn=!0):(e=this.options.positionOptions,fn=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,e)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Qr,LogoControl:en,ScaleControl:class{constructor(t){this.options=e.extend({},mn,t),e.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){gn(this._map,this._container,this.options)}onAdd(e){return this._map=e,this._container=o.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",e.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){o.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(e){this.options.unit=e,gn(this._map,this._container,this.options)}},FullscreenControl:class{constructor(t){this._fullscreen=!1,t&&t.container&&(t.container instanceof HTMLElement?this._container=t.container:e.warnOnce("Full screen control 'container' must be a DOM element.")),e.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(t){return this._map=t,this._container||(this._container=this._map.getContainer()),this._controlContainer=o.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",e.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){o.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled)}_setupUI(){const e=this._fullscreenButton=o.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);o.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",e).setAttribute("aria-hidden","true"),e.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const e=this._getTitle();this._fullscreenButton.setAttribute("aria-label",e),this._fullscreenButton.title=e}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen&&window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},TerrainControl:class{constructor(t){this.options=t,e.bindAll(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(e){return this._map=e,this._container=o.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._terrainButton=o.create("button","maplibregl-ctrl-terrain mapboxgl-ctrl-terrain",this._container),o.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){o.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._map.style.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))}},Popup:class extends e.Evented{constructor(t){super(),this.options=e.extend(Object.create(_n),t),e.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(t){return this._map&&this.remove(),this._map=t,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new e.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&o.remove(this._content),this._container&&(o.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new e.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(t){return this._lngLat=e.LngLat.convert(t),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this}getElement(){return this._container}setText(e){return this.setDOMContent(document.createTextNode(e))}setHTML(e){const t=document.createDocumentFragment(),i=document.createElement("body");let r;for(i.innerHTML=e;r=i.firstChild,r;)t.appendChild(r);return this.setDOMContent(t)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(e){return this.options.maxWidth=e,this._update(),this}setDOMContent(e){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=o.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(e),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(e){this._container&&this._container.classList.add(e)}removeClassName(e){this._container&&this._container.classList.remove(e)}setOffset(e){return this.options.offset=e,this._update(),this}toggleClassName(e){if(this._container)return this._container.classList.toggle(e)}_createCloseButton(){this.options.closeButton&&(this._closeButton=o.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(e){this._update(e.point)}_onMouseMove(e){this._update(e.point)}_onDrag(e){this._update(e.point)}_update(e){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(this._container||(this._container=o.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=o.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach((e=>this._container.classList.add(e))),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=sn(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!e)return;const t=this._pos=this._trackPointer&&e?e:this._map.project(this._lngLat);let i=this.options.anchor;const r=bn(this.options.offset);if(!i){const e=this._container.offsetWidth,n=this._container.offsetHeight;let o;o=t.y+r.bottom.y<n?["top"]:t.y>this._map.transform.height-n?["bottom"]:[],t.x<e/2?o.push("left"):t.x>this._map.transform.width-e/2&&o.push("right"),i=0===o.length?"bottom":o.join("-")}const n=t.add(r[i]).round();o.setTransform(this._container,`${ln[i]} translate(${n.x}px,${n.y}px)`),cn(this._container,i,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const e=this._container.querySelector(xn);e&&e.focus()}_onClose(){this.remove()}},Marker:un,Style:tt,LngLat:e.LngLat,LngLatBounds:e.LngLatBounds,Point:e.pointGeometry,MercatorCoordinate:e.MercatorCoordinate,Evented:e.Evented,AJAXError:e.AJAXError,config:e.config,CanvasSource:S,GeoJSONSource:D,ImageSource:C,RasterDEMTileSource:I,RasterTileSource:A,VectorTileSource:w,VideoSource:M,prewarm:function(){j().acquire(U)},clearPrewarmedResources:function(){const e=q;e&&(e.isPreloaded()&&1===e.numActive()?(e.release(U),q=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get version(){return"2.4.0"},get workerCount(){return V.workerCount},set workerCount(e){V.workerCount=e},get maxParallelImageRequests(){return e.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(t){e.config.MAX_PARALLEL_IMAGE_REQUESTS=t},clearStorage(t){e.clearTileCache(t)},workerUrl:"",addProtocol(t,i){e.config.REGISTERED_PROTOCOLS[t]=i},removeProtocol(t){delete e.config.REGISTERED_PROTOCOLS[t]}};return Kr.extend(vn,{isSafari:e.isSafari,getPerformanceMetrics:e.PerformanceUtils.getPerformanceMetrics}),vn})),i}()},U(V={exports:{}},V.exports),V.exports);function q(e,t,i){if(null!==e)for(var r,n,o,a,s,l,c,u,h=0,p=0,d=e.type,f="FeatureCollection"===d,m="Feature"===d,g=f?e.features.length:1,y=0;y<g;y++){s=(u=!!(c=f?e.features[y].geometry:m?e.geometry:e)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var _=0;_<s;_++){var x=0,b=0;if(null!==(a=u?c.geometries[_]:c)){l=a.coordinates;var v=a.type;switch(h=!i||"Polygon"!==v&&"MultiPolygon"!==v?0:1,v){case null:break;case"Point":if(!1===t(l,p,y,x,b))return!1;p++,x++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(!1===t(l[r],p,y,x,b))return!1;p++,"MultiPoint"===v&&x++}"LineString"===v&&x++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(n=0;n<l[r].length-h;n++){if(!1===t(l[r][n],p,y,x,b))return!1;p++}"MultiLineString"===v&&x++,"Polygon"===v&&b++}"Polygon"===v&&x++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(b=0,n=0;n<l[r].length;n++){for(o=0;o<l[r][n].length-h;o++){if(!1===t(l[r][n][o],p,y,x,b))return!1;p++}b++}x++}break;case"GeometryCollection":for(r=0;r<a.geometries.length;r++)if(!1===q(a.geometries[r],t,i))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function j(e){var t=[1/0,1/0,-1/0,-1/0];return q(e,(function(e){t[0]>e[0]&&(t[0]=e[0]),t[1]>e[1]&&(t[1]=e[1]),t[2]<e[0]&&(t[2]=e[0]),t[3]<e[1]&&(t[3]=e[1])})),t}function Z(e){return e}function W(e,t){return"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map((function(t){return X(e,t)}))}:X(e,t)}function X(e,t){var i=t.id,r=t.bbox,n=null==t.properties?{}:t.properties,o=function(e,t){var i=function(e){if(null==e)return Z;var t,i,r=e.scale[0],n=e.scale[1],o=e.translate[0],a=e.translate[1];return function(e,s){s||(t=i=0);var l=2,c=e.length,u=new Array(c);for(u[0]=(t+=e[0])*r+o,u[1]=(i+=e[1])*n+a;l<c;)u[l]=e[l],++l;return u}}(e.transform),r=e.arcs;function n(e,t){t.length&&t.pop();for(var n=r[e<0?~e:e],o=0,a=n.length;o<a;++o)t.push(i(n[o],o));e<0&&function(e,t){for(var i,r=e.length,n=r-t;n<--r;)i=e[n],e[n++]=e[r],e[r]=i}(t,a)}function o(e){return i(e)}function a(e){for(var t=[],i=0,r=e.length;i<r;++i)n(e[i],t);return t.length<2&&t.push(t[0]),t}function s(e){for(var t=a(e);t.length<4;)t.push(t[0]);return t}function l(e){return e.map(s)}function c(e){var t,i=e.type;switch(i){case"GeometryCollection":return{type:i,geometries:e.geometries.map(c)};case"Point":t=o(e.coordinates);break;case"MultiPoint":t=e.coordinates.map(o);break;case"LineString":t=a(e.arcs);break;case"MultiLineString":t=e.arcs.map(a);break;case"Polygon":t=l(e.arcs);break;case"MultiPolygon":t=e.arcs.map(l);break;default:return null}return{type:i,coordinates:t}}return c(t)}(e,t);return null==i&&null==r?{type:"Feature",properties:n,geometry:o}:null==r?{type:"Feature",id:i,properties:n,geometry:o}:{type:"Feature",id:i,bbox:r,properties:n,geometry:o}}j.default=j;var H={type:"Topology",arcs:[[[22364,25205],[1,-1],[195,-133],[7,-30],[-1,0],[-66,35],[25,-27],[-3,-5],[-10,0],[-6,-33],[-15,-29],[70,-141],[55,-28],[-46,-75],[-46,-6],[-12,-16]],[[22512,24716],[-52,-40],[-75,37],[-67,-29],[-128,24],[-53,90],[-37,-6],[-19,-66],[-138,65]],[[21943,24791],[119,33],[-20,64],[51,102],[-40,47],[76,1],[54,88],[-13,49],[107,50],[55,-39],[32,19]],[[22493,24473],[96,-149],[-97,-50],[113,-102],[5,-47],[68,-5],[-27,-63]],[[22651,24057],[-267,38]],[[22384,24095],[-144,43],[-9,93],[45,103],[-37,48],[61,26],[31,109],[162,-44]],[[23721,24346],[-26,-38],[-80,-13],[-66,-97],[1,-219],[-98,48],[-218,-48],[-152,79],[-101,-47]],[[22981,24011],[-174,66],[-72,-44],[-84,24]],[[22493,24473],[33,36]],[[22526,24509],[-30,-40],[113,117],[40,-28],[-32,33],[17,47],[59,-31],[-56,34],[-10,66],[57,10],[-5,71],[34,-27],[39,-54],[122,-39],[60,-20],[37,-28],[11,-13],[29,-18],[80,-61],[118,-44],[43,13],[33,4],[115,-88],[135,3],[28,-11],[151,-59],[7,0]],[[22512,24716],[-25,-34],[83,-7],[15,40],[25,-94],[-78,-103],[-6,-9]],[[22384,24095],[-66,-47],[-3,-72],[-71,16],[-58,-76],[-131,-61],[-4,43],[-59,-33],[-24,33],[-26,113],[-42,-44],[-36,41],[-18,-85],[-58,12],[-8,42]],[[21780,23977],[40,167],[-85,70],[9,118],[107,48],[12,150],[-48,49],[-46,-42]],[[21769,24537],[-38,80],[115,32],[97,142]],[[21780,23977],[-72,85],[-48,-16],[46,-34],[-14,-108],[32,-39],[-29,-24],[21,-47],[-49,17]],[[21667,23811],[-10,95],[-71,9],[22,55],[-59,-58],[-9,46],[-44,5],[27,-72],[-78,1],[-28,72],[-84,63],[11,42],[-38,-4],[32,44],[-65,-12],[-26,49],[-66,-31],[-2,59],[-63,-4],[-10,52],[-117,7]],[[20989,24229],[-25,69],[42,37],[-55,36],[1,57],[46,66],[44,-4],[-10,165],[229,-1],[2,-73],[66,36],[-28,-80],[52,-77],[71,10],[-18,51],[96,23],[175,21],[52,-50],[40,22]],[[18277,17911],[-42,-54],[-33,43],[-12,-57],[-63,4],[10,-27],[-131,55],[-48,-51],[-68,39],[-48,-33],[-40,41]],[[17802,17871],[0,0],[-33,67],[28,81],[106,8],[60,63],[62,-11]],[[18025,18079],[12,-5],[133,53],[-2,-93],[75,-16],[-38,-62],[72,-45]],[[17989,18239],[-1,-128]],[[17988,18111],[-7,5],[-124,-73],[-91,39],[16,-30],[-57,-88],[-19,20],[20,-37],[-33,-36],[-115,48],[-3,-1]],[[17575,17958],[-14,30],[41,13],[0,43]],[[17602,18044],[95,43],[32,129],[58,-1],[37,111]],[[17824,18326],[91,-16],[7,-44],[67,-27]],[[18596,18629],[121,-231]],[[18717,18398],[-87,-103],[156,-45]],[[18786,18250],[-40,-109],[-142,7],[-103,-105],[8,-28]],[[18509,18015],[-131,-99],[-74,31],[-27,-36]],[[18025,18079],[11,-1],[-48,33]],[[17989,18239],[43,11],[39,214],[-36,22],[21,42],[-41,-11],[15,73],[114,-44],[36,-52],[94,43],[-7,40],[40,-55],[26,32]],[[18333,18554],[19,65],[64,16],[-10,33],[169,68],[21,-107]],[[18833,19903],[38,-70],[73,-23],[9,-104]],[[18953,19706],[26,-62],[-23,-124],[-27,-3]],[[18929,19517],[-128,-37],[-51,116],[-64,-136],[-59,-15],[-97,52]],[[18530,19497],[-63,197],[51,140],[-74,54],[-65,233]],[[18379,20121],[31,49]],[[18410,20170],[258,128]],[[18668,20298],[59,-75],[-17,-52],[36,-37],[18,-158],[69,-73]],[[17023,20534],[47,-40],[36,-129],[-62,-12],[22,-88],[-98,-7],[-12,40],[-73,-23]],[[16883,20275],[21,391],[7,119]],[[16911,20785],[85,-31],[27,-220]],[[25352,20052],[-106,46],[-135,-21],[-265,-98]],[[24846,19979],[-10,61],[62,97],[-62,5],[13,51],[91,45],[-13,113],[99,12],[-9,60],[140,43],[114,-162],[78,-4],[-5,-93],[38,-44],[-30,-111]],[[25469,22260],[1,-1],[145,-61],[203,-87],[49,-50],[14,-16],[-85,-64],[-187,-27],[-1,0],[-27,-42],[-47,-50],[-27,-70],[-37,-59],[-1,-176],[-1,-79],[119,-381],[53,-171],[27,-43],[0,-1],[3,-5],[163,-265],[166,-273],[464,-655],[2,-6],[6,-21],[80,-261],[1,-19],[-3,-28],[-9,-15],[-88,-107],[-12,-15],[1,1],[11,15],[89,114],[7,38],[-7,25],[-82,72],[-102,90],[-148,46],[-259,-105],[-7,1],[-144,31],[-122,139],[-122,141],[-90,103],[-39,-2],[-10,130],[-39,-21],[-3,40],[0,2],[-9,19],[6,-24],[-15,-17],[-4,2]],[[24846,19979],[0,0],[-203,-32],[-170,-27],[-123,95],[-141,39],[-21,-27],[56,8],[-160,-45],[-74,-91],[-141,14],[91,-24],[42,-24],[-34,-10],[31,-1],[2,-28]],[[24001,19826],[-10,-67],[-59,11],[-159,-121],[7,41],[-50,-26],[-180,-136],[-51,24]],[[23499,19552],[-246,112],[-307,-16]],[[22946,19648],[-165,70],[67,78],[18,102],[40,14],[69,-67],[177,16],[-1,42],[54,-22],[15,73],[163,18],[-22,75],[-150,18],[-39,72],[137,81],[-19,189],[43,74],[-61,39],[-23,198],[74,100]],[[23323,20818],[8,51],[-86,17],[84,143],[1,204],[-39,42],[27,120]],[[23318,21395],[95,41],[47,92],[234,36],[4,-26],[197,58],[11,-91],[142,-21],[-11,115],[83,33],[45,94],[-47,41],[135,39],[158,122],[116,-44],[177,115],[36,48],[-13,48],[95,59],[-19,139],[45,52],[84,13],[47,-117],[86,-38],[68,18],[60,-73],[117,22],[108,-42],[51,132]],[[26157,18982],[-91,-66],[-151,17],[-31,-153],[-61,-18],[17,-42],[-55,-42],[78,-97],[-115,-91],[-35,12]],[[25713,18502],[-52,56],[-14,99],[-85,15],[-20,83],[-67,9],[20,133],[-20,104],[-28,4],[93,174],[-18,29],[-83,-19],[-36,95],[-51,-8],[9,47],[-132,102]],[[25229,19425],[180,56],[96,83]],[[25505,19564],[42,-40],[281,-266],[44,-22],[43,33],[8,-3],[143,-162],[34,-26],[-15,47],[72,-143]],[[24539,19800],[-45,-21],[-54,47],[99,-26]],[[25229,19425],[-49,6],[23,-99],[-106,-191],[-245,24],[-36,59],[-115,-134],[-72,-16],[-31,-44],[213,47],[68,-75],[9,-75],[-251,-66],[5,-127],[45,-29],[-242,-80],[-235,-7],[16,284],[-347,37],[-38,-101],[-49,-8],[-10,-103],[-39,-13],[0,-69],[-39,-43]],[[23704,18602],[-225,58],[-134,-31],[-12,27],[60,50],[-106,143]],[[23287,18849],[10,42],[-54,15],[19,89],[155,35],[-27,55],[32,97],[-31,11],[9,76],[99,283]],[[24001,19826],[1,-30],[21,-30],[21,-31],[-31,113],[168,82],[87,22],[73,-110],[190,-85],[110,76],[50,34],[82,-4],[1,-42],[1,42],[144,14],[13,-56],[9,67],[282,62],[126,-172],[44,-91],[104,-112],[8,-11]],[[23323,20818],[-62,38],[-147,-67],[-46,77],[-172,-80],[-79,58],[-42,-52],[-273,243]],[[22502,21035],[-85,273],[22,56],[104,-1],[-30,79],[50,8]],[[22563,21450],[71,-67],[45,9],[-37,62],[25,140],[63,-4],[93,98],[92,0],[-3,46]],[[22912,21734],[137,-39],[37,31],[106,-168],[-53,-106],[28,11],[10,-42],[-69,-70],[210,44]],[[21920,15719],[-44,-5],[-48,-83],[-14,-101],[-69,-20],[-53,59],[-92,-13],[-26,77],[-117,24],[-45,131],[38,49]],[[21450,15837],[109,70],[38,148],[63,0]],[[21660,16055],[18,-80],[179,-1],[-44,-77],[123,-50],[-16,-128]],[[22946,14436],[5,-106],[-71,-86]],[[22880,14244],[-79,-9],[-21,-107],[-50,9],[-71,-50]],[[22659,14087],[-18,-36],[-34,8],[9,43],[-50,11],[27,105],[-153,112],[27,41],[50,-11],[16,105]],[[22533,14465],[22,91],[63,70],[42,-23],[42,-113],[32,41],[132,-19],[80,-76]],[[24617,14359],[-68,11],[-69,-85],[-38,-129],[26,-44],[-42,9],[-41,-45],[-29,52],[-22,-47],[-43,9],[-175,-102],[-159,-229]],[[23957,13759],[-86,76],[10,48],[-64,84],[-16,91],[-82,79],[-86,-6],[46,127],[-9,132]],[[23670,14390],[80,121],[-12,132],[-107,109],[25,70],[111,77],[75,-38],[264,104]],[[24106,14965],[163,17],[14,-49],[99,14],[99,-77],[-7,-79],[144,-70],[194,-23],[-11,-112],[-67,-70],[-153,-57],[-50,30],[86,-130]],[[22832,15964],[-40,-34],[-97,5],[-31,-57],[-31,26],[-19,-192],[-54,-57],[-113,80]],[[22447,15735],[9,40],[36,-14],[50,41],[-195,186],[45,76],[-45,88],[63,-18],[68,33],[-47,21],[-18,86]],[[22413,16274],[46,53],[82,2]],[[22541,16329],[118,-63],[-30,-48],[46,-12],[-13,-45],[60,-15],[8,-82],[102,-100]],[[18208,12624],[-136,-16],[70,-92],[127,-24],[-92,-106],[-2,-109],[166,65],[128,2],[17,-26],[92,45],[-23,107],[156,40],[71,-75],[-121,-76],[-20,-77],[30,-36],[126,15],[116,-63],[-58,-19],[34,-67],[-46,-31],[-43,-157],[-40,-23],[61,-119],[108,51],[84,-54],[-2,-214],[43,-71],[-41,-357]],[[19013,11137],[-125,-44],[-19,-87],[-42,-11],[-73,16],[2,92],[-81,-2],[-2,46],[-45,-4],[-39,-77],[63,-68],[-72,-71],[8,-88],[-26,-19],[107,-46],[-2,-123],[54,-49],[27,-111],[-147,-88],[-63,25],[-69,-127],[-148,4],[-6,-62],[-56,34],[-73,-90],[-34,22],[-41,-89]],[[18111,10120],[-48,50],[-82,-10],[-12,57],[-54,-23],[-14,45],[-57,-64],[-121,152],[31,77],[-204,132],[-18,61],[-60,-19],[51,42],[-99,61],[-284,-150],[-14,117],[-95,-2],[-54,157],[-125,135]],[[16852,10938],[-96,206],[39,91],[-13,54],[-107,144],[10,130],[52,11],[1,59],[-111,59],[18,52],[127,33],[64,60],[-30,38],[-49,-44],[-71,45],[83,107],[-22,98],[91,54],[-3,119],[87,10],[-13,64],[38,35],[91,39],[86,-24],[83,50],[-190,51],[36,222],[103,40],[36,102]],[[17192,12843],[65,5],[-17,58],[38,31],[76,1],[-64,41],[14,58],[74,-64],[14,58],[101,54],[111,-23],[38,-15],[-5,-64],[44,-4],[1,-96],[180,-6],[-47,-108],[-57,6],[160,-141],[104,16],[-28,24],[69,134],[127,-109],[18,-75]],[[19132,14883],[-11,-41]],[[19121,14842],[-128,-9],[-56,44],[-128,-400],[2,-151],[-55,-35],[-5,-65],[-192,74],[-141,134],[-21,86],[-203,145],[77,100],[-190,70],[-10,150],[62,35],[32,-39],[34,88],[87,1],[-17,110],[46,40],[93,-16],[55,-44],[-12,-47],[47,72],[57,-12],[50,45],[29,-30],[-38,-86],[50,-13],[50,20],[-50,190],[171,33]],[[18817,15332],[117,-80],[19,-86],[-42,-29],[221,-254]],[[19527,16699],[29,-1],[31,-101],[108,-28],[27,-87],[-46,-3],[24,-134],[61,-57],[-4,-68],[49,-3],[-10,-60],[39,-58],[-27,-3]],[[19808,16096],[21,-36],[-123,-56],[-26,78],[-46,26],[-51,-118],[-43,1],[-14,-39],[-94,179]],[[19432,16131],[25,4],[-34,177],[40,24],[-110,278],[121,101],[53,-16]],[[19184,8052],[49,-68],[-37,-52],[27,-44],[-45,-13],[14,-131],[-158,-126],[145,-15],[-14,-49],[36,-41]],[[19201,7513],[-296,-160],[-41,53],[-154,-159],[-66,19],[-13,-25],[-86,31],[28,61],[-183,62],[-210,-103],[-34,62],[-170,121]],[[17976,7475],[24,64],[-63,39],[52,61],[-11,158],[44,-103],[33,4],[-23,-99],[53,-2],[44,175],[43,1],[9,62],[39,-33],[-26,44],[59,-2],[40,45]],[[18293,7889],[58,9],[30,65],[75,-3],[29,123],[48,-31]],[[18533,8052],[57,1],[-4,-57],[36,18],[35,-29],[381,123],[55,-13],[37,-77],[54,34]],[[17567,8248],[-82,-95]],[[17485,8153],[15,24],[67,71]],[[18007,8321],[-129,111]],[[17878,8432],[33,-7],[96,-104]],[[17796,8383],[-15,3]],[[17781,8386],[11,4],[70,-7],[7,51],[4,-1]],[[17873,8433],[-11,-50],[-66,0]],[[18007,8321],[-73,90],[-28,54],[31,44],[103,145]],[[18040,8654],[64,-163],[216,22],[-22,-84],[110,-47],[109,9],[11,-164],[-29,-64],[-53,-23],[87,-88]],[[18293,7889],[-131,31],[11,176],[-31,16],[42,46],[-24,90],[-83,104],[-70,-31]],[[17095,7441],[0,6]],[[17095,7447],[1,-1],[-1,-5]],[[17085,7467],[-30,29]],[[17055,7496],[18,-5],[12,-24]],[[17873,8433],[5,-1]],[[17976,7475],[-210,24]],[[17766,7499],[-163,19],[25,-129],[-202,-8],[-23,35],[-37,-84],[-120,65],[-76,9],[-32,-47],[-52,17],[5,39]],[[17091,7415],[15,28],[-19,29],[11,91],[9,74],[-35,39],[81,37],[16,57],[-2,43],[-54,28],[30,13],[94,29],[1,-28],[67,25],[81,-43],[-68,45],[146,237],[21,34]],[[17567,8248],[92,97],[122,41]],[[19193,8910],[27,-79],[31,-5]],[[19251,8826],[37,-40],[-19,-175],[43,-49],[-217,-153],[39,-52],[63,-4],[-16,-146],[32,-4],[-29,-151]],[[18040,8654],[31,152],[108,166],[146,125],[12,9],[19,126],[103,113],[-23,22]],[[18436,9367],[5,5]],[[18441,9372],[155,-96],[-3,-99],[144,40],[172,-66],[-44,-25],[35,-40],[-17,-156],[72,1],[15,31],[104,-63],[119,11]],[[13514,2820],[-11,-7],[-26,20]],[[13477,2833],[37,-13]],[[13665,2418],[-1,2],[-22,62],[76,-13],[-21,15],[38,103],[-5,18],[-43,-109],[-51,2],[-3,6],[-22,-6],[-36,2],[-4,26],[-30,-45],[1,55],[-32,-14],[-24,2],[-6,21],[6,36],[-25,36],[-7,27],[40,33],[-45,-23],[-30,37],[0,11],[28,93],[9,29],[81,-26],[6,41],[-7,-4]],[[13536,2835],[30,50],[61,-18],[67,58],[12,-63],[81,-38],[34,-119],[96,-2],[56,-51],[-18,-66],[-70,-8],[-8,-109],[-114,-81],[-98,30]],[[15518,3302],[-17,-181],[103,-95],[-106,-51],[-75,38],[-48,-165],[-9,-31],[45,-111],[76,6],[23,-38],[20,21],[-23,29],[92,-29],[-76,-108],[-1,-2]],[[15522,2585],[-110,-28],[-92,108],[-15,83],[-58,-4],[-88,87],[9,79],[116,57],[8,133]],[[15292,3100],[43,67],[15,-19],[105,92],[28,68],[35,-6]],[[21031,9412],[-52,-101],[25,-96],[96,-90],[-41,-63],[20,-34],[-71,-57],[-2,-114],[44,-73],[65,36],[22,-23],[136,-280]],[[21273,8517],[-351,-91],[10,-64],[-177,-31],[-71,10],[-47,118],[-73,-32],[-28,123],[30,-71],[21,24],[-72,160],[14,37],[-48,32],[15,30],[45,-18],[6,88],[59,18],[-42,26],[17,50],[-31,83],[44,66],[118,38],[-32,156],[32,23]],[[20712,9292],[105,-25],[79,26],[50,24],[43,105],[42,-10]],[[26016,14470],[56,-350],[-525,-135],[-33,-92],[30,-46]],[[25544,13847],[-38,17],[-52,-37],[-52,29],[-30,-107],[-74,-12],[-72,-72],[-119,206],[22,33],[-70,60],[-112,15],[-34,82],[-56,-22]],[[24857,14039],[-191,-27],[-42,43],[66,217],[-72,87]],[[24618,14359],[127,73],[141,-32],[168,70],[46,69],[138,-24],[86,-98],[146,79]],[[25470,14496],[59,-73],[39,42],[117,-47],[117,108],[44,-29],[73,44],[97,-71]],[[24947,10587],[25,-90],[83,-103],[-15,-25]],[[25040,10369],[-45,-30],[-79,13],[-81,-84],[-98,145],[-153,95],[71,38],[-10,77],[150,26],[43,-10],[8,-70],[101,18]],[[28589,8635],[-117,-101],[-340,89],[-65,-1],[-5,6],[-59,-6]],[[28003,8622],[16,168]],[[28019,8790],[21,32],[110,-20],[336,-104],[7,-55],[91,-1],[5,-7]],[[27767,8489],[-16,15]],[[27751,8504],[14,0],[2,-15]],[[27647,8602],[39,-95],[59,-19],[-300,-61],[-56,71],[38,-75],[29,-11],[-4,-24],[-31,-166],[-86,-39],[-195,-9],[-68,114],[-62,-11],[-50,-56],[-209,148]],[[26751,8369],[6,33],[48,17],[-10,37],[46,8],[-14,59],[35,49],[15,-56],[30,-1],[5,75],[207,44],[-63,131]],[[27056,8765],[210,0]],[[27266,8765],[28,7],[5,-49],[76,-6],[27,-59],[103,44],[15,-36],[55,6],[72,-70]],[[27947,7910],[22,-32],[-56,3],[34,29]],[[27870,7918],[-64,-5],[9,30],[55,-25]],[[28020,7844],[-19,-52],[-8,-51],[35,-15],[-101,-172]],[[27927,7554],[-115,29],[-59,-57],[-55,36]],[[27698,7562],[-60,43],[-9,61],[-141,73],[-8,-146],[-105,37],[-57,-17],[4,44]],[[27322,7657],[91,183],[66,17],[-4,36],[48,0],[22,76],[43,12],[-4,146],[-92,78]],[[27492,8205],[-9,27],[40,4],[-29,15],[31,81],[235,23],[134,-40],[74,-22],[135,13],[92,-95],[-58,67],[88,2],[61,-67],[9,-80],[-40,-50],[-98,-8],[-17,77],[-40,-4],[-69,-5],[-51,-46],[-42,-88],[37,41],[19,-23],[-39,-35],[-72,-20],[-71,-20],[-94,16],[-51,-64],[22,-80],[45,131],[71,-81],[74,-31],[27,-11],[22,21],[-16,-20],[47,-41],[23,48],[38,4]],[[24096,7821],[-205,-101],[-121,-173]],[[23770,7547],[-187,109]],[[23583,7656],[72,91],[75,7],[-38,175],[27,19],[-23,168]],[[23696,8116],[53,143],[54,-46],[121,-19],[30,57],[78,0],[48,-48],[48,19],[-15,-90],[95,-11],[-2,-144],[-136,89],[-62,-108],[88,-137]],[[22408,8606],[67,12],[0,-48],[194,76],[-5,-139],[87,-35],[33,-103],[43,-21],[110,32],[45,-87]],[[22982,8293],[-50,-77],[12,-47],[46,7],[99,-137]],[[23089,8039],[-32,-174],[91,-89],[-14,-68]],[[23134,7708],[-193,-24],[-110,134],[-87,-50],[-1,-72],[-69,-17],[-116,1],[-224,76],[-297,-26],[-185,30],[-53,-84],[-47,-9],[43,-96]],[[21795,7571],[-207,-37]],[[21588,7534],[38,95],[-45,45],[16,70],[-182,135],[8,75],[-54,29],[18,34],[116,9],[8,123],[-176,243],[-8,160]],[[21327,8552],[11,63],[79,85],[73,-38],[54,25],[128,-116],[18,52],[51,-11],[64,48],[11,-52],[54,60],[64,-35],[50,63],[75,-46],[41,104],[206,-135],[102,-13]],[[23246,8212],[62,-75],[-50,5],[5,-88],[-56,-88],[-35,-13],[-83,86]],[[22982,8293],[70,-46],[45,94],[124,46],[49,-95],[-42,-50],[18,-30]],[[24632,8395],[-60,-133]],[[24572,8262],[-44,12]],[[24528,8274],[-30,79],[-79,55],[-15,-31],[-106,58],[-21,-27],[-57,37],[-48,-20]],[[24172,8425],[-51,23],[-2,123],[89,54],[122,-85],[69,54],[-24,-19],[19,-94],[126,-9],[-14,-84],[126,7]],[[24528,8274],[-49,-71],[54,-118]],[[24533,8085],[-148,82],[-67,-48],[-74,-257]],[[24244,7862],[6,-46],[-154,5]],[[23696,8116],[-54,11],[-48,109],[36,44],[-22,75],[36,105],[-111,98],[34,97]],[[23567,8655],[150,35],[58,82],[50,-12],[118,66],[20,-67],[46,3],[15,-44],[-35,-238],[154,-133],[55,36],[-26,42]],[[23583,7656],[-122,-1],[-138,70],[-191,-32]],[[23132,7693],[2,15]],[[23246,8212],[83,44],[84,149],[71,36],[-25,104],[-65,69],[10,42]],[[23404,8656],[51,90],[112,-91]],[[24325,11602],[-233,-323],[78,-60],[8,-68],[-32,-29],[23,-40],[-55,-57],[48,-144],[-22,-15]],[[24140,10866],[-182,107],[-2,-63],[-80,-41],[-65,81],[-126,0],[-49,140],[-155,145]],[[23481,11235],[57,55],[-31,53],[70,15],[24,42],[-46,102],[-69,44],[-5,62],[-48,12],[20,64],[158,32],[-11,58],[54,-6],[19,75],[47,-30],[43,91],[85,-9],[134,128]],[[23982,12023],[112,18]],[[24094,12041],[123,-70],[-10,-139],[-30,-11],[16,-71],[85,-28],[47,-120]],[[25703,5229],[0,-45],[40,-24],[74,24],[38,-25],[34,-167],[111,0],[-28,-101],[78,0],[13,-36],[-68,-82]],[[25995,4773],[-1,0],[-12,3],[-150,58],[2,-17],[-56,16],[0,14],[-249,55],[-70,20],[-2,0]],[[25457,4922],[-86,188]],[[25371,5110],[18,21]],[[25389,5131],[38,54],[117,-50],[16,103],[42,21],[1,-61],[100,31]],[[22813,4856],[-27,-8],[15,38],[12,-30]],[[22959,4943],[0,-188],[0,-27],[31,27],[7,6],[2,-6],[6,-32],[-180,-61],[-20,21],[-41,45],[-3,30],[-5,55],[61,12],[-10,14],[12,25],[-10,34],[-19,19],[47,-10],[27,64],[95,-28]],[[22619,4973],[-14,3]],[[22605,4976],[14,1],[0,-4]],[[22627,5012],[-51,-26],[0,5]],[[22576,4991],[51,21]],[[22627,5012],[108,-40]],[[22735,4972],[-2,-9],[-91,41],[-15,8]],[[23020,4942],[-3,-27],[-34,47],[-126,10],[-32,-46],[-54,49],[11,43],[-34,-14]],[[22748,5004],[-5,77]],[[22743,5081],[186,-9]],[[22929,5072],[95,-23],[-4,-107]],[[21946,5546],[76,-34],[-10,-54],[74,-56],[34,-99],[-123,-115]],[[21997,5188],[-7,7],[-58,60],[-1,64],[39,43],[-13,-8],[-36,-20],[-16,-124],[-17,60],[-101,67],[-31,20],[-13,-39],[-55,35]],[[21688,5353],[-28,72]],[[21660,5425],[-8,23]],[[21652,5448],[83,110],[79,-13],[52,46],[80,-45]],[[22150,4607],[49,-28],[3,1],[36,-167],[-25,170],[50,15],[82,-71],[15,-69],[23,25],[22,-10],[34,-33],[0,-1],[2,0],[4,-4],[17,3],[164,-7],[10,-6],[128,-60],[38,-137],[-20,29],[-17,-33],[68,4],[47,-35],[1,-1],[-86,-117],[-100,-14],[-63,-49],[-24,-18],[-47,-170],[-28,-102],[-350,-113],[-132,133],[-87,88],[-46,47],[-141,69],[-37,19],[-110,119],[-308,-19],[116,79],[78,150],[6,0],[56,-1],[-24,-5],[29,-42],[11,16],[-23,24],[104,21],[105,71],[20,14],[34,-3],[15,-5],[-30,1],[27,-31],[-4,-17],[4,-61],[3,57],[43,-21],[-32,45],[71,17],[-57,22],[25,11],[127,54],[124,146]],[[21404,26031],[-8,-33],[91,13],[76,-37],[7,-208],[68,-112],[-27,-53],[206,20],[29,106],[-26,83],[224,108]],[[22044,25918],[80,-119],[-26,3],[83,-362],[63,-82],[120,-153]],[[20989,24229],[-74,33],[-35,-76],[-141,22],[11,-131],[-51,-116],[-141,125],[-55,-25],[-4,-114],[-252,-148],[-83,-9],[-80,80],[-145,43],[5,44],[-222,-111],[-162,-21]],[[19560,23825],[34,72],[-41,314],[-75,1],[-37,99],[-287,232],[-61,185],[111,97],[-14,70],[-104,36],[-74,79],[-12,61],[90,151],[42,335]],[[19132,25557],[88,38],[193,-83],[61,127],[88,-16],[90,199],[173,-19],[129,52],[117,112],[62,-8],[94,-79],[50,6],[58,-105],[-1,29],[132,59],[47,210],[102,75]],[[20615,26154],[78,-11],[40,42],[39,-25],[98,61],[34,-51],[79,2],[21,-34],[51,36],[-2,-59],[79,-27],[-3,-71],[170,118],[43,-126],[62,22]],[[19126,18093],[51,-46],[-13,-44],[136,107],[47,-6]],[[19347,18104],[167,-36],[14,-45],[-40,-28],[101,-59],[50,82],[-21,27],[36,99],[48,-28],[85,22],[81,-45],[83,87],[29,-20]],[[19980,18160],[73,-82],[-8,-489],[105,-154],[-47,-42],[9,-49]],[[20112,17344],[-39,-103],[-140,-6],[-71,-109],[-127,-16],[-85,79],[-3,-141],[-43,15],[-168,-227]],[[19436,16836],[-109,-136],[-18,22],[-121,-82],[-74,16],[-89,-131],[-102,-19],[-9,-137],[41,-61],[-38,-36],[7,-48]],[[18924,16224],[-169,-64],[7,-86],[-141,-56],[-121,80],[-25,-141],[-95,93],[-76,-50],[-34,40],[8,86],[-114,89],[-127,-57],[-74,50]],[[17963,16208],[92,226],[-101,81],[-48,-53],[-105,131],[64,117],[62,9],[16,130],[105,-13],[34,77],[56,-12],[48,117],[101,-33],[-14,75],[39,-18],[34,42],[89,-72],[130,75],[93,-59],[76,37],[1,57],[-42,30],[3,135],[78,-24],[73,-125],[43,31],[42,-41],[29,57],[-12,65],[-113,53],[-13,71],[40,13],[15,65],[98,-56],[44,133],[-45,-3],[-91,95],[-61,8],[-39,-37],[-78,121],[-136,28],[-43,165],[56,113],[-74,-4]],[[18786,18250],[153,-116],[109,11],[78,-52]],[[17963,16208],[-83,-63]],[[17880,16145],[-100,17],[-25,44],[-106,-28],[-99,40],[-24,106],[-51,27],[16,75],[-44,43],[33,46],[-40,22],[33,11],[-61,71],[18,38],[-79,54],[63,154],[-88,-47],[-162,106]],[[17164,16924],[-47,92],[-47,19],[203,90],[17,93],[-230,242],[-114,83],[-150,26]],[[16796,17569],[-1,0]],[[16795,17569],[-64,78]],[[16731,17647],[0,1],[56,-20],[10,21],[-74,24],[98,15],[-92,-7],[16,11],[13,-3],[28,33],[-39,-28],[-16,6],[32,39],[-39,-36],[-32,32],[46,16],[-54,-12]],[[16684,17739],[27,26]],[[16711,17765],[53,-2],[-38,16]],[[16726,17779],[105,100],[145,-96],[101,48],[75,-30],[86,47],[24,-22],[8,12]],[[17270,17838],[1,-1],[81,-67],[37,-30],[-34,39],[136,-27],[-5,-26],[53,62],[-20,42],[92,-4],[82,-56],[109,100],[0,1]],[[18930,15668],[-45,-287],[-68,-49]],[[19121,14842],[21,-64],[-49,-80],[15,-52],[51,-64],[167,0],[27,-101],[-27,-37],[39,-4],[6,-42],[-70,-198],[-77,-20],[-128,37],[6,-101],[65,-2],[116,-126],[-62,-81],[79,-60],[-39,-58],[25,-34],[-92,-65],[-64,-117],[76,-177]],[[19206,13396],[-73,-92],[-156,9],[-29,-195],[113,-86],[-96,14],[-70,-34],[-60,29],[-14,-98]],[[18821,12943],[-180,-6],[-41,-61],[19,-126],[-94,-10],[3,41],[-82,37],[-69,-58],[-1,-114],[-38,33],[-130,-55]],[[17192,12843],[-60,30],[-198,-55],[-62,21],[-151,151],[-132,54],[-74,113],[-122,62],[-49,110],[116,175],[51,-11],[209,131],[247,12],[-10,116],[87,-20],[29,172],[-61,118],[-220,-126],[5,-88],[-144,-36],[-11,34],[77,38],[-85,231],[67,0],[84,72],[-12,51],[61,102],[41,10],[-72,54],[98,32],[38,146],[-26,83],[74,80],[7,96],[60,-25],[69,33],[-2,-59],[52,6],[-12,82],[-80,8],[-2,52],[-90,43],[34,34],[-20,47],[-54,-18],[-11,33],[-42,-9],[15,21],[-96,-7],[-37,79],[16,47],[-96,-63],[-128,64],[23,55],[-45,5],[0,62],[50,121],[-35,26],[107,102],[-75,61],[51,32],[-36,27]],[[16610,15660],[101,20],[54,189],[59,-25],[125,21],[77,139],[83,16],[22,51],[46,-93],[93,-65],[125,72],[12,-31],[128,-20],[127,-245],[132,151],[81,3],[13,166],[-34,67],[26,69]],[[18924,16224],[37,-99],[-33,-17],[-20,-120],[-80,45],[22,-75],[-60,14],[-36,-33],[-102,-197],[75,-166],[17,38],[186,54]],[[11842,4168],[1,-2],[-1,0],[0,2]],[[12388,5449],[272,0],[-20,-80],[126,-247],[-38,-3],[-26,-97],[-14,-202],[-141,-79],[127,-38],[83,-110],[46,-11],[-17,62],[63,20],[37,-40],[-12,-118],[71,-151],[-23,-86],[61,-67],[42,-223]],[[13025,3979],[29,-46],[76,-20],[-34,-249],[14,-39],[47,28],[16,-47],[1,51],[44,-13],[-25,-68],[61,-121],[-37,-49],[71,38],[47,-66],[76,13],[13,-159],[52,27],[15,-24],[-56,-59],[-65,30],[8,-115],[-62,-63],[28,-42],[43,57],[43,-158]],[[13430,2885],[-64,-53],[-49,67],[44,-90],[42,19],[-1,-35],[-4,-73],[-46,-59],[-1,-1],[-18,1],[7,-15],[0,0],[0,-1],[86,-10],[-22,-14],[45,-72],[-44,-16],[1,-1],[-1,0],[3,-2],[33,-45],[-31,-66],[105,61],[4,-7],[3,-55],[-88,-69],[-5,-3],[39,-79],[-3,-1],[-63,4],[-34,-33],[-5,-1],[-1,5],[12,61],[-29,47],[-63,38],[-176,107],[-308,15],[-79,-17],[-44,-52],[1,-15],[-66,-77],[-75,21],[-2,-4],[-121,-67],[-2,0],[-120,46],[-60,-45],[-25,26],[-79,-24],[-17,29],[4,2],[58,24],[-3,2],[31,14],[-38,-11],[-29,17],[-34,-36],[-77,-47],[-15,-48],[-37,33],[0,2],[8,91],[-17,8],[-5,44],[-199,-87],[-4,-2],[-30,-53],[2,-7],[0,0],[41,-109],[-35,10],[-52,-54],[-17,-108],[4,-40],[56,-26],[-56,-58],[14,-42],[-9,-7],[-43,-31],[0,-20],[-1,-36],[-20,21],[-13,13],[-29,29],[-131,24],[-49,-61],[-74,-92],[-41,-50],[-51,52],[-67,-22],[-53,-90],[-26,-176],[-83,-65],[-24,50],[24,6],[17,2],[0,1],[0,1],[25,59],[-85,-25],[29,172],[-34,-43],[-28,113],[24,1],[-5,31],[0,0],[3,3],[1,26],[9,36],[55,27],[-26,-3],[-21,92],[14,-96],[-37,-18],[-1,-37],[-6,-26],[-23,10],[-12,-43],[-15,24],[12,-30],[-45,-52],[-14,15],[28,-83],[-69,21],[78,-37],[11,-29],[-16,-42],[-4,-6],[-52,14],[-18,9],[3,-5],[-17,4],[-61,16],[63,-50],[54,-44],[39,20],[4,1],[22,-61],[-7,4],[-32,18],[-65,-40],[10,-33],[-20,-13],[-42,-29],[36,-87],[-39,-37],[-82,-12],[-39,1],[-8,15],[22,37],[-23,8],[-8,-30],[-1,2],[-14,-39],[-46,-10],[-9,18],[-4,64],[-13,-67],[17,-17],[1,-3],[2,0],[9,-10],[-38,-15],[54,8],[20,-38],[-9,40],[36,6],[9,-15],[88,15],[15,-7],[21,-19],[-7,-10],[-63,-26],[124,17],[3,0],[-2,-14],[-9,-73],[12,-2],[23,-4],[30,-78],[-25,-68],[-8,-23],[-14,-8],[-70,-38],[17,-55],[-31,-61],[-64,27],[-133,-29],[-67,-155],[9,-57],[-73,-15],[-27,52],[-2,7],[-40,11],[-39,14],[6,41],[-4,5],[0,2],[-38,52],[-32,47],[4,12],[33,77],[-1,7],[0,1],[-1,2],[-15,56],[-56,40],[2,75],[-111,150],[-69,35],[-13,-3],[-8,4],[-49,-16],[-2,0],[-87,75],[-113,-34],[1,45],[-17,12],[-87,78],[-11,-10],[-51,35],[-139,-20],[-3,-49],[-55,-41],[2,-5],[-1,-2],[28,-50],[19,-37],[-27,-93],[-105,-98],[-25,-1],[-102,-2],[-41,-46],[-11,-12],[-36,20],[-16,-10],[-70,-33],[-12,6],[-29,67],[-7,23],[-6,2],[-56,41],[-2,8],[67,126],[9,12],[-63,187],[-1,6],[111,202],[93,5],[40,3],[2,4],[1,0],[65,101],[18,28],[1,-1],[28,-23],[96,87],[62,56],[6,1],[166,15],[13,-1],[15,-51],[1,-6],[9,-43],[97,-33],[10,1],[61,84],[60,82],[-5,78],[52,18],[29,-41],[4,1],[128,42],[63,90],[44,-4],[24,51],[90,62],[6,10],[17,12],[5,32],[20,40],[4,92],[101,10],[58,105],[83,30],[23,152],[-20,44],[4,29],[25,-3],[-6,44],[-5,42],[2,1],[114,38],[19,2],[8,65],[13,-9],[54,-43],[69,52],[33,86],[3,103],[2,12],[31,17],[-24,33],[11,78],[0,0],[4,25],[-36,21],[68,57],[-13,47],[5,32],[13,14],[-42,120],[1,0],[158,-39],[35,82],[82,59],[-14,-66],[44,-39],[12,-99],[19,6],[-5,74],[-15,101],[47,58],[-37,36],[-22,22],[42,32],[18,-9],[22,-36],[28,-5],[41,-6],[15,9],[39,25],[-8,34],[1,0],[95,-6],[18,-12],[16,5],[93,26],[14,23],[3,1],[3,9],[58,94],[35,159],[-5,2],[-12,85],[0,1],[64,34],[7,-2],[18,-23],[6,14],[10,-3],[11,54],[138,62],[-2,40],[0,4],[80,62],[2,123],[15,1],[26,0],[2,3],[15,2],[0,21],[28,42],[120,92],[71,55],[10,247],[4,0],[32,6],[-28,36],[-7,56],[-4,38],[1,56],[-23,120],[-9,78],[25,43],[47,85],[0,3]],[[6946,83],[62,-30],[0,-3],[-28,6],[-2,2],[-9,-58],[-3,3],[-32,33],[12,47]],[[7167,202],[-37,-58],[-45,8],[-3,-43],[-7,11],[-20,41],[-2,-2],[0,2],[0,-3],[-21,-20],[-19,15],[-3,4],[56,21],[-3,16],[-6,47],[44,43],[63,-42],[3,-40]],[[6998,298],[-2,0],[-36,110],[-7,32],[78,-67],[2,-8],[-35,-67]],[[6944,362],[-18,-28],[-14,13],[4,94],[33,-59],[-5,-20]],[[7113,500],[12,-44],[3,-19],[81,-18],[-4,-2],[-63,-32],[-6,3],[-25,17],[0,1],[0,-1],[-24,16],[-4,8],[25,58],[9,-7],[-4,19],[0,1]],[[21273,8517],[54,35]],[[21588,7534],[-88,47],[-18,-115],[42,-106],[-10,-46],[-59,-31],[6,-106],[32,-2],[-19,-62],[-27,-18],[-98,55],[-90,-15],[-79,-183],[-170,-14],[-13,-56],[77,-70],[-11,-63],[55,-116],[-27,-152],[111,-51],[-33,-131],[28,-74],[-21,-195],[8,-40],[99,-48],[6,-72],[-95,-56],[28,-84],[50,-23],[-50,-104]],[[21222,5603],[-46,4],[-81,-73],[-175,164],[-105,6],[-138,70],[-46,-28],[-62,122],[-53,-24],[-62,-106],[-1,114],[-37,-35],[-125,-10],[-66,-80],[-21,39]],[[20204,5766],[-85,-27],[-27,-46],[-129,-19],[-95,-109],[-101,-32],[-57,86],[2,87],[-159,119],[-62,191],[-149,174],[-79,-13],[-173,57]],[[19090,6234],[-111,114],[-6,90],[61,30],[-6,31]],[[19028,6499],[145,233],[160,409],[-24,187],[-36,33],[-47,-14],[-13,83],[40,25],[-4,45],[-48,13]],[[19251,8826],[83,20],[10,56],[104,58],[2,-38],[50,-18],[32,39],[81,-51],[288,428],[126,-114],[61,4],[54,-69],[81,-6],[-38,114],[64,61],[64,-69],[133,-30],[-67,147],[76,15],[70,-137],[105,35],[-22,55],[33,154],[71,-188]],[[25357,11985],[-119,35],[-51,-132],[-47,16],[-74,-118],[-45,-10],[49,-147],[-110,-117],[-11,-93],[-55,-33],[-113,-30],[-93,128],[-85,-65],[-27,-109],[-98,140],[-145,83],[17,37],[-25,32]],[[24094,12041],[93,168],[-49,214],[152,54],[114,-131],[71,13],[33,75],[-33,101],[84,129],[-17,16],[164,27]],[[24706,12707],[89,-44],[1,-93],[42,-61],[141,-23],[9,-36],[-31,-13],[24,-198],[101,-12],[-8,58],[25,5],[127,-12],[23,-17],[-32,-140],[104,-2],[63,-103],[-27,-31]],[[25357,11985],[-33,-41],[133,-92]],[[25457,11852],[-55,-73],[191,-27],[52,25],[30,-32],[-39,-300]],[[25636,11445],[-46,-106],[-68,11],[-74,-133],[55,-140],[-129,-56],[-12,-73],[-68,-29],[-35,115],[-42,3],[-46,-104],[-168,8],[54,-66],[-3,-70],[-72,-51],[-27,21],[10,136],[-35,-5],[-43,-232],[60,-87]],[[25040,10369],[46,-126]],[[25086,10243],[-72,-39],[-30,-68],[-95,60]],[[24889,10196],[-50,49],[-79,-13],[-69,43],[-24,-14],[22,-40],[-93,-45],[-28,-57],[27,-54],[-53,-54],[-102,113]],[[24440,10124],[30,-12],[18,36],[-139,203],[-110,79],[-96,6],[-64,78],[-59,-8],[-29,46],[149,314]],[[20741,30215],[1,-94],[-73,4],[-38,72],[-119,-9],[11,42],[110,4],[75,-9],[33,-10]],[[21698,27032],[-92,-42],[14,-66],[-63,-29],[-5,37],[-67,-5],[-22,39],[-52,-39],[-54,8],[-11,39],[-179,9]],[[21167,26983],[-30,76],[-199,-73],[56,-117],[-166,-98],[-19,-109],[-53,5],[14,-121]],[[20770,26546],[-58,17],[-73,-41],[-63,-120],[20,-120],[-43,-2],[-35,-65],[97,-61]],[[19132,25557],[-46,75],[-64,9],[-125,130],[-66,127],[-33,-71],[-114,-45],[-105,-124],[-85,-23],[-106,56],[-73,152]],[[18315,25843],[28,40],[-97,160],[88,65],[31,117],[63,52],[-68,60],[-2,91],[-82,27],[-18,41],[85,85],[2,150],[271,122],[-64,117],[55,105],[-50,43],[-180,-38],[-19,67],[-76,45],[-16,102],[-175,60],[-62,101],[9,106],[-46,68]],[[17992,27629],[69,170],[107,11],[3,110],[57,12],[-106,67],[60,11],[53,110],[108,71],[44,109],[116,27],[136,165],[182,22],[48,-56],[61,5],[125,94],[-26,31],[48,42],[-44,94],[28,47],[67,-8],[159,136],[89,-23],[109,84],[21,91],[68,33],[-108,36],[-4,74],[-79,104],[-35,240],[-146,128],[-1,123],[-81,87],[22,44],[-47,-15],[-35,33],[91,76],[215,-31],[-42,58],[90,63],[0,60],[155,157],[-28,66],[78,24],[19,83],[81,-2],[30,109],[66,12],[-1,161],[156,95]],[[19970,30869],[0,-1],[99,-157],[39,-62],[2,-21],[-41,2],[-8,1],[8,-10],[129,-154],[3,-3],[1,-1],[59,-70],[84,-45],[8,-7],[15,-6],[96,-52],[-10,-77],[-35,5],[38,-11],[4,-87],[50,-65],[41,-55],[100,-45],[55,84],[-5,15],[-9,30],[20,-13],[-3,-17],[-5,-31],[110,-125],[-4,-26],[-91,-7],[47,-71],[75,81],[69,-11],[116,-93],[52,-41],[15,-22],[35,-18],[33,-26],[-38,-37],[20,14],[10,-15],[0,0],[9,-11],[61,-87],[0,-1],[-38,-20],[0,-21],[-32,-35],[95,-82],[-1,-21],[-16,-25],[15,-1],[-3,-59],[-3,-6],[2,-2],[-1,-16],[66,-23],[-3,-101],[-4,-170],[9,-7],[0,-7],[45,-37],[-8,-71],[0,-1],[-6,-52],[-95,-113],[8,-6],[20,-71],[0,-3],[3,-6],[29,-104],[16,-65],[41,13],[26,-25],[45,-61],[-58,-149],[-5,-15],[4,-98],[15,-31],[0,-1],[1,-3],[125,-264],[0,-23],[23,-26],[47,-100],[-20,-6],[-19,-5],[-40,-109],[-45,-5],[42,-9],[119,-226],[-41,59],[-65,81],[6,-24],[-40,1],[-78,40],[76,-47],[-106,-35],[125,32],[66,-38],[21,-28],[14,-54],[-7,-4],[15,-69],[17,-24],[22,-87],[18,29],[24,-34],[8,-18]],[[20666,4757],[55,-162],[111,76],[30,-84],[-16,-83],[188,23],[-30,-75]],[[21004,4452],[-2,0],[-77,-14],[-20,-3],[-7,-9],[-6,-1],[-5,-10],[-35,-35],[-46,39],[-13,-42],[1,-26],[46,-13],[20,46],[-27,-68],[-1,-1],[-167,46],[-24,-1],[-18,4],[-59,-11],[-88,-7],[-31,-14],[-25,-5],[-18,-16],[-65,-31],[-103,-113],[39,86],[-55,25],[-18,60],[-102,-15],[23,35],[-32,55],[15,38],[-34,-16],[-31,-15],[31,-55],[39,-69],[-39,15],[-118,45]],[[19952,4356],[81,94],[13,237],[30,29],[-20,15],[145,-9],[57,49],[18,-97],[41,21],[14,-56],[64,35],[61,-87],[27,225],[58,16],[34,-50],[91,-21]],[[20206,4216],[-16,-30],[-80,32],[69,12],[27,-14]],[[20204,5766],[4,-60],[105,-88],[142,-230],[96,75],[94,-23],[-17,-121],[-97,-73],[-15,-138],[71,-42],[69,41],[14,-105],[36,-35],[-39,-31],[-25,-113],[24,-66]],[[19952,4356],[-1,0],[40,53],[-80,-1],[37,-16],[-3,-44],[0,-15],[-75,3],[-13,-38],[43,-12],[-49,2],[8,-40],[-25,-19],[0,-1],[1,-22],[1,-4],[39,-13],[35,67],[85,40],[23,-35],[-49,7],[30,-75],[-85,-51],[84,34],[-5,-33],[-61,-40],[54,21],[6,-33],[17,73],[30,3],[3,-61],[28,21],[4,4],[20,-44],[45,50],[-15,-51],[46,-35],[-9,46],[64,57],[27,-42],[-7,-32],[-26,-83],[8,-11],[-2,-9],[11,-3],[17,-24],[43,8],[8,-2],[-90,-117],[-9,-12],[0,-1],[-1,-1],[1,-12],[2,-32],[1,0],[0,-2],[23,-2],[12,-2],[-22,-67],[-227,-29],[-86,-65],[-6,20],[-21,69],[-1,0],[-1,0],[-4,1],[-136,26],[-68,71],[-1,-1],[-2,2],[-35,-21],[-36,36],[-44,-2],[-75,39],[-2,0],[-2,2],[-73,-18],[-63,-16],[-20,4],[-50,11],[-52,13],[-141,32],[-24,20],[-86,6],[-83,20],[-84,-4],[-6,-4],[-3,0],[-5,-8],[-37,-32],[-25,-46],[-14,-24],[23,-25],[-45,-8],[45,8],[10,2],[0,0],[-29,-31],[10,-6],[-4,-6],[51,-27],[-55,25],[-60,-89],[1,-2],[-1,-2],[-81,73],[5,29],[-66,79],[-50,3],[-3,0],[-77,107],[-20,10],[-134,68],[135,-117],[78,-68],[132,-115],[84,-73],[24,-54],[3,-5],[68,-6],[47,-3],[-18,-17],[25,-57],[4,-46],[-112,-169],[-3,-4],[19,251],[-244,264],[-39,34],[-68,57],[-213,180],[-471,282],[-175,40],[-164,37],[-9,2],[-10,2],[-107,-80]],[[17214,4353],[-17,52],[54,135],[-58,69],[204,142],[-18,52],[-207,56],[21,29]],[[17193,4888],[73,103],[133,50],[172,-10],[54,77],[57,-55],[105,73],[130,-15],[0,37],[163,83],[134,-28],[20,52],[-44,84],[60,99],[-36,72],[54,41],[-16,145],[23,26],[30,-23],[34,51],[56,-37],[32,28],[-6,76],[64,-40],[73,10],[36,-110],[103,-122],[40,54],[-13,42],[58,19],[39,-56],[213,95],[-31,63],[-67,-1],[-13,74],[154,189],[-60,143],[73,57]],[[24440,10124],[-21,17],[-64,-121],[-155,68],[-103,-21],[-85,132],[26,42],[-29,46],[-64,-6],[-85,-78],[65,-124],[45,12],[72,-106],[-14,-41],[62,-136],[171,-98],[80,25],[35,-79],[64,-15],[9,-57],[-38,-58],[58,-79],[-14,-74],[73,-3]],[[24528,9370],[58,-47],[-48,-26],[-5,-50],[-43,12],[-7,-118],[57,-189],[60,-10]],[[24600,8942],[72,-211],[-57,-108],[38,-163],[-21,-65]],[[23404,8656],[-15,59],[-111,78],[-9,74],[74,74],[-79,27],[14,67],[-35,59],[47,40],[-49,73],[71,4],[-15,70],[44,39],[120,-21],[-60,42],[54,23],[-45,61],[19,139],[-107,148],[-91,53],[-78,15],[-19,-45],[-132,30],[-1,-67],[-46,-2],[-107,62],[-7,125],[-70,6],[-51,65]],[[22720,9954],[-5,70],[45,51],[-92,90],[57,55],[131,-83],[94,55],[-45,22],[-8,128],[-39,42],[26,55],[-74,35],[43,121],[-22,28],[97,132],[-74,-24],[-49,73],[127,234],[-196,68]],[[22736,11106],[-56,36],[44,119],[181,91],[104,5],[-44,52],[48,11],[177,-25],[48,55],[138,-314],[48,54],[38,-8],[19,53]],[[24617,14359],[1,0]],[[24857,14039],[25,-76],[-37,-27],[55,-105],[-37,-68],[178,-100],[-15,-87],[54,-119],[-86,-141],[23,-33],[-165,-114],[-74,-139],[-164,-28],[22,-29],[-30,-72],[63,-59],[-17,-41],[50,-11],[4,-83]],[[23982,12023],[-67,243],[-105,55],[-88,-34],[-30,55],[-50,296],[97,109],[-16,132],[-120,104],[-29,88],[-100,51],[-51,-21],[11,129],[68,56],[-121,42],[9,92]],[[23390,13420],[57,60],[-47,81],[48,32],[-4,108],[45,68],[146,-59],[137,14],[53,-38],[132,73]],[[22736,11106],[-49,-95],[-89,-20],[-98,-83],[-137,46],[-126,-35],[16,181],[-105,194],[46,138],[-62,10],[-9,37],[221,53],[-253,371]],[[22091,11903],[56,114],[176,39],[-90,212],[54,-17],[102,93]],[[22389,12344],[52,68],[-54,125],[74,130],[-170,68],[97,95],[176,51],[-80,210]],[[22484,13091],[53,-24],[105,26],[60,99],[136,105],[103,-73],[48,73],[-31,49],[132,132],[148,34],[29,-51],[123,-41]],[[26610,12247],[-31,-42],[63,-48],[-26,-69],[46,-31],[-4,-149],[-56,16],[-23,-41],[-40,33],[-116,-68],[4,171],[-109,132],[185,101],[53,-30],[24,39],[30,-14]],[[27407,13298],[-165,-139],[99,-251],[106,-66],[-56,-102],[22,-70],[79,2],[143,-164],[-18,-61],[-226,-89],[-125,194],[-71,23],[-58,-156],[63,-95],[-55,-37],[87,-82],[151,69],[-21,42],[38,30],[161,-109],[44,34],[59,-64],[-70,-322],[-62,-9],[-56,52],[-49,-72],[-56,-1]],[[27371,11855],[-68,-7],[-220,109],[-292,275],[13,26],[-58,66],[31,74],[-27,33],[91,111],[21,165],[-133,-32],[-23,39],[-87,-35],[-19,35],[-67,-19],[-175,75],[-115,93]],[[26243,12863],[23,27],[-51,144]],[[26215,13034],[66,63],[-38,105],[35,-18],[97,79],[58,-23],[60,65],[-8,-88],[339,450]],[[26824,13667],[30,-39],[31,41],[160,31],[174,-65],[41,-113],[145,-129],[2,-95]],[[26629,14868],[-55,-290],[95,-23],[-3,-116],[-42,-27],[149,-149],[-83,-119],[80,-137],[-38,-37],[35,-26],[-38,-31],[1,-34],[29,6],[-33,-20],[29,-37],[-23,-23],[75,-31],[-74,-43],[91,-64]],[[26215,13034],[-47,148],[45,78],[-75,132],[-144,98],[-28,195],[-65,32],[-4,-57],[-59,-51],[-22,29],[-50,-66],[-222,275]],[[26016,14470],[160,17],[82,87],[-14,171],[59,68],[77,-20],[133,82],[116,-7]],[[26243,12863],[-103,-58],[-73,-151],[-96,10],[-34,-120],[-84,-100],[-51,27],[-57,-105],[-65,134],[-99,-16],[-26,-101],[20,-54],[12,29],[50,-8],[75,-58],[-51,-90],[-114,15],[-27,-126],[60,-38],[70,76],[135,-26],[23,-126],[-114,9],[-54,-90],[-101,11],[-82,-55]],[[27371,11855],[3,-130],[-87,-88],[-23,-77],[39,-35],[29,-158]],[[27332,11367],[-75,-84],[30,-68]],[[27287,11215],[-132,70],[-64,120],[-117,91],[-29,12],[-74,-83],[-50,64],[-96,19],[-61,-101],[20,-68],[-67,-27],[-4,-35],[-46,24],[-69,-29],[-28,66],[-40,2],[-40,-202],[-73,-82]],[[26317,11056],[-84,248],[-110,-19],[-70,72],[-324,-223],[-22,132],[-64,36],[23,85],[-30,58]],[[16696,26261],[-22,-108],[145,-4],[22,-78],[42,-15],[-46,-56],[52,-54],[-47,-26],[13,-30],[132,-13],[-19,-66],[-56,-33],[50,-35],[12,-133],[76,-5],[-23,-47],[65,13],[10,-91]],[[17102,25480],[-21,-78],[-105,-70],[129,-140],[-27,-128],[-215,20],[-55,-25],[-16,-48],[99,-33],[-97,-85],[-24,-102],[23,-163],[127,9],[31,-60],[82,-39],[-90,-74],[57,-31],[-32,-43],[37,-28],[-28,-163],[32,-24],[1,-134]],[[17010,24041],[-185,-54],[-65,-92],[-35,12],[-10,-65],[-72,48],[-92,-87]],[[16551,23803],[-158,146],[22,60],[-38,45],[-245,145],[-164,41],[-48,184],[-52,66],[-123,59],[-37,-83],[-105,-1],[-25,86],[-66,37],[-106,12],[-24,-56],[-55,22]],[[15327,24566],[0,0],[20,60],[-42,209],[24,-7],[62,-15],[0,0],[-61,16],[59,80],[99,136],[14,73],[21,53],[41,-23],[-40,26],[1,3],[147,147],[65,64],[-3,226],[114,341],[98,123],[89,48],[158,-115],[-5,69],[37,-19],[38,38],[-4,-31],[43,60],[-9,55],[-58,-61],[-111,63],[-17,45],[30,39],[58,72],[59,8],[-10,-31],[55,42],[56,41],[83,3],[154,-114],[46,-13],[58,-16]],[[16322,21954],[-29,-17],[28,9],[-12,-27],[69,-53],[10,-8],[-10,-26],[-7,-21],[8,-5],[42,-28],[16,-71],[79,19],[14,-36],[3,37],[-1,-43],[-111,3],[-41,73],[-135,238],[-24,185],[73,39],[-44,-44],[64,-167],[8,-57]],[[16605,21926],[-70,-62],[65,-88],[-62,77],[-20,-24],[13,43],[-54,103],[-70,-26],[-16,-43],[-14,21],[-53,81],[16,236],[-38,0],[-24,62],[92,43],[30,14],[-18,54],[25,-12],[5,112],[21,13],[10,7]],[[16443,22537],[7,-14],[99,-26],[60,79],[-48,-136],[64,-141],[-61,-33],[9,-125],[-46,-105],[91,-79],[-14,-29],[1,-2]],[[18315,25843],[-64,39],[-155,7],[-75,-101],[-64,-9],[35,-74],[-48,-16],[-133,66],[-20,-32],[-130,-22],[-192,97],[-56,-72],[-78,-8],[9,-46],[-50,-20],[-72,-131],[-120,-41]],[[16696,26261],[1,0],[0,-3],[-1,0],[0,-1],[105,23],[-105,25],[-19,49],[34,-17],[-24,20],[23,13],[-38,20],[94,-25],[-24,13],[-41,38],[35,-28],[-18,37],[79,39],[67,95]],[[16864,26559],[9,6]],[[16873,26565],[32,-5],[4,-1],[-14,45]],[[16895,26604],[82,231],[-83,56],[8,29],[278,-18],[67,53],[-12,50],[131,46],[33,88],[83,71]],[[17482,27210],[93,85],[7,71],[123,17],[246,164],[41,82]],[[16551,23803],[30,-124],[64,-44],[36,29],[26,-65],[-167,-79],[-72,-236],[-38,-8],[-105,-153],[33,-46],[2,-233]],[[16360,22844],[-10,-50],[12,-18],[20,-28],[-19,-8],[-43,-18],[43,14],[3,1],[8,-50],[-10,-11],[-111,-126],[35,-16],[8,28],[19,-33],[18,-32],[-45,-61],[-101,29],[-31,-44],[-72,8],[-61,94],[-156,238],[-83,160],[-8,279],[41,63],[-21,-7],[-55,-29],[-130,224],[-74,127],[-122,157],[-289,370],[78,69],[12,24],[5,6],[2,10],[48,100],[14,66],[42,186]],[[19560,23825],[-22,17],[-36,-65],[-182,15],[-130,-66],[-47,-102],[9,-118],[41,-32],[-17,-73],[-59,-3],[-84,-87],[-69,-19]],[[18964,23292],[-44,80],[-117,-29],[-69,53],[-57,-39],[-63,46],[-91,-49],[-74,137],[-43,-37],[-69,26],[-24,-23],[-62,101],[-110,-14],[-141,116],[-7,99],[-44,-70],[-258,170],[-53,90],[-27,-39],[-68,8],[-81,73],[-31,-48],[-93,2],[-41,-86],[-107,103],[-33,-12],[-43,71],[-100,-7],[-4,27]],[[18964,23292],[174,-165],[-44,-110],[16,-240]],[[19110,22777],[-55,-101],[-75,63],[-32,-50],[-72,-4],[-27,-75],[-166,9]],[[18683,22619],[3,67],[-351,-229],[-148,0],[-45,33],[-120,-212],[-171,41],[6,78],[-102,10],[-93,61],[-115,-122],[-3,0]],[[17544,22346],[-77,43],[-2,49],[66,71],[-135,-34],[-45,-50],[18,-43],[-44,-9],[34,-18],[-64,-53],[-5,-4],[5,0],[37,-1],[-36,-53],[-15,-23],[-225,24],[31,128],[-51,-38],[4,42],[-16,-17],[-85,106],[47,-30],[-36,25],[6,78],[0,7],[-5,-7],[-88,-131],[9,-126],[-136,-224],[-131,-132]],[[16443,22537],[2,1],[-1,2],[-1,1],[-1,3],[0,0],[71,138],[-55,-52],[-38,131],[-56,31],[3,93],[-6,-33],[-1,-8]],[[21964,16794],[39,-91],[88,-49]],[[22091,16654],[-38,-80],[26,-66]],[[22079,16508],[11,-114],[74,-143]],[[22164,16251],[-76,-133],[-116,-26],[-43,48],[-72,-28],[-210,30],[13,-87]],[[21450,15837],[-78,61],[-103,5],[-9,54]],[[21260,15957],[23,81],[86,20],[-1,39],[-93,59],[9,68],[67,19],[-5,65],[36,-5],[-29,21],[30,25],[-56,-11],[-42,53],[54,62],[-32,64],[115,74],[60,94],[43,-4],[22,37],[-58,37],[23,104],[85,71]],[[21597,16930],[142,-158],[225,22]],[[22460,17365],[38,-171],[-131,-32],[-59,-73]],[[22308,17089],[-109,35],[-14,-37],[-69,-10],[5,-164],[64,-150],[-26,-27],[19,-45],[-87,-37]],[[21964,16794],[-12,147],[75,118],[-76,78],[64,61],[116,2],[24,157],[-26,123]],[[22129,17480],[-37,92],[91,34],[-47,93]],[[22136,17699],[-22,70],[41,14],[-34,59],[120,1]],[[22241,17843],[115,-41],[40,37],[83,-23],[10,38]],[[22489,17854],[70,-33],[-10,-94],[41,-49],[-46,-40],[21,-25],[-84,-21],[-31,-71],[33,-62],[-23,-94]],[[22129,17480],[-84,-1],[-12,36],[-89,-14],[-62,-49],[0,-106],[-60,-7],[-58,5],[-4,37],[-115,8],[-14,35],[39,38],[-32,54],[32,67],[-28,20],[49,25],[22,81],[54,-18],[71,38],[49,-29],[67,89],[31,-51],[100,3],[51,-42]],[[21284,17853],[5,-81],[57,-48],[-33,-41],[14,-83],[58,-7],[26,-61],[-45,-45],[9,-93],[161,-106],[-99,-15],[-5,-75],[165,-268]],[[21260,15957],[-130,-13],[-27,-219],[-58,99],[-91,2],[-18,-65],[-104,15],[37,-89],[-28,-139]],[[20841,15548],[-95,79],[-154,4],[-85,202],[81,117],[9,163],[194,118],[10,195],[-60,40]],[[20741,16466],[10,75],[-56,152],[32,74],[-115,177],[28,92],[-146,177],[-114,60]],[[20380,17273],[-60,94],[23,20],[40,-59],[32,38],[13,-75],[30,64],[92,-109],[32,15],[1,68],[-130,84],[91,123],[163,31],[-82,136],[-16,106],[187,184],[92,2],[8,-101],[82,23],[11,58],[77,76],[-6,104],[59,118]],[[21119,18273],[-30,-132],[221,-108],[-66,-14],[-62,-116],[22,-23],[49,32],[31,-59]],[[22369,15671],[-1,-63],[-84,-35]],[[22284,15573],[-155,-2]],[[22129,15571],[-93,40],[32,47],[-148,61]],[[22164,16251],[60,-177],[-15,-73],[35,-34],[-2,-202],[107,-38],[20,-56]],[[20611,18945],[78,-93],[-16,-115]],[[20673,18737],[100,-85],[70,-14],[16,-214],[95,-19],[11,-64],[154,-68]],[[20380,17273],[-176,72],[-17,65],[-75,-66]],[[19980,18160],[-8,27],[88,56],[37,151],[-65,4],[-38,72]],[[19994,18470],[37,52],[30,-20],[-12,29],[68,71],[-7,135],[74,149]],[[20184,18886],[37,-29],[88,30],[-14,58],[52,90]],[[20347,19035],[46,-25],[63,36],[95,-107],[60,6]],[[22112,17944],[78,19],[31,-32],[-21,-59],[41,-29]],[[21284,17853],[43,54],[13,-52],[57,23],[0,-50],[75,-9],[105,67],[103,-3],[38,25],[-14,46],[54,36],[64,-16],[30,39],[74,-37],[-1,-90],[148,-10],[39,68]],[[22129,15571],[-19,-36],[-58,8],[-20,-75],[-30,10],[-100,-96],[19,-19],[-89,-163],[-78,5],[3,-51],[-62,-32],[21,-50],[-38,-54],[-77,-40],[-33,44],[-144,-22],[-29,-66],[53,-99],[-16,-59],[-143,-103]],[[21289,14673],[-174,-9],[-5,119],[-143,54]],[[20967,14837],[114,275],[167,-18],[-10,36],[77,60],[-9,50],[-56,36],[75,80],[-124,119],[-192,52],[-32,-20],[-11,31],[-63,-37],[-62,47]],[[15676,4135],[0,-8],[-3,4]],[[15673,4131],[3,4]],[[16897,5342],[-8,-176],[68,-67],[-13,-55],[191,24],[11,-112],[47,-68]],[[17214,4353],[-1,-1],[-239,-100],[-9,0],[-71,26],[-4,-8],[-84,-5],[-38,-80],[-3,-5],[-114,-1],[-176,-2],[-198,-59],[-96,-161],[-34,-54],[-24,81],[6,-93],[-102,-41],[-22,-6],[-2,-3],[-12,-4],[-17,-39],[-11,-27],[-84,25],[-76,22],[-28,8],[8,29],[18,34],[-108,274]],[[15693,4163],[0,2],[-4,5]],[[15689,4170],[-25,64],[4,-33]],[[15668,4201],[-36,50],[19,241],[-144,85],[-118,-85],[-53,0]],[[15336,4492],[-48,-7]],[[15288,4485],[45,86],[41,-12],[29,78],[-48,11],[-27,70],[143,-8],[-6,55],[66,88],[-8,67],[33,-54],[-18,-93],[66,2],[-8,-39],[68,59],[53,-15],[41,60],[58,-38],[153,38],[-23,92],[35,22],[-3,-36],[40,-6],[-14,109],[60,54],[142,-7],[-4,55],[150,149],[46,-10],[32,-83],[93,0],[97,75]],[[16620,5254],[54,53],[223,35]],[[15693,4163],[-4,7]],[[15668,4201],[8,-66]],[[15673,4131],[-31,38],[-5,-4],[1,-21]],[[15638,4144],[-76,76],[-134,0],[-72,73],[-20,199]],[[15288,4485],[-71,55],[-33,-17],[-157,67],[-25,-73],[-85,-6],[-45,-107],[-43,-24],[40,-42],[-34,-64]],[[14835,4274],[-93,127],[-158,-56],[-53,80],[92,139],[-49,115],[-71,3],[29,59],[-10,133],[-116,2],[-66,82]],[[14340,4958],[46,70],[-58,-1],[-68,113],[83,42],[-66,105],[49,38]],[[14326,5325],[224,9],[39,40],[0,-66],[102,3],[89,-133],[27,70],[30,2],[21,105],[303,46],[45,36],[50,90],[-5,122],[-66,5],[-28,195],[72,-81],[5,89]],[[15234,5857],[206,-20],[49,59],[-5,58],[49,22],[63,19],[70,-45],[117,30],[22,-58],[102,-6],[5,-214],[136,28],[120,-144],[118,-69],[267,30],[-65,-194],[132,-99]],[[14880,7032],[-38,-53],[25,-225],[-185,-40],[-160,26],[14,-200],[91,-119],[255,-181],[83,-1],[138,-118],[158,-15],[-61,-206],[34,-43]],[[14326,5325],[-1,116],[-150,-50],[-128,43],[8,117],[100,39],[8,133],[-77,3],[-84,-77],[-74,72],[5,138],[-90,14],[-66,-40],[-105,43],[14,44],[-134,-26],[-54,52],[-74,-20],[43,107]],[[13467,6033],[27,40],[0,97],[85,32],[-4,35],[-33,18],[2,89],[-10,-106],[-57,-22],[-11,-52],[-84,53],[-17,215],[-42,12],[-11,5],[12,52],[-44,35],[-23,19],[-9,8],[113,7],[23,38],[14,140],[-53,52],[56,11],[27,51],[48,-10],[24,-5],[194,74],[46,-4],[19,29],[12,5],[149,-56],[29,48],[3,3],[67,4],[144,10],[11,7],[0,0],[10,7],[77,52],[7,-2],[94,-40],[114,55],[2,1],[122,-18],[6,6],[3,0],[71,72],[52,-44],[147,-24],[1,0]],[[13578,3027],[-26,-40]],[[13552,2987],[17,40],[9,0]],[[15522,2585],[-30,-169],[-2,-2],[-65,-46],[-34,6],[-62,46],[-5,4],[16,14],[12,11],[-36,55],[2,3],[21,26],[-79,70],[0,-1],[-1,1],[1,-1],[1,-7],[42,-44],[0,-1],[-12,-61],[23,-48],[0,-26],[18,-10],[22,-47],[-27,-48],[-60,-22],[-57,-19],[0,-1],[-6,-2],[-89,-143],[-42,-218],[-9,-48],[2,-3],[-1,-2],[46,-70],[10,-15],[-121,4],[-8,-8],[-44,-39],[-69,-57],[-50,64],[-109,50],[37,62],[106,2],[-39,22],[50,32],[7,6],[-11,-6],[-90,-38],[-3,14],[17,70],[-23,-6],[-32,43],[-20,-31],[27,-16],[10,-38],[9,-32],[-10,3],[-15,7],[-1,-1],[-24,8],[16,-23],[-23,-42],[-13,-9],[-14,-98],[-54,13],[-46,16],[-74,59],[-72,63],[2,9],[25,5],[0,14],[3,81],[-3,3],[-46,53],[-22,26],[14,20],[22,-6],[13,28],[-17,-17],[-73,3],[-12,13],[4,11],[-38,40],[-14,1],[-8,9],[-78,-1],[-10,57],[-5,16],[-12,-9],[-1,1],[-66,-16],[-52,11],[-74,-43],[-80,-20],[-85,50],[27,18],[87,27],[-60,22],[-8,-33],[-7,1],[-184,41],[-2,85],[-10,3],[-1,52],[1,2],[0,0]],[[13536,2835],[-22,-15]],[[13477,2833],[-13,10],[26,36]],[[13490,2879],[22,13],[15,35]],[[13527,2927],[18,25],[19,-16],[14,91]],[[13578,3027],[131,-4],[4,-66],[89,102],[53,-83],[110,43],[2,34],[46,5],[156,159],[31,-10],[-9,-50],[150,-83],[57,68],[-37,146],[10,117],[41,32]],[[14412,3437],[13,-43],[81,1],[52,-94],[85,103],[-1,-75],[44,-21],[-21,-85],[48,-30],[-68,-32],[66,-133],[54,15],[-29,181],[36,46],[57,-21],[78,-125],[126,-105],[43,52],[-10,-40],[41,-17],[95,42],[33,79],[57,-35]],[[15638,4144],[4,-75],[51,-87],[13,-141],[0,-15],[2,-1],[3,-32],[2,-26],[-2,-1],[2,0],[2,-21],[49,49],[2,1],[6,4],[-4,-5],[-122,-171],[-5,-79],[-95,-117],[-3,28],[-27,-16],[38,-24],[-28,-91],[-8,-22]],[[14412,3437],[18,150],[-39,132],[118,263],[117,46],[-22,16],[45,82],[-43,86],[230,24],[-1,38]],[[13461,6104],[-22,-110],[28,39]],[[14340,4958],[-124,-47],[-55,155],[-111,-18],[2,90],[-125,-51],[-11,48],[-36,-31],[-51,62],[-64,-38],[14,-50],[-54,-38],[1,-78],[-78,45],[-36,-62],[-71,-6],[18,-81],[-57,-43],[25,-50],[-66,-41],[73,-14],[-119,-63],[60,-90],[-123,-80],[-25,-151],[9,-93],[52,-34],[7,-56],[-29,-35],[-274,-46],[-67,-83]],[[12388,5449],[15,119],[47,367],[302,-45],[3,-2],[102,-96],[144,-30],[121,46],[62,84],[100,135],[20,8],[5,26],[70,94],[4,-5],[19,-58],[59,12]],[[12025,6649],[-14,-5],[-29,73],[8,135],[2,21],[73,-209],[-40,-15]],[[13490,2879],[37,48]],[[13578,3027],[0,1],[0,-1]],[[13552,2987],[-74,-114],[-19,6],[-25,9],[-4,-3]],[[27135,4773],[-88,-117],[-132,-173],[-18,-25],[-152,-1],[0,1]],[[26745,4458],[19,188],[53,108],[-18,29],[54,24],[39,-32],[26,58],[29,-30],[63,42],[125,-72]],[[28097,5141],[-37,-16],[-365,-112],[-66,-14]],[[27629,4999],[17,44],[38,4],[-3,133],[51,91],[201,-84],[52,29],[112,-75]],[[26564,4563],[-3,2],[-82,-4],[-45,29],[-117,93],[-26,0],[-4,2],[0,-2],[-7,-1],[5,-29],[-72,30],[-147,61],[-71,29]],[[25703,5229],[47,290],[46,22],[-33,153],[126,82],[36,-69],[112,8],[24,117]],[[26061,5832],[61,-46],[23,-84],[48,17],[36,-74],[44,6],[-16,-110],[27,-107],[195,-56],[-91,-158],[20,-78],[49,4],[38,-72],[-88,-190],[64,-136],[74,-8],[19,-177]],[[27938,5882],[170,30],[46,-76],[91,-50],[102,36],[115,-57]],[[28462,5765],[-5,-74],[22,10],[86,-184],[86,81],[44,-23],[36,-104],[-39,-48]],[[28692,5423],[-32,5],[-219,33],[9,-20],[-136,-72],[-215,-227],[-2,-1]],[[27629,4999],[-6,-1],[-370,-114]],[[27253,4884],[-9,105],[199,142],[24,58],[-41,78],[-59,15],[-112,-70],[-33,24],[19,54],[-50,99],[27,81],[-72,34],[-21,71],[23,31],[-59,20],[-7,176],[21,84],[77,24],[-23,35],[45,214],[104,45],[2,48]],[[27308,6252],[66,-107],[135,-41],[28,-126],[197,-46],[13,-55],[80,-38],[111,43]],[[26596,6534],[-28,-70],[61,-44],[165,47],[55,-50],[94,-13],[-5,40],[155,15],[28,-90],[74,-6],[-25,-106],[70,23],[68,-28]],[[27253,4884],[-2,0],[-116,-111],[0,0]],[[26745,4458],[-165,95],[-16,10]],[[26061,5832],[-16,125],[61,48],[-4,62],[51,49],[-68,-3],[-14,91],[-41,6],[-28,95],[141,46],[-3,43],[27,-35],[79,36],[-50,37],[-2,115]],[[26194,6547],[68,15]],[[26262,6562],[251,24],[83,-52]],[[27809,9036],[-41,-111],[51,-43]],[[27819,8882],[-69,-87],[0,-192],[-75,-25]],[[27675,8578],[0,1],[-36,43],[8,-20]],[[27266,8765],[-23,257],[82,187]],[[27325,9209],[123,-23],[12,-104],[36,-15],[139,-11],[30,27],[18,-42],[126,-5]],[[28470,10851],[-52,-63],[-44,2],[-71,-255],[-80,-12],[70,-128],[-19,-40],[61,2],[49,-44],[-8,-50],[-52,-26],[26,-46],[-90,-27],[28,-22],[-37,-59]],[[28251,10083],[-35,53],[-56,-96],[-57,-26],[-26,-108],[-54,-46],[43,-76],[-88,5],[-60,-63],[-16,26]],[[27902,9752],[-64,-18],[-146,268],[31,39],[-45,206]],[[27678,10247],[-17,73],[-140,74],[-103,240],[-35,8],[26,143],[-53,90],[34,11],[10,71],[-40,129],[72,13],[-19,130],[-112,-38],[-14,24]],[[27332,11367],[102,35],[46,-21],[40,53],[105,-128],[29,31],[94,-11],[28,58],[92,37],[226,49]],[[28094,11470],[82,8],[85,-76],[-27,-37],[39,-86],[-51,-1],[-8,-48],[54,-62],[79,20],[-6,-107],[68,-68],[-5,-63],[45,-15],[-7,-63],[28,-21]],[[27056,8765],[-69,-8],[-61,184],[-48,10],[32,35],[-38,49],[-84,74],[-72,-36]],[[26716,9073],[-75,161],[53,-15],[-7,35],[53,7],[20,72],[73,-4],[-20,50],[99,83],[111,-97],[63,172],[33,15]],[[27119,9552],[38,-120],[42,-18],[52,43],[72,-85],[33,-60],[-37,-45],[6,-58]],[[28003,8622],[-1,0],[-2,-1],[-53,-17],[-43,14],[-66,20],[66,-33],[85,-43],[-11,-34],[55,8],[-133,-51],[-58,-22],[-60,11],[-15,15]],[[27751,8504],[-76,74]],[[27819,8882],[200,-92]],[[27902,9752],[-11,-131],[65,-39],[-28,-65],[32,-60],[-11,-87],[33,-35],[27,-186],[61,-15]],[[28070,9134],[-184,-30],[-3,-39],[-74,-29]],[[27119,9552],[41,70],[-2,194]],[[27158,9816],[-44,62],[25,78],[67,2],[-3,33],[68,-22],[48,82],[13,-28],[30,36],[-33,135],[29,85],[33,-12],[21,-117],[44,-15],[222,112]],[[28965,9853],[-130,-5],[-2,64],[69,49],[55,59],[69,9],[101,-34],[3,-46],[-165,-96]],[[29070,10217],[-7,14]],[[29063,10231],[5,-4],[2,-10]],[[29204,10791],[-57,-101],[-145,9],[-80,-91],[78,-84],[-25,-36],[42,-31],[-30,-54],[77,-43],[0,-95],[-40,-13],[38,-21]],[[29062,10231],[0,-34],[0,-27],[-34,-33],[48,-62],[-50,27],[-11,55],[-19,-20],[-37,-37],[144,-78],[-94,15],[-133,7],[14,-33],[50,4],[-47,-11],[-53,3],[-16,-60],[-19,-71],[-78,71],[17,-50],[-71,21],[-21,-26],[-36,35],[39,-42]],[[28655,9885],[-17,-7],[-100,53],[36,-3],[-12,52],[-99,65],[-75,-56],[-109,-18],[-15,57],[26,8],[-39,47]],[[28470,10851],[89,-30],[41,41],[77,-40],[120,65],[107,15],[53,-29],[60,34],[25,-77],[84,8],[78,-47]],[[26716,9073],[-188,-7]],[[26528,9066],[-197,-99],[-154,126]],[[26177,9093],[3,64],[-106,27]],[[26074,9184],[1,180]],[[26075,9364],[-24,117],[19,203],[45,14],[38,101]],[[26153,9799],[39,51],[93,28]],[[26285,9878],[19,-146],[87,-80],[29,53],[136,59],[62,130],[-66,71]],[[26552,9965],[37,90],[43,14],[-19,31]],[[26613,10100],[67,-13],[25,-124],[105,-4],[18,-80],[175,55],[12,-96],[143,-22]],[[26285,9878],[267,87]],[[28489,9580],[-53,-17],[-47,30],[45,11],[55,-24]],[[28288,9624],[15,-71],[-54,13],[39,58]],[[28641,9846],[55,-30],[-69,8],[14,22]],[[28655,9885],[2,-1],[101,-7],[1,0],[1,-1],[40,-62],[-110,23],[-53,12],[-15,-23],[64,-26],[-8,-39],[34,31],[64,-28],[-80,-72],[-27,19],[17,-29],[-35,-17],[-148,34],[-11,-45],[-36,39],[-124,-76],[-67,43],[-24,-72],[-19,12],[36,-66],[108,-10],[-3,-35],[70,18],[-95,-110],[58,18],[30,63],[14,7],[78,20],[-12,53],[79,15],[98,-40],[96,116],[32,40],[4,0],[94,16],[12,-1],[55,-87],[-32,-196],[26,-24],[-27,6],[27,-15],[-45,2],[50,-13],[-52,-22],[45,-9],[-41,-12],[41,3],[-38,-12],[32,3],[-36,-38],[29,-14],[-1,-11],[-22,-151],[-91,-53],[-50,-3],[-86,-4],[-198,23],[-40,25]],[[28467,9102],[-48,41],[-73,-30],[-276,21]],[[28639,8866],[-44,-106],[-45,108],[67,54],[22,-56]],[[28781,8779],[-55,-50],[-79,14],[-43,15],[39,89],[4,3],[-6,60],[87,8],[22,99],[40,5],[211,28],[-83,-146],[-137,-125]],[[28467,9102],[-51,33],[63,-65],[71,-10],[173,-37],[-4,-34],[-19,-7],[-11,-60],[-101,16],[-26,21],[22,-28],[-69,-59],[-97,-16],[126,15],[-38,-51],[44,12],[29,-87],[100,-29],[-90,-81],[0,0]],[[29799,10359],[-45,-7],[36,39],[18,12],[-9,-44]],[[29923,10402],[3,-37],[-26,7],[23,30]],[[29907,10419],[-39,-76],[-55,33],[10,32],[84,11]],[[29836,10472],[26,-37],[-33,5],[7,32]],[[29337,10767],[-8,-7],[-37,21],[24,-37],[174,-30],[153,41],[32,-33],[57,-4],[84,-8],[57,48],[93,-49],[42,49],[16,-60],[1,-8],[0,0],[-35,7],[-107,-107],[10,-9],[16,-14],[-19,-51],[-17,-33],[14,33],[-50,6],[-25,3],[-42,-38],[49,-31],[-48,-1],[-41,-29],[33,-33],[-2,-1],[-44,-16],[-49,-20],[48,-12],[52,-14],[45,30],[18,-89],[11,33],[40,5],[2,-33],[8,40],[43,0],[7,-62],[2,62],[-4,0],[-2,70],[55,-7],[-49,8],[-18,46],[80,-62],[1,-6],[-8,-56],[-66,-98],[-40,-52],[-63,-83],[-311,-220],[-224,-31],[-34,1],[-78,165],[79,6],[50,48],[11,29],[11,20],[-65,10],[51,-28],[-26,-35],[-125,-32],[-87,158],[111,-2],[-108,22],[-5,9],[-10,21]],[[29063,10231],[-1,1],[0,-1]],[[29204,10791],[70,24],[63,-48]],[[26613,10100],[13,205],[75,34],[-62,76],[27,56],[-178,-46],[0,203],[-54,251],[-32,65],[-82,-1]],[[26320,10943],[-3,113]],[[20043,10520],[-45,-201],[-67,-31],[-71,35]],[[19860,10323],[-81,72],[-91,4],[5,41],[-49,-16],[53,182],[46,-19],[19,40],[-10,80],[201,-85],[7,-90],[83,-12]],[[21083,10961],[9,-123],[91,-43],[52,-94],[-91,-80],[37,-120],[-77,-14],[-25,-101],[-60,-61],[32,-79],[-31,-82],[14,-159],[-113,-108],[56,-66],[42,-159],[-27,-86],[24,-60],[120,-145]],[[21136,9381],[-61,-19],[-44,50]],[[19193,8910],[44,135],[-50,68],[-62,-39],[-28,41],[121,170],[-11,78],[121,-22],[43,-81],[123,-6],[14,55],[-74,62],[34,55],[153,-18],[79,84],[-32,93],[150,26],[4,39],[45,14],[-64,44],[-49,-15],[10,121],[90,13],[-33,100],[-96,54],[-57,107]],[[19668,10088],[59,15],[50,176],[49,-9],[34,53]],[[20043,10520],[48,63],[100,-65],[96,12],[52,-90],[49,35],[128,-4],[-82,17],[37,59],[-59,20],[2,75],[-108,45],[-26,116],[63,63],[42,-47],[68,25],[18,81],[-45,16],[54,60],[139,-41],[53,50],[-112,51]],[[20560,11061],[42,126],[-29,66],[-87,51],[-33,86],[84,49],[45,-34],[38,65],[19,-34],[32,94],[104,82]],[[20775,11612],[65,-102],[53,37],[-6,-139],[53,-36],[34,33],[-10,-68],[50,-41],[-16,-65],[90,-42],[120,40],[20,-30],[-147,-189],[2,-49]],[[19013,11137],[-3,-41],[83,-52],[-5,-145],[42,4],[37,-50],[90,11]],[[19257,10864],[9,-82],[-47,-7],[-37,-97],[36,-52],[-42,-106],[22,-44],[-90,-31],[-45,-66],[57,-78],[-93,-33],[-15,-43]],[[19012,10225],[6,-86],[-38,-36],[12,-79],[36,-26],[-16,-35],[-81,-7],[-98,58],[-33,67],[-90,-116],[23,-64],[83,6],[73,-41],[19,-100],[-68,-43],[-86,39],[-107,-85],[-90,-248],[-116,-57]],[[18436,9367],[-11,12],[-61,59],[-41,-36],[-91,-81],[-117,-215],[-8,-113],[-16,65]],[[18091,9058],[1,4],[-11,35]],[[18081,9097],[-9,32]],[[18072,9129],[-16,52],[-36,10],[44,87],[-62,-6],[89,59],[-47,34],[10,63],[-44,39],[46,27],[-58,128],[46,31],[29,91],[-53,78],[32,133],[-26,44],[57,41],[-4,63],[32,17]],[[19507,10219],[-107,-124],[-13,37],[-66,-16],[-41,-92],[-109,89],[3,41]],[[19174,10154],[57,63],[-26,79],[41,16],[19,64],[90,42],[118,-14],[8,-79],[58,-50],[-32,-56]],[[19507,10219],[83,-107],[78,-24]],[[19012,10225],[134,3],[28,-74]],[[19257,10864],[58,-13],[93,151],[107,-25],[13,46],[49,-17],[-70,119],[33,18],[-11,100],[28,30]],[[19557,11273],[160,-28],[3,-44],[-67,-30],[-31,-87],[27,-61],[86,83],[82,-26],[73,22],[34,-57],[34,5],[164,163],[98,9],[60,-40],[55,75],[225,-196]],[[23132,7693],[-23,-92],[41,-26],[-9,-150],[-56,-75],[63,-39],[11,-60],[-47,-159],[56,-31],[-25,-17],[24,-49],[-32,-184]],[[23135,6811],[-257,-14],[-10,-122],[-92,-7],[-81,-101]],[[22695,6567],[-129,-52],[-30,56],[-87,39],[-4,36],[87,27],[-18,108],[-45,-21],[-65,51],[-244,22]],[[22160,6833],[-97,-53],[-1,109],[-51,34],[-32,-50],[-45,65],[-134,53],[-2,48],[-94,111],[130,143],[-35,90],[30,136],[-34,52]],[[23790,6357],[29,0],[17,-88]],[[23836,6269],[-82,-37],[-51,-82],[-136,18],[-30,-115],[-134,-119],[11,-101],[-43,-44],[-73,-253],[-31,-14],[55,-97],[-49,-32],[-53,-143],[58,-88]],[[23278,5162],[-76,-34],[10,26],[-176,192],[-46,-26]],[[22990,5320],[-44,-9],[39,255],[-32,17],[3,72],[-55,48],[-18,83],[21,139],[-36,64],[62,76],[-84,-4],[-81,207],[110,109],[-66,3],[-4,170],[-51,-20],[-59,37]],[[23135,6811],[37,-23],[68,75],[141,49],[168,4]],[[23549,6916],[70,-153],[-26,-175],[108,25],[88,-184],[72,-26],[-12,-46],[-30,0],[0,2],[-29,-2]],[[22291,5288],[-68,-12],[-45,-63],[-3,-25]],[[22175,5188],[-39,-14],[18,-132]],[[22154,5042],[-1,-7]],[[22153,5035],[-156,153]],[[21946,5546],[17,33],[-67,76],[10,187]],[[21906,5842],[119,-32],[33,-38],[-12,-50],[57,-7],[16,40],[96,-25],[-8,-45],[106,21],[-104,-154],[85,-117],[-3,-147]],[[22154,5042],[2,-9],[-3,2]],[[22291,5288],[31,-130],[75,-64],[43,74],[55,5],[6,47],[87,23],[51,-52],[21,-109],[83,-1]],[[22748,5004],[-9,-3],[-4,-29]],[[22576,4991],[-2,81],[-19,-96],[-3,-2],[-2,-2],[8,0]],[[22558,4972],[-36,-76],[28,-49],[-103,-22]],[[22447,4825],[-1,1],[-281,167],[13,186],[7,13],[-6,-2],[-4,-2]],[[22619,4973],[-1,-73],[23,8],[11,5],[67,-103],[-40,-21],[40,10],[12,-41],[6,-21],[-69,-45],[86,31],[-76,-71],[-14,-12],[-26,15],[-119,70],[-26,36],[-46,64]],[[22558,4972],[47,4]],[[23770,7547],[38,-68]],[[23808,7479],[-47,-7],[-57,-70],[-15,-59],[36,-54],[-52,-36],[9,-158]],[[23682,7095],[-133,-179]],[[23240,4902],[-18,-85],[-49,8],[62,-41],[-20,-33],[-24,-40],[48,-1],[-22,-30],[64,32],[-4,-51],[-62,11],[-195,44],[-3,38],[0,3],[92,12],[34,117],[-21,32],[68,41],[50,-57]],[[23278,5162],[36,-51],[-24,-95]],[[23290,5016],[-121,-18],[-20,-38],[-53,35],[-6,51],[-5,-44],[-55,-21],[-4,-17],[0,-2],[-4,-10],[-1,-1],[-1,-9]],[[22929,5072],[-1,57],[21,-9],[38,78],[-43,56],[46,66]],[[21417,4332],[12,-43],[-17,8],[5,35]],[[21688,5353],[-5,2],[-23,70]],[[21222,5603],[89,-38],[18,57],[120,37],[40,-94],[64,-6],[21,-72],[57,-30]],[[21631,5457],[7,-11],[23,-87],[-14,26],[-30,-32],[-6,28],[5,-29],[4,-14],[29,23],[57,-59],[81,-17],[17,-3],[147,-220],[62,-27],[-9,-34],[61,-1],[3,-84],[46,-2],[-6,-49],[0,0],[0,-1],[44,-16],[6,20],[3,-6],[0,-7],[-34,-50],[-15,-7],[-61,-95],[-83,-4],[-8,1],[-1,-1],[-69,-4],[-30,9],[-14,-9],[61,-35],[-22,-17],[1,0],[-30,-23],[-3,-1],[-71,-21],[-206,-60],[-52,1],[-47,50],[28,-100],[-48,-25],[32,-14],[-82,-85],[-67,-13],[62,-50],[-209,105],[-34,17],[-155,28]],[[23904,7279],[5,-126],[-48,-134]],[[23861,7019],[-93,60],[-77,-15],[-9,31]],[[23808,7479],[57,-49],[39,-151]],[[22160,6833],[-85,-185],[-32,1],[-91,-120],[23,-37],[-112,-45],[-1,-49],[-72,29],[-14,-23],[0,-75],[65,-12],[9,-135],[-12,-37],[-77,-27],[-46,-85],[44,-83],[147,-108]],[[21652,5448],[0,-1],[-8,31],[5,-29],[-11,7],[-10,13],[-2,1],[0,-4],[5,-9]],[[26075,9364],[-283,57]],[[25792,9421],[-25,151],[46,79]],[[25813,9651],[122,-7],[32,178],[79,24],[10,37],[72,-2],[25,-82]],[[24889,10196],[-35,-25],[7,-87],[-44,-64],[51,-34],[-5,-47],[-82,-23],[54,-109],[2,-131]],[[24837,9676],[-85,-79],[30,-128],[-72,-30],[-155,59],[-27,-128]],[[25341,9617],[49,-121],[57,39],[111,-37],[61,-35],[-1,-61]],[[25618,9402],[-57,-102]],[[25561,9300],[-27,-25],[-37,33],[-26,-46],[-116,-27],[-21,-74],[-142,-28]],[[25192,9133],[-37,21],[-138,-88]],[[25017,9066],[-45,73]],[[24972,9139],[17,30],[-46,103],[55,79],[-20,74]],[[24978,9425],[10,-26],[51,16],[3,43],[82,24],[14,-52],[67,16],[-6,60],[76,68],[-29,0],[7,62],[59,26],[29,-45]],[[26320,10943],[-103,28],[-99,-33],[-16,53],[-63,20],[-20,-70],[-53,-22],[24,-61],[-77,-57],[-27,74],[-98,-89],[-9,-63],[-31,1],[3,-72],[-80,30],[-50,-71]],[[25621,10611],[-67,63],[-127,-12],[-23,-130],[91,-130],[37,14],[55,-40]],[[25587,10376],[27,-70],[-24,-27]],[[25590,10279],[-73,14],[-30,-26],[24,-53],[-48,-23],[26,35],[-21,26],[-38,-36],[2,-59],[-50,11],[-19,57],[-78,-57]],[[25285,10168],[-138,7],[-61,68]],[[24977,9427],[-81,47],[-87,-102],[9,-62],[-34,12],[46,-93],[-20,-67],[162,-23]],[[25017,9066],[-126,-54]],[[24891,9012],[-110,35],[-50,-40],[-120,102],[-11,-167]],[[24837,9676],[59,-102],[-7,-45],[73,-29],[15,-73]],[[24977,9427],[1,-2]],[[29049,7218],[75,-90],[-36,-81],[58,-143],[-48,-94],[44,-54]],[[29142,6756],[-17,-79],[56,-18],[-25,-85],[62,-65],[-52,-80],[-50,27],[-47,-53],[16,-76],[-54,-107],[5,-74],[-73,-41],[-32,32],[-93,-55],[-27,-70],[-73,80],[-2,-43],[-49,-5],[4,-59],[-47,-3],[-25,94],[-157,-311]],[[27938,5882],[-35,155],[55,113],[105,103],[-52,42],[-99,-6],[-19,110],[56,34],[-16,72],[108,50]],[[28041,6555],[76,156],[62,39],[-4,64],[79,45],[21,60],[86,-10],[112,157],[31,-7]],[[28504,7059],[7,-50],[82,-22],[59,67],[55,-33],[11,42],[169,64],[12,43],[77,-18],[18,74],[55,-8]],[[29885,7534],[-54,15],[6,-32],[-42,-12],[27,-40],[-73,-80],[-16,-48],[38,-46],[-53,-70],[-7,-63],[57,-24],[-78,-181],[35,10],[75,-64],[-83,-121],[-41,33],[-53,-33],[-29,35],[-19,-71]],[[29575,6742],[-95,55],[6,45],[-27,-50],[-54,11],[-99,84],[-27,-105],[-137,-26]],[[29049,7218],[99,79],[2,134],[31,18],[-136,131],[-42,-1],[-23,39]],[[28980,7618],[166,19],[84,85],[382,48],[194,24],[2,0]],[[29808,7794],[14,-74],[-50,5],[3,-48],[110,-143]],[[27063,8240],[-14,-62],[47,-53],[55,-257],[-24,-36]],[[27127,7832],[-186,109],[-88,1],[-23,-60],[-92,3],[18,42],[-42,68],[-141,-48]],[[26573,7947],[9,115],[25,-12],[26,77],[92,58],[54,127]],[[26779,8312],[161,-131],[82,39],[41,20]],[[29885,7534],[287,-111],[40,20]],[[30212,7443],[-2,-2],[41,13],[28,-124],[42,-179],[31,-167],[1,-255],[-30,-96],[-56,-81],[-102,-51],[0,-4],[-1,0],[2,-44],[-15,30],[-66,-23],[20,-47],[-39,14],[23,-12],[-13,2],[43,-18],[-32,4],[-45,6],[-6,-3],[-4,-2],[-219,-72],[-16,-2],[-3,-3]],[[29794,6327],[-47,-2],[-29,31],[8,78],[-78,32],[119,142],[-10,28],[-52,-15],[-60,47],[-29,-25],[-52,39],[11,60]],[[27322,7657],[-67,-78],[4,-42],[-117,-4]],[[27142,7533],[-15,299]],[[27063,8240],[0,0],[30,-77],[171,-35],[176,21],[57,42],[-5,14]],[[27927,7554],[9,-39],[27,48],[78,10],[75,-42],[29,-185],[121,32],[90,-108],[49,3],[-31,-107],[37,-12],[45,53],[41,-25],[7,-123]],[[28041,6555],[-21,21],[24,37],[-70,-22],[-46,56],[-25,-30],[-54,15],[11,-60],[-61,-56],[8,49],[-87,-48],[-109,56],[-83,-9],[-5,68],[-82,106],[-73,21],[-97,92]],[[27271,6851],[48,2],[26,120],[-91,70],[93,93],[66,-20],[4,110],[136,11],[64,128],[-19,40],[58,10],[42,147]],[[27142,7533],[-104,73],[-7,40],[-57,-30],[-4,-105],[-59,-59],[-20,-85],[16,-216],[-49,-2],[-1,-93],[-49,-28],[-24,66],[-67,-58],[35,-48],[-31,-21],[18,-51],[129,-53],[-72,-85]],[[26796,6778],[-108,-67],[63,-103],[-95,-103],[-60,29]],[[26262,6562],[8,198],[-58,175],[75,174],[-48,234]],[[26239,7343],[131,2],[-2,120],[99,70],[2,76],[55,0],[46,133],[-13,120],[44,-2],[-41,84]],[[26560,7946],[13,1]],[[29794,6327],[-15,-14],[-28,-20],[0,-5],[-61,-55],[28,-19],[-360,-66],[-17,-15],[-29,-6],[-192,-180],[-21,-61],[-12,-18],[-12,-52],[-53,-159],[20,-142],[21,-152],[0,-1],[-371,61],[0,0]],[[28173,7968],[35,-83],[-66,8],[-21,41],[52,34]],[[28020,7844],[6,1],[-22,-75],[63,119],[67,-127],[51,96],[48,4],[-23,-65],[57,23],[-53,186],[94,2],[-35,-38],[30,-73],[113,-89],[2,-99],[-90,-90],[98,87],[141,-20],[8,-64],[3,52],[148,-2],[14,-10],[79,-51],[-51,-81],[43,40],[63,-36],[-56,63],[162,21],[0,0]],[[28160,8024],[27,-47],[-84,16],[57,31]],[[28832,7989],[147,-232],[-161,-92],[-76,53],[-42,30],[-3,-29],[-49,35],[33,-36],[-36,-5],[-100,44],[-121,-12],[-6,96],[-95,62],[-33,74],[32,-29],[44,33],[-35,48],[42,112],[95,-24],[32,-10],[98,-72],[155,-30],[79,-16]],[[29808,7794],[273,5],[207,61],[26,6],[98,3],[52,-34],[12,-150],[-64,-168],[-5,28],[-26,-21],[27,-16],[-138,25],[-58,-90]],[[27271,6851],[-46,18],[-5,-35],[-77,-11],[-100,37],[-95,-131],[-152,49]],[[19735,20427],[-49,-34],[11,-58],[-35,-41],[16,-149],[-127,-149]],[[19551,19996],[-180,77],[-57,90],[-51,-66],[-81,50],[-56,-25]],[[19126,20122],[-86,248]],[[19040,20370],[88,92]],[[19128,20462],[34,45],[22,-66],[75,34],[27,-37],[112,52],[49,-33],[35,72],[203,-28],[50,-74]],[[18530,19497],[-175,-164],[-80,79],[-91,-89]],[[18184,19323],[-26,76],[-165,-20]],[[17993,19379],[-31,52],[15,64],[-45,-46],[-81,30],[-67,-47],[-68,46],[-45,-39],[-77,243],[4,128]],[[17598,19810],[222,29],[50,-34],[-11,-62],[64,-16],[13,53],[149,-4],[3,52],[-60,16],[19,89],[39,36],[20,-30],[67,28],[54,111],[104,65],[48,-22]],[[17677,20144],[-30,-11]],[[17647,20133],[30,13]],[[17677,20146],[0,-2]],[[17581,20501],[137,-166],[-55,-90],[14,-99]],[[17677,20146],[-186,-69],[-9,64],[5,-66],[-127,-26],[-36,-3],[-69,-4],[-58,6],[24,17],[-95,-11],[-188,68],[-55,153]],[[17023,20534],[148,11],[-12,99],[-49,56],[16,34],[99,-73],[119,74],[87,-36],[-44,-62],[98,-18],[-36,-61],[87,2],[45,-59]],[[19126,20122],[-37,1],[1,-68],[-55,-61],[-202,-91]],[[18668,20298],[208,186],[-5,-69],[86,-10],[13,-43],[27,27],[43,-19]],[[18683,22619],[-221,-360],[-80,-24],[-13,-135],[123,-169],[44,4],[136,-104],[-15,-152]],[[18657,21679],[-69,-32],[-28,-100],[-78,28],[-60,-63],[-75,3],[-26,-76],[70,-131],[-179,-118],[-79,28],[-16,-45]],[[18117,21173],[-120,4],[-42,-32],[-42,191],[-59,-30],[-19,-92],[-41,-23],[-8,56],[-116,64],[-52,-154],[30,-53],[-183,-92],[-63,98],[12,34]],[[17414,21144],[3,0],[-2,3]],[[17415,21147],[4,8],[-7,6]],[[17412,21161],[53,35],[-68,26],[78,-17],[-26,24],[37,-11],[-14,37],[77,-52],[-53,54],[55,-7],[-109,34],[-22,46],[70,106],[100,-24],[-30,19],[-7,65],[-55,-28],[25,48],[-47,-57],[-31,55],[19,-49],[-40,6],[-10,-87],[-19,64],[4,-56],[-42,5],[-12,157],[-40,31],[-22,17],[8,6],[1,0],[28,7],[-20,0],[4,3],[34,26],[72,172],[37,20],[71,7],[82,58],[16,32],[-22,-31],[-15,60],[140,183],[-55,-43],[-11,83],[-24,-58],[-44,42],[-10,38],[52,39],[-54,-9],[-29,109]],[[19935,20658],[-3,-107],[-43,-20]],[[19889,20531],[-154,-104]],[[19128,20462],[-12,80],[44,45],[-93,22],[47,33],[-4,76],[287,151],[-65,222],[185,99]],[[19517,21190],[7,-87],[151,-47],[57,-56],[31,-129],[65,-79],[-26,-40],[133,-94]],[[18264,20301],[-104,5],[36,-60],[-104,-54],[-28,-63],[-40,24],[-101,-25],[-59,49],[-187,-33]],[[17581,20501],[84,24],[-7,45],[89,38],[35,-73],[69,-15],[-30,143],[110,14],[73,194],[122,14]],[[18126,20885],[60,-69],[-12,-106],[65,-110],[-51,-122],[88,-98],[-12,-79]],[[18410,20170],[-40,29],[57,38],[-6,35],[-157,29]],[[18126,20885],[61,5],[35,71],[-39,158],[-66,54]],[[18657,21679],[131,-42],[156,57],[51,-156],[54,-50],[-39,6],[0,-83],[38,-27],[62,23],[75,-102],[194,38],[28,-19],[-33,-35],[18,-53],[90,44],[35,-90]],[[19551,19996],[81,-212]],[[19632,19784],[-45,-212],[-73,-17],[9,52],[-69,32],[-37,76],[-86,-28],[-72,-91],[40,-134],[-45,-30]],[[19254,19432],[-72,135],[-11,136],[-53,-60],[-165,63]],[[17515,20014],[-56,33]],[[17459,20047],[19,4],[37,-37]],[[17598,19810],[-39,44],[27,38],[-18,69]],[[17568,19961],[7,-7],[2,-3],[-3,7],[-11,22]],[[17563,19980],[-2,7],[-2,1]],[[17559,19988],[-7,15],[43,32],[-45,-29],[-20,35],[20,28],[-27,-16],[1,-19],[-32,26],[136,63],[19,10]],[[17563,19980],[-4,8]],[[17993,19379],[-12,-78],[-78,-69],[43,-88],[-39,-167],[-38,-35]],[[17869,18942],[-116,-36],[-41,93],[-104,-100],[-24,-141]],[[17584,18758],[-59,-5],[-16,47],[-47,-6],[-69,62]],[[17393,18856],[19,86],[-124,25],[-76,99],[-89,8],[44,-115],[-39,-44],[-214,144],[19,116],[54,23],[6,73],[-47,18],[22,79],[94,127],[48,-23],[44,47],[82,143],[-20,152],[-11,20]],[[17205,19834],[-11,19]],[[17194,19853],[-4,7],[-3,4],[58,-13],[-42,24],[43,12],[-55,11],[34,21],[36,-42],[17,24],[-66,36],[29,70],[73,-73],[-45,69],[42,9],[13,4],[135,31]],[[17515,20014],[49,-49],[4,-4]],[[17415,21147],[-5,12],[2,2]],[[16911,20785],[0,7],[-6,230],[124,47],[-2,-147],[29,145],[226,111],[28,-13],[15,-6],[-15,-3],[-44,-5],[44,-20],[28,-12],[76,25]],[[22659,14087],[40,-134],[20,35],[84,-18],[39,-46]],[[22842,13924],[71,12],[-50,-105],[-137,33],[-190,-92],[-54,0],[-89,145],[-224,-323]],[[22169,13594],[-58,41]],[[22111,13635],[22,73],[-51,93],[-1,141],[34,40],[66,-34],[87,24],[10,47],[-82,25],[-4,32],[71,79],[1,79],[51,0],[-13,62],[64,28],[-64,19],[89,19],[99,123]],[[22490,14485],[43,-20]],[[22983,15273],[-29,-259],[47,-51],[31,-152],[57,-18],[-44,-66],[23,-76],[179,-83]],[[23247,14568],[-34,-38],[-61,46],[-101,-140],[-105,0]],[[22490,14485],[-38,52],[-45,-23],[-52,75],[-44,-12],[-66,50],[-6,119]],[[22239,14746],[107,113],[-12,24],[-47,34],[-62,-70],[-52,75],[-84,24],[-7,53],[48,116],[121,-11],[7,89],[44,52]],[[22302,15245],[109,-97],[84,-12],[104,89],[98,-4],[42,72],[129,27],[8,-56],[107,9]],[[22484,13091],[-315,503]],[[22842,13924],[23,94],[103,121],[-64,33],[-24,72]],[[23247,14568],[99,-48],[12,31],[56,-18],[114,59],[-9,-58],[74,-6],[14,-73],[60,-5],[-38,-55],[41,-5]],[[22111,13635],[-278,173]],[[21833,13808],[-129,89]],[[21704,13897],[-190,99],[-13,64],[-101,70],[19,97],[-51,106],[81,49],[-22,118]],[[21427,14500],[45,-8],[104,62],[25,-45],[51,45],[95,-71],[65,104],[67,-62],[125,23],[54,71],[-25,21],[206,106]],[[22983,15273],[43,33],[119,-8],[17,105],[53,16],[94,116],[-37,56],[71,11],[179,139],[-16,39],[117,149],[-29,22],[42,75]],[[23636,16026],[21,-15],[51,100],[54,1]],[[23762,16112],[-1,-92],[71,-50],[-66,-234],[55,-22],[-24,-71],[72,-19],[182,-370],[55,-289]],[[21427,14500],[-114,104]],[[21313,14604],[-24,69]],[[22284,15573],[-20,-194],[38,-134]],[[26713,16402],[-145,-128],[-210,-347],[-6,-11],[-23,-38],[19,0],[-77,-82],[-44,-54],[-1,-3],[-33,-35]],[[26193,15704],[-204,-157],[-134,-20],[-102,93],[-73,13],[-42,142],[-272,86]],[[25366,15861],[172,353],[-106,175],[42,208],[45,-3]],[[25519,16594],[242,-307],[329,-49],[158,151],[-28,205],[155,11],[150,78],[38,-152],[130,-102],[20,-27]],[[25519,16594],[-1,73],[-69,66],[-21,149],[-191,284]],[[25237,17166],[-38,162],[79,124],[-13,81],[-61,64],[32,10],[-33,0],[-3,58],[-44,22],[-3,98],[66,25],[-45,88],[52,76],[53,-66],[62,43],[-3,73],[154,144],[-73,137],[70,54],[-25,105],[102,63],[147,-25]],[[26157,18982],[7,-14],[48,-17],[-39,-20],[45,5],[4,-46],[-2,58],[14,-71],[11,32],[50,-9],[-103,90],[150,-86],[31,13],[-7,-84],[19,-40],[32,14],[-2,-51],[23,-2],[20,0],[-19,23],[-14,17],[14,-12],[38,-31],[-38,34],[-17,16],[18,4],[12,3],[-11,48],[-1,6],[2,-1],[59,-29],[16,-75],[26,3],[-13,49],[24,-11],[59,-82],[22,-31],[-25,14],[42,-158],[34,-27],[-46,-7],[48,3],[60,-105],[-65,0],[71,-4],[-1,-3],[-2,0],[-17,-30],[18,29],[6,-37],[-1,38],[53,-71],[87,-224],[42,-141],[143,-342],[103,-388],[-19,-406],[-1,-10],[-34,-54],[-1,-2],[-10,-76],[2,39],[-47,-13],[-1,-4],[-60,-1],[50,-11],[-82,-68],[-20,23],[17,-27],[-91,-58],[35,-3],[-32,-35],[-29,-22],[-18,26],[17,-28],[-38,7],[26,-24],[-136,-83]],[[24616,17405],[-106,-40],[-28,-71],[-28,10],[-12,-102],[-35,4],[-167,110],[13,72],[135,40],[-73,81]],[[24315,17509],[244,46],[55,-36],[2,-114]],[[24616,17405],[342,35],[89,-21],[100,-224],[90,-29]],[[25366,15861],[-29,-119]],[[25337,15742],[-200,61],[-106,-10],[-24,-92],[-216,-57],[-24,71],[-74,2],[-59,64],[-14,39],[44,55],[-44,117],[-49,-33],[-23,67],[-110,-31],[33,90],[52,-12],[10,418],[-188,-21],[-316,73],[-49,-40],[-31,36]],[[23949,16539],[8,37],[56,1],[-104,165],[38,95],[-47,61],[52,47],[-9,210],[-138,28],[101,146],[47,-16],[52,66],[66,-14],[28,115]],[[24099,17480],[55,20],[0,51],[78,25],[83,-67]],[[26193,15704],[33,34],[-2,-9],[10,17],[84,63],[2,-55],[-39,-25],[51,14],[11,-42],[9,-2],[197,-65],[-27,-55],[43,41],[78,-43],[115,-236],[-52,5],[54,-7],[0,-29],[-32,-215],[38,205],[85,6],[62,-43]],[[26913,15263],[-62,-153],[82,-61],[-260,-195],[-44,14]],[[25470,14496],[-166,170],[-119,231],[139,143],[-47,469],[16,58],[42,-26],[-37,51],[39,150]],[[23762,16112],[-78,185],[25,-10],[22,80],[83,18],[34,134],[101,20]],[[24099,17480],[-65,97],[-139,-22],[-3,-53],[-127,15]],[[23765,17517],[39,135],[-42,58],[44,81],[38,-30],[12,56],[-9,103],[-50,31],[24,123],[-48,56],[-50,-5],[48,74],[-46,42],[40,58],[-34,95],[-89,61],[-8,72],[70,75]],[[29110,15182],[20,-169],[135,17],[19,-97],[88,-50],[25,-92],[50,-44],[-63,-64],[73,-104],[-32,-171]],[[29425,14408],[-57,-5],[-13,-55],[-61,131],[-34,-87],[-59,-36],[-14,-125],[54,1],[8,-144],[-229,34],[-30,-51],[25,-19],[-45,-28],[80,-110],[182,-90],[83,-1],[102,-99],[-49,-59],[47,-243],[-64,-29],[-49,-180],[-43,29],[-65,-48],[39,-4],[-39,-50],[26,-142]],[[29220,12998],[-189,-45]],[[29031,12953],[-112,97],[-191,8],[-78,55],[-100,-59],[-127,4],[-56,-37],[-29,62],[-142,12],[-67,60],[151,212],[-104,18],[-54,49],[-74,-60],[-179,4]],[[27869,13378],[94,415],[-102,146],[-130,33],[-19,53],[102,106],[43,297],[-49,10],[8,84],[-42,47],[184,101],[43,9],[65,-57],[19,69],[102,-32],[71,58],[21,66],[-52,76],[-99,22],[62,60],[4,94],[54,96]],[[28248,15131],[265,-101],[132,219],[78,-20],[77,-87],[81,66],[63,-80],[-5,40],[93,63],[78,-49]],[[30787,14574],[57,-227],[68,1],[45,-73],[117,33],[100,-85],[-106,-51],[-33,-61],[47,-18]],[[31082,14093],[-72,-78],[-47,0],[-47,-84],[-155,-12],[-54,36],[-12,69],[-63,-24],[-39,86],[-94,34],[-59,132],[-58,7],[-44,-47],[-34,-36],[-4,-5],[-55,104],[-23,-1],[-102,-3]],[[30120,14271],[-8,-1],[46,138],[-53,-24],[-92,51],[23,115],[-24,42],[-28,-40],[-61,1],[65,-103],[-108,-52]],[[29880,14398],[-43,106],[-49,25],[-39,-67],[-44,96],[-51,-69],[-80,32],[-36,-149],[-113,36]],[[29110,15182],[87,9],[39,62],[159,20],[42,71],[144,-90],[-13,62],[34,-12],[49,46],[62,-80],[64,75],[110,-47],[11,-37],[59,28],[45,-74],[58,11],[20,-141],[127,-174],[93,-33],[29,-56],[26,17],[-10,-87],[65,-64],[-17,-60],[48,-12],[21,62],[59,22],[39,-85],[43,20],[21,-32],[51,15],[1,-43],[20,27],[91,-28]],[[31364,13796],[-43,-8],[-72,73],[-104,30],[-118,-127]],[[31027,13764],[-69,99],[129,163],[-5,67]],[[30787,14574],[5,93],[207,95],[60,87],[108,43]],[[31167,14892],[68,-99],[119,-397],[20,-380],[-10,-1],[0,-34],[-21,-58],[21,-124],[0,-3]],[[28471,16119],[24,-408],[82,1],[14,-37],[-44,-71],[-36,21],[-12,-122],[-191,-24],[-8,-65],[94,-137],[-146,-146]],[[27869,13378],[-84,22],[-93,-41],[-236,-4],[-49,-57]],[[26913,15263],[5,-3],[53,-7],[-20,22],[28,16],[9,-32],[75,30],[88,-24],[-31,-21],[35,18],[-21,-32],[40,10],[-20,-32],[25,16],[26,-51],[26,-72],[53,-152],[11,-32],[-9,32],[-44,160],[21,23],[-22,-18],[-9,22],[-26,64],[23,3],[-37,28],[44,18],[26,11],[-26,-2],[-46,-4],[47,44],[89,84],[28,-22],[-20,27],[84,80],[35,2],[15,-57],[-14,158],[107,306],[30,86],[155,141],[84,1],[-24,-18],[44,-41],[31,46],[2,-36],[16,26],[-7,-33],[41,6],[-47,59],[90,-23],[-12,-35],[37,7],[-10,34],[147,19],[-8,-39],[-91,4],[15,-24],[106,6],[18,1],[46,31],[-60,-20],[41,49],[66,-37],[98,15],[8,-11],[-13,-34],[4,34],[-48,0],[-1,-60],[80,43],[-13,30],[33,7],[-42,1],[93,9],[1,-1]],[[28210,16164],[168,-45],[-88,22],[-16,-27],[7,29],[-23,-22],[-23,27],[-8,-24],[7,31],[-17,-24],[-22,33],[19,-32],[-34,13],[-10,-30],[11,48],[-17,0],[-66,-3],[66,7],[19,1],[27,-4]],[[28865,16045],[-62,-11],[32,21],[30,-10]],[[28844,16066],[-78,-47],[22,19],[-34,24],[32,-17],[24,35],[34,-14]],[[28762,16107],[17,-57],[-52,58],[17,-37],[-13,23],[-40,-35],[36,62],[35,-14]],[[28471,16119],[93,-26],[99,23],[17,-104],[56,-15],[108,39],[12,-28],[4,33],[19,-4],[-7,6],[19,13],[47,-44],[120,27],[23,5],[93,-5],[-12,-41],[60,60],[-83,38],[-79,-10],[-21,-3],[-36,-11],[51,58],[8,-3],[88,-29],[11,-4],[344,-115],[447,-81],[86,-15],[179,-120],[217,-146],[386,-346],[80,-71],[267,-308]],[[30120,14271],[-126,-141],[-86,10],[-43,99],[-37,5],[-2,67],[-54,-20],[-27,91],[95,-19],[40,35]],[[31027,13764],[78,-128],[53,13],[32,-46],[-72,-139],[-37,19],[-36,-47],[-48,2],[-98,80],[-55,-21],[-30,-88],[-85,55],[-66,-34],[-82,52],[-104,-82],[-79,78],[-28,-49],[68,-29],[-3,-56],[-74,-4],[-134,-88],[-50,-121]],[[30177,13131],[-92,-88],[-91,17],[-80,-102],[-139,-82],[-440,121],[-115,1]],[[20060,22339],[36,-92],[61,15],[27,-31],[44,-137],[131,-17],[196,-271],[-40,-91],[-59,-37],[3,-54],[57,-36],[17,-78],[39,-1],[55,-184],[-187,-124]],[[20440,21201],[-15,46],[-30,-41],[-219,-19],[9,-95],[-41,-36],[73,-120],[-81,-12],[-9,-168],[-119,14],[-73,-112]],[[19110,22777],[43,-40],[37,17],[29,-73],[163,71],[95,-26],[78,-98],[61,37],[34,-53],[122,34],[118,-112],[46,-148],[124,-47]],[[22981,24011],[62,-90],[99,11],[35,-94],[-187,-9],[-44,-36],[-33,-206]],[[22913,23587],[-68,-40],[35,-48],[-26,-39],[38,-133],[-35,-13],[-64,-161],[-70,10],[2,73],[-108,21],[-44,170],[-111,-42],[-89,11],[-83,-161],[58,-70],[-4,-117],[85,-117],[43,-184],[-29,-51],[20,-27],[35,25],[-9,-146],[32,-67],[62,12],[129,-115],[81,26],[56,-70],[-24,-47],[228,-148],[-10,-138],[-83,-3],[13,-47],[-62,-68],[63,-50],[-62,-99]],[[22563,21450],[-95,73],[-35,-9],[-18,105],[-159,3],[-31,137],[-70,100],[-83,6],[-28,90],[59,14],[-39,30],[25,212],[-186,173],[-115,24],[-32,156],[-97,-52],[-30,74],[-31,-89],[-175,-63],[-92,71],[-45,-21],[29,-21],[-19,-33],[-84,-24],[-54,36],[49,90],[-2,106],[-65,34],[31,13],[-36,56],[-81,-16],[-28,76]],[[21026,22801],[-62,124],[88,-1],[75,47],[41,141],[-17,115],[104,38],[-20,33],[28,35],[66,3],[70,190],[-41,92],[92,29],[-6,106],[94,40],[97,-22],[-11,28],[43,12]],[[22502,21035],[-79,13],[-41,52],[-103,0],[26,-79],[-28,-14],[-10,-122],[-45,56],[-76,1]],[[22146,20942],[39,15],[10,74],[-30,-1],[39,29],[-44,-15],[6,53],[-114,27],[13,33],[-172,-17],[-28,-77],[-78,-3],[-2,-85],[-89,-26],[-109,49],[-151,-23],[-9,-42],[-96,33],[-12,-41],[-38,44],[-62,-33],[-94,12],[-10,35],[-89,-10],[-68,45],[-33,-56],[-28,9]],[[20897,20971],[-55,67],[-92,-8],[-88,91],[-128,10],[34,-50],[-72,7],[-56,113]],[[20060,22339],[104,96],[253,97],[21,54],[155,59],[35,47],[-21,35],[203,-42],[57,77],[159,39]],[[25320,22360],[51,-55],[98,-45]],[[22913,23587],[98,14],[118,-101],[113,67],[383,-137],[89,-146],[123,74],[61,-70],[66,10],[73,84],[53,6],[25,-41],[86,49],[32,-164],[166,-172],[-115,-74],[-24,-143],[46,-181],[-61,-156],[96,-33],[60,20],[48,-52],[39,41],[54,-13],[189,87],[109,-11],[40,33],[152,-52],[122,48],[64,-213],[102,-1]],[[23721,24346],[22,-2],[53,-41],[7,-10],[64,-104],[24,9],[68,16],[42,-31],[19,-33],[28,-3],[4,-3],[35,-98],[131,-26],[53,-13],[109,-62],[68,-73],[74,-90],[-3,-57],[-16,-30],[12,-40],[0,-4],[2,-3],[12,-37],[37,-19],[25,-27],[18,6],[20,-10],[83,-97],[6,-16],[0,-1],[87,-237],[47,-46],[29,-197],[69,-28],[-1,0],[-36,-71],[85,-136],[8,-4],[1,-2],[33,-16],[270,-144],[-4,-2],[-26,4],[-8,-26],[-18,-11],[5,-27],[-3,-8],[6,-12],[13,-76],[45,-48]],[[22946,19648],[-53,-37],[-168,-12],[-41,-72],[-51,52],[-115,-36],[-59,38],[-23,-99],[-47,-16]],[[22389,19466],[-68,126],[34,246],[137,12],[0,30],[-63,72],[-20,-24],[-9,26],[-119,1],[-100,139]],[[22181,20094],[-40,10],[9,64],[52,-2],[14,40],[-71,95],[-3,146],[34,36],[-98,89],[29,36],[-80,85],[122,44],[-30,183],[27,22]],[[22308,17089],[14,-52],[43,-8],[3,-70],[187,-129]],[[22555,16830],[42,-60]],[[22597,16770],[-186,-113],[-17,-102],[42,-68],[107,-3],[-2,-155]],[[22413,16274],[-12,77],[-73,88],[-95,44],[-57,-33],[-97,58]],[[23765,17517],[-10,-263],[-20,43],[-104,-16],[-55,91],[-55,-35],[-109,60],[-165,-50],[5,61],[-62,49],[-119,6],[-62,128],[-228,-132]],[[22781,17459],[-62,-57],[-259,-37]],[[22489,17854],[185,156],[-7,28],[-48,-10],[-17,62],[72,-5],[-22,69],[46,33],[-12,76],[57,37],[-1,53]],[[22742,18353],[108,102],[149,21],[1,-30],[49,5],[57,56],[29,181],[99,66],[53,95]],[[22447,15735],[-20,-47],[-58,-17]],[[23071,16156],[-29,-26],[-63,17],[-12,-168],[-96,24],[-39,-39]],[[22597,16770],[75,-19],[-3,-38],[59,-29],[-29,-69],[126,21],[-15,-53],[39,-78],[154,-147],[-69,-71],[56,-29],[-13,-48],[94,-54]],[[22781,17459],[25,-36],[-49,-155],[-126,-124],[126,-113],[-58,-62],[31,-117],[-82,15],[-93,-37]],[[23636,16026],[-49,39],[63,93],[-23,79],[-126,54],[-46,-26],[-91,154],[-199,-258],[-94,-5]],[[22720,9954],[-11,28],[-82,-15],[-40,89],[-60,-8],[-22,-79],[-143,67],[-32,-122]],[[22330,9914],[-17,37],[-77,14],[-58,-80]],[[22178,9885],[-6,46],[-53,-10]],[[22119,9921],[-48,167],[35,35],[-46,18],[9,136],[15,32],[113,-6],[-17,41],[48,30],[-35,70],[20,44],[-37,31],[14,55],[-124,113],[23,37],[-89,33],[2,105],[-49,57],[-74,2],[-23,-38],[-84,86],[-50,-49],[-120,-25],[-88,114]],[[21514,11009],[106,506],[32,38],[91,-19],[-19,80],[83,27],[122,-125],[84,37],[-40,84],[-68,8],[82,89],[53,-5],[51,174]],[[22330,9914],[96,-74],[123,-34],[-43,-48],[1,-104],[55,-16],[-44,-33],[2,-65],[-98,-19],[-58,74]],[[22364,9595],[-149,133],[-37,157]],[[22408,8606],[69,296],[-79,-62],[-119,23],[-63,-35],[76,135],[-24,40],[23,39],[68,19],[72,100],[-133,43],[-52,-37],[-28,20],[35,114],[85,-11],[70,49],[14,64],[-58,192]],[[21136,9381],[127,42],[22,-22],[70,63],[92,17],[167,-48],[32,51],[44,-22],[17,71],[202,-36],[71,91],[14,251],[125,82]],[[21083,10961],[161,-167],[63,78],[-27,34],[111,0],[42,20],[-23,56],[104,27]],[[19028,6499],[-75,67],[-172,-1],[-77,-106],[-85,-19],[-120,-94],[-174,-65],[-57,51],[-9,-49],[46,-24],[-46,1],[10,-75],[-105,-36],[-30,100],[25,30],[-42,72],[-47,-15],[-32,-83],[-69,-37],[-33,21],[7,-43],[-29,30],[24,72],[-81,79],[-39,-59],[-219,65]],[[17599,6381],[-13,65],[115,-42],[-32,83],[32,128],[-171,105],[14,91],[94,-56],[40,128],[144,10],[-17,93],[-85,30],[5,88],[119,102],[35,-27],[52,47],[-32,28],[17,32],[-55,3],[1,113],[-99,26],[3,71]],[[17085,7467],[1,-1],[9,-19]],[[17095,7441],[-19,-55],[15,29]],[[17599,6381],[-91,-25],[-22,-131],[-61,18],[-32,-64]],[[17393,6179],[-73,84],[-39,0],[-71,-61],[66,-62],[-93,-74],[-74,-34],[-46,67],[-57,5],[-45,-35],[20,61],[-66,30],[-276,35],[-67,97],[58,45],[-4,51],[-79,-26],[-143,131],[31,70],[81,20],[64,88],[132,33],[-8,32],[93,104],[55,-8],[47,46],[-7,15]],[[16892,6893],[105,63],[-40,-124],[30,9],[61,154],[10,-14],[45,-14],[-45,24],[-4,86],[-64,124],[29,289],[-71,40],[107,-34]],[[16897,5342],[-97,69],[-12,86],[168,-10],[76,108],[82,42],[6,170],[103,29],[-18,42],[201,179],[-28,49],[15,73]],[[20211,14476],[-19,-104],[-77,-12]],[[20115,14360],[-54,147],[-144,52],[-8,59],[71,80],[13,161]],[[19993,14859],[28,120],[134,12],[88,63]],[[20243,15054],[98,-75],[2,-42],[-81,-182],[67,-29],[-132,-138],[14,-112]],[[20967,14837],[-140,37],[-50,61],[-52,-26],[-19,41],[-81,8],[-33,72],[57,73],[-25,52],[-74,15],[-35,-71],[-109,94],[-36,-27],[-149,63]],[[20221,15229],[-50,89],[94,123],[2,118],[-74,-3],[-58,120],[-60,-5],[-40,75],[-86,57]],[[19949,15803],[212,121],[92,-49],[42,52],[50,-8],[20,32],[-66,89],[198,76],[-63,88],[-10,132],[38,0],[46,74],[77,-6],[53,-19],[51,-84],[34,59],[-29,77],[47,29]],[[21313,14604],[-167,-155]],[[21146,14449],[-119,-54],[-115,22],[-37,-35],[10,-62],[88,-88],[32,9],[-27,-139]],[[20978,14102],[-87,-15],[-40,33],[-138,-33]],[[20713,14087],[-25,58],[-95,50],[-78,-35],[-57,-89]],[[20458,14071],[-59,74],[19,85],[-91,103],[33,42],[-39,35],[22,34],[-69,26],[-35,-27],[-28,33]],[[20243,15054],[-43,129],[21,46]],[[19432,16131],[-174,-89],[-23,-64],[41,-143],[-168,45],[-83,-95],[-31,23],[-65,-29],[1,-111]],[[19436,16836],[91,-137]],[[20115,14360],[-130,-77],[-2,-45],[-62,18]],[[19921,14256],[-92,-44],[-61,120],[-92,14],[-110,-92],[-3,-56],[-82,-14],[22,-93],[-53,-19],[80,-55],[14,-105],[127,-1]],[[19671,13911],[-6,-103],[-51,-45],[25,-45],[-145,-71],[74,-166],[-27,-87],[35,-129]],[[19576,13265],[-8,-33]],[[19568,13232],[-308,77],[-77,54],[23,33]],[[19132,14883],[112,10],[89,-144],[86,93],[88,0],[30,57],[52,-6],[41,207],[98,-71],[47,23],[12,68],[88,-67],[-31,-34],[99,-29],[50,-131]],[[19808,16096],[136,-117],[-61,-151],[66,-25]],[[21146,14449],[36,-73],[-29,-13],[-4,-196],[-66,-57],[-105,-8]],[[29982,10866],[6,-21]],[[29988,10845],[-5,4],[-1,17]],[[29610,11192],[-26,9]],[[29584,11201],[18,6],[8,-15]],[[28569,11915],[36,-43],[129,16],[38,-57],[37,16],[-4,-38],[138,37],[40,-245],[65,-19],[-6,-58],[99,15],[97,-157],[31,50],[56,-66],[134,30]],[[29459,11396],[39,-50],[-44,-78],[17,-62],[50,-24],[61,19]],[[29582,11201],[53,-55]],[[29635,11146],[8,-14]],[[29643,11132],[23,-18]],[[29666,11114],[7,-8],[71,-73],[25,-26],[167,-45],[26,-163],[-99,25],[-70,-44],[-59,8],[-37,6],[-74,79],[-100,-89],[-134,28],[-52,-45]],[[28094,11470],[-90,227],[55,163],[140,-14],[20,123],[53,-10],[21,-74],[47,26],[11,-56],[51,-9],[29,91],[55,15],[83,-37]],[[29648,11132],[-5,0]],[[29635,11146],[13,-14]],[[29606,11488],[20,-48],[77,5],[50,-86],[-14,-139],[66,-41],[-43,-45],[-81,-1]],[[29681,11133],[-11,5],[-38,43],[-17,9],[-5,2]],[[29584,11201],[-4,2],[2,-2]],[[29459,11396],[6,94],[83,-4],[11,31],[47,-29]],[[28569,11915],[66,59],[6,69],[-69,44],[36,183],[-89,64],[5,70],[80,9],[54,-35],[-3,43],[41,2],[-40,86],[92,76],[42,-35],[-14,38],[52,-6],[94,73],[-17,75],[21,44],[75,24],[-13,81],[43,74]],[[30177,13131],[84,-50],[105,-164],[-158,-135],[1,-79],[80,-60],[0,-86],[53,-44],[-139,-61],[-34,42],[9,59],[-60,27],[42,-73],[-5,-97],[-117,-36],[-43,-96],[-118,-60],[-18,-142],[46,-17],[-8,-54],[-43,-92],[-78,-20],[-69,-139],[-66,-45],[25,-55],[-60,-166]],[[25152,7869],[31,-80],[-70,-156],[0,-101]],[[25113,7532],[-90,-90],[-110,6],[6,-78]],[[24919,7370],[-31,-16],[-13,44],[-92,7],[-17,102],[25,17],[-76,13]],[[24715,7537],[-4,56],[-53,45]],[[24658,7638],[44,38],[-26,39],[53,86]],[[24729,7801],[46,48],[31,-31],[69,108],[79,20]],[[24954,7946],[73,18],[95,-105],[30,10]],[[25444,7537],[-66,-45],[-13,-121],[-52,8],[-24,-38]],[[25289,7341],[-102,222]],[[25187,7563],[62,153],[74,80],[48,2]],[[25371,7798],[-1,-69],[69,-51],[16,-71],[-38,-36],[27,-34]],[[24919,7370],[23,-171],[-29,-141],[-114,10],[27,-50],[-38,-107],[86,-88],[5,-89],[-32,-13]],[[24847,6721],[-76,54],[-40,-45],[-145,45],[-1,112],[-81,44],[-70,-75],[-55,-4],[-11,-53],[-49,16],[27,38],[-24,22],[-65,27],[-61,-31],[10,-93],[-51,-43],[-47,127],[-74,-60],[-56,73],[-76,-31],[-50,72],[9,103]],[[23904,7279],[83,20],[49,154],[123,-10]],[[24159,7443],[-4,-39],[90,-113],[53,18],[170,-107],[30,42],[-45,57],[27,85],[32,-17],[59,80],[28,-34],[77,51],[-41,71],[80,0]],[[25289,7341],[20,-161],[120,-40],[-75,-138],[47,-25],[31,-53],[-30,-32],[67,-66],[-91,-20],[-1,-35],[101,-55],[60,48],[40,-76]],[[25578,6688],[-107,-60],[-7,-36],[-123,-23],[2,-26]],[[25343,6543],[-138,-75],[-276,-42],[-83,-59]],[[24846,6367],[1,354]],[[25113,7532],[74,31]],[[25639,7493],[3,-105],[54,-3],[40,-73]],[[25736,7312],[-8,-130],[-57,-54],[-28,-108],[29,-104],[29,7],[-23,-133],[47,-111],[-38,-27]],[[25687,6652],[-109,36]],[[25444,7537],[71,71],[124,-115]],[[24533,8085],[37,-28],[-6,-65],[58,-28],[24,-129],[25,17],[58,-51]],[[24658,7638],[-104,-55],[-99,48]],[[24455,7631],[-20,73],[-43,-9],[-14,55],[-134,112]],[[24572,8262],[155,-67]],[[24727,8195],[6,-95],[197,-82]],[[24930,8018],[24,-72]],[[24455,7631],[-85,-61],[-148,-8],[7,-77],[-70,-42]],[[26118,7533],[38,-195],[54,82],[29,-77]],[[26194,6547],[-498,12]],[[25696,6559],[14,88],[-23,5]],[[25736,7312],[100,77],[37,95],[83,14],[41,84],[121,-49]],[[23790,6357],[29,2],[0,-2],[-29,0]],[[24846,6367],[-221,-56]],[[24625,6311],[-39,-32],[-90,28],[-13,-61],[-116,25],[-71,-37],[-85,49],[-203,-91],[-172,77]],[[23836,6269],[-17,88],[30,0],[12,46],[-72,26],[-88,184],[-108,-25],[26,175],[-70,153]],[[21704,13897],[-81,-58],[-209,-44],[8,-96],[118,-159],[-2,-35],[-91,-19],[44,-11],[-28,-29]],[[21463,13446],[-65,-50],[-86,34],[-17,-30]],[[21295,13400],[-87,39],[-52,-105],[-63,5],[-13,-46],[-32,5],[-230,398]],[[20818,13696],[-1,43],[75,18],[-61,35],[-21,125],[-55,48],[33,34],[-75,88]],[[21833,13808],[-35,-95],[71,-16],[1,-191],[-16,-51],[-83,7],[-64,-66]],[[21707,13396],[-100,17],[-39,-44],[-105,77]],[[22389,12344],[-80,17],[-85,89],[-64,-84],[-242,226],[-92,15]],[[21826,12607],[38,80],[-88,48],[-23,90],[-38,6],[25,36],[-51,23],[3,79]],[[21692,12969],[98,123],[-20,70],[43,118],[-106,116]],[[20751,12837],[42,-208],[84,-75],[31,25],[115,-81],[54,14],[-27,-82],[22,-61],[71,1],[74,-72],[-11,-31],[54,-3],[-57,-60],[14,-65],[58,60],[83,-48],[44,81],[96,-34],[43,87],[42,-22],[67,125],[129,58],[-40,110],[71,2],[16,49]],[[20775,11612],[31,17],[-101,23],[16,61],[-69,41],[-45,-18],[0,49],[-49,36],[-44,-74],[-39,76],[-68,16],[-14,-42],[28,-6],[-56,-71],[-55,103],[-68,12],[27,73],[-76,-4],[57,45],[18,139],[55,73],[-52,177]],[[20271,12338],[-8,125],[64,-5],[90,60],[16,126]],[[20433,12644],[38,19],[11,97],[-73,146],[51,33]],[[20460,12939],[194,-5],[97,-97]],[[20751,12837],[-11,86],[100,-49],[34,79],[44,12],[5,-87],[75,-25],[28,64],[71,13],[38,-47],[78,49],[65,121]],[[21278,13053],[101,-24],[46,-109],[84,81],[32,-54],[29,46],[122,-24]],[[25457,4922],[-105,13],[7,-20],[-58,-1],[-29,3],[-60,-17],[-105,-32],[-2,0]],[[25105,4868],[-67,51],[-36,174]],[[25002,5093],[9,73]],[[25011,5166],[71,-62],[255,-2],[3,48],[31,-40]],[[24442,5306],[30,-54],[-55,-17],[37,-40],[33,32],[40,-17],[75,88],[21,-76],[30,72],[19,-74],[36,-5],[40,60],[35,-93],[29,80],[56,-34],[-4,-36],[62,72],[38,-41],[48,16],[-1,-73]],[[25002,5093],[-43,14],[-83,-57],[-41,41],[1,-101],[-71,-4],[31,-192]],[[24796,4794],[-1,0],[-320,-15],[-39,-10],[-41,-1],[-176,-52],[-228,-56],[-31,-19],[-39,-12],[-26,-28],[-55,-33]],[[23840,4568],[-2,4]],[[23838,4572],[3,5],[2,2],[1,1],[1,1],[0,0],[1,2],[-38,53],[-2,-1]],[[23806,4635],[-3,6],[44,40],[-15,48],[61,16],[0,82],[47,-22],[89,39],[-7,192],[33,71],[93,19],[-14,202],[17,-29],[96,28],[195,-21]],[[23840,4568],[-6,-4],[4,8]],[[24625,6311],[42,-146],[-17,-50],[25,-2],[-25,-80],[33,-37],[-8,-68],[-32,-56],[-73,-12],[-22,-48],[32,-42],[-53,-19],[-27,-191],[-48,19],[-58,-59],[38,-99],[58,-35],[-44,-19],[-4,-61]],[[23806,4635],[-70,-66],[45,19],[31,-64],[32,31],[3,-3],[-105,-158],[-13,-20],[-89,85],[-15,26],[-62,39],[-47,44],[-64,27],[-78,49],[-26,33],[0,43],[22,-9],[-12,-19],[3,-12],[18,4],[39,64],[44,70],[35,-15],[65,-29],[57,27],[54,136],[-19,18],[-17,-89],[-70,-64],[-70,43],[-9,5],[10,13],[44,59],[-31,2],[9,60],[-21,2],[-14,1],[14,-66],[0,-2],[0,-1],[-35,-81],[-46,37],[-6,102],[-57,10],[15,-216],[-104,88],[30,160],[-6,-2]],[[25696,6559],[-23,-206],[-87,-69],[-115,-14]],[[25471,6270],[-22,67],[-40,-11],[-13,63],[111,154],[-164,0]],[[25471,6270],[1,-114],[-33,-23],[-13,-97],[23,-19],[-83,-23],[-7,-45],[38,-20],[-27,-45],[41,-8],[-27,-303],[49,-51],[-22,-37],[25,-125],[-62,-23],[-14,-179],[29,-27]],[[25105,4868],[-309,-74]],[[20022,13278],[94,-82],[-144,-75],[106,-111],[136,64],[58,-32],[62,105],[94,-40],[42,26]],[[20470,13133],[70,-26],[-80,-168]],[[20433,12644],[-33,55],[-191,-2],[-81,-66],[-6,-84],[-54,-21],[-2,-44]],[[20066,12482],[-269,46],[20,130],[-118,5],[33,118],[-55,52],[11,26],[-28,-11]],[[19660,12848],[54,41],[-56,188],[35,48],[-24,37],[-73,-5],[-28,75]],[[19576,13265],[87,-20],[113,99],[42,-68],[50,16],[17,-41],[20,73],[55,1],[2,-73],[60,26]],[[19270,12711],[-27,-268],[71,-28],[60,-88],[-35,-146]],[[19339,12181],[26,-54],[-42,-4],[-40,-150],[28,8],[17,-73],[58,-30],[74,19]],[[19460,11897],[42,-111],[74,-17],[-95,-93],[144,-113],[-29,-97],[25,-48],[-25,-73],[-52,-14],[13,-58]],[[18821,12943],[-18,-183],[-40,-54],[194,21],[20,-62],[89,21],[69,113],[36,-95],[76,34],[23,-27]],[[20271,12338],[-99,-78],[-149,1],[4,170],[39,51]],[[19339,12181],[66,50],[194,-96],[-42,-148],[-97,-90]],[[19270,12711],[18,24],[-34,23],[67,68],[11,79],[106,-30],[61,-137],[59,15],[-11,-79],[113,174]],[[25285,10168],[92,-119],[-104,-76],[5,-133],[101,-142],[-6,-68],[-32,-13]],[[25590,10279],[18,-64],[-36,-16],[30,-56],[-45,-80],[107,-84],[-56,-34],[76,-97],[9,-190],[113,40],[27,-9],[-20,-38]],[[25792,9421],[-174,-19]],[[25587,10376],[81,-24],[-14,77],[-30,-2],[25,73],[-28,111]],[[29648,11132],[18,-18]],[[31364,13796],[71,-263],[-21,-50],[3,26],[-141,-11],[136,-18],[-64,-116],[0,-5],[-1,-1],[-8,-105],[-12,-144],[-75,-209],[-85,-241],[-8,2],[-22,-36],[-45,-37],[-47,-110],[0,-6],[-4,-5],[-30,-460],[-8,-30],[-122,-489],[-1,-1],[-1,-6],[-309,-186],[68,51],[108,81],[18,11],[63,44],[15,18],[1,2],[-19,-16],[-60,-45],[-71,-20],[-43,-27],[-7,0],[-2,-2],[-150,-137],[37,22],[-1,-8],[-1,0],[-93,-206],[-115,-108],[5,67],[-104,36],[93,-88],[-11,-56],[-131,-112],[-74,-124],[-13,94],[0,0],[-95,73]],[[29982,10866],[-6,124],[-229,110],[-5,3],[-61,30]],[[14880,7032],[1,0],[263,-48],[32,-33],[4,-4],[128,81],[111,0],[140,-45],[76,-80],[69,4],[45,-44],[96,-94],[373,-15],[373,152],[22,4],[63,10],[149,-53],[65,24],[2,2]],[[18929,19517],[-1,-55],[50,-52],[-42,-91],[9,-115],[54,-53],[-9,-40],[-44,5],[97,-42],[10,-64]],[[19053,19010],[-47,8],[-2,-46],[-250,84],[-42,-72]],[[18712,18984],[-165,54],[-84,-83],[-109,130],[31,70],[-55,102],[-146,66]],[[19254,19432],[80,-75],[-113,-85],[28,-24],[42,32],[48,-71],[19,-171]],[[19358,19038],[-44,30],[-50,-38],[12,-66],[53,24],[-31,-59]],[[19298,18929],[-102,-31],[-59,79],[-84,33]],[[19358,19038],[56,26],[98,-77]],[[19512,18987],[95,-58],[-73,-63],[48,-68]],[[19582,18798],[-15,-66],[64,-65],[-35,-66]],[[19596,18601],[-44,-36],[-11,-78],[-36,19],[-75,-93],[2,-62],[-103,-57],[18,-190]],[[19126,18093],[46,18],[39,80],[-103,184],[67,-17],[60,37],[13,37],[-80,73],[140,122],[-35,66]],[[19273,18693],[61,70],[-31,68],[31,68],[-36,30]],[[20045,19444],[202,-288],[90,-52],[10,-69]],[[20184,18886],[-276,113],[2,-47],[-118,-9],[-129,-150],[-81,5]],[[19512,18987],[50,89],[-7,63],[63,46],[-17,79],[93,22],[46,69],[153,-38],[73,54],[27,111]],[[19993,19482],[11,-43],[41,5]],[[19632,19784],[12,-22],[25,41],[48,-76],[76,-5],[126,70],[74,-310]],[[19273,18693],[-49,-40],[-122,79],[-100,-32],[-124,-81],[-71,-152],[-90,-69]],[[18596,18629],[166,24],[-12,143],[73,117],[-111,71]],[[19596,18601],[50,-87],[78,13],[41,-42],[40,24],[28,-58],[161,19]],[[18333,18554],[-117,92],[10,91],[-101,-4],[-63,101],[-98,12],[-95,96]],[[17584,18758],[19,-95],[43,2],[28,-125],[-30,-24],[87,-62],[-32,-133],[125,5]],[[17602,18044],[-65,-4],[-39,85],[-9,79],[104,10],[-46,100],[-58,-25],[-109,82],[80,39],[-6,161],[-98,104],[-42,-22],[-25,52]],[[17289,18705],[104,151]],[[17575,17958],[-80,-21],[-72,35],[-74,59],[-217,173],[-82,165],[-21,143]],[[17029,18512],[102,29],[3,101],[53,53],[102,10]],[[17205,19834],[-36,10],[25,9]],[[17029,18512],[0,3],[-54,76],[1,5],[-37,47],[-9,12],[-45,139],[-22,70],[3,128],[-17,-53],[-53,29],[-49,61],[-6,90],[137,348],[160,226],[-13,39],[-12,36],[94,18],[-13,35],[29,-18],[31,65],[-13,-32],[35,-2],[-2,-31],[21,30],[-12,-43],[34,-21],[-10,61],[-2,4]],[[16684,17739],[14,13],[4,4],[1,2],[1,0],[7,7],[0,0]],[[16726,17779],[-1,0],[-10,-10],[-34,5],[23,25],[-34,-34],[-31,17],[10,54],[4,-44],[28,3],[-8,3],[-13,34],[8,-14],[-1,8],[65,-23],[-60,24],[43,15],[-24,13],[-17,10],[22,14],[-31,-10],[20,16],[-39,-9],[-3,66],[92,-77],[-296,362],[80,86],[412,225],[116,-355],[207,-320],[16,-25]],[[22040,19269],[66,-130],[88,-35],[12,-82],[54,-31],[-31,-16],[14,-54],[-94,-14]],[[22149,18907],[-204,2],[-144,-147],[-40,27],[-34,-32],[-9,-68]],[[21718,18689],[-119,75],[-60,-118],[4,-64],[-59,-68],[-55,41],[36,81],[-32,88],[-172,74],[-285,54],[-93,-64],[-20,-71],[-136,39],[-54,-19]],[[20611,18945],[54,83],[97,-16],[92,37],[56,99],[161,-35],[65,46],[98,5],[59,72],[-17,56],[42,30],[4,71]],[[21322,19393],[79,2],[89,-75],[37,35],[67,-12],[4,30],[34,-44],[109,94],[143,-74],[71,41],[85,-121]],[[22742,18353],[-90,26],[30,63],[-74,0],[-30,57],[-204,-14],[-61,116],[25,114],[-60,47],[-87,-54],[29,81],[-63,36],[-8,82]],[[22040,19269],[123,-41],[59,28],[91,59],[30,126],[62,6],[-16,19]],[[22112,17944],[-22,123],[-179,161],[47,54],[-54,137],[40,22],[-85,-20],[-99,130],[-42,138]],[[21167,26983],[-2,-122],[138,-13],[16,-68],[-39,-84],[127,-22],[-14,-69],[102,-46]],[[21495,26559],[-19,-95]],[[21476,26464],[-56,-32],[-122,60],[-138,-59],[-185,60],[-55,-17],[-83,75],[-67,-5]],[[21660,26575],[-165,-16]],[[21698,27032],[1,0],[35,-82],[-2,-18],[19,-21],[71,-164],[54,-26],[-42,10],[-15,-15],[-24,-1],[-79,-129],[-138,-1],[-49,42],[47,-42],[-86,-23],[170,13],[0,0]],[[21994,26353],[-168,-73],[-277,9]],[[21549,26289],[-12,134],[-61,41]],[[21660,26575],[-18,-60],[72,13],[-46,45],[68,-9],[72,115],[17,-10],[4,-7],[19,15],[9,-26],[-5,-11],[104,-111],[60,-65],[-22,-110],[0,-1]],[[21404,26031],[7,142],[-36,80],[174,36]],[[21994,26353],[-4,-56],[-3,-36],[22,-13],[1,-8],[-15,3],[-22,-58],[40,29],[4,-33],[-16,-65],[42,-197],[1,-1]],[[20818,13696],[-139,-45],[132,-25],[-12,-248],[-59,-9],[-63,43],[-104,-213],[-30,-37],[-67,4],[-6,-33]],[[20022,13278],[12,154]],[[20034,13432],[107,26],[41,77],[40,7],[39,79],[-75,34],[3,122],[98,15],[-12,76],[46,7]],[[20321,13875],[119,116],[18,80]],[[21278,13053],[-3,139],[-37,62],[18,56],[40,6],[-1,84]],[[19850,13889],[-17,-134],[68,-62],[-21,-131],[-99,-98],[115,-33],[109,97],[29,-96]],[[19671,13911],[36,14],[40,-68],[86,69],[17,-37]],[[19850,13889],[70,15]],[[19920,13904],[121,84],[107,-70],[34,40],[39,-33],[52,16],[48,-66]],[[19920,13904],[-33,28],[36,72],[-84,73],[70,77],[12,102]],[[20897,20971],[-14,-74],[45,-19],[-25,-34],[-94,-6],[-94,64],[-39,-57],[121,-116],[136,13],[61,-45],[-51,-388],[90,18],[24,-34],[102,-2],[-27,-59],[-97,-61]],[[21035,20171],[-99,31],[-59,-81],[-40,0],[4,-64],[-46,0],[-27,-43]],[[20768,20014],[-119,198],[-55,-3],[-84,-80],[-52,34],[-2,123],[-165,47],[-160,-7],[-17,51],[-225,154]],[[20768,20014],[49,-3],[54,-65],[14,-171],[-48,73],[-237,-126],[-84,12],[30,-34],[-154,-108],[-119,16],[-117,-118],[-111,-46]],[[21035,20171],[70,-57],[62,11],[44,-152],[94,0],[63,-63]],[[21368,19910],[-82,-34],[-12,-40],[32,-15],[-71,-61],[75,-88],[-104,-37],[34,-151],[82,-91]],[[22181,20094],[-295,-117],[-131,47],[-137,-3],[-22,-28],[-44,38],[-148,-160],[-36,39]],[[25869,8458],[-88,16]],[[25781,8474],[-6,-1]],[[25775,8473],[-1,29]],[[25774,8502],[19,17]],[[25793,8519],[61,9]],[[25854,8528],[20,6]],[[25874,8534],[-5,-76]],[[26594,8484],[-4,2],[-96,38],[-87,-24]],[[26407,8500],[-16,56],[-60,19],[-14,79]],[[26317,8654],[76,7],[77,60],[38,75],[-16,78],[66,64]],[[26558,8938],[-4,-158],[46,-37],[70,20],[15,-67],[-91,-212]],[[25561,9300],[-11,-30],[94,-38],[77,-121],[-46,-87],[17,-28]],[[25692,8996],[-38,-66],[-16,38],[-1,-97],[-43,-72]],[[25594,8799],[-127,-89]],[[25467,8710],[-61,87],[-53,-9],[9,74],[-57,83]],[[25305,8945],[-113,188]],[[26602,8447],[19,-28]],[[26621,8419],[1,-3],[43,-92],[103,-3],[11,-9]],[[26560,7946],[-126,30],[-96,92]],[[26338,8068],[37,59],[-16,122],[49,46],[78,7],[-17,179]],[[26469,8481],[5,1],[128,-35]],[[25467,8710],[66,-99]],[[25533,8611],[-15,-44],[-27,27],[-32,-26]],[[25459,8568],[-38,12]],[[25421,8580],[-53,13]],[[25368,8593],[-115,-20],[5,51],[-75,-29],[-1,66],[-84,56]],[[25098,8717],[41,68],[-14,47],[66,44],[68,-10],[-25,44],[71,35]],[[26118,7533],[-88,261],[-30,-12],[1,60],[-96,78],[-31,85]],[[25874,8005],[1,4]],[[25875,8009],[13,29]],[[25888,8038],[132,-2],[59,-64],[109,81],[33,-35],[-21,101]],[[26200,8119],[98,-94],[40,43]],[[25681,8782],[60,-200],[52,-63]],[[25774,8502],[-53,-10],[-71,126],[-117,-7]],[[25594,8799],[87,-17]],[[25639,7493],[33,10],[3,97],[83,20],[-52,234]],[[25706,7854],[30,35],[-11,77]],[[25725,7966],[46,56],[103,-17]],[[25368,8593],[-21,-164]],[[25347,8429],[-44,-38],[-39,46],[-41,-6],[-53,-51],[-118,37],[-63,-44],[-106,48]],[[24883,8421],[92,151],[-130,60],[73,12],[-11,28],[64,36]],[[24971,8708],[127,9]],[[26074,9184],[-88,-212]],[[25986,8972],[-294,24]],[[26052,8309],[-8,28]],[[26044,8337],[16,-17],[-8,-11]],[[26085,8355],[0,-3],[-6,3]],[[26079,8355],[6,0]],[[26200,8119],[-59,92],[24,75],[-99,-30],[-13,48]],[[26053,8304],[64,59],[-1,69],[-1,12]],[[26115,8444],[2,1]],[[26117,8445],[15,-13],[26,-24],[18,-17],[110,0],[56,10],[17,24],[26,39]],[[26385,8464],[8,6]],[[26393,8470],[76,11]],[[26059,8691],[2,-43]],[[26061,8648],[-138,-41],[-49,-73]],[[25854,8528],[-36,66],[62,78],[-84,88]],[[25796,8760],[20,46],[110,21]],[[25926,8827],[43,-79],[56,-8],[34,-49]],[[25421,8580],[44,-153],[110,-122]],[[25575,8305],[-39,-69],[-94,43]],[[25442,8279],[-26,81],[-40,0]],[[25376,8360],[-29,69]],[[25986,8972],[-60,-145]],[[25796,8760],[-46,55],[-69,-33]],[[24971,8708],[-80,304]],[[26602,8447],[6,-2],[13,-26]],[[26751,8369],[-4,3],[-69,-13],[-17,56],[-11,35],[-56,34]],[[26558,8938],[-30,128]],[[24883,8421],[-30,-90],[17,-66],[-99,-86],[-44,16]],[[25376,8360],[-43,-88],[-103,84],[-106,-157],[-139,2],[-45,-42],[64,-40],[-74,-101]],[[25459,8568],[110,-157],[64,23],[26,-92]],[[25659,8342],[-84,-37]],[[25353,8071],[34,-225]],[[25387,7846],[-16,-48]],[[25152,7869],[27,44],[-6,156],[61,-16],[12,-47],[98,90]],[[25344,8096],[9,-25]],[[25725,7966],[-61,3],[23,33]],[[25687,8002],[14,118],[-23,0],[-23,125],[65,104]],[[25720,8349],[55,124]],[[25781,8474],[4,-154],[54,-74],[-34,-74],[70,-163]],[[26052,8309],[-9,-15],[10,10]],[[25888,8038],[36,113],[61,37],[-37,172],[65,26]],[[26013,8386],[23,-39],[8,-10]],[[25706,7854],[-94,-15],[-29,29],[-41,-42],[-64,15],[-25,-43],[-66,48]],[[25353,8071],[184,47],[25,-88],[125,-28]],[[26385,8464],[4,5],[4,1]],[[26407,8500],[-98,-74],[-16,-12],[-121,5],[-8,12],[-5,8],[-20,26],[-3,-1],[-8,-2]],[[26128,8462],[-81,150],[14,36]],[[26059,8691],[113,24]],[[26172,8715],[79,-7],[12,47],[54,-101]],[[26172,8715],[-24,190],[28,101],[-39,36],[40,51]],[[25442,8279],[-33,1],[-2,-45],[-69,-5],[-9,-42],[53,-61],[-38,-31]],[[25869,8458],[22,-10]],[[25891,8448],[14,-10],[16,-12],[27,11],[55,22],[3,-24],[7,-49]],[[26115,8444],[0,3],[2,-2]],[[26128,8462],[-34,-13],[-2,-16],[-7,-78]],[[26079,8355],[-45,17],[-8,63],[-5,34],[-47,2],[-43,-34],[0,0],[-1,0],[-58,26],[19,-15]],[[25659,8342],[61,7]],[[15158,32543],[-107,-51],[106,-65],[-132,-14],[-6,-40],[-121,23],[-75,-143]],[[14823,32253],[-104,76]],[[14719,32329],[-6,7]],[[14713,32336],[29,31],[-29,-27],[-64,79],[11,-23]],[[14660,32396],[-13,15],[-72,-35]],[[14575,32376],[-51,16],[12,63],[-41,20],[-65,-62],[15,58],[-61,53],[83,32],[-62,76],[72,16],[-12,60],[86,167]],[[14551,32875],[147,108],[87,-28],[46,-119],[152,35],[59,-37],[48,74],[39,-32],[60,46],[130,-50],[-22,-60],[-47,-17],[15,-42],[-165,-70],[33,-44],[-24,-71],[49,-25]],[[16864,26559],[4,6],[5,0]],[[14078,29062],[50,-51],[57,43],[80,-33],[87,18],[211,-80],[28,-89],[156,-137],[33,-136],[129,-61],[-28,-67],[28,-141],[99,-74],[44,-90],[136,21],[-9,108],[44,49],[100,13],[-44,93],[48,46],[-18,155],[61,17],[25,57],[56,-14],[73,83]],[[15524,28792],[106,-45],[156,64],[57,-41],[119,46],[23,-23],[69,149],[63,19],[52,-72],[42,22],[109,-39],[-179,-177],[-27,-73],[24,-56],[-35,-12],[-14,-90],[50,-36],[260,176],[115,-82],[14,-71],[143,67],[53,-61],[23,19],[9,-104],[158,-188],[-24,-77],[35,-48],[70,39],[29,-60],[43,8],[103,111],[135,-67],[57,31],[41,-108],[-61,-29],[-50,-106],[174,-2],[6,-68],[-79,-81],[-50,-177],[23,-141],[96,-59],[20,-140]],[[16895,26604],[-1,4],[-13,-5],[-1,-6],[-50,-49],[-25,31],[23,-35],[-48,-27],[-52,17],[-124,-77],[-167,76],[-109,-54],[-18,26],[-13,-3],[-52,-13],[-2,-23],[-205,79],[24,-10],[-31,-25],[-94,-17],[-115,19],[-69,103],[-18,-27],[-117,-116],[-141,-7],[-113,76],[-12,34],[-50,143],[-31,-81],[45,-92],[-91,-33],[67,1],[-16,-260],[19,-1],[32,-4],[29,-85],[-100,-127],[2,-53],[-311,39],[69,70],[-157,-71],[-98,-115],[-14,-8],[-70,-17],[-75,100],[-22,75],[-19,-132],[58,-83],[-48,8],[-60,107],[-55,-16],[78,-97],[-54,26],[-32,-26],[109,-106],[-12,-22],[-112,-66],[-351,-209],[-64,31],[-116,-24],[-24,22],[-34,50],[55,166],[-29,52],[-38,-61],[-13,20],[24,82],[-7,-9],[-75,-90],[4,-169],[-49,-18],[49,-24],[0,-1],[-13,-41],[-37,10],[-15,51],[-28,1],[-9,14],[7,38],[-53,-61],[-62,23],[-4,3],[-57,98],[-2,46],[-87,26],[-12,23],[1,3],[-2,-1],[-18,36],[21,60],[-37,14],[5,49],[61,98],[-72,-12],[-93,-147],[-50,11],[-97,26],[-170,98],[-63,76],[-25,107],[30,12],[-36,-8],[-10,62],[-6,44],[0,-26],[-4,-18],[-13,-64],[25,-26],[-96,-50],[-11,-43],[32,-21],[-3,-41],[25,-187],[179,-76],[40,-75],[-16,-44],[-69,12],[28,-80],[-33,-29],[32,-16],[-13,-145],[1,-50],[-8,-46],[53,-73],[-131,-163],[-275,118],[-1,0],[-79,54],[-52,53],[-20,-4],[-26,18],[-2,4],[-2,23],[-2,25],[-80,26],[-88,202],[-213,119],[-113,126],[-207,41],[-23,20],[-62,102],[-37,61],[-49,-19],[-66,36],[-23,-12],[-35,-11],[-11,21],[-20,-29],[24,7],[10,-5],[24,13],[24,5],[22,-51],[-257,-134],[-76,-149],[132,-317],[20,-121],[16,-98],[117,-100],[-51,-148],[20,-74],[71,-10],[2,-1],[-66,-20],[-144,53],[-128,107],[-23,134],[1,1],[74,55],[-58,89],[3,5],[26,52],[-107,34],[0,0],[18,77],[-42,21],[-11,7],[-19,147],[-96,45],[-34,92],[-188,159],[-21,17],[-46,40],[-93,219],[-49,114],[22,269],[-8,13],[6,90],[17,45],[48,69],[58,-8],[26,13],[88,46],[117,-263],[-42,-22],[8,-38],[6,-106],[20,-26],[7,-34],[95,-95],[99,32],[2,52],[14,20],[-13,31],[1,21],[-132,320]],[[10898,26633],[201,72],[-15,55],[53,-3],[90,156],[-8,67],[31,10],[86,-28],[30,-114],[132,30],[31,-53],[86,51],[39,-69],[40,56],[45,-20],[59,49],[80,-52],[206,99],[3,-40],[34,12],[28,91],[-111,110],[11,158],[106,108],[119,6],[57,84],[261,-26],[50,89]],[[12642,27531],[58,-7],[6,-152],[30,-1],[65,64],[0,143],[52,121],[44,-5],[52,295],[143,174],[35,98],[132,-27],[54,85],[111,-17],[94,-124],[98,-51],[78,92],[-17,104],[101,151],[-66,93],[50,224],[266,127],[-43,55],[93,89]],[[13291,30181],[91,-166],[-14,-63],[59,-43],[-10,-63],[91,-52],[-59,-21],[-24,-92],[-121,-109],[44,-11],[10,-50],[233,116],[64,-37],[135,11],[127,128],[129,-150],[62,6],[12,-43],[46,-3],[-5,-78],[-202,-252],[43,-50],[-16,-51],[92,-46]],[[12642,27531],[-44,151],[75,63],[5,136],[63,87],[-89,162],[62,118],[-84,38],[-25,52],[-65,-5],[-100,133],[-108,41],[136,136],[-27,43],[-48,21],[-57,-50],[-73,54],[-48,-10],[98,50],[18,114],[90,-13],[22,-77],[79,-52],[155,67],[-12,98],[-51,-9],[-67,49],[56,51],[-19,50],[-37,-3],[0,67],[65,82],[39,-12],[56,53],[3,55],[71,-19],[-8,31],[59,22],[-32,221],[-80,40],[-3,36],[-52,-31],[-193,18],[4,31],[-66,19],[9,87],[-99,6],[1,47],[-72,-21]],[[12249,29758],[39,30],[-28,76],[90,37],[-33,38],[37,73],[185,51],[11,45],[-116,-29],[-47,39],[-77,-97],[-65,-22],[-31,17],[21,40],[-125,90],[83,22],[95,186],[149,168]],[[12437,30522],[69,96],[41,-2],[23,-68],[83,7],[-31,-96],[89,13],[116,-111],[49,48],[95,-133],[59,15],[26,-62],[235,-48]],[[18971,31567],[-306,-317],[-115,143],[-150,-2],[-25,-25],[25,-35],[-47,-41],[111,-108],[-4,-54],[-61,-114],[-80,33],[-39,-87],[-164,26],[16,37],[-78,30],[-214,-96],[-112,84],[-209,-132]],[[17519,30909],[-48,109],[-111,57],[14,44],[-58,-14],[-71,36],[-90,252],[-66,5],[-88,-59],[-181,93],[-32,62]],[[16788,31494],[35,81]],[[16823,31575],[83,12],[-10,-33],[29,56],[88,-3],[6,-2],[1,1],[5,0],[25,20],[114,74],[3,1],[144,22],[88,103],[-14,76],[0,3],[146,25],[-66,42],[-5,76],[83,19],[68,109],[89,18],[88,-35],[292,2],[69,-29],[52,-31],[20,-77],[97,-51],[-28,-35],[13,-26],[11,-23],[-15,23],[-11,17],[-4,-17],[-8,-36],[-29,14],[-22,-3],[-35,-51],[50,48],[10,-3],[16,-41],[54,1],[17,71],[1,5],[4,-5],[62,-79],[33,45],[91,7],[13,-37],[105,-33],[30,-19],[24,2],[30,-9],[77,-91],[35,5],[25,-24],[19,-54],[81,-55],[4,-3]],[[13280,30732],[-8,-64],[-88,-23],[22,-72],[157,-140],[5,-187],[-77,-65]],[[12437,30522],[-63,113]],[[12374,30635],[27,64],[60,-21],[79,84],[2,56],[68,-19],[20,36],[197,32],[58,64]],[[12885,30931],[42,-28],[-14,-120],[117,-9],[22,81],[101,28],[97,-15],[-23,-101],[53,-35]],[[3133,35933],[-75,-30],[-50,26],[-22,11],[4,2],[49,21],[81,-25],[13,-5]],[[3103,36030],[-59,-32],[-75,18],[54,66],[1,1],[-33,49],[106,37],[2,-49],[4,-90]],[[3286,36298],[-22,-34],[-32,3],[-57,7],[14,53],[38,6],[11,2],[3,-1],[45,-36]],[[3474,36454],[-23,-7],[-60,24],[-34,46],[-4,12],[37,21],[7,-2],[79,-23],[3,-6],[-5,-65]],[[3647,36636],[-11,-37],[-17,43],[24,9],[8,2],[-4,-17]],[[3752,36997],[1,-2],[-35,16],[34,-14]],[[3934,37031],[-33,-4],[21,28],[1,-1],[11,-23]],[[3877,37060],[12,-44],[-47,43],[28,2],[7,-1]],[[3924,37156],[42,-43],[15,17],[3,-1],[1,-39],[-98,32],[6,6],[31,28]],[[4001,37193],[1,-53],[-31,9],[-29,17],[26,12],[33,15]],[[3343,36743],[132,-37],[-49,6],[-8,2],[-50,-64],[93,0],[-1,-23],[-1,-1],[-136,-40],[-38,66],[7,-1],[43,-5],[10,31],[-14,5],[0,4],[-34,9],[-46,18],[36,46],[-13,12],[-8,15],[105,-8],[-13,8],[17,-2],[-90,45],[11,39],[10,26],[107,28],[16,30],[0,1],[0,0],[3,5],[-35,26],[-5,5],[25,7],[12,1],[-1,2],[9,3],[-11,48],[41,27],[-82,49],[0,0],[133,7],[56,35],[11,2],[1,5],[15,9],[9,112],[12,62],[92,-82],[-79,-115],[117,-69],[-54,24],[-13,7],[4,-2],[-2,0],[63,-45],[-68,-8],[59,-35],[28,25],[68,-51],[1,-51],[-81,37],[-15,33],[-35,-10],[3,-1],[46,-54],[0,-10],[-51,-18],[-1,0],[0,-1],[-2,-13],[-11,-62],[-19,0],[-21,6],[1,-6],[-7,0],[19,-66],[-139,-13],[1,31],[0,10],[-58,-18],[-1,4],[-10,33],[1,-4],[-2,6],[3,-61],[-39,3],[-43,3],[-34,-42]],[[3857,37328],[-70,-46],[-9,10],[-7,26],[33,63],[1,1],[55,-53],[-3,-1]],[[3667,37398],[-46,-9],[12,15],[11,11],[20,-15],[3,-2]],[[4045,37524],[26,-13],[99,21],[-28,-120],[-12,-2],[-53,-2],[2,-1],[-1,0],[23,-9],[31,-12],[10,-4],[-9,-10],[-32,-37],[-2,-3],[-54,45],[-6,149],[11,1],[-5,-3]],[[4e3,38264],[-1,0],[-1,0],[1,0],[1,0]],[[4205,38847],[-1,-1],[0,1],[1,0]],[[4202,38875],[-2,-1],[-18,3],[0,0],[20,-2]],[[4408,39193],[-22,-44],[22,9],[0,-40],[-40,-16],[-48,-12],[8,-4],[-9,-3],[-37,11],[-7,3],[2,4],[47,67],[84,29],[0,-4]],[[3997,39170],[-11,-36],[-8,-26],[11,-2],[31,-6],[-3,-50],[94,8],[30,-14],[31,-32],[2,-7],[-50,-4],[19,24],[-29,11],[-72,-40],[52,-7],[54,-17],[90,-63],[15,-15],[-2,-14],[-86,-1],[-10,2],[10,-28],[17,-2],[11,-13],[20,8],[62,-8],[39,37],[0,0],[-20,-47],[-27,6],[17,-28],[-103,-14],[3,-19],[1,-6],[-37,18],[-55,29],[2,-3],[-4,3],[69,-74],[74,3],[5,-5],[1,5],[26,2],[26,0],[23,-121],[66,29],[20,-40],[-29,-79],[-5,-13],[-19,2],[-53,4],[-79,-113],[1,-1],[3,-5],[28,-54],[-73,-125],[-2,-3],[-30,1],[-76,6],[4,38],[1,5],[8,-5],[33,-26],[-12,13],[25,-15],[-56,51],[-2,2],[0,0],[-11,10],[-1,-4],[-3,-12],[-81,-31],[-4,0],[-29,66],[-2,-17],[-9,15],[2,-29],[-45,44],[12,-32],[-14,21],[25,-48],[18,-47],[94,-11],[-5,5],[32,28],[2,1],[15,-46],[9,-28],[2,0],[1,-2],[97,-23],[17,-18],[-4,-27],[-11,-46],[6,-7],[61,-145],[0,-2],[-60,-62],[-27,-5],[-106,48],[0,-5],[-38,26],[33,-31],[5,-5],[0,-33],[55,-19],[0,0],[-9,2],[-84,20],[-19,31],[-10,17],[-42,-21],[-33,-15],[-1,0],[1,-1],[-1,0],[65,-87],[-1,-2],[1,0],[3,-3],[124,29],[23,6],[88,-26],[28,-10],[7,-88],[9,10],[1,-6],[19,30],[5,5],[63,-46],[-11,-36],[-44,6],[34,-6],[-45,-34],[14,-42],[-13,4],[-140,59],[-11,-5],[-12,5],[-42,15],[-49,-63],[-9,33],[-160,-7],[-57,50],[-22,67],[0,7],[-2,0],[-16,49],[3,3],[-7,8],[-17,53],[-2,23],[-1,7],[14,27],[-22,62],[-21,231],[-37,103],[-69,23],[89,33],[2,18],[0,0],[7,57],[16,141],[72,68],[25,-21],[-34,51],[-6,129],[-2,75],[-1,4],[-3,55],[-78,156],[3,2],[49,-6],[25,41],[36,17],[43,-16],[-21,-15],[133,53],[33,-17],[1,1],[11,32]],[[4317,39204],[-36,-4],[-3,0],[27,12],[8,0],[4,-8]],[[4403,39537],[1,-2],[-4,2],[3,0]],[[3965,39558],[83,-5],[25,30],[27,-2],[16,-6],[-11,-11],[-14,-3],[11,-1],[-15,-15],[112,4],[-11,-32],[-60,6],[47,-53],[33,18],[26,-32],[-11,66],[13,9],[12,-7],[2,-9],[-19,-2],[14,-35],[11,7],[1,-6],[5,10],[27,20],[68,-49],[-80,-3],[-7,4],[-1,-4],[-27,-1],[10,-50],[69,-25],[-16,1],[-57,4],[-1,2],[-26,61],[14,-41],[-9,14],[0,-50],[-16,-5],[-29,39],[1,-9],[-18,19],[9,-37],[-33,6],[42,-36],[-57,-10],[108,-46],[39,5],[6,-2],[-3,2],[37,4],[-70,36],[87,-8],[6,-7],[30,-36],[6,-20],[-67,13],[47,-50],[-80,-18],[5,0],[-63,-8],[49,-54],[-99,37],[-3,2],[0,-1],[-127,48],[24,-15],[-26,9],[63,-32],[8,-5],[85,-57],[-87,56],[-55,-22],[17,-36],[-83,81],[-38,38],[-99,3],[-46,10],[-9,42],[5,7],[-10,14],[-24,108],[8,15],[-18,31],[-5,24],[94,23],[33,88],[25,7],[29,6],[7,-54],[18,2],[36,1],[-20,-22]],[[4546,39664],[-24,-22],[-9,3],[-9,34],[3,-1],[40,-12],[-1,-2]],[[4470,39673],[26,-39],[1,-2],[-17,-13],[-14,1],[6,-8],[-20,-16],[52,-19],[-49,-13],[12,-31],[-28,-31],[-3,-2],[-34,47],[8,32],[-50,27],[-5,7],[9,37],[1,2],[72,-32],[5,-3],[5,-2],[-46,51],[16,8],[53,-1]],[[4232,39671],[30,-27],[54,11],[5,-16],[-10,-36],[39,-44],[8,-22],[-72,18],[0,24],[-5,-4],[-3,11],[-38,-35],[-2,1],[-81,92],[-55,-30],[84,61],[1,-1],[1,0],[35,-13],[-5,16],[44,6],[18,-2],[-48,-10]],[[3107,39724],[-10,-8],[0,4],[10,4]],[[3156,39765],[0,0],[-1,0],[1,1],[0,-1]],[[2908,39811],[0,-9],[-8,6],[8,3]],[[3149,39759],[-41,-34],[-8,39],[2,37],[1,1],[47,33],[2,-2],[10,-52],[-13,-22]],[[2908,39815],[-4,0],[0,2],[4,-2]],[[2918,39814],[-10,-2],[9,7],[1,-2],[0,-3]],[[2894,39822],[0,-38],[-22,17],[22,21]],[[2918,39821],[-11,-3],[10,8],[1,-1],[0,-4]],[[2917,39828],[-3,0],[3,2],[0,-2]],[[3049,39791],[-115,-23],[97,77],[1,-2],[17,-52]],[[2800,39852],[3,-5],[-4,1],[1,4]],[[2770,39878],[4,-7],[-5,4],[1,3]],[[3686,40001],[80,-63],[-73,1],[-33,55],[11,30],[15,-23]],[[4475,40337],[25,-36],[-53,29],[28,7]],[[4533,40455],[4,-4],[-13,4],[2,2],[7,-2]],[[4828,40483],[10,-39],[-2,1],[-33,19],[17,37],[8,-18]],[[4098,40459],[0,-5],[-8,7],[8,-2]],[[4630,40507],[68,-81],[39,7],[49,-36],[4,-5],[-89,-134],[-23,-35],[-97,92],[9,9],[47,26],[-46,-25],[38,35],[-93,-30],[-68,29],[1,2],[2,0],[-2,1],[5,16],[7,-3],[1,34],[1,2],[-22,4],[19,21],[-32,7],[71,0],[-7,6],[61,-3],[1,0],[-9,-59],[114,49],[-14,10],[15,1],[-63,46],[13,14]],[[4695,40525],[11,-31],[-34,19],[11,13],[8,7],[4,-8]],[[3817,40493],[-8,-10],[-7,5],[15,5]],[[4689,40546],[-34,-4],[14,24],[18,-17],[2,-3]],[[4112,40535],[12,-67],[-79,31],[11,10],[56,26]],[[3845,40535],[-48,-46],[11,-7],[-14,-20],[-16,31],[-46,-22],[-71,25],[-7,5],[47,16],[124,22],[20,-4]],[[4880,40739],[26,-37],[-1,0],[-39,20],[-9,4],[8,4],[15,9]],[[2805,40641],[17,-6],[-9,-1],[-8,7]],[[2815,40645],[9,-7],[-8,1],[-1,6]],[[2823,40647],[3,-6],[-7,6],[4,0]],[[2829,40651],[2,-6],[-5,4],[3,2]],[[2832,40654],[2,-3],[-3,0],[1,3]],[[4150,40783],[-14,-80],[-59,37],[19,64],[2,1],[52,-22]],[[2922,40721],[-23,-30],[-6,11],[29,19]],[[4329,40386],[-10,-1],[1,0],[0,-1],[90,-40],[-46,-49],[15,-5],[-2,-3],[6,2],[43,-14],[-22,-17],[115,-8],[-89,-8],[87,-15],[-28,-35],[24,-25],[-53,37],[25,-38],[-53,0],[51,-8],[-19,-5],[-47,-7],[28,3],[-15,-3],[39,5],[37,3],[-18,-36],[35,-7],[150,37],[-25,-78],[-23,-64],[-106,-39],[-50,17],[-13,18],[-41,4],[21,-38],[-64,14],[-4,1],[0,0],[-59,13],[29,-21],[-135,-33],[-4,-1],[-24,29],[54,-6],[-2,6],[4,-1],[-15,47],[-4,13],[1,-3],[-6,21],[4,-32],[0,-1],[0,-3],[2,-16],[-103,-5],[0,-1],[-2,0],[17,-13],[33,-30],[-53,44],[-24,26],[14,-41],[-40,-32],[67,-44],[0,37],[266,-20],[93,-8],[-1,38],[93,-3],[-27,-151],[-8,-45],[-69,-16],[2,0],[40,-11],[-63,-15],[-135,61],[-5,-10],[-4,2],[4,-3],[-8,-15],[58,-34],[-6,2],[-62,31],[-13,-7],[-9,3],[6,-5],[-15,-9],[37,-13],[-58,-10],[-74,46],[3,1],[-6,2],[0,-1],[-2,1],[2,4],[-7,1],[4,-4],[-11,6],[1,-1],[-1,1],[1,-2],[38,-76],[-42,69],[-50,-19],[-36,31],[-21,18],[15,-18],[31,-36],[-44,-14],[-3,-2],[-43,22],[13,26],[18,36],[-27,56],[-58,35],[3,-60],[-13,-9],[-30,-20],[27,-44],[5,-8],[-21,-70],[-13,-8],[-43,81],[-94,176],[54,-72],[13,55],[18,-19],[28,34],[-17,-51],[41,-1],[26,12],[19,8],[-22,27],[-12,15],[11,3],[32,9],[10,-31],[80,37],[-124,4],[-31,1],[-239,170],[37,-49],[-43,-43],[-120,-12],[-31,78],[33,40],[-44,21],[20,-46],[-41,-13],[-132,113],[8,6],[35,13],[9,-32],[32,12],[10,39],[1,0],[-1,2],[8,35],[-36,15],[4,2],[75,24],[-2,15],[5,3],[-13,39],[-1,2],[54,62],[-8,15],[1,0],[-1,2],[0,-1],[-18,30],[6,4],[50,6],[45,-17],[35,27],[28,-52],[54,-3],[7,-6],[32,-43],[-22,-20],[102,-45],[40,110],[-22,37],[27,12],[84,38],[-15,63],[11,9],[53,23],[8,23],[20,15],[14,-35],[-1,-4],[-40,-20],[12,-53],[-53,-75],[116,-22],[19,-12],[2,-54],[37,32],[-22,27],[55,-26],[45,26],[-31,18],[53,-14],[-96,55],[51,20],[1,0],[1,1],[51,20],[60,89],[9,0],[39,-31],[71,97],[5,6],[-2,0],[2,1],[-3,3],[-37,36],[-7,-32],[-90,16],[90,139],[85,22],[11,2],[68,-48],[-5,-15],[-22,-48],[-59,11],[19,-41],[-11,-14],[-17,5],[-49,-86],[-10,-13],[117,-73],[-8,-45],[-17,-23],[-28,30],[4,-45],[-36,2],[51,-20],[-73,-1],[-3,2],[-64,-2],[65,0],[11,-50],[47,-14],[-40,7],[-55,-9],[34,-17],[-68,-11]],[[4740,40933],[53,-59],[-94,35],[0,0],[16,48],[25,-24]],[[4752,40975],[0,-5],[-68,90],[9,6],[39,20],[20,-111]],[[4376,41081],[-68,-65],[-55,-2],[-75,72],[2,2],[108,60],[45,-4],[43,-63]],[[4230,41225],[-24,-15],[-5,38],[39,-15],[-10,-8]],[[5877,41636],[156,-44],[30,-75],[-89,-34],[-1,52],[-28,-2],[-4,0],[0,0],[-3,0],[15,-32],[-31,16],[13,31],[1,0],[-1,1],[1,2],[-48,44],[0,-3],[0,0],[-14,-39],[-30,61],[38,-9],[-1,5],[28,-4],[-32,30]],[[5750,41596],[-4,-3],[-4,43],[24,-27],[-16,-13]],[[6910,41767],[25,-127],[-18,77],[-63,37],[-6,4],[58,9],[4,0]],[[6986,41786],[33,-50],[-55,18],[22,32]],[[105,41369],[51,-42],[15,37],[85,-8],[21,-31],[25,-37],[-55,-8],[-7,-1],[-17,-54],[-10,5],[-17,28],[-76,14],[-6,39],[-9,58]],[[76,41399],[-20,-47],[-56,17],[76,30]],[[5014,41786],[-18,-78],[-5,0],[-29,-45],[-23,-18],[-5,3],[-58,41],[-41,28],[-8,-32],[-10,-34],[-26,-14],[-45,-22],[-13,53],[0,1],[-1,0],[-2,10],[-9,33],[26,4],[37,6],[49,8],[23,78],[99,49],[58,-66],[1,-5]],[[481,41623],[10,-68],[-37,17],[27,51]],[[6731,42293],[24,-39],[-96,-1],[5,38],[67,2]],[[4689,42222],[-2,-3],[-2,2],[4,1]],[[5848,42235],[-33,-45],[-52,81],[6,5],[40,30],[39,-71]],[[4707,42282],[0,-1],[0,1],[0,0]],[[4499,42341],[-19,30],[-12,33],[112,58],[76,-48],[6,-61],[6,-64],[-89,37],[-61,-15],[-15,23],[-4,7]],[[6161,42709],[-2,0],[1,1],[1,-1]],[[6203,42718],[-24,-5],[1,3],[23,2]],[[6680,42798],[-31,-15],[-3,1],[17,22],[31,16],[3,-6],[-17,-18]],[[4596,42711],[26,-65],[-52,10],[23,56],[3,-1]],[[4636,42855],[-3,-1],[2,1],[1,0]],[[4630,42998],[-2,-3],[-3,2],[5,1]],[[4635,43001],[-5,-1],[2,3],[3,-2]],[[5331,43090],[-1,0],[-1,4],[2,6],[0,-10]],[[7041,43311],[5,-6],[-5,2],[0,4]],[[5214,43280],[3,-29],[-36,17],[10,4],[23,8]],[[5299,43404],[53,-54],[-2,-1],[-29,-21],[-22,76]],[[5173,43519],[2,-57],[0,-10],[-47,57],[45,10]],[[5435,43602],[30,-99],[8,-30],[9,38],[46,-56],[0,7],[2,-3],[1,33],[59,-84],[8,2],[31,-6],[5,-92],[-63,32],[-190,1],[-25,66],[51,-25],[15,55],[-54,87],[5,-18],[25,-82],[-6,4],[-40,29],[0,3],[-31,128],[-6,27],[120,-17]],[[5406,43622],[-47,-4],[-14,2],[-12,51],[73,-49]],[[3212,43685],[-2,-3],[-2,0],[4,3]],[[3210,43687],[-7,-7],[-5,0],[12,7]],[[3198,43686],[-6,-3],[6,5],[0,-2]],[[3210,43689],[-12,-6],[5,8],[7,-2]],[[3201,43699],[-11,-5],[5,4],[6,1]],[[3213,43696],[-16,-5],[11,9],[5,-4]],[[3017,43730],[-1,0],[1,1],[0,-1]],[[3012,43730],[-4,-2],[3,3],[1,-1]],[[3005,43731],[-3,-5],[-1,5],[4,0]],[[3263,43751],[-4,-4],[-1,3],[5,1]],[[3021,43732],[-2,-1],[2,2],[0,-1]],[[3035,43735],[0,-9],[-17,-2],[17,11]],[[3207,43734],[10,15],[25,-2],[-35,-13]],[[3022,43735],[2,-1],[-3,0],[1,1]],[[3018,43738],[-1,-1],[-1,1],[2,0]],[[3211,43751],[-7,-5],[4,6],[3,-1]],[[3024,43739],[-1,-1],[0,1],[1,0]],[[3293,43759],[-1,-1],[-3,1],[4,0]],[[3033,43740],[-3,-3],[-1,3],[4,0]],[[3214,43755],[-1,-2],[-5,1],[6,1]],[[3019,43742],[1,-2],[-5,0],[4,2]],[[3015,43742],[-1,-1],[-3,0],[4,1]],[[7473,44041],[-2,0],[0,0],[2,0],[0,0]],[[3019,43746],[-2,-2],[0,2],[2,0]],[[3027,43751],[-1,-12],[-8,5],[9,7]],[[3181,43766],[1,-5],[-8,2],[7,3]],[[3223,43771],[-2,-2],[0,2],[2,0]],[[3193,43773],[14,-18],[-24,6],[10,12]],[[5343,41166],[1,-2],[19,-70],[1,-6],[-150,44],[6,-7],[-6,2],[7,-3],[18,-25],[-19,-6],[65,-55],[-6,-3],[-86,-22],[-4,22],[-8,-26],[-10,-3],[-23,-101],[-103,25],[40,-70],[1,-2],[-29,-4],[-84,124],[-20,5],[-36,45],[3,5],[-9,3],[-4,17],[28,12],[3,-1],[-2,1],[2,1],[-52,31],[2,-17],[-2,-20],[-51,36],[-19,13],[-88,151],[-110,51],[-40,107],[85,21],[10,-7],[60,-50],[2,-89],[32,-12],[-14,58],[19,10],[2,-2],[134,58],[11,20],[68,36],[15,119],[28,-27],[78,22],[18,52],[2,-67],[36,39],[57,-36],[45,18],[-165,95],[10,29],[24,63],[6,3],[18,-12],[66,41],[2,0],[131,-53],[72,-5],[17,29],[95,-22],[-11,7],[-140,106],[-5,8],[70,18],[-1,1],[10,2],[-30,33],[-6,-7],[-187,16],[-2,0],[38,76],[-1,0],[-2,-2],[-59,-53],[-66,54],[-78,-4],[-91,82],[-25,-10],[38,-47],[-82,-13],[-68,34],[0,2],[-2,-1],[-3,1],[0,1],[-1,-1],[-3,2],[2,0],[-6,3],[2,-2],[-22,11],[-5,45],[-52,-13],[-15,-4],[-31,144],[-4,-5],[-68,-27],[65,56],[3,8],[2,3],[3,15],[22,81],[1,2],[79,-60],[5,10],[6,-4],[64,101],[36,19],[239,67],[103,17],[-49,-2],[39,11],[-217,-16],[-1,0],[-172,-73],[-69,37],[0,2],[120,65],[3,1],[-77,4],[-39,3],[107,75],[10,7],[-13,17],[-13,33],[-9,-5],[-5,7],[-98,-68],[-10,-7],[7,-28],[-16,4],[-33,20],[17,9],[-45,9],[-27,16],[-10,60],[-15,135],[-8,7],[-3,14],[-45,28],[-21,19],[16,69],[0,0],[0,0],[2,8],[8,4],[28,-6],[23,32],[4,2],[-22,36],[30,3],[0,-2],[3,2],[10,1],[1,0],[21,39],[5,2],[-1,3],[11,21],[-46,101],[29,14],[13,6],[0,0],[2,1],[-1,0],[19,10],[2,-2],[73,-43],[0,1],[7,-4],[11,28],[31,-76],[17,66],[53,2],[6,-3],[32,4],[-33,-1],[-40,87],[-33,-66],[-51,29],[-17,15],[10,40],[2,-1],[-1,3],[37,145],[75,62],[-8,-63],[97,5],[6,-6],[50,-62],[4,9],[14,-13],[35,79],[10,-12],[43,-74],[98,-25],[-4,-23],[-4,-28],[-4,0],[-95,4],[-4,-28],[-52,24],[-1,0],[0,0],[0,0],[89,-90],[121,5],[0,-4],[3,-143],[7,-19],[2,-26],[61,-136],[16,-42],[-2,11],[17,-38],[-29,93],[-46,213],[5,17],[28,-1],[6,-5],[-2,5],[7,0],[-20,72],[42,-21],[8,-7],[-5,35],[1,-1],[16,44],[23,13],[17,-10],[40,40],[7,-1],[24,-9],[0,-5],[3,4],[82,-31],[23,-35],[2,1],[0,-10],[3,10],[28,4],[17,-8],[21,-11],[28,27],[47,-134],[5,48],[52,-32],[-29,66],[31,8],[24,2],[-3,2],[0,1],[-83,69],[-7,-35],[-5,3],[-2,22],[-28,-5],[-33,19],[-1,4],[5,27],[24,17],[43,-15],[-10,44],[-21,5],[-81,115],[-2,-1],[-5,10],[-3,-11],[-28,-5],[-8,5],[-37,53],[0,0],[36,12],[-11,3],[4,2],[-53,20],[-6,23],[-19,75],[93,35],[44,17],[-20,-2],[-141,-4],[43,39],[47,43],[-27,40],[68,4],[83,5],[31,41],[102,104],[6,4],[1,0],[0,1],[5,3],[33,-9],[19,-15],[7,8],[1,0],[1,2],[102,107],[4,2],[15,-44],[-5,-5],[14,-23],[-8,24],[15,2],[5,-9],[19,12],[46,6],[106,87],[107,9],[84,166],[67,6],[127,131],[58,59],[190,98],[55,29],[65,102],[99,9],[88,99],[-20,25],[-1,1],[1,3],[-2,-2],[0,1],[-12,24],[62,34],[50,-34],[39,-25],[-2,-2],[4,0],[28,-18],[0,-3],[-13,-56],[138,-117],[-16,-38],[-31,-67],[89,-87],[-3,-67],[-66,-47],[-86,-208],[169,-133],[-97,-16],[-4,-5],[-8,-2],[-46,-52],[-58,-58],[-3,-10],[-38,-43],[13,-59],[-5,-1],[-99,-7],[-21,-34],[7,-4],[2,-52],[0,-27],[-1,-9],[-114,1],[-28,-55],[27,-78],[-89,-78],[8,29],[-54,19],[7,-62],[-58,-23],[70,-26],[69,24],[-26,36],[90,-58],[30,-35],[36,-9],[21,-14],[182,107],[64,105],[93,21],[21,32],[24,32],[66,-25],[-89,-158],[34,-40],[0,0],[-76,-89],[0,0],[-88,-25],[3,-37],[-1,-15],[-131,-49],[-120,137],[-13,-6],[-80,-18],[-1,-21],[-21,-10],[-2,3],[-4,-6],[-67,-32],[-20,77],[-97,19],[13,40],[-1,-1],[0,1],[0,-1],[-28,-44],[8,-18],[-6,-19],[36,-53],[39,11],[-43,-54],[-6,-6],[61,-139],[-25,-11],[-100,-46],[-34,23],[-12,8],[0,0],[0,-1],[2,-52],[13,4],[3,0],[2,-7],[142,30],[3,-1],[-3,-58],[-92,18],[-52,-26],[-12,-6],[-214,74],[21,-11],[-26,8],[84,-41],[-4,-37],[0,-4],[0,0],[0,-1],[27,20],[37,-30],[0,3],[8,-7],[-12,30],[-1,7],[12,-5],[46,-24],[-69,-83],[-31,-24],[-42,-9],[-102,0],[-21,-24],[-41,-8],[-31,15],[25,-16],[-308,-62],[1,-1],[31,-33],[43,36],[3,1],[10,-33],[8,35],[0,1],[37,8],[39,4],[7,-7],[1,-1],[24,-39],[4,15],[2,-1],[6,30],[18,-1],[94,-10],[19,16],[32,28],[90,-20],[20,-5],[5,7],[17,25],[101,-29],[0,0],[10,11],[33,38],[11,-1],[35,-4],[-36,9],[-6,1],[-12,-4],[-44,6],[-1,0],[61,31],[47,24],[5,-17],[3,-22],[2,6],[7,-24],[-3,-3],[-25,-3],[13,-6],[-3,-3],[50,-22],[-1,0],[-45,-4],[0,-1],[-6,-1],[11,-38],[40,30],[15,11],[-8,-69],[24,-9],[14,-6],[-38,-44],[42,-16],[-19,-84],[-104,0],[-96,1],[98,-20],[149,-29],[-91,-205],[-69,40],[-82,49],[-34,-59],[-30,73],[-12,-21],[-12,13],[-7,-43],[-2,-3],[-89,37],[0,0],[28,-40],[-41,-5],[-59,32],[-13,12],[7,-52],[0,-4],[-21,-1],[-115,-5],[30,-2],[-58,-3],[316,-12],[2,0],[8,-6],[64,-59],[6,-120],[-58,-23],[-11,-124],[-39,7],[-52,8],[-52,-70],[-90,163],[6,-51],[18,-165],[-75,16],[5,-26],[0,-1],[-26,52],[-13,-73],[-16,24],[-82,166],[2,15],[-8,-2],[-2,3],[-88,60],[1,-2],[-15,15],[120,-244],[-53,-2],[-30,58],[1,-8],[-2,4],[5,-22],[1,-6],[-37,14],[-1,-1],[0,0],[-6,-12],[-13,-23],[-154,223],[-31,264],[95,110],[50,53],[-2,55],[97,9],[33,-41],[107,33],[-328,25],[53,-15],[19,-7],[-2,-48],[-71,-74],[-86,-89],[-55,-25],[-56,-26],[12,-57],[51,-11],[4,-1],[25,-71],[26,-77],[-5,-33],[-2,-13],[53,0],[6,-9],[92,-177],[0,0],[-120,-10],[105,-64],[26,-16],[14,-92],[-181,14],[-48,3],[-2,1],[-93,72],[-3,2],[-32,-5],[-55,-7],[0,-1],[0,0],[0,0],[37,-70],[2,-16],[-9,0],[-26,24],[-32,-19],[-2,1],[27,-78],[90,2],[53,-131],[18,-1],[41,-77],[1,-3],[-43,-24],[-1,1],[-12,40],[-7,-15],[-6,8],[-2,-28],[-3,-5],[-7,29],[-6,31],[-5,-12],[-18,-30],[-75,45],[0,-2],[0,0],[19,-152],[-46,56],[-18,-31],[-25,13],[-7,3],[-65,113],[-7,-38],[-47,34],[5,-6],[-5,4],[88,-97],[-38,-62],[-1,3],[-19,53],[0,-1],[-1,2],[-10,-25],[-4,-9],[-8,16],[-8,14],[19,-75],[-42,-3],[4,-1],[-6,-1],[28,-15],[-1,0],[-64,30],[6,-28],[-4,3],[9,-35]],[[7523,47929],[-2,-4],[-2,2],[4,2]],[[7522,47971],[0,-1],[-1,1],[1,0]],[[7526,47977],[-1,-3],[-1,1],[2,2]],[[7544,47978],[1,-1],[-2,0],[1,1]],[[7525,47977],[-3,-1],[2,2],[1,-1]],[[7520,47981],[-1,-2],[-1,2],[2,0]],[[7521,47985],[1,-2],[-1,0],[0,2]],[[7539,47967],[-20,-10],[25,32],[-5,-22]],[[7518,47992],[0,-2],[-1,1],[1,1]],[[7486,47998],[-1,0],[1,1],[0,-1]],[[8564,48091],[-83,-16],[54,52],[-7,36],[36,-72]],[[14719,32329],[-8,6],[2,1]],[[15519,31858],[-83,-81],[-192,59],[-172,-168],[12,-28],[-64,-28],[20,-45],[-108,-56],[-82,7],[-156,-179],[-122,-26]],[[14572,31313],[41,44],[-72,14],[-214,158],[131,111],[-228,16],[-42,47],[13,57],[-58,25],[-62,-23],[-12,23],[44,19],[-42,88],[-126,10],[31,96]],[[13976,31998],[125,59],[16,48],[231,-17],[249,39],[-3,44],[53,21],[-115,100],[43,84]],[[14660,32396],[74,-145],[94,-55],[14,-22],[7,-78],[0,0],[7,-76],[29,-24],[-107,-39],[114,33],[6,11],[98,36],[-34,-60],[39,32],[27,-75],[-59,-76],[-7,-9],[8,9],[48,55],[208,43],[25,5],[223,-91],[23,-9],[22,-3]],[[10635,35413],[-14,-1],[9,9],[5,-8]],[[10558,35421],[-1,-11],[-7,8],[8,3]],[[10646,35425],[-11,-8],[7,12],[4,-4]],[[8389,35297],[-56,-55],[-11,28],[-9,24],[42,46],[34,-43]],[[8246,35314],[39,-32],[-37,-2],[-43,-3],[-49,3],[21,48],[2,-3],[-1,-41],[32,45],[6,9],[30,-24]],[[10992,35564],[1,-3],[-3,0],[2,3]],[[8372,36072],[203,-89],[-65,8],[-62,-47],[-108,32],[32,96]],[[10617,36224],[-1,-4],[-3,0],[-3,4],[7,0]],[[7197,36267],[32,-40],[97,26],[3,-28],[6,-48],[-26,22],[-21,-63],[-37,52],[-47,-18],[-21,-7],[-18,31],[-3,7],[29,15],[9,6],[7,4],[-10,39],[0,2],[0,0]],[[8336,36674],[7,-32],[-43,-2],[36,34]],[[7662,36665],[-14,-186],[-2,-4],[-29,7],[-38,-90],[-29,-2],[-42,2],[-22,11],[-113,71],[-5,48],[3,41],[19,23],[47,30],[25,1],[58,-1],[-10,111],[71,41],[34,-42],[47,-61]],[[5935,36910],[-1,-26],[-6,7],[7,19]],[[5952,36932],[6,-57],[-19,26],[13,31]],[[7003,37373],[126,-73],[85,-50],[38,-87],[-16,-7],[-81,-36],[116,-34],[9,-3],[-3,-16],[-53,-180],[-63,-65],[-101,-103],[-176,91],[-5,22],[-14,87],[-254,178],[31,23],[121,91],[36,70],[102,47],[38,-15],[64,60]],[[6498,37347],[97,-58],[-74,25],[-65,-26],[-5,42],[47,17]],[[6525,37408],[1,-48],[-1,-10],[-29,-1],[-156,12],[-70,-72],[-108,11],[1,4],[35,62],[111,19],[3,12],[102,23],[94,-6],[17,-6]],[[8659,37818],[-37,-13],[7,19],[12,12],[18,-18]],[[7446,37906],[3,-53],[-84,-10],[4,-15],[15,-61],[-33,-15],[-53,-9],[-71,94],[86,44],[38,-27],[-20,30],[47,39],[68,-17]],[[7507,38084],[1,-2],[-3,1],[2,1]],[[8459,38486],[-51,-30],[-16,48],[32,19],[35,-37]],[[8351,38671],[-23,-21],[-5,49],[28,-28]],[[8214,38521],[-155,-37],[-8,8],[-74,69],[-28,51],[-17,38],[18,76],[16,8],[38,16],[30,-5],[188,-86],[-8,-138]],[[9016,38843],[-16,-4],[11,9],[6,1],[-1,-6]],[[8438,38919],[40,-100],[14,52],[46,-71],[-72,3],[-28,116]],[[6513,38855],[0,-77],[-63,5],[63,72]],[[6181,39406],[0,-10],[-19,12],[-6,4],[1,1],[17,7],[7,-14]],[[7923,39640],[0,-84],[-27,52],[27,32]],[[8064,39633],[-13,-78],[-61,-106],[-88,-155],[41,-211],[11,-14],[65,-79],[1,-1],[0,-20],[1,-46],[-85,-129],[-88,-26],[-51,27],[3,65],[-31,11],[-3,11],[-16,-3],[-16,6],[41,153],[-3,22],[-29,192],[85,200],[118,-27],[19,55],[-55,23],[32,18],[-11,20],[8,16],[0,0],[80,68],[0,2],[4,1],[-7,30],[-3,31],[51,-56]],[[8013,39710],[9,-15],[-49,30],[-5,3],[-8,5],[12,4],[18,7],[23,-34]],[[8951,39809],[-1,-6],[-5,7],[6,-1]],[[6046,39791],[26,-69],[-6,0],[-28,14],[8,55]],[[8098,40080],[41,-62],[-1,-2],[-73,-279],[-59,68],[52,67],[-40,-24],[-22,36],[15,8],[49,13],[-2,9],[13,6],[-37,89],[-3,13],[19,29],[4,3],[21,-22],[-12,31],[0,0],[38,-27],[-1,7],[4,-3],[-6,40]],[[6935,40745],[66,-44],[102,41],[1,-1],[-15,-77],[-5,-5],[157,-94],[48,-188],[133,-22],[123,-243],[40,6],[-35,-115],[6,-20],[24,-79],[-29,-243],[34,-133],[-17,-161],[-8,-70],[-3,-2],[-104,-89],[-51,-2],[-13,-112],[55,81],[10,0],[15,-20],[108,16],[5,-5],[36,-74],[-7,-30],[-7,-10],[-46,-60],[88,-152],[39,-18],[0,16],[20,-2],[4,-5],[-7,-10],[-26,-16],[2,-15],[-1,-1],[1,-1],[7,-66],[-84,-15],[-110,-109],[154,95],[182,0],[47,-106],[-14,-14],[-95,-75],[6,-20],[-23,-24],[27,14],[1,-6],[114,70],[47,26],[38,-42],[31,-36],[2,0],[10,-12],[35,-12],[137,-48],[45,20],[52,-51],[-29,-60],[86,-18],[103,84],[-36,-65],[153,79],[5,1],[88,48],[86,44],[128,-17],[-8,-8],[-55,-47],[8,1],[-1,-1],[64,7],[125,14],[54,-46],[5,-4],[-4,-7],[-55,-96],[-4,-87],[-3,-51],[-11,-11],[-195,-138],[-131,-70],[-19,11],[-39,28],[-1,-5],[-24,15],[24,-52],[-1,-71],[-14,-36],[44,-30],[-20,-12],[-25,-3],[5,-83],[-71,-70],[-77,20],[-20,-51],[-58,-92],[-28,-15],[-6,-40],[-18,-28],[10,-28],[-2,-8],[-25,12],[7,-29],[-120,-104],[-83,-42],[-17,11],[-33,-23],[-55,-39],[-23,25],[-1,-2],[-3,3],[-10,-20],[-11,-13],[-2,6],[2,59],[-35,47],[-21,65],[31,88],[3,3],[77,19],[-26,85],[24,72],[46,17],[-61,39],[22,48],[68,33],[18,48],[11,10],[77,26],[60,80],[140,45],[23,5],[85,95],[-120,-71],[-60,18],[-11,-39],[-52,9],[-51,12],[-109,-26],[-61,-13],[-33,162],[-26,36],[-77,110],[11,-114],[11,-111],[-21,-11],[-41,-9],[1,-26],[-73,-194],[-30,-61],[-75,46],[-12,9],[33,171],[-27,52],[1,32],[-26,18],[-13,26],[-22,-54],[-85,56],[-19,19],[-1,-6],[-8,5],[-18,-125],[-35,4],[-72,13],[-279,-75],[-62,-17],[58,73],[50,64],[4,54],[3,5],[-3,0],[2,19],[-27,20],[-38,-33],[-13,-12],[-23,-20],[-52,-32],[-24,-3],[-24,13],[-24,33],[-37,50],[-37,95],[5,14],[88,15],[2,7],[9,1],[19,120],[-34,-67],[-18,-20],[-135,-21],[-141,157],[-21,125],[-46,18],[-24,13],[-3,97],[14,9],[135,64],[20,-9],[-12,84],[0,4],[1,-1],[190,-137],[59,-71],[40,-1],[12,-9],[-6,9],[45,-1],[35,-1],[-36,11],[-64,20],[-18,26],[-30,70],[-143,84],[-1,8],[0,71],[58,46],[-146,-84],[-44,-3],[-8,-27],[-26,-14],[10,107],[-55,22],[-21,13],[13,22],[23,37],[-54,14],[-1,13],[10,65],[-17,27],[-1,15],[-4,-7],[-6,10],[-6,-30],[-91,-150],[-1,-1],[24,123],[-66,106],[10,-78],[-21,-27],[0,20],[-30,-61],[-63,16],[12,-110],[16,-150],[-56,-29],[-128,93],[-78,29],[-18,8],[-1,-1],[-3,2],[-70,26],[-33,13],[-30,28],[-37,-3],[-17,6],[-45,72],[-13,20],[29,32],[-42,116],[-72,59],[-68,-42],[28,192],[126,-29],[56,-13],[-69,77],[-20,99],[4,86],[95,71],[4,-6],[130,-207],[98,-156],[60,-56],[18,48],[31,24],[6,-2],[14,-20],[37,-105],[9,54],[24,-9],[-64,112],[-4,13],[-4,1],[-19,33],[-20,-21],[-33,9],[-6,4],[11,18],[20,25],[-73,183],[28,-2],[29,-4],[61,44],[92,-86],[22,76],[-206,193],[-39,36],[-2,-3],[-34,-32],[-2,2],[6,21],[35,60],[5,71],[13,42],[-2,109],[2,25],[158,-105],[51,-210],[55,0],[20,-1],[110,-72],[123,-173],[-6,-14],[10,9],[2,-2],[104,97],[-77,-195],[33,3],[9,-12],[19,-44],[-7,71],[25,62],[81,67],[0,103],[75,-148],[8,12],[61,-27],[5,-3],[2,-5],[14,-79],[15,26],[14,22],[27,-161],[44,-20],[-42,156],[64,-15],[-113,105],[-8,7],[-62,59],[-33,79],[27,6],[-68,93],[-17,40],[2,65],[1,0],[35,-33],[70,134],[-92,-17],[-14,-2],[1,143],[-101,154],[65,43],[-9,51],[80,-3],[64,43],[24,17],[34,72],[-31,120]],[[8634,40894],[-35,-53],[-64,21],[7,32],[92,0]],[[7107,40837],[7,-19],[-6,3],[-32,14],[22,18],[9,-16]],[[14207,41498],[51,-57],[-114,52],[63,5]],[[9201,41381],[-4,-46],[-109,61],[17,77],[96,-92]],[[9631,41635],[1,-3],[-58,31],[3,19],[14,43],[40,-90]],[[10383,41990],[-7,-46],[-62,19],[-4,3],[-15,27],[34,8],[36,-4],[17,-2],[1,-5]],[[9687,42076],[-37,-7],[20,24],[17,-17]],[[9477,42035],[-27,-7],[-19,34],[49,36],[36,-54],[-39,-9]],[[9995,42188],[-22,-28],[-6,63],[28,-35]],[[9706,42313],[-39,-28],[-32,43],[11,6],[26,13],[18,-17],[16,-17]],[[9856,42302],[-37,-36],[-74,27],[38,96],[35,-34],[-12,-30],[-6,-9],[51,-13],[5,-1]],[[9723,42480],[-10,-16],[-15,2],[-32,16],[9,33],[9,11],[55,-14],[-16,-32]],[[11173,43434],[2,-5],[-3,2],[1,3]],[[11068,43496],[0,-5],[-3,2],[3,3]],[[10972,43618],[-4,-1],[3,4],[1,-3]],[[10973,43626],[5,-4],[-9,1],[4,3]],[[10227,43656],[12,-37],[51,2],[-2,-42],[-18,-5],[-89,30],[-8,3],[54,49]],[[10423,44285],[0,-3],[-2,3],[0,0],[2,0]],[[10515,44257],[-16,-44],[-94,11],[-11,18],[10,22],[61,27],[11,2],[39,-36]],[[11912,44802],[-30,-61],[8,48],[22,13]],[[13145,45116],[-2,-17],[-24,22],[10,5],[15,3],[1,-13]],[[13023,45135],[-2,-5],[-30,-1],[-12,4],[4,16],[9,10],[-5,6],[5,19],[39,6],[-8,-55]],[[12976,45195],[3,-22],[-15,16],[11,6],[1,0]],[[12624,45204],[0,-1],[-1,0],[1,1]],[[14768,45281],[-5,-1],[6,3],[-1,-2]],[[12567,45223],[0,-2],[-2,0],[2,2]],[[12555,45231],[-4,-1],[0,1],[4,0]],[[12491,45275],[1,0],[-3,0],[1,1],[1,-1]],[[14752,40341],[73,-169],[-30,-37],[110,-124],[-52,-32],[53,-140],[-31,-28],[95,-44],[-44,-42],[68,-116],[-54,-280],[123,-41],[127,37],[24,63],[132,-3],[192,72],[96,-142],[113,-65],[62,14],[82,-182],[-39,-30],[12,-62],[-300,-344],[0,-45],[135,-80],[-36,-45],[41,-82],[-49,-92],[103,-81],[-52,-58],[45,-41],[-61,-143],[-107,3],[-85,-63],[-61,10],[-73,-136],[-69,-25],[-100,-123],[-116,17],[-87,-108]],[[14992,37554],[-95,-85],[-105,-13],[-25,-37],[33,-61],[44,-4],[-75,-99],[39,-110],[-11,-123],[-37,-97],[-83,-58],[-42,-142]],[[14635,36725],[-68,13],[-92,-81],[-121,-1],[-16,47],[-109,19],[-7,69],[-37,-8],[-56,-92],[5,-157],[-96,-47],[-36,40],[-35,-48],[-35,67],[-19,-28],[-213,-8],[-171,52],[-19,37],[-94,-143],[41,-36],[-22,-36],[-53,-8],[-33,-59],[-230,-33],[-78,-74],[-2,-69],[-39,-13],[-93,57],[-204,-304],[-82,21],[-156,142],[-88,-121],[9,-50],[-130,-65],[42,-131],[-90,-139],[44,-18],[-3,-59],[-197,-96],[-181,9],[6,-178],[155,-13],[103,79],[35,-89],[-56,-67],[32,-49]],[[12146,35057],[-182,-78],[-47,26],[-72,-93],[-161,0],[-66,-74],[-87,-23],[-26,24],[-120,-40],[-208,50],[-13,-62],[-59,-48],[-42,10],[-28,-75],[-174,-31],[-29,-47],[-104,7]],[[10728,34603],[92,184],[-96,-146]],[[10724,34641],[-52,64],[45,38],[13,97],[-41,70],[67,46],[21,69],[-118,37],[-103,-20],[0,72],[-184,28],[-7,-155],[-101,-52],[-75,44],[-69,-14],[-83,118]],[[10037,35083],[0,0],[88,95],[-8,21],[2,3],[-3,1],[-6,19],[-77,-1],[27,33],[121,86],[6,0],[67,-16],[2,-7],[87,107],[113,14],[119,-61],[92,20],[30,57],[167,68],[246,50],[-131,-3],[-452,-151],[-16,40],[-54,-4],[1,42],[-187,16],[56,137],[42,57],[310,409],[1,8],[9,13],[74,51],[-42,11],[-11,-43],[-28,65],[-22,0],[-19,17],[-62,-16],[38,-14],[27,-13],[1,-26],[-34,-55],[-239,-263],[-13,-12],[-66,6],[20,-56],[-60,-113],[-9,-12],[41,-61],[-80,-35],[-14,-6],[-31,-61],[-12,49],[-29,11],[-1,1],[-25,8],[24,-9],[-19,-22],[-10,-1],[-58,-67],[-69,-44],[-32,-20],[16,-36],[-89,-104],[-42,-46],[-107,-22],[-109,-143],[-41,11],[-13,-37],[-7,2],[-85,31],[13,-13],[-42,11],[63,-30],[38,-35],[-97,-157],[-76,-116],[-64,-62],[-334,-218],[-35,77],[-151,67],[-27,-33],[-30,42],[-21,29],[94,155],[-23,13],[-1,0],[-1,-2],[-107,-164],[-299,78],[-65,18],[-6,5],[-160,158],[-56,145],[-68,49],[-11,134],[207,44],[37,-9],[43,26],[-1,0],[10,3],[45,-96],[25,5],[109,-63],[49,-37],[10,36],[-34,16],[-7,17],[-84,42],[-23,40],[0,18],[79,32],[32,4],[23,18],[39,15],[41,34],[178,147],[-1,1],[1,0],[77,-26],[51,-76],[51,13],[84,-43],[347,59],[-216,7],[-144,-47],[-163,155],[-156,-9],[-1,1],[-24,44],[-4,-57],[-170,-161],[-77,31],[-98,-37],[-7,1],[-25,31],[-47,-15],[-20,-7],[0,0],[-25,54],[-11,-12],[-23,25],[-80,-36],[-6,-48],[-40,65],[-129,-24],[-64,66],[-136,-27],[-16,7],[-29,20],[5,23],[-18,-14],[-5,3],[-75,-63],[-138,25],[-92,79],[-1,6],[-24,113],[46,-2],[1,0],[29,65],[4,-1],[45,-13],[0,8],[4,0],[7,38],[-12,6],[-1,48],[18,-4],[37,-13],[150,74],[176,-42],[30,47],[98,-14],[7,28],[28,-32],[-24,48],[51,-9],[43,-8],[1,0],[4,0],[26,48],[21,31],[112,-119],[57,-61],[69,71],[51,-41],[-2,-72],[90,-7],[-35,36],[16,15],[38,-26],[-32,32],[-8,-3],[-15,10],[-1,50],[-28,-19],[-83,42],[8,97],[74,-37],[4,2],[8,-3],[10,-54],[7,64],[65,-52],[25,83],[28,-3],[30,-7],[9,18],[16,19],[46,-43],[101,8],[-357,137],[7,52],[14,50],[87,24],[38,-35],[8,18],[57,29],[28,-2],[46,39],[32,17],[123,-20],[40,66],[22,37],[68,38],[-1,11],[31,13],[-34,10],[-2,13],[-32,-1],[-1,-1],[-4,1],[-90,-123],[-18,-25],[-84,20],[-105,25],[100,102],[73,25],[24,4],[-7,3],[1,0],[-8,2],[-37,14],[0,1],[32,19],[-24,20],[-153,-26],[-50,-6],[-1,-2],[-66,-10],[-1,3],[-8,-5],[-101,-17],[-71,-52],[-94,45],[-14,27],[-2,12],[39,17],[33,8],[17,48],[97,-27],[1,-28],[25,33],[7,-2],[-1,9],[25,33],[-23,29],[-66,-19],[-33,53],[23,29],[3,-1],[10,17],[47,-8],[-33,35],[4,7],[39,30],[-20,28],[-1,7],[40,89],[10,10],[78,-30],[-32,69],[-58,-8],[0,0],[35,129],[33,59],[293,51],[9,-22],[48,-121],[220,-110],[19,16],[78,60],[43,-21],[197,73],[-34,34],[-50,-10],[-195,-84],[-9,0],[-9,4],[-105,49],[-12,7],[-30,46],[-24,41],[-11,64],[7,13],[50,20],[-52,24],[-9,15],[-53,12],[-18,9],[-60,-30],[-49,-24],[-38,55],[-17,52],[-59,-37],[-46,112],[7,7],[208,177],[10,89],[206,46],[53,-12],[134,-29],[75,-121],[142,-76],[32,83],[65,20],[2,0],[0,0],[0,0],[-11,22],[-109,-18],[-1,0],[-76,56],[-27,109],[-149,63],[-82,-9],[-65,-7],[-9,4],[-60,50],[-20,53],[3,23],[-11,-2],[-4,10],[13,20],[78,84],[59,36],[35,22],[29,94],[2,9],[-74,29],[-30,11],[-2,2],[28,52],[31,62],[64,25],[60,20],[36,-15],[159,80],[165,-198],[83,-52],[79,-49],[33,55],[23,37],[42,9],[-40,-6],[-14,-4],[8,8],[-12,-9],[-18,-5],[-122,51],[-39,39],[-135,159],[48,86],[-47,-25],[-10,-25],[-2,24],[-4,-39],[-9,-22],[-13,8],[-1,7],[-8,-2],[-18,10],[-61,-28],[-9,36],[-104,-67],[-23,54],[-56,-36],[-88,67],[-12,-6],[-11,-4],[-211,-12],[-6,0],[28,3],[0,0],[-34,69],[38,96],[59,60],[16,0],[35,-4],[-1,6],[37,1],[-39,5],[-10,46],[-3,23],[66,-6],[24,23],[30,5],[0,-6],[-34,-36],[-13,-14],[14,-1],[20,-2],[206,48],[14,53],[130,-5],[85,74],[102,83],[3,6],[42,36],[33,63],[34,64],[-21,38],[-75,-22],[-78,-87],[-40,-44],[10,-12],[-161,-172],[-137,-14],[-8,5],[-10,27],[29,19],[-56,4],[-57,17],[4,57],[26,12],[69,29],[-2,3],[28,13],[-56,39],[-6,12],[21,105],[-45,-104],[-71,-49],[-49,-26],[-80,-42],[-85,-83],[-65,-47],[-149,-37],[-2,0],[-59,155],[-16,-72],[-26,6],[-28,143],[3,-1],[23,-20],[1,12],[9,-4],[-1,20],[-3,48],[38,-46],[6,-7],[-3,7],[-16,39],[15,-7],[-22,26],[-27,65],[8,39],[44,79],[-67,8],[-3,5],[-75,9],[-56,161],[103,507],[8,39],[21,-4],[16,-8],[3,4],[8,-1],[26,43],[63,-65],[68,-71],[75,-28],[2,-52],[3,1],[0,-5],[44,23],[62,-42],[-32,63],[25,24],[3,-11],[27,-114],[3,-2],[2,-10],[16,-4],[112,-86],[16,-20],[-2,14],[-17,177],[104,-127],[-5,57],[128,13],[20,-27],[-10,36],[45,-23],[2,35],[81,-39],[34,66],[-30,44],[-170,22],[-134,-5],[-103,-52],[-5,40],[-27,15],[-75,41],[8,35],[60,-16],[-12,44],[-1,4],[-127,44],[-16,110],[-68,89],[-23,15],[-63,49],[-14,2],[-34,23],[-56,-7],[0,1],[96,230],[-7,71],[154,57],[26,-39],[-4,-12],[70,5],[13,-9],[58,-45],[-1,4],[7,-4],[-18,52],[49,12],[-10,62],[-56,-8],[24,31],[-32,65],[-2,0],[-190,6],[-160,96],[2,12],[34,215],[-21,159],[-18,164],[10,16],[62,7],[33,-6],[54,60],[2,0],[62,-22],[42,10],[46,-5],[81,-8],[2,-2],[-28,-110],[3,-1],[27,-31],[-7,-17],[26,-6],[43,-49],[3,-7],[-23,-117],[139,-168],[58,-14],[22,42],[-78,86],[41,34],[7,-24],[5,-24],[66,15],[10,2],[0,1],[1,0],[-4,43],[-52,16],[47,178],[-69,76],[-113,28],[-41,118],[1,1],[37,22],[-12,9],[1,2],[-18,13],[-9,7],[11,26],[96,149],[6,9],[112,-25],[11,-48],[33,36],[8,4],[10,-8],[14,-47],[-12,-25],[23,-12],[25,-85],[11,-75],[12,-6],[1,-3],[39,-14],[107,-47],[101,-27],[-3,28],[2,0],[-2,3],[-4,43],[8,9],[40,37],[5,17],[25,30],[-13,9],[39,127],[140,-77],[34,-19],[52,-29],[66,-101],[284,-97],[-48,104],[-192,60],[-88,145],[-161,31],[-1,1],[-32,96],[76,-6],[22,-1],[1,2],[1,0],[2,3],[25,36],[67,-80],[30,-41],[64,-13],[31,-7],[1,0],[4,-1],[173,38],[-8,-25],[56,-13],[219,-181],[73,-4],[124,-234],[45,-14],[-88,223],[-98,52],[-59,83],[-40,-17],[-66,63],[63,-17],[-172,122],[6,4],[127,80],[10,44],[7,34],[-32,-35],[-24,-26],[0,25],[1,43],[-101,3],[-62,67],[-195,42],[3,18],[6,32],[-69,94],[-74,0],[24,36],[-30,67],[-12,3],[-4,6],[-161,23],[-13,3],[1,5],[22,97],[-95,49],[-42,78],[34,15],[1,93],[30,23],[29,19],[96,-66],[43,-30],[71,-155],[13,90],[37,27],[4,1],[46,-65],[71,-19],[3,6],[52,44],[9,0],[-21,37],[-4,11],[38,7],[-1,2],[-6,64],[32,25],[-24,47],[-34,-16],[5,8],[16,26],[-1,0],[1,2],[-72,26],[13,1],[110,6],[0,1],[-4,1],[-35,28],[-70,53],[87,3],[33,0],[19,52],[22,0],[16,-5],[6,46],[-96,-41],[-122,39],[89,59],[4,3],[1,0],[-95,-24],[-24,39],[42,31],[-5,1],[1,1],[-37,10],[-44,13],[-89,194],[-128,92],[1,7],[84,142],[25,-67],[91,2],[0,-3],[-18,-43],[75,-19],[2,-6],[4,-11],[-1,0],[1,0],[19,-61],[19,15],[185,118],[-15,6],[19,5],[-1,-13],[2,13],[27,7],[9,-42],[28,47],[45,-35],[4,-5],[68,24],[16,-21],[5,-8],[3,-19],[0,-1],[9,-8],[34,-38],[-8,13],[10,-9],[-42,55],[20,74],[35,-29],[5,5],[2,-2],[69,27],[27,-58],[-11,35],[-7,26],[-3,-1],[-6,5],[-8,17],[68,36],[52,-40],[107,-82],[1,0],[5,-4],[2,5],[81,16],[9,0],[-5,2],[14,38],[40,-14],[28,-83],[179,-114],[-34,78],[-135,98],[225,26],[-268,42],[-68,-9],[30,-18],[-27,-18],[-72,10],[-19,8],[-141,80],[-4,3],[3,45],[-46,-16],[1,9],[-34,-21],[4,39],[19,-4],[11,-12],[1,8],[8,-2],[-2,54],[-57,-13],[6,15],[10,20],[-32,17],[-7,4],[57,42],[3,2],[-40,4],[-19,3],[58,42],[-47,39],[-4,-6],[-6,4],[-38,-34],[-31,7],[-1,1],[35,65],[-3,3],[1,1],[-3,1],[-47,54],[2,24],[-23,1],[-2,2],[85,9],[-64,47],[95,122],[-5,14],[2,0],[-2,0],[-22,66],[34,59],[30,-31],[48,-53],[80,-10],[-12,-29],[19,13],[29,10],[8,-28],[18,7],[7,-23],[-4,-12],[26,-1],[62,-14],[-19,-30],[77,16],[-4,3],[5,-1],[-53,33],[-22,15],[37,35],[-91,24],[-2,1],[27,35],[-37,-8],[-14,-2],[56,47],[2,0],[58,-8],[-23,5],[27,-2],[-107,23],[-6,-33],[-42,-5],[-25,-4],[-8,0],[-20,11],[-32,23],[83,8],[32,2],[-33,18],[-26,12],[-71,36],[39,56],[53,-5],[6,-2],[-5,2],[-47,14],[40,29],[66,0],[-37,25],[1,1],[94,-7],[43,-5],[114,-132],[-22,66],[31,22],[-74,25],[-3,38],[-183,24],[50,28],[13,6],[-1,1],[3,1],[-93,28],[10,40],[-17,9],[-39,21],[-40,-22],[-33,55],[1,5],[36,165],[60,70],[8,9],[15,3],[42,-4],[20,14],[44,7],[112,193],[-4,7],[6,56],[8,7],[11,180],[10,-5],[143,-75],[4,3],[27,-13],[29,44],[22,-1],[3,-1],[156,-8],[83,-81],[73,-14],[9,-129],[-1,0],[2,-12],[3,-37],[4,1],[0,-3],[32,-20],[11,-21],[39,-12],[31,-18],[-149,-136],[87,62],[-32,-123],[100,207],[-36,9],[-50,32],[-13,25],[20,4],[28,64],[93,23],[-79,105],[72,23],[4,-77],[38,-17],[35,-16],[11,-41],[9,-40],[1,0],[2,-12],[51,21],[45,-74],[120,-19],[26,-6],[-28,-14],[32,-82],[-162,-173],[-15,-17],[5,3],[-4,-4],[-137,-246],[63,3],[35,83],[182,90],[-16,78],[82,119],[1,0],[72,17],[1,-4],[-7,-70],[13,22],[1,-3],[68,112],[-4,12],[-13,138],[21,56],[21,18],[134,4],[94,-6],[37,-19],[15,-29],[105,-34],[1,0],[3,-52],[1,-22],[57,46],[8,-8],[0,0],[0,-1],[1,1],[29,-26],[-18,-105],[29,-19],[0,-5],[4,3],[30,-20],[-90,-87],[-48,-46],[15,5],[-17,-17],[-13,-108],[25,56],[23,-46],[-105,-116],[59,46],[-74,-76],[32,8],[-8,-44],[89,170],[34,30],[36,-22],[-19,36],[-40,-28],[-23,86],[22,-34],[10,29],[39,-13],[-70,33],[44,-7],[-18,22],[11,7],[27,9],[24,6],[5,-6],[25,0],[-2,-2],[-69,-35],[46,5],[25,30],[24,27],[57,19],[97,145],[63,15],[45,7],[3,0],[-1,0],[49,8],[87,-30],[8,-11],[5,-91],[3,46],[88,-2],[41,-91],[33,-73],[-88,220],[1,2],[82,-39],[-2,60],[13,2],[-7,51],[10,2],[66,-32],[32,-27],[59,38],[11,80],[61,-7],[1,2],[1,-1],[10,21],[5,10],[1,-2],[-1,3],[3,5],[97,-65],[11,13],[28,-13],[23,-33],[1,20],[3,-1],[2,45],[21,13],[51,35],[12,100],[55,-2],[19,56],[2,-6],[42,-192],[141,56],[2,0],[37,-33],[1,-1],[0,0],[4,-4],[31,32],[5,-6],[31,-62],[29,-5],[2,-12],[31,-100],[-19,111],[-7,0],[11,22],[18,15],[122,-17],[176,56],[0,0],[63,-55],[10,26],[108,101],[56,40],[70,51],[9,5],[66,4],[2,-1],[0,1],[3,0],[32,49],[18,27],[65,-28],[4,-3],[2,0],[5,-2],[287,42],[-6,-9],[-43,-67],[81,-60],[37,13],[-42,-61],[74,83],[120,45],[138,-42],[136,-50],[3,6],[7,-2],[48,32],[10,92],[-91,52],[-103,59],[17,95],[81,61],[13,9],[63,-37],[34,-95],[104,-20],[98,54],[154,-18],[67,32],[-1,-1],[4,1],[-2,1],[43,21],[41,-51],[45,-64],[7,1],[4,-5],[174,49],[156,-9],[70,-7],[-53,-237],[-89,-32],[37,-56],[-23,-89],[-176,-191],[-4,-22],[-1,-10],[-5,-6],[1,-12],[-15,-88],[-53,65],[94,-155],[3,-18],[15,-11],[7,-11],[9,0],[15,-10],[76,14],[86,4],[4,-9],[-35,-177],[-188,36],[124,-40],[34,-46],[-40,-62],[-9,-11],[-63,-245],[-145,-145],[-123,-124],[-5,-1],[0,-3],[-68,-69],[-135,-25],[-77,-15],[-20,-44],[-205,-79],[-49,-19],[-14,-19],[-114,-107],[-12,2],[-236,-380],[-6,-10],[-5,-3],[-310,-206],[-30,-45],[-46,-34],[-17,-5],[-46,24],[23,-30],[-3,-3],[-19,-6],[-174,-157],[-89,-74],[-178,-58],[-87,-95],[-43,-168],[-73,-53],[-285,-122],[-52,-18],[-62,-181],[-74,-2],[-5,0],[5,8],[59,92],[-61,-26],[-54,-23],[-23,54],[-83,-17],[39,-75],[108,-52],[17,2],[69,6],[-14,21],[24,-31],[28,-122],[-63,-64],[5,-164],[-39,22],[-37,21],[-109,-2],[-117,-97],[-29,37],[-60,-1],[-10,4],[30,16],[-3,57],[-78,-52],[-16,8],[-26,34],[-107,22],[-5,2],[-3,0],[-58,12],[-118,-28],[1,-42],[-6,-2],[-49,3],[-18,12],[-148,121],[71,-71],[-49,32],[95,-79],[17,-16],[9,-51],[90,16],[15,-3],[206,42],[91,-150],[134,-23],[-58,76],[0,1],[78,-52],[7,29],[2,-1],[3,-24],[30,12],[0,0],[153,-107],[0,-7],[33,-16],[-28,19],[74,45],[185,112],[162,-76],[41,-32],[-49,25],[-114,-86],[-35,17],[21,-23],[130,53],[151,10],[93,57],[46,129],[86,24],[38,11],[-65,-159],[-179,-210],[-192,-226],[-177,-302],[-23,-1],[-97,3],[-64,1],[-1,8],[60,120],[26,51],[-5,66],[-24,-13],[-98,-54],[-70,15],[-278,-239],[-96,22],[-32,11],[-96,-24],[4,-40],[-4,-2],[-150,6],[-36,-71],[52,-12],[-1,-3],[-45,2],[-18,-45],[-99,-33],[-28,-41],[-1,-1],[-101,-105],[-5,-13],[-92,-65],[-8,-6],[23,-66],[4,-2],[30,24],[-9,-24],[14,28],[63,50],[86,68],[12,9],[329,235],[202,43],[2,-98],[113,11],[127,29],[149,100],[67,-21],[59,-17],[-162,-182],[-138,-151],[-25,-27],[-32,-90],[65,-84],[-126,23],[-10,-7],[-13,2],[-102,-59],[-41,-104],[-120,-206],[-20,-31],[-314,40],[-134,17],[80,-45],[-46,0],[-5,-29],[-44,35],[-24,-25],[110,-24],[-40,-10],[89,8],[21,-15],[32,5],[-72,-29],[148,-10],[35,-19],[138,67],[17,6],[28,-136],[-19,138],[169,-54],[91,86],[3,86],[104,-12],[31,99],[187,131],[-21,87],[-87,30],[55,43],[125,9],[13,43],[4,-1],[5,-2],[139,-71],[-83,54],[138,-41],[43,-18],[131,20],[52,5],[4,3],[25,3],[2,3],[94,71],[14,19],[99,71],[86,38]],[[16736,45761],[-99,-23],[69,153],[46,-61],[-16,-69]],[[12176,31490],[-56,-88],[66,-40],[-18,-88],[60,-49],[-34,-55],[40,-35],[-77,-4],[-1,-61],[-61,-56],[-175,9],[-85,65],[-65,-18]],[[11770,31070],[-131,117],[-16,106],[-135,-91],[-133,-3]],[[11355,31199],[0,1],[-13,36],[-11,58],[47,55],[28,34],[-31,25],[-2,2],[1,17],[9,108],[2,18],[183,105],[19,-13],[16,-12],[0,0],[9,-6],[13,30],[66,-9],[96,-86],[389,-72]],[[17519,30909],[-73,27],[-40,-88],[-55,10],[-81,-83],[-37,7],[-32,127],[-373,-308],[-85,-118],[35,-78],[-110,-61],[-69,79],[21,76],[-51,46],[21,63],[-63,57],[22,39],[-40,10],[-13,105],[-31,3],[-57,-95],[-34,16],[-31,-41],[-116,-20],[-56,28],[-4,81],[-154,-17],[-72,162]],[[15941,30936],[55,16],[167,203],[90,52],[36,-40],[46,74],[89,3],[23,60],[118,-30],[210,56],[-75,71],[18,85],[70,8]],[[17654,40678],[-5,-155],[93,-81],[-115,-208],[55,-26],[50,-108],[86,-24],[-7,-62],[90,-18],[34,-176],[69,44],[108,-49],[-129,-68],[-6,-44],[-41,16],[-30,-52],[-72,16],[-56,50],[5,42],[-90,-70],[-85,60],[-12,79],[-38,17],[-99,-45],[-60,14],[-1,-54],[-100,-82],[8,-58],[-168,8],[-143,-246],[28,-34],[166,-23],[-155,-93],[-51,-80],[105,-34],[105,-109],[-88,-75],[41,-63],[-7,-121],[61,-51],[-74,-101],[-23,-109],[-105,-85],[-75,90],[-31,-19],[-116,47],[-54,-37],[-99,4],[-66,-81],[-131,-32],[-111,-190],[8,-91],[-70,5],[-42,-68],[-103,11],[-120,-73],[-9,-60],[45,-54],[-23,-43],[81,-92],[-42,-101],[-59,-4],[-67,-64],[-97,2],[-38,37],[-80,-69],[-112,12],[-92,-42],[-65,23],[-43,-43],[-15,72],[-108,-64],[-160,22],[-56,-104],[-56,140]],[[14752,40341],[2,1],[88,73],[34,-1],[-96,-79],[154,88],[40,60],[36,7],[101,21],[74,-41],[-14,-55],[-53,-16],[-31,-19],[32,-44],[-1,57],[7,3],[21,-7],[-25,-17],[31,15],[-16,-36],[44,31],[60,-24],[-20,-35],[25,35],[31,-15],[19,79],[-124,87],[106,3],[22,-5],[111,9],[50,2],[96,76],[-3,131],[113,-3],[348,108],[9,3],[191,-3],[-13,-35],[82,-67],[-73,72],[48,-25],[2,-1],[110,-54],[160,-79],[223,-64],[-41,0],[25,-39],[25,37],[211,-62],[60,29],[40,20],[183,74],[13,19],[148,71],[32,6],[65,3],[46,-82],[94,24],[0,1]],[[10460,28896],[-5,-3],[-16,2],[21,1]],[[10801,29370],[24,-56],[-69,69],[9,41],[4,18],[32,-72]],[[10214,30400],[193,-96],[57,-57],[67,-67],[95,-340],[5,-19],[-52,-73],[-23,-30],[0,-3],[-22,-30],[27,-12],[1,-1],[49,-18],[79,-32],[78,-99],[-138,-110],[10,-39],[139,-74],[-47,-95],[34,-193],[-87,-77],[-77,21],[-50,-14],[-12,1],[-17,-10],[-98,-29],[-166,29],[-30,21],[-5,14],[-91,55],[-60,43],[-42,172],[-86,45],[1,25],[18,135],[35,63],[-161,298],[-13,24],[0,82],[92,267],[114,56],[33,87],[90,-18],[-8,17],[4,0],[-6,7],[-14,32],[3,5],[78,36],[3,1]],[[11204,30472],[-49,-127],[-40,58],[89,69]],[[11339,30632],[-24,-67],[-37,-42],[0,48],[-50,-8],[-50,-48],[-1,2],[54,213],[46,27],[29,17],[33,-142]],[[11770,31070],[-99,-52],[185,-99],[-24,-51],[30,-31],[105,-7],[74,-229],[83,85],[8,-61],[44,-15],[126,114],[72,-89]],[[12249,29758],[-168,-180],[-32,27]],[[12049,29605],[0,9],[-31,49],[-19,52],[-41,42],[-21,34],[-8,8],[-29,17],[-24,24],[-105,56],[-13,49],[-64,-9],[-7,4],[-8,-6],[-41,-6],[-4,4],[-8,39],[-61,5],[7,10],[-10,16],[14,16],[-143,189],[-7,4],[-122,74],[7,120],[55,38],[-16,18],[9,3],[-17,8],[-6,7],[1,1],[63,-32],[-8,97],[20,-4],[36,-7],[6,56],[-3,42],[4,44],[-7,16],[0,9],[-47,104],[-2,3],[-42,95],[-2,296]],[[16895,46116],[-53,-18],[61,82],[-8,-64]],[[16728,46604],[20,-25],[75,15],[-10,-90],[-63,32],[-2,-3],[-1,1],[-5,-12],[-10,-17],[-96,12],[-11,87],[219,84],[7,-31],[-139,-35],[14,-16],[-6,-2],[8,0]],[[16586,46621],[-21,-12],[-42,40],[-13,23],[8,12],[40,28],[19,-24],[22,-47],[-13,-20]],[[16560,46813],[-12,-6],[-8,21],[-7,29],[-1,7],[9,-7],[35,-25],[-16,-19]],[[18069,46959],[-57,-49],[-2,21],[0,16],[59,12]],[[16272,46362],[71,-18],[88,94],[164,26],[13,-7],[27,-19],[-44,-77],[61,-1],[0,-2],[-165,-48],[-130,43],[4,-6],[-6,2],[30,-35],[6,-9],[-20,-14],[-10,-8],[-60,51],[-142,-18],[-76,96],[-19,109],[-126,103],[-29,160],[-28,4],[-57,7],[-80,19],[12,30],[84,223],[34,12],[113,38],[82,-21],[10,-24],[28,-90],[36,-2],[248,-129],[21,-15],[-4,-4],[-51,-37],[22,-4],[18,-20],[-9,-24],[67,-41],[1,-2],[-50,-63],[14,-4],[-2,-3],[58,-16],[3,-1],[-44,-47],[108,-32],[-102,-84],[-115,-10],[-10,-15],[-5,-1],[-9,-21],[-30,-45]],[[16832,47153],[-4,-1],[-1,0],[2,2],[3,-1]],[[16165,47140],[37,-21],[30,18],[18,-62],[-79,1],[-38,3],[-9,81],[41,-20]],[[17365,47607],[-11,-36],[-2,1],[1,34],[12,1]],[[18370,47619],[-25,-17],[0,1],[10,53],[27,-24],[-12,-13]],[[12507,47602],[0,-13],[-3,9],[3,4]],[[17652,47892],[2,-63],[-13,-22],[-55,-91],[41,-70],[14,-26],[-58,-48],[-79,29],[-83,39],[-12,-4],[-56,21],[-11,-13],[-21,-20],[-66,6],[67,173],[28,71],[27,-70],[3,-5],[10,-7],[1,-1],[2,-1],[78,-45],[-23,28],[8,3],[32,-8],[48,40],[9,3],[-7,60],[28,14],[34,0],[38,35],[11,5],[3,-33]],[[17163,47944],[53,-65],[-15,-23],[-30,34],[-35,-41],[-2,-2],[-58,74],[87,23]],[[12828,47925],[-34,-22],[14,24],[20,-2]],[[17202,48088],[-47,-40],[-135,13],[150,72],[32,-45]],[[18054,48184],[-1,-4],[-1,3],[2,1]],[[18062,48197],[5,-58],[-8,2],[-40,31],[-1,3],[2,1],[32,-7],[6,27],[4,1]],[[16720,48234],[-21,-37],[-21,42],[-3,5],[45,-10]],[[18313,48242],[-49,-1],[37,48],[24,-43],[-12,-4]],[[15979,47723],[66,34],[-33,26],[-11,10],[7,190],[-32,29],[2,3],[110,96],[-5,26],[9,9],[-13,8],[-5,26],[4,1],[35,-4],[77,31],[267,66],[0,-1],[258,-159],[10,0],[44,-26],[66,25],[1,-4],[9,-46],[61,-38],[11,-7],[-1,-1],[-45,-35],[5,-4],[-7,-7],[39,-28],[135,-96],[-6,-48],[-18,-125],[-107,37],[-53,19],[4,-8],[-5,2],[6,-5],[30,-59],[-2,-8],[-21,-57],[-28,0],[-32,1],[-35,-42],[-9,2],[-7,-20],[-11,-13],[-68,3],[0,0],[38,-32],[74,-24],[-1,-3],[14,-1],[88,-28],[22,45],[14,30],[4,5],[100,6],[141,-132],[86,152],[11,-36],[0,-4],[1,0],[1,-2],[34,8],[44,8],[-3,-5],[-27,-13],[17,-8],[-29,-57],[9,-1],[-2,-3],[22,0],[45,-6],[-52,-29],[-33,-15],[0,-90],[93,-27],[3,4],[5,-1],[44,68],[46,62],[52,-13],[40,-13],[71,53],[28,-117],[2,-16],[-85,8],[-85,-47],[61,-107],[0,-25],[-41,-37],[53,-24],[14,34],[30,7],[25,0],[-13,-31],[52,-37],[30,59],[-41,0],[17,70],[-52,35],[238,111],[51,23],[-34,-185],[22,-70],[-1,-10],[-108,9],[-43,-55],[-51,5],[-18,3],[-1,-1],[-1,1],[-20,-35],[-112,-173],[-45,52],[-33,38],[-87,43],[-39,-24],[1,-1],[-1,0],[12,-9],[28,-21],[-23,-28],[-18,-22],[-48,-55],[3,1],[-2,-3],[83,23],[-3,-48],[-5,-50],[91,-9],[-118,-53],[-12,-6],[-1,-1],[71,-117],[-7,0],[-49,0],[-103,-129],[27,-55],[-42,-68],[-13,-18],[91,-69],[-12,-35],[-31,-72],[-113,-17],[-8,27],[-4,32],[-4,-2],[0,0],[-2,-1],[-27,-11],[-49,79],[38,37],[2,131],[-45,4],[-84,106],[1,1],[36,29],[13,-22],[24,-43],[70,91],[-27,-32],[-62,77],[-84,-32],[-14,-5],[68,69],[27,-9],[42,-16],[39,20],[42,22],[18,-53],[166,89],[1,0],[-1,0],[1,1],[-258,49],[-3,1],[89,40],[-1,-2],[-23,-36],[17,7],[-4,-16],[74,48],[62,-24],[8,-4],[0,1],[2,-1],[-15,60],[-11,55],[43,35],[41,33],[-1,0],[0,1],[-1,0],[-42,30],[-35,-17],[-38,6],[-4,10],[8,33],[-118,192],[-2,4],[8,87],[1,12],[0,6],[-41,12],[-144,-122],[-8,-2],[-127,2],[-1,-2],[-44,22],[34,-63],[-2,-5],[-100,6],[-51,-74],[-81,19],[-72,-45],[0,1],[-20,34],[-31,-28],[-92,111],[-5,162],[-63,51],[1,37],[-24,-70],[-17,-36],[-83,-4],[-6,34],[-20,-94],[-168,77],[-31,263],[55,116],[-23,47],[-3,9]],[[18173,48315],[39,-43],[-55,11],[1,-1],[-3,0],[33,-65],[158,-9],[-35,-8],[-64,-15],[1,-1],[-1,0],[10,-37],[19,-73],[126,23],[49,8],[-46,-54],[3,-15],[4,-42],[6,-4],[2,-8],[63,-27],[-31,-88],[-89,42],[-2,-3],[-1,1],[-5,-10],[-21,-31],[-88,-20],[3,129],[-83,57],[-77,-39],[34,-55],[6,-11],[-20,-60],[-100,10],[-16,2],[58,158],[122,8],[27,41],[-34,36],[-126,139],[133,54]],[[17332,48321],[-36,-199],[-75,155],[40,73],[10,4],[55,-27],[6,-6]],[[16957,48401],[7,-4],[69,2],[41,-1],[76,50],[48,-40],[-1,-1],[-78,-86],[40,-147],[-2,0],[-223,-44],[-30,18],[-130,81],[-76,141],[133,139],[67,-10],[4,-1],[2,-70],[41,-27],[12,0]],[[17897,48669],[-1,-1],[-75,20],[17,56],[4,13],[8,-13],[47,-75]],[[17761,48470],[26,-166],[3,-3],[0,-3],[12,-12],[39,-44],[-26,-11],[-120,-41],[-19,114],[-17,12],[-47,52],[-18,-8],[-7,4],[-11,78],[-1,8],[13,35],[62,-59],[69,34],[0,5],[1,1],[-10,61],[-22,166],[67,50],[25,18],[-6,-73],[-3,-9],[80,-66],[-11,-19],[-50,-33],[8,-46],[-18,-34],[-19,-11]],[[18842,48953],[53,-32],[-98,-18],[-17,12],[-18,27],[-15,-3],[-12,8],[-86,-28],[-13,-3],[-1,-2],[-11,-3],[-102,-161],[-14,-22],[25,-63],[9,-28],[-50,52],[25,61],[16,38],[-37,25],[-47,-37],[19,-27],[24,-34],[-117,-12],[-2,0],[0,-1],[-8,-1],[-10,-61],[-5,-19],[-7,5],[-17,55],[5,25],[50,7],[-29,34],[-95,-82],[-14,39],[-74,4],[-6,-14],[-13,-1],[-19,-64],[-31,-64],[-46,-14],[-9,-55],[-7,-27],[-41,64],[-19,-99],[-1,22],[-4,166],[51,-6],[14,23],[7,1],[19,42],[28,47],[31,18],[134,76],[-2,4],[1,1],[-6,7],[-17,30],[51,6],[-68,134],[15,-13],[6,-12],[4,4],[7,-5],[47,28],[19,-9],[65,53],[-1,5],[12,7],[86,-14],[-81,-82],[9,-59],[-50,9],[-41,-69],[78,-21],[11,45],[27,-46],[195,154],[92,3],[9,70],[69,43],[11,-43],[12,-84],[11,-8],[2,-6],[12,-2]],[[16842,49187],[44,-12],[69,-20],[26,33],[24,-4],[30,-7],[5,3],[8,-1],[69,41],[11,95],[65,27],[13,-15],[16,-40],[-24,-12],[-9,-2],[0,-3],[-41,-22],[45,-16],[2,-28],[-5,-26],[-85,-11],[-17,-48],[22,5],[32,0],[33,-37],[0,-4],[3,0],[9,-10],[45,18],[5,-40],[74,-28],[34,30],[65,-93],[5,-103],[78,6],[29,-53],[22,-49],[-48,13],[-16,6],[-24,-40],[-47,-80],[2,20],[11,60],[12,61],[-5,-1],[0,1],[-5,-1],[-40,-3],[-63,117],[-156,62],[27,-48],[-5,-4],[17,-17],[8,-15],[-90,-25],[-16,-46],[-125,96],[-1,1],[5,142],[-8,8],[-135,119]],[[17427,49212],[-24,-47],[-36,27],[-2,-2],[0,0],[-2,-4],[-22,-31],[-17,137],[97,186],[29,-79],[-7,-9],[-35,-33],[8,-7],[-25,-36],[36,-102]],[[18916,49513],[24,-33],[10,-18],[-28,-8],[-69,-2],[-6,-19],[-10,-3],[5,-15],[-9,-28],[28,-35],[9,-30],[-63,-39],[-2,-1],[-30,50],[-24,-2],[-32,2],[49,151],[65,17],[22,-26],[17,11],[1,-1],[4,4],[39,25]],[[15524,28792],[-97,160],[63,160],[-11,86],[54,116],[53,23],[-50,158],[45,80],[-116,179],[-10,75],[146,26],[-12,170],[268,320],[-4,31],[-63,-31],[-62,70],[-49,206],[-47,38]],[[15632,30659],[97,71],[12,109],[123,74]],[[15864,30913],[77,23]],[[18971,31567],[105,-78],[27,-4],[189,-30],[106,48],[147,-88],[112,4],[2,-5],[14,-116],[-5,-10],[7,-7],[0,-3],[7,-3],[79,-70],[36,11],[2,-1],[6,-40],[37,14],[21,-157],[32,-49],[75,-114]],[[21199,50189],[-7,-37],[-31,-8],[-33,-4],[-8,20],[9,40],[7,2],[13,5],[12,139],[96,7],[-15,-67],[1,-1],[47,-4],[-10,-38],[-47,4],[22,-51],[-51,18],[-5,-25]],[[22324,52532],[-3,0],[-1,1],[4,-1]],[[22611,52643],[-67,-4],[-19,81],[86,-77]],[[21995,52836],[57,-16],[-20,-41],[-37,57]],[[22013,52938],[-38,-45],[-20,40],[-2,3],[99,50],[2,0],[-41,-48]],[[22117,53116],[34,35],[33,28],[1,-5],[-110,-286],[39,106],[-11,84],[14,38]],[[22056,52989],[0,1],[0,0],[-25,65],[-13,36],[90,81],[-68,62],[29,-3],[54,-5],[16,68],[7,-29],[10,-39],[-25,-71],[-35,-52],[-2,-11],[-6,-6],[3,-11],[-6,-37],[-1,0],[-3,-7],[3,0],[-2,-9],[-8,-11],[-18,-22]],[[21994,53284],[-30,-18],[17,53],[1,0],[11,-9],[16,-15],[-15,-11]],[[22078,53301],[-15,0],[-36,6],[-2,7],[15,12],[38,-24],[0,-1]],[[22163,53199],[-7,-4],[7,33],[28,108],[51,21],[17,6],[-18,-78],[-12,-51],[-66,-35]],[[22019,53422],[-15,-20],[-1,20],[-2,49],[34,-26],[-16,-23]],[[19916,53493],[26,-63],[11,-26],[-29,-61],[-44,-94],[-5,4],[-84,97],[-63,20],[-6,5],[12,55],[1,8],[116,61],[65,-6]],[[23075,53464],[-8,-53],[-6,-47],[-41,47],[-32,38],[-13,-8],[-13,-6],[20,47],[93,-18]],[[22848,53659],[20,-120],[-6,-15],[8,-1],[4,-21],[20,19],[25,-2],[19,42],[17,-17],[-33,-131],[-50,-201],[-149,90],[13,113],[2,23],[12,17],[-8,10],[3,34],[-12,-24],[-80,93],[-7,10],[55,60],[153,-71],[0,2],[0,0],[-21,46],[-13,30],[28,14]],[[21376,53687],[-58,-16],[-48,49],[45,40],[14,9],[1,-1],[49,-59],[-3,-22]],[[21661,54456],[1,-56],[38,24],[70,-43],[-50,-21],[-43,-19],[-9,-33],[-3,-10],[-27,49],[-1,2],[8,6],[40,25],[-4,0],[4,2],[-74,-1],[50,75]],[[21908,54358],[-7,-7],[-3,7],[-25,55],[58,46],[32,-42],[-55,-59]],[[20968,54389],[-7,-6],[0,9],[-23,-28],[-16,-21],[-14,21],[-45,68],[60,49],[27,-31],[1,1],[29,21],[11,-44],[16,33],[10,-57],[2,5],[1,-5],[6,31],[7,26],[9,2],[31,-1],[1,-3],[-23,-70],[37,-20],[-2,-8],[-120,-41],[2,69]],[[23008,54606],[-38,-94],[-11,35],[-3,22],[52,37]],[[23353,54642],[-42,-25],[-154,-214],[-16,-4],[-1,0],[0,0],[1,-1],[-64,-21],[-98,43],[67,62],[-15,28],[51,86],[2,4],[82,7],[39,63],[80,-31],[5,3],[1,0],[3,2],[60,37],[0,1],[40,-17],[-41,-23]],[[21914,54650],[10,-8],[-2,3],[16,-9],[11,-43],[-40,-85],[-120,-33],[-5,3],[1,0],[-2,3],[-3,-1],[-86,52],[-37,95],[52,-3],[27,67],[58,17],[7,3],[113,-61]],[[22721,54745],[-5,-7],[3,6],[2,1]],[[22730,54759],[-4,-5],[1,5],[3,0]],[[23828,54881],[1,-5],[4,-17],[-48,5],[-17,3],[-69,-55],[119,110],[6,-26],[-5,-5],[7,-4],[2,-6]],[[22623,55151],[42,-68],[-64,23],[22,45]],[[22410,55378],[19,-41],[-47,22],[28,19]],[[21833,55890],[-62,-2],[25,18],[37,-16]],[[23180,55851],[-28,-34],[-65,17],[0,-1],[-1,0],[-3,-43],[-8,2],[-14,12],[16,46],[42,51],[9,0],[52,-50]],[[23496,55972],[105,-23],[20,-111],[20,-26],[25,20],[3,2],[3,-38],[0,1],[0,0],[45,65],[4,7],[54,10],[9,-117],[-91,-125],[-90,104],[-2,-1],[-26,-15],[-19,-12],[-1,0],[-39,56],[-94,-4],[-18,-31],[5,-4],[0,-1],[22,-18],[84,-71],[-103,-32],[-39,60],[-123,186],[35,108],[81,-5],[12,-17],[23,-32],[95,64]],[[22254,51914],[-30,60],[-27,54],[-1,2],[0,0],[-43,-92],[-7,-14],[4,24],[0,1],[18,113],[-38,82],[-77,-2],[-18,-71],[-25,49],[-65,-20],[0,0],[0,0],[-5,-2],[-26,104],[1,2],[-1,0],[-6,22],[2,0],[83,36],[0,2],[2,1],[-1,104],[3,-1],[-2,4],[-1,-1],[-1,25],[58,-19],[5,22],[40,1],[0,8],[3,-1],[-6,80],[-2,30],[-82,2],[-7,0],[20,58],[0,0],[72,-46],[-1,4],[3,-2],[-51,139],[89,72],[25,151],[15,89],[65,135],[33,69],[15,205],[-1,26],[-11,-44],[-33,-1],[-72,-5],[31,52],[14,23],[0,0],[0,1],[-3,0],[-32,9],[57,242],[-6,-2],[1,4],[-2,-4],[-34,-9],[-57,-178],[-1,-1],[-6,66],[97,214],[57,124],[-6,-12],[14,30],[-46,-94],[-147,-301],[0,1],[117,470],[-120,-192],[-55,-89],[-64,177],[4,26],[46,-10],[-1,3],[0,0],[-11,34],[-1,1],[-1,3],[-89,29],[-2,-26],[-12,-6],[-15,2],[-45,49],[-6,0],[-15,21],[-52,-21],[40,-21],[100,-80],[37,5],[0,0],[16,-70],[31,-148],[-37,-24],[-1,0],[15,103],[-64,-42],[-14,-10],[-9,100],[-1,-23],[-1,14],[-9,-174],[-1,-25],[-63,-75],[-50,39],[0,20],[2,60],[-1,-4],[0,11],[-53,-163],[-20,-57],[-22,72],[-62,11],[0,2],[-1,-2],[-26,5],[-34,6],[-4,96],[-9,-4],[-60,-13],[-22,21],[-13,26],[11,80],[167,2],[9,-3],[-55,22],[-4,2],[106,69],[-114,-35],[4,69],[42,13],[-8,0],[3,1],[-52,5],[-16,2],[13,50],[-51,18],[-14,8],[1,-3],[-5,2],[11,-68],[30,-15],[17,-10],[-118,-143],[-8,3],[18,98],[-40,41],[-2,-4],[-2,2],[-16,-29],[-12,-19],[-113,5],[43,-50],[-14,-4],[-69,-12],[-47,38],[-33,27],[33,38],[11,12],[-11,-4],[-43,-12],[-4,1],[-102,42],[-23,65],[16,16],[18,17],[0,0],[0,1],[-50,6],[36,60],[6,-1],[1,2],[-7,-1],[33,55],[-2,2],[1,3],[-21,17],[-44,43],[3,4],[91,70],[42,12],[52,1],[110,4],[6,0],[22,-25],[63,-76],[0,3],[3,-3],[-6,28],[-5,38],[19,-28],[101,-13],[-2,4],[2,0],[-43,67],[-1,0],[137,70],[5,-15],[78,-219],[56,75],[-2,0],[1,1],[-59,7],[-27,85],[130,-49],[0,0],[1,-1],[-65,43],[85,19],[-69,21],[71,59],[32,22],[20,-58],[4,-13],[23,27],[71,-34],[37,-149],[1,3],[2,-7],[25,79],[82,8],[-40,10],[7,3],[-55,38],[-5,13],[-1,85],[36,68],[11,9],[48,-56],[24,20],[-28,115],[120,6],[70,-51],[18,-12],[29,14],[-46,36],[-76,60],[-187,-2],[7,10],[54,60],[-30,66],[-73,-97],[-82,36],[-11,50],[-3,12],[73,11],[-92,35],[25,49],[50,-28],[3,-1],[-28,57],[-161,-17],[10,147],[46,20],[36,14],[-3,0],[4,2],[-131,5],[2,65],[103,33],[-15,-2],[10,3],[-98,-9],[33,107],[-12,-9],[3,10],[-80,-64],[-16,-12],[0,-1],[0,0],[16,-19],[7,-10],[-2,-3],[-48,-83],[-54,68],[65,52],[-8,40],[-5,-1],[0,1],[-111,-23],[-8,-1],[-51,59],[-51,-75],[-42,28],[-83,-43],[-42,48],[-19,24],[49,82],[18,30],[83,-1],[19,-29],[0,-1],[6,-11],[1,1],[2,-4],[25,15],[12,6],[-51,26],[39,32],[-2,117],[99,96],[4,-11],[42,-117],[153,-112],[69,-33],[153,42],[0,0],[0,0],[-3,0],[-183,-3],[-20,22],[-106,112],[1,8],[45,74],[144,109],[-5,11],[-24,67],[75,69],[-4,1],[6,5],[-49,0],[8,13],[33,47],[139,-46],[77,22],[51,-54],[-49,101],[14,40],[2,4],[42,-31],[5,7],[3,-2],[55,79],[14,-221],[-44,-62],[-51,0],[66,-63],[-5,-157],[-78,-22],[-36,25],[-41,-79],[130,-5],[-118,-45],[76,13],[41,-46],[-60,-39],[1,-5],[19,-69],[-59,-52],[75,-3],[14,87],[51,3],[-3,-69],[-59,-20],[33,-139],[-43,-19],[-11,10],[-1,10],[-34,22],[30,-28],[-72,-112],[23,-83],[-45,5],[-39,-88],[26,-19],[143,90],[-57,13],[49,123],[106,35],[41,-38],[13,60],[8,-3],[44,-22],[-44,42],[-89,87],[72,102],[19,-20],[37,-39],[100,97],[77,-86],[-15,-115],[58,41],[20,-12],[16,-39],[1,-4],[-79,-44],[107,-17],[-82,-54],[2,1],[5,0],[58,10],[17,-71],[-65,15],[-19,44],[-13,-12],[-175,-136],[52,24],[-57,-51],[196,115],[2,-4],[8,-28],[-14,-9],[-90,-53],[25,10],[-13,-9],[156,64],[1,0],[17,-192],[0,1],[0,-1],[3,11],[34,124],[43,3],[47,2],[-46,40],[54,89],[25,-71],[1,1],[1,-2],[101,137],[77,42],[1,0],[3,-17],[-11,-51],[-152,-160],[-52,-22],[-56,-91],[-5,-6],[1,0],[0,-1],[22,-2],[19,-2],[-1,-18],[-5,-46],[1,2],[0,-4],[64,128],[71,-21],[27,-8],[-1,-165],[-128,-59],[-228,40],[29,-17],[41,-111],[5,-33],[38,82],[61,-86],[6,-9],[0,9],[1,8],[22,17],[52,-16],[6,-6],[8,2],[17,-5],[32,17],[10,3],[-7,-22],[-16,-54],[33,-30],[-17,-28],[-31,6],[-57,12],[-131,-115],[36,-2],[14,-1],[-7,-35],[-1,0],[-7,-44],[9,43],[39,5],[0,-2],[1,2],[57,8],[14,1],[-26,-26],[11,-15],[7,-10],[0,0],[2,-2],[28,14],[15,6],[-18,-56],[-126,3],[-32,-67],[1,1],[41,12],[-6,-4],[-87,-42],[-20,64],[34,33],[5,6],[0,0],[1,0],[-7,0],[-69,6],[-28,47],[-34,-23],[51,-105],[0,-1],[-114,-80],[139,12],[0,-2],[-111,-173],[15,11],[-1,-2],[30,24],[119,90],[-38,-53],[-1,-1],[0,0],[33,-17],[-52,-24],[-14,-24],[-79,-136],[10,8],[-12,-23],[195,174],[-3,-24],[-3,-13],[-2,-2],[2,1],[-8,-40],[2,0],[0,0],[1,0],[39,0],[-47,-104],[-8,-16],[0,-1],[91,-85],[3,-3],[-15,-22],[-2,-2],[-38,13],[-29,11],[0,-1],[0,1],[5,-36],[3,-27],[5,-42],[-20,26],[-30,39],[0,-1],[-2,1],[-7,-115],[-87,60],[13,-126],[-18,-8],[-62,-24],[58,-54],[-31,-83],[52,-87],[-11,-49],[0,-1],[97,-36],[-9,-29],[-79,1],[-22,1],[-3,44],[1,5],[-1,-2],[-1,10],[-5,-28],[-12,-34],[-55,-8],[1,-5],[-2,0],[18,-74],[12,-54],[76,-86],[-31,-9],[0,-1],[-1,0],[12,-87],[-48,118],[-38,-68],[-2,-4],[-19,26],[-37,54],[0,-1],[-1,1],[-21,-40],[-51,9],[1,-3],[-3,0],[31,-70],[29,-1],[10,0],[0,-1],[-27,-58],[22,-40],[-1,-18],[-27,-14],[21,-79],[-40,-81],[-45,6],[-17,2],[17,-18],[34,-36],[18,-18],[-8,-111],[0,0],[0,-1],[0,-3],[-1,-2],[-45,-5],[-41,-5],[9,0],[-2,-1],[40,-3],[15,-2],[-11,-53],[16,6],[29,10],[0,-2],[-27,-114]],[[23465,56172],[-29,-57],[-61,40],[-37,26],[31,31],[64,-25],[32,-15]],[[23081,56368],[-5,-1],[3,6],[2,-5]],[[22739,56474],[-1,-2],[-1,2],[1,0],[1,0]],[[23061,56447],[-2,-5],[4,0],[-1,4],[31,-14],[-29,-43],[12,-11],[-3,-10],[57,-41],[2,-3],[-2,0],[-58,11],[10,-7],[-14,1],[40,-18],[7,-95],[9,-129],[-23,-25],[-7,-5],[49,-56],[-33,-20],[-13,-5],[-102,49],[-8,10],[-103,140],[8,-26],[-2,2],[2,-4],[38,-128],[56,-41],[48,-85],[1,-4],[-30,-31],[-52,-53],[-35,26],[-37,30],[-64,-36],[180,-37],[6,-54],[35,20],[1,-44],[44,-6],[-8,-82],[-56,-22],[11,-21],[19,-44],[-103,6],[1,-2],[23,-74],[-9,-8],[12,-2],[5,-13],[38,7],[12,-1],[-35,-113],[-9,2],[5,-15],[-10,-31],[24,-17],[2,-8],[-71,-23],[39,32],[-79,-45],[-9,-3],[-10,8],[-56,44],[-58,-6],[54,8],[-5,3],[-72,48],[-10,-47],[-3,-12],[15,-15],[-1,-11],[19,-5],[36,-32],[-127,14],[-17,-27],[-64,80],[-2,10],[-22,112],[-38,-1],[36,21],[-41,104],[28,134],[-40,7],[12,-62],[-37,28],[53,79],[-56,128],[44,147],[12,-1],[80,118],[0,0],[11,-131],[4,-58],[48,4],[4,-4],[43,-79],[49,-9],[-91,90],[-3,3],[0,0],[-29,28],[50,275],[11,63],[-28,64],[49,76],[-27,39],[96,10],[33,-11],[32,-101],[0,3],[1,-3],[3,122],[78,-34],[17,-8],[1,50],[94,-43]],[[23743,56564],[-32,-28],[12,100],[20,-71],[0,-1]],[[23467,57081],[30,-63],[-46,-148],[20,1],[0,-1],[1,1],[21,1],[84,175],[13,22],[26,-64],[86,21],[1,-31],[61,0],[-13,-47],[0,0],[-1,-2],[48,-12],[-106,-36],[-9,-3],[84,-68],[-11,-77],[-2,-10],[-166,34],[100,-147],[-190,-5],[160,-43],[-176,-245],[85,-61],[27,31],[3,-67],[-40,-28],[-32,-22],[-48,24],[-93,45],[-30,15],[-1,-1],[0,0],[-2,-2],[-65,-55],[-35,-29],[-22,5],[-36,53],[0,1],[-21,-2],[-23,-1],[49,61],[-58,123],[37,-4],[60,-6],[0,2],[0,0],[0,0],[-29,71],[2,1],[-3,2],[-10,25],[80,72],[-24,55],[44,106],[-69,50],[89,95],[-38,18],[76,16],[44,59],[10,13],[-9,32],[-7,24],[6,2],[2,-2],[-1,2],[67,24]],[[23478,57157],[-7,-3],[1,6],[6,-3]],[[10696,27956],[-35,-22],[-5,3],[-6,27],[5,13],[17,3],[17,-16],[7,-8]],[[10898,26633],[0,1],[-62,144],[24,134],[84,134],[55,85],[44,261],[151,108],[93,178],[153,150],[-15,95],[30,-7],[-27,8],[35,79],[50,117],[-28,217],[62,56],[151,126],[15,212],[49,81],[122,87],[180,44],[17,-22],[1,42],[3,57],[4,7],[-2,43],[1,20],[72,-52],[-67,57],[46,35],[26,109],[-39,106],[38,-51],[-6,36],[-191,161],[78,6],[1,24],[3,0],[-2,15],[2,69]],[[13713,30991],[185,-120],[-8,-75],[149,-96],[-8,-44],[85,-17],[131,-96],[35,-72],[92,126],[368,58],[67,62]],[[14809,30717],[34,-22],[103,88],[324,81],[110,-128],[24,26],[228,-103]],[[13280,30732],[72,-19],[9,55],[59,45],[-31,76],[-33,-15],[-25,34],[19,115],[21,-40],[53,57],[12,-54],[56,10],[24,-66],[126,54],[59,-39],[12,46]],[[13976,31998],[-230,-3],[-82,-91],[-87,-10]],[[13577,31894],[-32,115],[-106,-104],[-74,52],[-104,-16],[-74,59],[-55,-58],[74,-125],[8,-145],[-49,7],[7,-47],[-147,9],[-94,109],[-108,-45]],[[12823,31705],[-85,37],[-53,131],[-66,-11],[-39,50],[-50,188],[56,20],[15,51],[-88,33],[-5,-47],[-78,77],[-166,-1],[-33,57]],[[12231,32290],[-22,25],[45,114],[-150,59],[-46,223],[-121,183],[32,83],[-50,201],[13,103],[111,34],[-66,87],[35,25],[-18,54],[55,47],[-112,3],[-61,39],[-18,-45],[-55,55],[-138,-43],[-22,49],[30,56],[-216,138],[127,145],[2,101],[40,-4],[92,102],[105,-11],[21,131],[79,41],[104,-38],[31,68],[50,15]],[[12108,34330],[31,-9],[10,63],[145,98],[147,-2],[-1,72],[65,24],[39,-55],[52,2],[106,66],[192,41],[41,70],[102,-42],[103,-333],[310,106],[120,77],[81,-46],[59,-67],[29,-120],[-108,-7],[-83,-101],[-121,68],[17,-370],[-134,-12],[-4,-164],[58,-55],[-44,-69],[148,-129],[146,-34],[73,-87],[96,-1],[16,47],[80,-86],[41,36],[3,-58],[98,30],[196,-244],[72,-16],[47,48],[83,-102],[79,60],[10,-126],[43,-28]],[[19889,38163],[-1,-1],[-48,-187],[-92,4],[90,-11],[6,-133],[45,-18],[-102,-2],[51,-21],[68,19],[26,-25],[-77,-190],[-2,0],[-36,-90],[0,-3]],[[19817,37505],[-101,24],[-23,146],[-138,-20],[-21,-39],[-170,-67],[-73,5],[-32,-82],[-114,-17],[-28,20],[79,43],[20,78],[-141,-9],[-91,50],[30,127],[142,-63],[81,28],[69,154],[-123,204],[47,19],[13,172],[40,-30],[63,36],[41,-37],[67,16],[92,-110],[96,5],[45,85],[202,-80]],[[20576,39209],[-3,0],[4,2],[-1,-2]],[[20735,39465],[-4,0],[4,3],[0,-3]],[[19817,37505],[-22,-93],[-208,-260],[-49,-200],[-96,-62],[54,-87],[0,-1],[-28,-13],[12,-193],[0,-12],[-1,-2],[-57,-72],[-24,-104],[-18,-39],[-117,-115],[-18,2],[-8,-83],[-9,-10],[-23,-1],[-54,-91],[-61,-72],[-9,-5],[-127,-68],[-15,-44],[-71,3],[-74,-100],[-3,-8]],[[18791,35775],[-112,-31],[-206,196],[-259,-9],[-47,133],[-64,7],[6,64],[-59,102],[28,226],[-60,12],[-17,141],[-115,56],[-46,118],[-76,59],[-179,11],[-26,78],[-54,-23],[-125,75],[-62,-27],[8,-31],[-104,-10],[-28,-36],[-218,31],[-172,-75],[-83,-207],[12,-123],[-41,-34],[-121,95],[-41,-33],[-177,90],[-113,11],[-43,45],[-2,-111],[-157,-59],[-106,-110]],[[15932,36406],[-99,49],[-50,-24],[-25,37],[-109,-72],[-111,75],[-80,-19],[-26,46],[-70,-43],[-23,55],[30,29],[-74,160],[-189,-41],[-27,51],[-63,-2],[-24,-85],[-81,-14],[-92,105],[-129,-55],[-55,67]],[[17654,40678],[11,10],[22,13],[39,-38],[29,6],[77,-51],[8,-9],[78,56],[6,-4],[86,-48],[34,28],[15,13],[88,-55],[165,-13],[6,6],[0,-1],[3,4],[19,18],[16,-16],[23,-32],[9,0],[15,-15],[98,0],[19,-51],[-41,-49],[44,41],[0,13],[47,56],[3,3],[78,-6],[0,-2],[1,2],[63,-6],[0,-1],[1,1],[161,-13],[104,40],[40,-24],[6,-5],[1,1],[6,-4],[23,16],[36,24],[-2,15],[0,33],[85,49],[35,-30],[45,-45],[8,-1],[15,-12],[156,2],[60,-43],[222,155],[229,-50],[115,38],[8,-30],[16,-61],[29,-7],[1,-3],[19,-3],[69,-18],[-41,-36],[51,34],[-1,9],[25,22],[44,-18],[70,-99],[53,-127],[12,23],[16,-11],[9,-14],[58,-32],[99,-68],[0,-244],[67,-59],[6,-54],[-8,-88],[19,-20],[4,-40],[-47,28],[4,-25],[117,-51],[14,-17],[-12,-41],[-9,54],[-34,-34],[-13,6],[-3,-21],[-7,-8],[6,-4],[-1,-6],[6,1],[20,-16],[24,24],[-3,-4],[-25,-29],[-34,-28],[6,-5],[-1,-1],[56,-56],[-10,-39],[-55,-53],[-11,-7],[-8,-19],[-85,-182],[-23,-12],[-28,18],[-35,-48],[6,-78],[-1,-13],[-155,-124],[-35,-43],[-142,-166],[-12,-27],[-43,-53],[-9,-22],[-35,-81],[-46,-104],[-134,-304]],[[9290,28138],[9,-46],[-84,4],[75,42]],[[9382,28839],[-1,0],[-11,5],[-16,10],[17,10],[21,6],[-8,-24],[-2,-7]],[[7580,29877],[-10,-38],[-33,5],[8,7],[35,26]],[[8812,30346],[27,-58],[-10,-22],[-28,-58],[50,5],[-56,-43],[5,-73],[1,-19],[-88,-70],[12,115],[-33,-1],[-11,47],[85,169],[22,-9],[0,1],[5,-2],[-8,55],[-2,31],[53,31],[33,-38],[-57,-61]],[[10573,30731],[-31,-41],[-13,28],[-17,43],[8,34],[11,40],[24,-58],[1,-4],[17,-42]],[[10831,31118],[9,-103],[5,0],[0,-2],[98,23],[7,-177],[22,-68],[43,-136],[0,-1],[-93,-69],[79,-128],[5,-8],[-73,-45],[-77,59],[-22,132],[-99,101],[-12,-5],[-2,3],[-65,-27],[-1,-1],[-11,111],[-8,83],[-35,-38],[-15,55],[42,169],[-121,34],[-130,172],[-28,85],[21,23],[103,99],[10,-2],[57,-17],[134,-149],[107,-57],[-18,-68],[-23,-25],[16,-4],[-2,-6],[44,-5],[33,-8]],[[7627,31482],[9,-39],[-35,-166],[73,-192],[12,-186],[-1,-21],[61,-158],[96,-84],[16,-15],[-16,-98],[-2,-12],[0,0],[0,-3],[63,-82],[-14,-62],[-12,-24],[3,-17],[-1,-4],[3,-15],[7,-55],[23,12],[11,2],[-17,-58],[5,0],[-2,-5],[22,7],[8,1],[-4,-4],[-86,-62],[-4,-10],[-13,-11],[2,-18],[-9,-24],[-43,26],[0,-9],[-4,2],[-2,-103],[-1,-6],[-36,35],[-139,-89],[-52,-33],[-48,28],[-62,-40],[-24,51],[-72,-13],[19,-54],[-87,-144],[-40,-12],[-16,-4],[-27,-53],[0,-1],[-4,1],[-130,15],[-5,31],[0,1],[0,1],[-1,2],[-76,12],[14,117],[5,1],[-5,1],[4,30],[60,101],[29,49],[92,5],[19,18],[1,0],[0,1],[26,25],[-17,45],[0,1],[-5,12],[-67,172],[-71,90],[-91,-17],[1,23],[3,47],[26,64],[161,88],[49,26],[27,79],[-25,30],[-258,-3],[-5,-13],[-6,0],[-58,-174],[-7,-18],[-130,-202],[-126,-103],[-95,-79],[-65,30],[-49,84],[16,16],[64,52],[3,20],[16,17],[-11,8],[1,7],[-32,15],[24,76],[4,11],[102,80],[8,6],[2,2],[-11,4],[-10,4],[-9,8],[15,52],[25,88],[-32,20],[-58,33],[52,49],[40,37],[4,84],[-29,13],[31,128],[76,41],[31,-29],[13,-15],[69,33],[190,169],[3,-3],[-54,-289],[33,-64],[49,-2],[-29,62],[71,172],[-20,36],[75,25],[2,0],[0,1],[54,18],[-2,25],[163,134],[32,55],[20,18],[72,-5],[30,14],[110,50],[12,-47]],[[8989,31634],[-81,-134],[-1,1],[1,75],[27,51],[29,-26],[23,33],[17,26],[-15,-26]],[[7369,31980],[-1,-25],[-12,-1],[-4,7],[-38,-9],[-13,-2],[-18,-60],[-54,-30],[0,29],[7,33],[-28,27],[3,0],[-4,1],[-22,20],[96,23],[35,7],[48,-5],[5,-15]],[[7351,32002],[-6,-4],[0,4],[6,0]],[[9312,32325],[-7,-8],[1,11],[5,-1],[1,-2]],[[10294,32379],[-12,-10],[8,19],[4,-9]],[[7598,32483],[-104,-222],[-13,-14],[-23,-23],[-52,-51],[4,-4],[-1,-1],[6,-5],[34,-39],[-12,-50],[-94,-64],[-13,56],[-21,-36],[-63,0],[10,58],[-69,-35],[-20,-5],[55,60],[4,3],[0,1],[25,28],[-22,5],[3,19],[26,17],[-39,14],[52,34],[-37,15],[18,42],[37,42],[80,76],[35,-3],[39,-20],[2,17],[7,-1],[0,56],[2,11],[29,24],[71,56],[34,-47],[2,-3],[8,-11]],[[8184,31646],[-5,-1],[-162,80],[-20,-7],[-17,-6],[1,6],[131,266],[38,63],[30,26],[176,145],[71,39],[111,61],[64,115],[46,-17],[120,111],[-1,32],[-1,9],[72,0],[-1,6],[-4,40],[27,10],[17,6],[40,-63],[26,-43],[-1,-92],[-238,-438],[0,3],[-1,-5],[-29,-53],[-21,-9],[-29,-9],[-82,-209],[-37,-10],[-9,-1],[0,0],[-3,-1],[-15,-93],[-10,-61],[-1,-5],[-94,-183],[10,-80],[-42,-56],[15,65],[-47,-9],[-12,-102],[-3,-16],[-45,29],[-58,-27],[-44,-171],[1,-1],[-1,0],[20,-26],[15,-18],[-36,-84],[0,1],[-3,-3],[2,-1],[-37,-87],[-217,15],[-87,55],[-68,132],[3,167],[-31,44],[5,28],[24,120],[181,242],[7,2],[331,47],[200,114],[-18,63],[-81,-102],[-3,-3],[-33,64],[0,-2],[-5,-40],[-58,1],[-29,-61],[-45,-12]],[[6086,32542],[3,-4],[-5,2],[2,2]],[[8988,32728],[-85,-45],[-134,9],[-19,43],[-2,3],[63,94],[126,63],[41,-45],[10,-122]],[[9241,32931],[-68,-62],[5,173],[1,6],[54,-35],[8,-82]],[[8597,33006],[-51,-28],[58,66],[-7,-38]],[[8910,33017],[39,-109],[-35,-5],[-16,58],[-3,0],[-1,1],[-1,-2],[-34,-5],[5,8],[65,107],[-8,-25],[-11,-28]],[[8744,33111],[-74,-25],[72,67],[2,-42]],[[9178,33235],[-30,-76],[-13,24],[34,40],[9,12]],[[9127,33173],[19,-22],[1,2],[3,-4],[3,-7],[-50,-150],[4,-112],[-6,-36],[-89,142],[-3,6],[55,185],[25,81],[43,-79],[-5,-6]],[[9023,33359],[-10,0],[23,27],[8,-19],[-21,-8]],[[9250,33540],[-10,-97],[-4,-20],[-63,-46],[36,-68],[-81,-72],[-3,5],[-20,124],[-62,36],[94,112],[12,14],[3,-3],[6,-10],[13,-23],[10,5],[7,-7],[-16,-27],[56,56],[22,21]],[[6924,33391],[-18,-58],[-29,37],[-41,-19],[1,2],[19,34],[16,28],[10,2],[47,-10],[-5,-16]],[[6771,33489],[-45,-40],[-56,15],[38,66],[18,15],[-14,63],[107,64],[13,7],[1,-7],[-34,-135],[-28,-48]],[[9542,34044],[-189,-251],[-26,-13],[19,43],[-32,18],[-74,-9],[66,124],[11,21],[123,16],[27,29],[47,43],[28,-21]],[[8979,34116],[0,-12],[-6,8],[6,4]],[[10355,34190],[-7,-2],[6,4],[1,-2]],[[10420,34223],[0,-2],[-4,0],[4,2]],[[7538,34181],[-30,-59],[-5,14],[-4,24],[39,21]],[[10580,34358],[-1,-2],[-2,3],[3,-1]],[[10576,34360],[-2,-5],[0,4],[2,1]],[[7759,34267],[-1,-3],[-61,5],[24,23],[8,8],[3,-2],[27,-31]],[[7316,34452],[144,-90],[2,5],[1,-1],[13,29],[22,-33],[12,-18],[23,20],[1,1],[1,-1],[36,-59],[-55,-41],[-86,17],[-2,-4],[-33,-23],[-13,3],[-11,53],[-1,-1],[0,3],[-13,-4],[-28,-4],[-6,-8],[-55,-19],[-7,6],[-8,28],[-48,18],[-16,14],[0,0],[52,85],[17,6],[38,-10],[10,27],[8,3],[2,-2]],[[7120,34442],[57,-41],[51,22],[5,2],[-58,-82],[-17,-24],[-4,22],[-5,26],[-76,-11],[-1,53],[13,9],[5,-10],[1,14],[29,20]],[[9784,34593],[-59,-7],[9,14],[40,39],[10,3],[0,-49]],[[9717,34767],[-213,-299],[-17,-23],[-200,-140],[-74,-51],[42,47],[23,27],[5,41],[11,74],[115,53],[13,15],[19,9],[165,191],[-8,48],[1,0],[43,-45],[61,46],[14,7]],[[5721,34530],[-2,-2],[-30,2],[-5,11],[8,12],[29,-23]],[[5764,34709],[3,-3],[-6,2],[0,3],[3,-2]],[[9857,34953],[-38,-88],[-1,3],[-15,55],[6,5],[48,25]],[[12146,35057],[50,-4],[151,-218],[-120,19],[-296,-139],[0,-47],[115,-34],[17,-43],[-14,-80],[-84,-105],[46,-56],[97,-20]],[[12231,32290],[-72,-204],[62,-129],[-85,-53],[-2,-38],[-68,28],[-21,-28],[131,-80],[-26,-78],[69,-75],[-23,-59]],[[12196,31574],[-171,61],[-52,65],[-55,-19],[4,42],[47,2],[-22,41],[-26,50],[-61,27],[-1,2],[-17,6],[-182,79],[-6,16],[5,32],[-45,70],[-84,219],[-21,-156],[134,-255],[68,0],[8,-67],[-171,-16],[-69,16],[-15,10],[-59,207],[-21,124],[120,313],[208,383],[61,44],[-8,43],[-112,-114],[-128,-304],[-89,-124],[-1,1],[0,2],[-1,-2],[-75,48],[12,171],[-56,141],[-45,-24],[50,-93],[-26,-180],[99,-128],[-53,-86],[-64,-102],[51,-350],[-126,55],[0,-1],[-68,59],[3,-85],[87,-60],[25,-16],[46,-41],[-7,-19],[-60,-101],[-10,-2],[-135,-426],[-158,37],[-42,11],[-71,423],[-109,99],[-6,15],[-50,185],[-7,-24],[-2,5],[2,-8],[-11,-41],[24,-53],[12,-74],[103,-171],[2,-5],[16,-210],[-104,18],[-185,150],[2,4],[-5,-2],[1,-1],[-15,12],[-32,202],[-12,77],[-2,-77],[-3,-99],[-26,-139],[-62,-87],[-38,-26],[-11,-42],[-6,-9],[101,-198],[13,-146],[-9,-3],[-44,23],[-12,26],[-81,48],[-11,28],[-87,-18],[-15,36],[0,5],[-2,0],[-3,7],[-58,-24],[-3,0],[23,13],[-25,7],[4,93],[0,5],[0,-1],[0,0],[-15,-22],[-2,-2],[10,36],[-103,52],[-10,41],[-3,14],[46,112],[-21,13],[31,139],[20,36],[-27,31],[-32,49],[7,62],[16,73],[62,76],[10,1],[8,21],[33,40],[10,65],[41,99],[224,260],[22,122],[308,147],[54,54],[67,212],[92,87],[149,62],[164,161],[-341,-174],[-40,65],[-155,-233],[-40,-162],[-86,-73],[-140,-37],[-132,-110],[-62,-162],[-77,-42],[-6,-18],[2,18],[-67,-145],[-39,-11],[-6,4],[-2,45],[-38,-2],[11,-24],[-17,10],[27,-35],[2,-4],[-45,-39],[-13,-147],[-38,16],[-9,-12],[-4,0],[-81,-95],[-15,13],[-17,-18],[-21,-14],[-20,17],[-45,66],[-6,92],[-31,16],[-8,-89],[-9,0],[-7,-164],[-8,-91],[19,-37],[49,-93],[1,-10],[27,-252],[4,-4],[1,-10],[43,-26],[3,-3],[-1,0],[-31,8],[35,-67],[17,-33],[-56,-35],[-2,-1],[0,0],[26,-2],[64,-4],[137,-184],[67,-202],[9,-27],[-39,-97],[-70,8],[-131,-73],[-172,-234],[7,-101],[-105,-235],[44,-199],[32,-146],[-25,-27],[-11,58],[-52,-18],[-3,30],[-1,-59],[-11,-15],[8,-202],[0,-8],[-43,-15],[-19,-206],[-100,-103],[0,-2],[-6,-7],[-15,-165],[-91,-53],[-70,15],[8,-9],[-7,2],[21,-18],[6,-7],[32,-38],[12,3],[3,-2],[6,4],[74,16],[32,-51],[47,-84],[18,-159],[-125,-196],[-126,-84],[-255,7],[-96,-81],[-107,-19],[-70,27],[-11,6],[-53,32],[6,346],[4,118],[123,120],[10,48],[6,6],[85,11],[18,82],[8,406],[30,63],[-38,213],[71,72],[14,56],[47,181],[28,182],[-40,77],[170,141],[152,298],[49,1],[96,82],[34,29],[95,81],[131,277],[-31,0],[-74,-123],[-118,-152],[-7,-7],[-42,-44],[-147,-92],[-4,17],[-41,-67],[-48,-21],[-30,-8],[0,9],[25,61],[20,13],[-23,-4],[-29,20],[-7,14],[6,10],[39,33],[-23,-5],[14,23],[-94,-43],[-3,0],[-73,65],[-1,77],[3,145],[51,118],[169,296],[65,83],[-120,-43],[-59,-62],[-149,-158],[-16,60],[-13,74],[32,92],[220,377],[12,18],[32,28],[51,29],[7,24],[3,2],[-2,-1],[13,42],[-95,-70],[45,64],[48,65],[-4,-4],[2,4],[-66,-47],[6,35],[-16,-39],[0,0],[-2,-5],[-49,-34],[-1,0],[96,148],[-59,-83],[52,94],[-98,-158],[-8,0],[-30,1],[1,-1],[-3,0],[6,-4],[31,-34],[-21,-39],[-65,-104],[-51,-31],[69,153],[-4,-5],[2,4],[-10,-14],[-37,-49],[-63,-115],[7,-28],[47,22],[-40,-70],[-45,-31],[-14,-11],[4,10],[29,60],[-66,-62],[-42,-39],[-6,-5],[19,43],[156,342],[63,33],[9,121],[145,204],[8,0],[45,-19],[37,16],[5,0],[8,-54],[42,-25],[47,-30],[35,44],[-57,-20],[-2,54],[-25,-4],[-22,-3],[20,40],[23,47],[-26,1],[-36,0],[-8,11],[18,40],[-34,-20],[-29,37],[78,145],[0,1],[124,230],[-20,27],[-27,-22],[-26,3],[-21,-42],[-2,-2],[-3,-2],[7,15],[-24,-29],[-17,-14],[-102,-84],[-39,-87],[-6,-12],[-24,-29],[-36,-5],[-1,0],[31,44],[50,70],[-40,-27],[10,59],[-9,-3],[1,11],[130,222],[-20,25],[-8,12],[51,23],[27,11],[-20,25],[-4,43],[-51,34],[41,16],[213,88],[-40,28],[-8,10],[10,31],[-34,-1],[-37,-55],[-48,2],[-86,4],[-60,-65],[-4,0],[-39,10],[51,176],[-35,-7],[-4,2],[32,196],[11,65],[75,73],[31,-13],[11,25],[6,1],[48,-45],[2,-3],[0,1],[1,-1],[64,61],[54,12],[3,4],[-43,28],[4,15],[-10,-11],[-2,1],[-64,-78],[-6,-6],[-55,75],[73,187],[125,89],[-34,120],[15,14],[53,49],[43,28],[19,12],[15,-43],[63,41],[3,-29],[168,46],[-2,-6],[7,3],[-5,3],[24,6],[22,-17],[39,-31],[2,2],[1,-1],[18,18],[22,19],[90,-47],[51,9],[7,39],[55,-107],[10,-1],[32,-3],[3,11],[19,35],[12,-28],[100,44],[101,122],[65,26],[-27,28],[40,54],[36,-19],[-30,21],[100,184]],[[5807,34667],[2,-74],[-148,-10],[-1,3],[-16,-4],[-72,-5],[-28,-58],[51,-30],[4,-4],[-49,-88],[-193,-2],[-7,0],[-64,-94],[12,-78],[2,-12],[1,-41],[-117,-11],[-42,53],[-25,31],[-74,-38],[-2,-1],[0,1],[19,190],[-37,79],[-5,0],[0,2],[-13,-2],[-22,-1],[6,5],[40,14],[22,43],[78,71],[115,9],[2,-1],[29,-30],[13,7],[56,-30],[16,-9],[9,14],[149,108],[12,6],[12,-6],[49,-36],[5,6],[2,-1],[2,7],[15,18],[29,-18],[1,-1],[3,-2],[74,99],[39,-62],[32,-3],[14,-14]],[[5964,34861],[-1,-3],[-3,1],[3,4],[1,-2]],[[10724,34641],[-111,-168],[-66,-11],[-83,-209],[-141,-76],[-52,59],[-28,32],[-95,-19],[-176,59],[-47,-8],[-9,-39],[-5,-20],[-99,0],[-23,0],[2,36],[17,26],[-15,28],[1,43],[-44,40],[-7,12],[-3,-3],[-11,9],[23,62],[-11,-14],[-108,-157],[22,69],[-68,-31],[2,2],[125,204],[91,22],[10,-23],[-6,-21],[21,-13],[11,-24],[11,11],[14,-8],[145,53],[112,133],[141,11],[12,23],[-46,5],[89,52],[-153,-81],[-114,-3],[-141,-127],[-1,1],[2,1],[-23,29],[-26,-27],[-32,102],[-71,-25],[25,113],[52,42],[3,-48],[63,33],[-56,49],[13,36],[177,200]],[[7659,35204],[139,-27],[25,-55],[1,0],[-35,-37],[8,-4],[-1,-2],[43,-19],[62,-31],[62,-116],[68,-43],[18,-46],[61,-176],[-36,-29],[72,-70],[17,19],[39,0],[38,-28],[52,9],[119,18],[56,-38],[43,-30],[0,1],[19,-13],[3,58],[81,-11],[68,-107],[17,-28],[82,-38],[64,17],[8,-10],[13,-44],[59,-41],[41,-50],[-10,-29],[66,-19],[28,44],[0,-10],[0,-154],[-54,19],[-1,0],[19,20],[-46,44],[-48,-71],[52,34],[8,-13],[0,-61],[23,18],[6,-5],[4,-6],[3,0],[33,-29],[-81,-166],[-115,37],[11,71],[10,51],[-2,-1],[1,4],[-7,-5],[-63,-13],[-43,12],[50,-91],[-69,-7],[-11,-70],[-111,-77],[27,9],[-16,-12],[212,80],[36,13],[47,-5],[7,-1],[-12,-63],[-152,-150],[-247,-149],[-20,-12],[-17,6],[-10,4],[-120,40],[-19,6],[17,17],[113,108],[-19,43],[-73,12],[-21,-21],[-55,-29],[-69,-99],[-30,-31],[-158,7],[-92,-82],[-81,-73],[-93,42],[-12,6],[-144,-29],[-49,-64],[-82,19],[-86,20],[-11,-6],[-3,1],[-38,-24],[-13,-7],[0,1],[0,-1],[-16,-9],[-60,27],[-8,-16],[-6,1],[-39,-100],[-5,-11],[-2,3],[-13,47],[-153,-23],[-10,6],[1,62],[-19,0],[1,11],[-62,1],[4,58],[5,52],[-91,15],[77,197],[170,-13],[1,0],[0,0],[15,-38],[1,0],[9,-21],[2,20],[39,0],[16,-65],[-92,1],[185,-45],[-36,142],[122,-39],[54,-18],[42,12],[-26,17],[4,5],[18,13],[57,-11],[41,-9],[1,2],[9,-2],[35,49],[82,-23],[98,74],[157,41],[46,73],[-31,45],[16,3],[88,-9],[-131,46],[-5,-4],[-1,0],[-67,-61],[-38,-33],[-39,41],[-69,-68],[-32,-20],[-269,-42],[-44,70],[11,67],[165,146],[62,171],[16,13],[213,15],[160,138],[-1,12],[9,7],[-3,58],[-8,3],[-1,15],[23,-15],[-23,18],[-3,-1],[-28,18],[-58,-54],[-10,-7],[-35,-12],[-118,-38],[-111,-29],[-38,46],[-33,-3],[-7,0],[4,7],[30,45],[-33,46],[-231,149],[-11,-2],[-2,2],[-65,-11],[-107,-17],[-162,72],[19,87],[43,14],[44,9],[77,99],[-14,0],[4,5],[-48,-6],[-49,0],[-26,151],[148,-18],[7,5],[3,0],[6,9],[47,41],[2,-1],[45,-37],[151,-123],[-44,47],[40,-29],[-103,98],[36,-8],[-46,58],[0,100],[54,-28],[36,-20],[-2,3],[10,-6],[-41,62],[18,-11],[6,-5],[0,1],[5,-4],[1,54],[97,-3],[41,28],[72,45],[48,-62]],[[6631,35433],[2,-68],[-66,-123],[-94,-179],[-1,-1],[-85,119],[33,-136],[-18,-22],[-6,6],[-69,-81],[-27,0],[-8,0],[-3,-43],[-41,28],[-40,-32],[-20,0],[-3,18],[-30,-72],[-42,90],[-32,-83],[-8,-17],[-28,50],[-71,2],[-4,-13],[-18,-2],[-10,-78],[-1,-3],[-40,-9],[-44,83],[2,6],[29,25],[10,-12],[33,48],[19,17],[10,-1],[5,-13],[40,7],[16,-2],[19,44],[1,0],[-1,1],[36,82],[35,16],[19,6],[1,3],[9,4],[11,74],[83,49],[8,5],[32,16],[0,3],[5,2],[68,41],[39,70],[21,16],[63,11],[9,37],[33,-20],[-6,45],[64,-19],[12,24],[18,-7],[31,-12]],[[15864,30913],[-4,63],[-73,74],[10,75],[61,44],[-52,49],[79,128],[-171,25],[39,126],[40,9],[-95,90],[75,15],[-56,40],[-15,84],[56,22],[11,63]],[[15769,31820],[2,0],[15,7],[19,-3],[-2,-10],[76,-16],[19,11],[3,-1],[31,20],[61,32],[145,-137],[18,37],[43,-7],[63,-10],[111,42],[10,3],[2,-36],[4,37],[7,-39],[58,-1],[51,58],[199,-180],[48,-21],[4,-5],[8,-1],[57,-25],[2,0]],[[12850,31275],[120,-81],[-34,-95],[-49,5],[39,-57],[-41,-116]],[[12176,31490],[6,-1],[117,20]],[[12299,31509],[276,-31],[275,-203]],[[12823,31705],[68,-264]],[[12891,31441],[-31,-55],[43,-55],[-53,-56]],[[12299,31509],[37,6],[-140,59],[0,0]],[[14809,30717],[32,57],[-25,33],[81,76],[-66,65],[-40,170],[118,77],[-3,43],[-40,14],[-112,-63],[-33,43],[-67,-39],[-83,54],[-25,51],[26,15]],[[15519,31858],[250,-38]],[[18791,35775],[-40,-118],[-50,-143],[37,-8],[7,-48],[-14,-44],[-46,-37],[-71,-28],[-84,-104],[28,-111],[22,-3],[44,-44],[-6,-10],[-121,-202],[-46,-24],[0,-48],[-205,-85],[-2,-1],[-92,-122],[-46,-31],[-194,-133],[-51,-152],[-51,12],[-136,63],[-132,-34],[-3,-2]],[[17539,34318],[-18,22],[22,76],[-175,4],[-153,56],[-68,-51],[-188,43],[-61,-29],[3,-75],[-142,-17],[26,-64]],[[16785,34283],[-91,4],[3,48],[-75,15],[4,40],[-149,82],[21,24],[-83,86],[118,9],[27,63],[-79,120],[174,93],[134,178],[-66,4],[-103,-96],[-66,17],[39,78],[-115,42],[60,21],[-21,50],[74,12],[7,80],[-185,11],[-155,80],[-62,-26],[3,63],[-75,63],[5,66],[-139,123],[-33,62],[18,49],[-60,29],[-36,84],[97,183],[-28,47],[46,36],[-168,120],[106,163]],[[17539,34318],[-92,-59],[-2,1],[-58,31],[-60,-8],[-16,3],[-21,-8],[-52,-7],[-192,-70],[-110,-1],[-38,39],[0,-1]],[[16898,34238],[-18,25],[-89,-6],[-6,26]],[[13577,31894],[119,-162],[-31,-124],[182,78],[48,-83],[-74,-44],[41,-105],[-162,-2],[-40,-61],[-210,8],[42,-42]],[[13492,31357],[-169,-42],[-97,164],[-89,4],[-10,-67],[33,-23],[-113,-63],[-62,28],[7,59],[-101,24]],[[15158,32543],[143,34],[-5,61],[57,46],[54,-7],[18,-63],[261,21],[112,-63],[141,39],[-6,97],[80,44],[87,-33],[60,21],[-38,76],[145,57],[-42,94],[31,31],[-77,25],[31,46],[-264,31],[43,81],[-92,70],[145,108],[33,-35],[94,31],[-21,131],[134,136],[1,32],[-57,23]],[[16226,33677],[146,24],[107,59],[456,256],[150,26],[48,37],[158,123],[17,1],[110,-8],[43,-52],[173,8],[-8,-262],[-85,-104],[-19,-10],[-56,-28],[76,-58],[57,78],[41,-122],[47,-15],[19,-17],[-18,-17],[21,14],[11,-10],[7,-16],[353,-75],[37,-54],[54,-78],[136,-72],[-16,-24],[-78,-73],[-39,-15],[-53,-53],[-137,-137],[-15,-5],[-21,13],[-7,-25],[-193,-76],[-1,-1],[-33,-11],[-58,-57],[-34,-33],[-4,0],[-16,31],[-45,-24],[-107,11],[4,13],[5,17],[-31,0],[-6,9],[18,17],[-52,42],[-70,17],[-3,1],[-3,0],[-86,21],[-50,-35],[-9,0],[-15,-16],[-2,-1],[-84,-57],[-54,9],[53,-19],[-6,-10],[-22,-39],[-4,-4],[7,27],[-124,-94],[-25,-25],[0,0],[0,0],[-160,-164],[-116,-67],[-11,-3],[-1,-4],[-4,-2],[-1,-16],[-69,-265],[-128,6],[-53,-48],[-28,3],[-68,22],[-55,-17],[1,-16],[-11,-9],[-22,9],[-83,-102],[-36,32],[-48,-49],[-72,-15],[-64,10],[-23,-27],[45,-8],[-10,-85],[-65,54],[-17,-2],[-61,40],[-31,-12],[19,-19],[-40,13],[-22,51],[-177,60],[-57,-8],[-28,8],[-77,89],[-45,3],[-11,-70],[-39,1],[-3,0],[-29,51],[-208,-41],[-159,151],[-1,0]],[[16898,34238],[-225,-142],[-308,-327],[-2,0],[-94,-11],[-10,-18],[-92,-25],[-6,-6],[-15,-16],[15,-4],[58,-13],[7,1]],[[13492,31357],[57,-36],[-9,-75],[173,20],[86,-31],[21,-105],[-50,-39],[41,-51],[-83,-8],[-15,-41]],[[13558,17400],[-15,-19],[-10,4],[6,3],[6,4],[13,8]],[[12093,17900],[-13,-9],[62,-21],[7,18],[-18,-53],[31,25],[2,-2],[28,-50],[79,-8],[3,-57],[-9,-7],[-69,-49],[35,17],[2,-43],[64,-10],[-25,-48],[69,4],[-33,-13],[48,-83],[-32,-9],[-90,-18],[-11,6],[-29,20],[-6,15],[12,40],[-52,69],[25,51],[-98,44],[-5,2],[-4,-2],[-9,-7],[-66,-18],[-15,4],[7,57],[8,21],[-58,46],[3,6],[38,25],[5,48],[59,-19],[116,56],[-71,-45],[10,-3]],[[12801,18438],[20,-14],[104,16],[36,-51],[53,28],[13,-33],[24,23],[64,-20],[37,-14],[9,16],[9,14],[53,-137],[-79,-135],[58,33],[-10,26],[45,-79],[105,-16],[-11,-89],[44,-113],[45,-27],[-31,-78],[11,-12],[21,-22],[66,25],[117,43],[71,72],[50,-9],[190,-35],[-37,-59],[-144,-230],[-1,-2],[-177,-109],[-10,-53],[-25,7],[-97,-48],[-3,-12],[-3,-3],[-23,-84],[-18,-59],[-299,-215],[-3,30],[-48,-5],[10,86],[-27,-88],[12,-6],[-4,-24],[-53,-44],[78,-40],[-195,88],[-4,2],[-2,2],[0,-1],[-9,4],[-45,-45],[11,27],[7,15],[-37,101],[75,25],[17,6],[13,113],[0,0],[-33,-17],[-3,-2],[-140,-170],[-69,147],[19,58],[-20,-54],[0,-10],[-60,-26],[-6,49],[-47,2],[-1,0],[21,105],[-80,101],[1,28],[5,0],[28,35],[-31,-6],[-2,-26],[-37,23],[-59,66],[4,93],[-19,-16],[-85,88],[37,24],[-15,16],[-7,7],[14,-7],[13,-6],[8,7],[127,106],[-100,-53],[2,91],[-51,37],[-9,16],[13,39],[21,16],[29,133],[19,55],[-58,155],[29,4],[105,9],[58,55],[2,-5],[2,-32],[11,2],[1,-3],[5,4],[35,6],[42,57],[85,-48],[-1,16],[0,37],[57,27],[20,9],[47,-33]],[[11681,14977],[-64,-72],[24,122],[41,-13],[-1,-37]],[[15673,16154],[64,-22],[-36,-36],[6,-55],[-135,-154],[79,-70],[-75,-128],[50,-127],[-29,-30]],[[15597,15532],[-67,-123],[-185,-61],[-5,-38],[-55,25],[-32,-71],[-35,-104],[76,-289],[-48,-66],[-8,-109],[-164,-71],[-83,13],[-77,-118],[-22,40],[-83,13],[-46,-62],[-147,44],[-99,-140],[19,-93],[-48,-65],[26,-108],[-101,-36],[-26,-82],[-95,7],[-41,-37],[7,-56]],[[14258,13945],[-19,-40],[-27,25]],[[14212,13930],[1,1],[5,14],[-62,0],[-314,-101],[-4,9],[-103,188],[-80,147],[-7,23],[102,295],[68,59],[46,39],[22,146],[-5,-60],[106,88],[15,-39],[67,119],[-103,0],[-39,-78],[-68,-17],[-49,82],[-77,132],[-151,257],[47,80],[4,3],[-18,-45],[63,77],[33,-20],[-21,29],[-43,-26],[2,8],[29,101],[-80,238],[178,43],[10,-9],[1,0],[42,48],[-43,-28],[-8,-5],[8,13],[28,50],[6,9],[38,-5],[35,56],[-88,-21],[-21,-19],[-60,-53],[-47,53],[26,5],[-55,9],[6,38],[-76,-118],[-203,66],[-18,-6],[-7,3],[-29,-15],[-73,-25],[-71,33],[63,-34],[-158,-10],[-32,-88],[-160,19],[-22,2],[-6,-7],[-26,-15],[0,-17],[-17,-22],[-12,39],[-24,-33],[53,-15],[0,-1],[-135,-34],[-24,-22],[-29,-10],[-22,-36],[-28,-26],[19,-51],[-2,-2],[-77,-77],[1,-7],[-30,-33],[26,4],[-7,-70],[30,-22],[10,-68],[0,-1],[-86,-10],[-39,-79],[-44,46],[19,71],[-197,129],[-10,-11],[-24,-1],[-90,-115],[-4,-4],[-53,33],[-9,-7],[-4,1],[-35,-32],[-34,-26],[-97,46],[-35,-108],[-4,2],[-100,75],[134,206],[-11,89],[90,31],[55,95],[28,13],[53,129],[4,7],[53,-1],[52,92],[46,27],[88,52],[10,50],[22,-56],[122,14],[145,137],[103,164],[29,1],[54,-2],[71,77],[98,106],[6,25],[34,73],[7,115],[6,26],[-30,182],[-1,1],[24,37],[43,1],[1,1],[14,-1],[-41,-37],[-2,-2],[44,-111],[40,79],[-24,-7],[3,42],[3,65],[19,14],[68,50],[29,-34],[-12,51],[41,61],[61,84],[95,66],[3,8],[3,2],[0,10],[33,119],[41,26],[75,26],[54,52],[62,38],[24,-30],[4,28],[21,-23],[22,11],[24,11],[16,-57],[236,111]],[[14014,17518],[0,-1],[28,8],[57,-85],[133,-89],[-11,-77],[-79,-87],[-16,-121],[-113,-85],[-37,-99],[74,1],[-77,-2],[-31,-99],[52,-11],[2,-72],[81,-29],[-14,-40],[43,-39],[-61,-163],[36,-140],[261,51],[33,-47],[-26,-86],[142,-92],[26,-78],[83,-68],[132,52],[104,107],[157,37],[31,53],[174,74],[47,2],[-33,-82],[83,-148],[149,32],[88,-43],[141,102]],[[15530,17864],[26,-58],[-76,-98],[10,-141],[-44,-39],[21,-45],[50,8],[131,-109],[-25,-232],[41,-59],[-221,-130],[-88,-107],[22,-67],[-138,-111],[26,-35],[85,84],[149,-26],[17,-69],[69,40],[0,-95],[74,-102],[-82,-44],[40,-59],[-14,-42],[80,-106],[-10,-68]],[[14014,17518],[72,65],[416,182],[59,-68],[0,9],[10,-14],[-9,29],[0,26],[-13,15],[-16,47],[-27,84],[-93,95],[7,11],[121,-7],[42,-79],[48,10],[84,19],[0,-1],[31,-49],[78,-24],[15,-51],[6,-21],[76,-34],[305,-15],[176,83],[109,52],[9,-17],[7,-15],[3,14]],[[16664,16609],[-55,-148],[51,-105],[-54,-131],[85,-68],[-5,-46],[52,-17],[-19,-21],[64,11],[-6,-38],[-56,-13],[42,-13],[-305,-78],[-119,35],[-182,-42],[-50,20],[-31,-78],[-87,-51],[13,-30],[-79,-124]],[[15923,15672],[-42,-85],[-236,-73],[-48,18]],[[15530,17864],[4,20],[1,1],[3,3],[66,54],[344,120]],[[15948,18062],[-4,-84],[-61,-63],[-15,20],[-22,-69],[58,10],[-39,-73],[58,-52],[57,29],[-3,-69],[83,-55],[-97,-106],[84,-86],[89,-19],[-54,-65],[16,-55],[39,-10],[-11,-54],[98,-95],[-17,-56],[30,-58],[81,-27],[109,39],[78,-30],[16,-197],[94,-64],[-18,-57],[67,-107]],[[16795,17569],[-16,14],[0,1],[-3,3],[-6,6],[-3,4],[-51,3],[32,24],[-29,-5],[12,28]],[[17164,16924],[-99,-15],[-98,-138],[5,-55],[-23,20],[-71,-59],[-38,22],[-176,-90]],[[15948,18062],[10,3],[159,18],[-5,-68],[43,-54],[75,-59],[26,21],[15,-32],[1,3],[4,-24],[34,-22],[136,-86],[2,-1],[278,-274],[130,-72],[-87,92],[30,-24],[-13,24],[25,-1],[12,-10],[14,-39],[-9,30],[48,25],[-44,-20],[-107,81],[72,-5],[-1,1],[0,0]],[[16610,15660],[-81,60],[-94,-44],[-83,-136],[-87,-2],[-253,135],[-89,-1]],[[14767,11693],[-85,-123],[-25,66],[-198,130],[-141,-117],[-102,97],[-234,-214],[-121,86],[-127,-92],[-132,-9],[-45,-39],[35,-32],[-34,3],[-17,-68],[-82,-47],[-44,18],[-86,-127],[-145,8],[-20,68],[-36,-7],[-14,-67],[-88,14],[-48,-76],[-103,69],[-42,-28],[-37,37],[-114,12],[-45,-39],[-72,65],[-44,-34],[-101,10],[-17,40],[-12,-41],[-44,-3]],[[12347,11253],[-32,79],[-113,17],[-71,-32],[-48,117],[-54,-108],[-46,31],[32,87],[-36,25],[-21,99]],[[11958,11568],[1,0],[1,23],[5,110],[134,44],[176,-1],[2,0],[46,33],[13,-9],[54,-48],[81,8],[27,25],[11,3],[13,19],[93,85],[12,57],[15,-7],[6,-11],[10,2],[7,-3],[11,9],[17,5],[16,18],[33,23],[148,188],[6,7],[1,1],[0,0],[61,-2],[2,-4],[18,-24],[23,5],[55,14],[12,9],[342,251],[203,307],[14,42],[137,353],[12,149],[48,193],[38,67],[18,24],[-13,264],[44,-30],[7,1],[114,32],[48,-79],[-34,90],[91,-22],[-54,28],[86,100],[21,-19],[22,32]],[[14258,13945],[203,0],[56,-49],[-10,-204],[53,-142],[43,-31],[239,144],[-35,-166],[-65,-28],[-16,-141],[180,-150],[45,-242],[35,7],[83,-107],[-142,-33],[-121,-124],[53,-61],[-17,-81],[78,-85],[-73,-13],[-66,-103],[28,-28],[-25,-253],[31,-304],[-48,-58]],[[12e3,9139],[-28,-40],[-59,11],[-18,53],[19,0],[86,-24]],[[10197,9441],[-48,-11],[27,34],[16,18],[27,-9],[-16,-30],[-6,-2]],[[9001,9572],[0,-6],[-4,4],[4,2]],[[9577,9633],[-8,-21],[-4,10],[12,11]],[[10113,9698],[76,-45],[16,-9],[-1,0],[-35,8],[-1,3],[-35,-44],[-45,19],[-10,14],[-5,22],[10,12],[30,20]],[[10023,10389],[-11,-125],[-61,52],[46,80],[26,-7]],[[12347,11253],[40,-128],[71,-41],[32,-85],[76,-32],[-19,-143],[-145,-25],[-109,-128],[-67,47],[-108,-116],[-97,80],[-138,-95],[0,-86],[-29,-18],[49,-36],[38,-152],[-43,-64],[13,-43],[176,-40],[87,-103],[-83,-75],[31,-64],[-29,-44],[64,-44],[-29,-171]],[[12128,9647],[-2,0],[-131,-42],[-61,-75],[13,-22],[-2,-16],[27,-24],[11,-18],[-51,-58],[-14,-61],[26,-13],[-21,-23],[-43,-46],[10,-36],[-138,9],[3,-50],[-64,-8],[-12,-39],[-1,1],[-95,52],[-39,3],[-15,6],[-44,-2],[-47,4],[-3,-42],[0,-2],[-88,-48],[-23,-12],[7,-89],[-81,7],[-1,-64],[-5,-11],[-70,-1],[-82,70],[-97,-9],[-156,62],[28,101],[-37,98],[-8,24],[-176,41],[-7,54],[62,54],[3,0],[84,-20],[1,-1],[-37,-17],[43,-35],[83,-9],[-15,92],[72,6],[60,-40],[79,9],[-15,-26],[33,-17],[0,3],[6,-13],[-9,45],[-1,3],[83,73],[176,20],[12,56],[45,5],[-38,7],[5,77],[-45,30],[36,163],[-81,3],[54,-53],[-23,-103],[47,-59],[-26,-105],[-153,-33],[9,8],[-126,-30],[-103,40],[16,52],[-26,-48],[-36,15],[-80,-14],[4,-6],[-11,0],[0,1],[-66,-4],[-15,23],[-23,48],[-6,-6],[-16,24],[36,88],[-37,-22],[-32,-134],[-26,36],[-31,-7],[-71,-5],[-35,83],[4,-126],[57,-23],[-25,-3],[2,-72],[-55,-40],[-26,34],[-12,16],[3,99],[-11,3],[-56,51],[-9,20],[-61,9],[-63,67],[-2,2],[131,-22],[22,113],[44,-8],[8,-2],[78,96],[126,-20],[33,31],[14,187],[-39,142],[-22,76],[-44,62],[-6,-1],[-16,-1],[-110,-13],[6,33],[-8,0],[0,0],[-37,-1],[16,35],[-24,-29],[-4,-5],[-53,12],[-15,18],[-26,-9],[-49,11],[-111,-17],[-41,-50],[-4,28],[-63,-21],[-4,-2],[37,69],[0,1],[0,0],[-26,51],[61,44],[-24,54],[-33,-9],[28,33],[140,34],[69,77],[79,14],[23,54],[18,41],[32,-2],[85,-10],[1,2],[10,-2],[11,36],[21,33],[57,-1],[8,-4],[4,4],[41,-1],[7,39],[4,4],[53,-5],[18,89],[-46,40],[-2,3],[70,53],[-3,3],[1,1],[-42,47],[-8,8],[1,1],[9,13],[46,63],[73,-23],[79,-28],[88,30],[7,-23],[7,-27],[0,0],[1,-2],[49,-17],[-36,10],[-1,0],[-18,-32],[-11,-20],[-2,-3],[5,1],[15,-10],[-10,-9],[62,-30],[-2,12],[130,61],[21,6],[11,47],[4,17],[14,64],[74,-72],[9,0],[12,-9],[194,-3],[-74,29],[-7,3],[10,45],[-19,15],[18,71],[1,2],[9,3],[131,40],[98,95],[53,114],[-16,19],[-7,10],[53,72],[130,-72]],[[13086,9291],[0,-9],[-21,7],[-48,47],[24,1],[43,1],[2,-47]],[[14767,11693],[114,-56],[19,-65],[-45,-57],[17,-46],[169,-56],[-36,-72],[97,-114],[-64,-69],[-5,-111],[-125,-220],[34,-82],[-63,-25],[-20,-160],[42,-24],[-1,-98],[-177,-214],[-103,-303]],[[14620,9921],[-36,76],[-141,41],[-104,-35],[53,-82],[-15,-99],[-94,34],[-55,-21]],[[14228,9835],[-87,-39],[-104,54],[-5,-60],[-144,-172],[17,-120]],[[13905,9498],[-18,28],[17,-28],[-38,35],[5,-30]],[[13871,9503],[-13,-38]],[[13858,9465],[-38,-6],[13,-44],[-43,-10],[1,-24]],[[13791,9381],[1,-20],[2,-55],[-3,27],[-25,-16],[23,-39]],[[13789,9278],[-5,-4]],[[13784,9274],[-138,-29],[-12,38],[-39,-55],[-64,49],[-3,76],[0,11],[-1,-11],[-4,-70],[-32,69],[-5,11],[-100,24],[-222,-44],[9,-2],[66,-16],[-81,-30],[-53,44],[-21,18],[-99,81],[-95,193],[58,-10],[-7,-29],[16,26],[3,-29],[1,-12],[63,7],[-3,-29],[38,34],[4,-39],[2,42],[12,-16],[9,-12],[0,37],[15,-25],[24,24],[-49,21],[-21,9],[20,11],[70,41],[-70,-34],[-10,-4],[-132,17],[-32,83],[30,173],[128,75],[-8,0],[-112,-26],[-122,-204],[-135,67],[-42,-5],[11,-46],[124,-78],[-17,-24],[-120,-47],[-289,53],[-39,-26],[-104,-11],[-5,0],[-73,2]],[[13028,8761],[69,-17],[5,6],[0,-20],[0,-4],[-74,35]],[[13095,8964],[0,-1],[-14,28],[13,9],[1,-36]],[[13789,9278],[1,-3],[-6,-1]],[[13871,9503],[5,-34],[-18,-4]],[[14228,9835],[145,-168],[38,-183],[100,-34],[-26,-117],[-72,-90],[-30,-208]],[[14383,9035],[-3,-1],[-116,-55],[-7,2],[-7,49],[2,-17],[0,-27],[-1,27],[-89,-7],[-107,-70],[-20,-97],[43,-35],[0,0],[29,-24],[-12,-20],[-4,0],[-86,17],[-32,-20],[-10,-6],[-32,36],[-89,-67],[-142,67],[23,40],[-159,-82],[11,-101],[-67,12],[-59,18],[-49,-58],[-205,127],[-89,8],[58,69],[-61,173],[89,33],[104,165],[45,0],[-36,-6],[30,-22],[-40,-126],[40,70],[-5,-45],[16,39],[15,-49],[-5,27],[10,-2],[50,-48],[-22,40],[-24,7],[-12,11],[16,20],[32,-34],[-27,55],[95,-46],[-34,-23],[30,-28],[-13,38],[79,21],[-22,-63],[43,42],[-16,20],[26,-8],[-27,9],[29,-2],[-11,34],[77,-10],[-13,50],[151,31],[-88,-17],[33,41],[172,16],[-99,33],[57,55],[-37,41],[-7,8],[17,-8],[6,-3],[2,3],[53,101],[-7,47],[30,-14],[1,1],[-1,1]],[[14620,9921],[110,-173],[73,-6],[55,118],[174,58],[202,-70],[36,-100]],[[15270,9748],[38,-191],[-33,-201],[80,-176]],[[15355,9180],[-98,-41],[-211,18],[-46,-100],[12,-107],[-43,12],[-10,-49],[118,-153],[-4,-134],[-94,-8],[-46,-54],[-179,39]],[[14754,8603],[-2,9],[-3,7],[4,1],[-4,0],[-44,95],[-4,19],[-6,3],[-22,49],[-24,-3],[-61,26],[59,-16],[-14,55],[-25,-6],[3,5],[-4,6],[61,54],[-63,-49],[-21,33],[-11,9],[-86,118],[42,48],[-146,-31]],[[15553,8488],[-97,-59],[6,-40],[-35,-13],[20,-49],[-66,58],[-201,-90]],[[15180,8295],[5,6],[-21,-13]],[[15164,8288],[-40,-18]],[[15124,8270],[-58,49],[-63,-36],[-57,25],[-2,-19],[-27,7],[-38,21],[-26,39],[-60,87],[-2,10],[-37,150]],[[15355,9180],[77,-7],[84,-135],[113,-88],[-12,-103],[-37,-38],[78,-161],[-105,-160]],[[15164,8288],[-36,-22],[-4,4]],[[16042,8466],[113,-44],[82,-182],[69,-2],[88,54],[98,-141],[62,-20]],[[16554,8131],[-11,-197],[-54,-32],[-111,18],[-111,-46],[-11,-28],[-13,-7],[-125,25],[-96,-61],[-162,9],[2,78],[-4,-80],[-27,-7],[-29,35],[-71,12],[-363,59],[-114,206],[-91,76],[-38,41],[55,63]],[[15553,8488],[97,11],[164,-42],[28,-40],[70,71],[130,-22]],[[16696,8660],[151,-132],[-65,-54],[21,-43]],[[16803,8431],[-127,-63],[-49,118],[55,-136],[-88,-151],[-34,-59],[-1,0],[-4,2],[-1,-11]],[[16042,8466],[-18,140],[52,2],[42,69],[99,15],[49,-73],[72,77]],[[16338,8696],[223,42],[34,-47],[24,20],[77,-51]],[[15714,10070],[11,-107],[73,-150],[-33,-45],[-78,17],[161,-228],[60,-36],[148,-284],[52,-4],[0,-58]],[[16108,9175],[68,-273],[65,-43],[21,-92],[61,-4],[15,-67]],[[15270,9748],[78,53],[17,66],[69,-7],[-12,44],[195,129],[19,100],[30,8],[48,-71]],[[16705,9416],[42,-46],[53,33],[39,-74],[-10,-114],[-84,-95],[63,-76]],[[16808,9044],[52,-81],[-88,-65],[-34,30],[-58,-45],[8,-45],[95,-55],[-87,-123]],[[16108,9175],[53,102],[33,-31],[2,99],[32,26],[-80,282],[-45,-24],[17,38],[-58,102],[-16,166]],[[16046,9935],[73,20]],[[16119,9955],[26,24],[88,-112],[16,-95],[134,-188],[-4,32],[40,8],[-27,74],[29,27],[129,-209],[33,21],[82,-95],[-25,-72],[65,46]],[[16580,10068],[35,-59],[-33,-45],[68,-17]],[[16650,9947],[-29,-35],[114,-130],[-27,-20],[27,-192],[-30,-154]],[[16119,9955],[5,61],[76,101],[134,-68],[246,19]],[[17179,9093],[-92,0],[-91,-64],[-83,31],[6,-82],[-111,66]],[[16650,9947],[78,18],[149,-66],[47,-69],[-18,-52],[65,-78],[-10,-118],[144,-38],[-56,-128],[101,3],[-33,-92],[-46,28],[-26,-53],[134,-209]],[[18091,9058],[-10,39]],[[18072,9129],[15,-74],[-35,-67],[-78,-28],[-51,-109],[-136,-20],[-193,-127],[-2,-1]],[[17592,8703],[-36,86],[-56,5],[-20,42],[88,185],[81,5],[-94,169],[-148,-36],[-76,-93],[-37,17],[-62,-51],[-19,60],[-34,1]],[[16580,10068],[112,119],[58,-36],[12,75],[102,88],[-27,62],[97,49],[-28,139],[-88,68],[-35,135],[26,27],[-35,51],[78,93]],[[17592,8703],[-134,-60],[-116,-52],[-53,18],[26,35],[-113,-39],[-91,53],[34,54],[-56,-32],[-49,85],[48,-95],[-19,-58],[-170,-116],[-93,-64],[-3,-1]],[[16046,9935],[-78,3],[8,83],[-135,37],[0,63],[-45,46],[-82,-97]]],transform:{scale:[.00033127728464984346,.00019206658920486013],translate:[-8.64999583330431,49.8823405171977]},objects:{data:{type:"GeometryCollection",geometries:[{arcs:[[0,1,2]],type:"Polygon",properties:{AREACD:"E06000001",AREANM:"Hartlepool",GlobalID:"91d6b402-9e72-48f2-9e1f-76a00f575d94"},id:0},{arcs:[[3,4,5]],type:"Polygon",properties:{AREACD:"E06000002",AREANM:"Middlesbrough",GlobalID:"53d8ba20-f37c-4232-a792-a9f68fa1f23d"},id:1},{arcs:[[6,7,-4,8,9]],type:"Polygon",properties:{AREACD:"E06000003",AREANM:"Redcar and Cleveland",GlobalID:"6ff8878d-8b1b-4099-94a8-505bebde2919"},id:2},{arcs:[[10,-9,-6,11,12,13,-2]],type:"Polygon",properties:{AREACD:"E06000004",AREANM:"Stockton-on-Tees",GlobalID:"ada829f1-c20b-4741-ad97-1458fa9b1eee"},id:3},{arcs:[[-13,14,15,16]],type:"Polygon",properties:{AREACD:"E06000005",AREANM:"Darlington",GlobalID:"276baf32-5618-47fb-a697-a017f9feb96a"},id:4},{arcs:[[[17,18,19]],[[20,21,22,23,24]]],type:"MultiPolygon",properties:{AREACD:"E06000006",AREANM:"Halton",GlobalID:"f2549e37-92d0-465e-9284-328d36f42c55"},id:5},{arcs:[[25,26,27,28,-20,29,-21,30,31]],type:"Polygon",properties:{AREACD:"E06000007",AREANM:"Warrington",GlobalID:"0d38c1db-bb16-4e6b-8e81-a286ad44bc92"},id:6},{arcs:[[32,33,34,35,36,37,38]],type:"Polygon",properties:{AREACD:"E06000008",AREANM:"Blackburn with Darwen",GlobalID:"77b4f00d-c26d-4dc1-83bd-c11c848f0108"},id:7},{arcs:[[39,40,41]],type:"Polygon",properties:{AREACD:"E06000009",AREANM:"Blackpool",GlobalID:"1038d4e2-c80d-40f7-97c3-e431f9600cad"},id:8},{arcs:[[42,43]],type:"Polygon",properties:{AREACD:"E06000010",AREANM:"Kingston upon Hull, City of",GlobalID:"fc95030d-89c4-4d6c-8cf7-7d0be7b29158"},id:9},{arcs:[[44,-44,45,46,47,48,49,50]],type:"Polygon",properties:{AREACD:"E06000011",AREANM:"East Riding of Yorkshire",GlobalID:"c716dc35-d98d-4eb3-b905-fef0c76278b9"},id:10},{arcs:[[51,52,53,54]],type:"Polygon",properties:{AREACD:"E06000012",AREANM:"North East Lincolnshire",GlobalID:"d0755448-e024-4b77-9a1d-19fb476417c1"},id:11},{arcs:[[[55]],[[-54,56,57,58,-47,59]]],type:"MultiPolygon",properties:{AREACD:"E06000013",AREANM:"North Lincolnshire",GlobalID:"1f179dc7-bec2-4d89-9a5b-63f34f75eba1"},id:12},{arcs:[[-50,60,61,62,63]],type:"Polygon",properties:{AREACD:"E06000014",AREANM:"York",GlobalID:"6cc6b8c5-e1d3-46cb-b3c0-8724bc24de0a"},id:13},{arcs:[[64,65,66]],type:"Polygon",properties:{AREACD:"E06000015",AREANM:"Derby",GlobalID:"013c84b4-7a34-4497-8b31-8c2d975c8caf"},id:14},{arcs:[[67,68,69,70]],type:"Polygon",properties:{AREACD:"E06000016",AREANM:"Leicester",GlobalID:"6c954ab4-8c62-47cd-a2f4-094183cf42c4"},id:15},{arcs:[[71,72,73,74]],type:"Polygon",properties:{AREACD:"E06000017",AREANM:"Rutland",GlobalID:"8c502e2a-234b-4c2d-8495-fcbff7498354"},id:16},{arcs:[[75,76,77,78]],type:"Polygon",properties:{AREACD:"E06000018",AREANM:"Nottingham",GlobalID:"8f3e9a3a-b02b-4d22-9507-a0d53f67a09d"},id:17},{arcs:[[79,80,81,82,83]],type:"Polygon",properties:{AREACD:"E06000019",AREANM:"Herefordshire, County of",GlobalID:"72225e4f-4685-4b82-ba10-66112e045d93"},id:18},{arcs:[[84,85,86]],type:"Polygon",properties:{AREACD:"E06000020",AREANM:"Telford and Wrekin",GlobalID:"3b23aa7f-c478-49be-8b03-a31ee056bbe1"},id:19},{arcs:[[87,88,89]],type:"Polygon",properties:{AREACD:"E06000021",AREANM:"Stoke-on-Trent",GlobalID:"bdac0c6a-0a17-42e7-8962-448fd9465f28"},id:20},{arcs:[[90,91,92,93,94]],type:"Polygon",properties:{AREACD:"E06000022",AREANM:"Bath and North East Somerset",GlobalID:"285ae967-41df-4702-b910-37f55d9a7c85"},id:21},{arcs:[[[95,96]],[[97,98]],[[99,100,101]],[[102,103,-94,104]]],type:"MultiPolygon",properties:{AREACD:"E06000023",AREANM:"Bristol, City of",GlobalID:"56eaea1c-a6e3-45a8-9c4d-1f729bf49806"},id:22},{arcs:[[[105,106]],[[107,108]],[[-102,109,-98,-105,-93,110,111,112,-96,113,-100]]],type:"MultiPolygon",properties:{AREACD:"E06000024",AREANM:"North Somerset",GlobalID:"1854213d-f2b5-4f2b-a1d9-978fc66a7996"},id:23},{arcs:[[114,115,-95,-104,116,117,118]],type:"Polygon",properties:{AREACD:"E06000025",AREANM:"South Gloucestershire",GlobalID:"61621b0e-bd12-4a41-bf1f-c35293ff1af7"},id:24},{arcs:[[[119,120]],[[121,122]]],type:"MultiPolygon",properties:{AREACD:"E06000026",AREANM:"Plymouth",GlobalID:"7f35a66a-7acb-454b-a5a2-a47f3fe9d9db"},id:25},{arcs:[[123,124,125]],type:"Polygon",properties:{AREACD:"E06000027",AREANM:"Torbay",GlobalID:"7a8f95de-2679-456a-b9fe-232c7c6dd714"},id:26},{arcs:[[126,127,128]],type:"Polygon",properties:{AREACD:"E06000030",AREANM:"Swindon",GlobalID:"20ab4254-78bb-4d4c-81ae-5142457c65f2"},id:27},{arcs:[[129,130,131,132,133]],type:"Polygon",properties:{AREACD:"E06000031",AREANM:"Peterborough",GlobalID:"f5db7515-a227-4f2e-a1c3-8e1aae80dcdd"},id:28},{arcs:[[134,135]],type:"Polygon",properties:{AREACD:"E06000032",AREANM:"Luton",GlobalID:"81173d24-838f-477f-8f53-5e9db2b786a7"},id:29},{arcs:[[136,137,138]],type:"Polygon",properties:{AREACD:"E06000033",AREANM:"Southend-on-Sea",GlobalID:"357b16f3-49bc-438c-9921-18a1ea31f389"},id:30},{arcs:[[[139,140]],[[141,142,143,144]]],type:"MultiPolygon",properties:{AREACD:"E06000034",AREANM:"Thurrock",GlobalID:"00983f2c-a27a-4952-9135-44132646f12a"},id:31},{arcs:[[[145]],[[146]],[[147,148,149,150,151]]],type:"MultiPolygon",properties:{AREACD:"E06000035",AREANM:"Medway",GlobalID:"f3cdadf8-d832-48d8-aefb-a916ed756bc4"},id:32},{arcs:[[152,153,154,155]],type:"Polygon",properties:{AREACD:"E06000036",AREANM:"Bracknell Forest",GlobalID:"6bbd8e91-1d68-4491-918f-adc87e8869c4"},id:33},{arcs:[[156,157,158,159,160,161,162]],type:"Polygon",properties:{AREACD:"E06000037",AREANM:"West Berkshire",GlobalID:"47364d52-983a-412c-9f21-2b5b6301848b"},id:34},{arcs:[[163,-158,164]],type:"Polygon",properties:{AREACD:"E06000038",AREANM:"Reading",GlobalID:"2fc02c7f-aef9-4d35-9d71-11a6d470f6ca"},id:35},{arcs:[[165,166,167,168]],type:"Polygon",properties:{AREACD:"E06000039",AREANM:"Slough",GlobalID:"ba1d8073-eae1-480b-b065-8852a61330d3"},id:36},{arcs:[[-168,169,170,171,-156,172,173]],type:"Polygon",properties:{AREACD:"E06000040",AREANM:"Windsor and Maidenhead",GlobalID:"a11797e6-2d43-4fe3-b83b-b5177e2b3355"},id:37},{arcs:[[-173,-155,174,175,-159,-164,176,177]],type:"Polygon",properties:{AREACD:"E06000041",AREANM:"Wokingham",GlobalID:"b92523e2-a860-433a-9c95-44df8a2862c2"},id:38},{arcs:[[178,179,180,181,182]],type:"Polygon",properties:{AREACD:"E06000042",AREANM:"Milton Keynes",GlobalID:"0d4821a7-8ea0-4489-a4cc-c251cf5ec396"},id:39},{arcs:[[183,184,185,186,187]],type:"Polygon",properties:{AREACD:"E06000043",AREANM:"Brighton and Hove",GlobalID:"465759b8-9e3f-4277-b5c6-439de9b6ef6d"},id:40},{arcs:[[[188]],[[189]],[[190,191]],[[192,193]],[[194,195]],[[196,197,198,199]]],type:"MultiPolygon",properties:{AREACD:"E06000044",AREANM:"Portsmouth",GlobalID:"5e9ab634-99c6-4f2e-babf-f8f45932df73"},id:41},{arcs:[[200,201,202,203,204]],type:"Polygon",properties:{AREACD:"E06000045",AREANM:"Southampton",GlobalID:"a0541bfb-3f93-45f7-b90d-2b4cc6ba0342"},id:42},{arcs:[[205]],type:"Polygon",properties:{AREACD:"E06000046",AREANM:"Isle of Wight",GlobalID:"f946373b-5178-4057-889c-0cf0b8ff212b"},id:43},{arcs:[[206,207,-3,-14,-17,208,209,210,211]],type:"Polygon",properties:{AREACD:"E06000047",AREANM:"County Durham",GlobalID:"7b970d59-d438-4b21-8770-ea912e794d32"},id:44},{arcs:[[212,213,214,215,216,217,218,-28,219]],type:"Polygon",properties:{AREACD:"E06000049",AREANM:"Cheshire East",GlobalID:"a8266a58-5b90-4aec-b28a-ae2d1497d585"},id:45},{arcs:[[220,221,222,223,224,225,226,227,228,229,-18,-29,-219]],type:"Polygon",properties:{AREACD:"E06000050",AREANM:"Cheshire West and Chester",GlobalID:"32c99a63-da21-42f4-91b4-72775a63e78f"},id:46},{arcs:[[230,-86,231,232,233,-84,234,235,-221,-218,236]],type:"Polygon",properties:{AREACD:"E06000051",AREANM:"Shropshire",GlobalID:"39415456-f8d6-4e1e-bdf2-e0b1890ab154"},id:47},{arcs:[[[237]],[[238,239,240]]],type:"MultiPolygon",properties:{AREACD:"E06000052",AREANM:"Cornwall",GlobalID:"c10ffc72-27a7-47a0-8e10-3e6b4466b890"},id:48},{arcs:[[[241]],[[242]],[[243]],[[244]],[[245]]],type:"MultiPolygon",properties:{AREACD:"E06000053",AREANM:"Isles of Scilly",GlobalID:"656d724e-3f4a-4684-b320-0e27ee2280cb"},id:49},{arcs:[[-128,246,-162,247,248,249,250,251,-91,-116,252]],type:"Polygon",properties:{AREACD:"E06000054",AREANM:"Wiltshire",GlobalID:"53aca724-ceaf-40fd-9342-189ea3e6a474"},id:50},{arcs:[[253,-183,254,255]],type:"Polygon",properties:{AREACD:"E06000055",AREANM:"Bedford",GlobalID:"4e5524b0-2cfd-4a71-849d-1c3d4d89041a"},id:51},{arcs:[[256,257,258,-136,259,260,261,262,-179,-254]],type:"Polygon",properties:{AREACD:"E06000056",AREANM:"Central Bedfordshire",GlobalID:"a40a4b7a-6942-4551-a404-b8f54616ac2b"},id:52},{arcs:[[[263]],[[264,265,266,-211,267,268,269,270]]],type:"MultiPolygon",properties:{AREACD:"E06000057",AREANM:"Northumberland",GlobalID:"5a578d9d-4643-442a-b0f1-7252f8a4b180"},id:53},{arcs:[[271,272,273]],type:"Polygon",properties:{AREACD:"E06000058",AREANM:"Bournemouth, Christchurch and Poole",GlobalID:"56adc7de-4635-46ec-ae94-4f1a6b0a727b"},id:54},{arcs:[[[274]],[[-250,275,-274,276,277,278]]],type:"MultiPolygon",properties:{AREACD:"E06000059",AREANM:"Dorset",GlobalID:"ae6e0e8a-c001-4eb1-8e07-20ef2b404f5f"},id:55},{arcs:[[-180,-263,279,280,281,-169,-174,-178,282,283,284]],type:"Polygon",properties:{AREACD:"E06000060",AREANM:"Buckinghamshire",GlobalID:"0a0b4a72-6369-4171-b49b-df250d51641e"},id:56},{arcs:[[285,-132,286,-255,-182,287,288,-72]],type:"Polygon",properties:{AREACD:"E06000061",AREANM:"North Northamptonshire",GlobalID:"12fbb47d-df2c-49cb-9e38-19ca5660954f"},id:57},{arcs:[[-288,-181,-285,289,290,291,292]],type:"Polygon",properties:{AREACD:"E06000062",AREANM:"West Northamptonshire",GlobalID:"5994e46b-a1d5-4d1a-bf30-9e6ee654296a"},id:58},{arcs:[[293]],type:"Polygon",properties:{AREACD:"E07000008",AREANM:"Cambridge",GlobalID:"5c81395b-5ea3-41a8-8843-2407dc2aae51"},id:59},{arcs:[[294,295,296,297,298]],type:"Polygon",properties:{AREACD:"E07000009",AREANM:"East Cambridgeshire",GlobalID:"a80a40e6-416c-4517-88b9-7d9b141c1a53"},id:60},{arcs:[[299,-298,300,-130,301]],type:"Polygon",properties:{AREACD:"E07000010",AREANM:"Fenland",GlobalID:"69eb47e3-4366-40b3-b3a8-62f7bed08001"},id:61},{arcs:[[-301,-297,302,-257,-256,-287,-131]],type:"Polygon",properties:{AREACD:"E07000011",AREANM:"Huntingdonshire",GlobalID:"ce194c5f-ea01-422c-b0e7-0180a18af5c0"},id:62},{arcs:[[303,304,305,306,-258,-303,-296],[-294]],type:"Polygon",properties:{AREACD:"E07000012",AREANM:"South Cambridgeshire",GlobalID:"fbdfcc3e-33a7-4792-a5f2-483d4cf80e23"},id:63},{arcs:[[307,308,309,310,311]],type:"Polygon",properties:{AREACD:"E07000026",AREANM:"Allerdale",GlobalID:"6639cdb9-5fed-4853-b258-739a8872af67"},id:64},{arcs:[[[312]],[[313,314]]],type:"MultiPolygon",properties:{AREACD:"E07000027",AREANM:"Barrow-in-Furness",GlobalID:"9248f368-1975-494a-a985-4c0d1b7c97e0"},id:65},{arcs:[[315,-308,316,317,318,319,320,-269]],type:"Polygon",properties:{AREACD:"E07000028",AREANM:"Carlisle",GlobalID:"8e5db715-0fd9-4b5d-803a-1de9b97915e8"},id:66},{arcs:[[321,322,-311]],type:"Polygon",properties:{AREACD:"E07000029",AREANM:"Copeland",GlobalID:"99c55521-22f7-452d-8003-34aac6b876d1"},id:67},{arcs:[[-210,323,324,-309,-316,-268]],type:"Polygon",properties:{AREACD:"E07000030",AREANM:"Eden",GlobalID:"9a89e3d0-8254-48d7-bd7f-deb07471ccfd"},id:68},{arcs:[[325,326,327,328,-315,329,-322,-310,-325]],type:"Polygon",properties:{AREACD:"E07000031",AREANM:"South Lakeland",GlobalID:"6e32eb70-edd0-467a-b4b7-a2b01c809f9f"},id:69},{arcs:[[330,331,332,333,-66,334,335,336]],type:"Polygon",properties:{AREACD:"E07000032",AREANM:"Amber Valley",GlobalID:"8c417107-29dd-4ce3-88e3-d3024fb3f28f"},id:70},{arcs:[[337,338,-331,339,340,341,342,343]],type:"Polygon",properties:{AREACD:"E07000033",AREANM:"Bolsover",GlobalID:"7e01028b-bb10-469e-a6e8-aaa5a8d841fc"},id:71},{arcs:[[-341,344]],type:"Polygon",properties:{AREACD:"E07000034",AREANM:"Chesterfield",GlobalID:"c50579ca-a4f4-4599-91ab-265e521e8a41"},id:72},{arcs:[[345,-336,346,347,348,349,350]],type:"Polygon",properties:{AREACD:"E07000035",AREANM:"Derbyshire Dales",GlobalID:"486bb6fa-438f-4ee1-bdfe-2c5a4e205fb7"},id:73},{arcs:[[351,352,353,-67,-334,354]],type:"Polygon",properties:{AREACD:"E07000036",AREANM:"Erewash",GlobalID:"d99b6844-8251-49c3-ae8b-0952ff3f9a1e"},id:74},{arcs:[[355,356,-350,357,-215,358,359,360,361]],type:"Polygon",properties:{AREACD:"E07000037",AREANM:"High Peak",GlobalID:"9ee652b8-0553-46f4-9b30-05635934d9f6"},id:75},{arcs:[[362,-342,-345,-340,-337,-346,363]],type:"Polygon",properties:{AREACD:"E07000038",AREANM:"North East Derbyshire",GlobalID:"d4d57ffa-2957-4006-8ece-e26b6d117660"},id:76},{arcs:[[-65,-354,364,365,366,-347,-335]],type:"Polygon",properties:{AREACD:"E07000039",AREANM:"South Derbyshire",GlobalID:"32543313-b3e9-44f5-8758-2de88481533d"},id:77},{arcs:[[[367,368]],[[369,-278,370,371,372,373,374,375,376]]],type:"MultiPolygon",properties:{AREACD:"E07000040",AREANM:"East Devon",GlobalID:"e24480ac-829f-43e8-ae57-37d2b635ccad"},id:78},{arcs:[[[377,-372]],[[378,-369,379,380,-374]]],type:"MultiPolygon",properties:{AREACD:"E07000041",AREANM:"Exeter",GlobalID:"4cc3bee1-3766-40fe-bc05-cfc4180dd5c4"},id:79},{arcs:[[-376,381,382,383,384,385]],type:"Polygon",properties:{AREACD:"E07000042",AREANM:"Mid Devon",GlobalID:"91c661ca-17f7-443c-af80-c6073c69254c"},id:80},{arcs:[[386,-385,387,388]],type:"Polygon",properties:{AREACD:"E07000043",AREANM:"North Devon",GlobalID:"10fd7de4-529c-44c4-bf41-b86a8189b433"},id:81},{arcs:[[[389,390]],[[-125,391,-123,392,-121,393,394,395,396,397]]],type:"MultiPolygon",properties:{AREACD:"E07000044",AREANM:"South Hams",GlobalID:"cc5cfd06-5305-4204-9364-1f064bc3f6cc"},id:82},{arcs:[[-375,-381,398,-126,-398,399,-382]],type:"Polygon",properties:{AREACD:"E07000045",AREANM:"Teignbridge",GlobalID:"aa495cf3-3c5d-4cd7-863d-106e6b91fe30"},id:83},{arcs:[[[400,-388,-384,401,-239,402]],[[403]]],type:"MultiPolygon",properties:{AREACD:"E07000046",AREANM:"Torridge",GlobalID:"03b2c60e-19d7-4855-a7c5-a7d0887317ae"},id:84},{arcs:[[[404,-395]],[[-383,-400,-397,405,-391,406,-240,-402]]],type:"MultiPolygon",properties:{AREACD:"E07000047",AREANM:"West Devon",GlobalID:"8127f025-face-4d96-9b8d-39df13a661e8"},id:85},{arcs:[[407,408]],type:"Polygon",properties:{AREACD:"E07000061",AREANM:"Eastbourne",GlobalID:"c818f453-32e1-43fb-a8ce-65e7d6417834"},id:86},{arcs:[[409,410]],type:"Polygon",properties:{AREACD:"E07000062",AREANM:"Hastings",GlobalID:"6158e843-2317-4a14-a881-9c53e4361bef"},id:87},{arcs:[[411,-184,412,413]],type:"Polygon",properties:{AREACD:"E07000063",AREANM:"Lewes",GlobalID:"3d3af336-2582-4bca-b47b-2763ab54eeab"},id:88},{arcs:[[414,415,416,-411,417,418,419]],type:"Polygon",properties:{AREACD:"E07000064",AREANM:"Rother",GlobalID:"2923a7a1-ec13-4627-81ac-421e711bfeff"},id:89},{arcs:[[420,-419,421,-409,422,-414,423,424,425]],type:"Polygon",properties:{AREACD:"E07000065",AREANM:"Wealden",GlobalID:"469bbabe-a017-4166-a784-a4ade20c7fc3"},id:90},{arcs:[[426,427,428,-145,429,430]],type:"Polygon",properties:{AREACD:"E07000066",AREANM:"Basildon",GlobalID:"fa0a5a4e-452f-4d2c-9f8f-4792fa5e15de"},id:91},{arcs:[[431,432,433,434,-305,435,436]],type:"Polygon",properties:{AREACD:"E07000067",AREANM:"Braintree",GlobalID:"43698a1d-9563-4640-a2b9-f344c03366d9"},id:92},{arcs:[[-430,-144,437,438,439]],type:"Polygon",properties:{AREACD:"E07000068",AREANM:"Brentwood",GlobalID:"2e87b728-961c-4a1a-bc6b-267403237e3e"},id:93},{arcs:[[-138,440,-141,441,-428,442]],type:"Polygon",properties:{AREACD:"E07000069",AREANM:"Castle Point",GlobalID:"d5923847-6a37-4313-9065-ee02b8700d84"},id:94},{arcs:[[-434,443,444,-431,-440,445,446]],type:"Polygon",properties:{AREACD:"E07000070",AREANM:"Chelmsford",GlobalID:"76bedde4-0941-425f-88fa-4fc0676de8db"},id:95},{arcs:[[[447]],[[448,449]],[[450,451,452,-432,453]]],type:"MultiPolygon",properties:{AREACD:"E07000071",AREANM:"Colchester",GlobalID:"d42eb7b8-6089-497b-97df-97c3886ac93c"},id:96},{arcs:[[-446,-439,454,455,456,457,458,459,460,461,462]],type:"Polygon",properties:{AREACD:"E07000072",AREANM:"Epping Forest",GlobalID:"b07d2564-8f48-43c0-bca3-2a045807fdd7"},id:97},{arcs:[[463,-461]],type:"Polygon",properties:{AREACD:"E07000073",AREANM:"Harlow",GlobalID:"6d1efa26-49c2-45bd-b8d1-eb00528fcbd1"},id:98},{arcs:[[[464]],[[465]],[[466]],[[467,468,-444,-433,-453]]],type:"MultiPolygon",properties:{AREACD:"E07000074",AREANM:"Maldon",GlobalID:"4a38289f-b58a-43b5-8738-5aae38aef078"},id:99},{arcs:[[[469]],[[470]],[[471,-139,-443,-427,-445,-469]]],type:"MultiPolygon",properties:{AREACD:"E07000075",AREANM:"Rochford",GlobalID:"c0fe2931-2f96-4acd-843a-9157365105dd"},id:100},{arcs:[[[472]],[[473]],[[474]],[[475]],[[476,-450,477,-451,478]]],type:"MultiPolygon",properties:{AREACD:"E07000076",AREANM:"Tendring",GlobalID:"18031e56-947e-4e19-8421-4db459e8bb08"},id:101},{arcs:[[-435,-447,-463,479,480,-306]],type:"Polygon",properties:{AREACD:"E07000077",AREANM:"Uttlesford",GlobalID:"70e12c16-b9da-44e4-8f31-efd04690a7ef"},id:102},{arcs:[[481,482]],type:"Polygon",properties:{AREACD:"E07000078",AREANM:"Cheltenham",GlobalID:"3a6d39b3-f003-456c-a414-052a7d9fdb8f"},id:103},{arcs:[[483,484,-129,-253,-115,485,486,-482,487,488,489]],type:"Polygon",properties:{AREACD:"E07000079",AREANM:"Cotswold",GlobalID:"55491f0f-5224-47a4-9fec-7b7b4d876bdb"},id:104},{arcs:[[490,491,492,-118,493,494,495,496,-81]],type:"Polygon",properties:{AREACD:"E07000080",AREANM:"Forest of Dean",GlobalID:"c1c42639-7e90-40e6-89f4-0de6cd714d73"},id:105},{arcs:[[497,498]],type:"Polygon",properties:{AREACD:"E07000081",AREANM:"Gloucester",GlobalID:"058ac0a2-0ce4-4f29-8fa1-5d735966dd35"},id:106},{arcs:[[-498,499,-486,-119,-493,500]],type:"Polygon",properties:{AREACD:"E07000082",AREANM:"Stroud",GlobalID:"89a1602c-aa9d-49c3-8228-a64023e95582"},id:107},{arcs:[[-488,-483,-487,-500,-499,-501,-492,501,502]],type:"Polygon",properties:{AREACD:"E07000083",AREANM:"Tewkesbury",GlobalID:"49e16a28-f30f-4d11-9e74-c978bb794ac0"},id:108},{arcs:[[-176,503,504,505,506,-160]],type:"Polygon",properties:{AREACD:"E07000084",AREANM:"Basingstoke and Deane",GlobalID:"9f960e49-63f1-43fa-a91e-2737ad020c8e"},id:109},{arcs:[[507,508,509,510,-505,511,512]],type:"Polygon",properties:{AREACD:"E07000085",AREANM:"East Hampshire",GlobalID:"68bbdb08-44c6-4d42-8912-54652e99813b"},id:110},{arcs:[[513,514,515,516,-201,517,518]],type:"Polygon",properties:{AREACD:"E07000086",AREANM:"Eastleigh",GlobalID:"34a37ad5-c56c-415e-8048-62a869b5c1b3"},id:111},{arcs:[[[519,-516]],[[520,-198,521,-195,-194,522,523,524,-514]]],type:"MultiPolygon",properties:{AREACD:"E07000087",AREANM:"Fareham",GlobalID:"3a87c84d-735b-4251-beb0-6ef62553e28c"},id:112},{arcs:[[525,-524,526,-191]],type:"Polygon",properties:{AREACD:"E07000088",AREANM:"Gosport",GlobalID:"743d9ea6-6895-422e-b683-e3357a03d1fe"},id:113},{arcs:[[-154,527,528,529,-512,-504,-175]],type:"Polygon",properties:{AREACD:"E07000089",AREANM:"Hart",GlobalID:"3ba36fa8-3481-4881-af10-ff759cf7f9f9"},id:114},{arcs:[[[530]],[[531,532,-200,533,-510]]],type:"MultiPolygon",properties:{AREACD:"E07000090",AREANM:"Havant",GlobalID:"2d13a6e5-0602-4444-b694-385a2064d3d6"},id:115},{arcs:[[[534]],[[-203,535]],[[536,537,-272,-276,-249]]],type:"MultiPolygon",properties:{AREACD:"E07000091",AREANM:"New Forest",GlobalID:"012089dc-a594-4984-a0cf-e8475009faf3"},id:116},{arcs:[[538,539,-529,540]],type:"Polygon",properties:{AREACD:"E07000092",AREANM:"Rushmoor",GlobalID:"b3097beb-d30f-4236-be64-716da734d2ef"},id:117},{arcs:[[-161,-507,541,-518,-205,542,-537,-248]],type:"Polygon",properties:{AREACD:"E07000093",AREANM:"Test Valley",GlobalID:"0837f3b1-c239-44ee-8030-30d06709f7be"},id:118},{arcs:[[-511,-534,-199,-521,-519,-542,-506]],type:"Polygon",properties:{AREACD:"E07000094",AREANM:"Winchester",GlobalID:"39a633ba-ba3e-4ecf-aec4-19c3ffa6b61d"},id:119},{arcs:[[-459,543,544,545]],type:"Polygon",properties:{AREACD:"E07000095",AREANM:"Broxbourne",GlobalID:"891913a4-1202-48c2-b8ce-59fefb1820f9"},id:120},{arcs:[[546,547,-280,-262]],type:"Polygon",properties:{AREACD:"E07000096",AREANM:"Dacorum",GlobalID:"8f5314d6-6a3b-4799-a4b0-537b8731f92f"},id:121},{arcs:[[548,549,550,551,552,553,554]],type:"Polygon",properties:{AREACD:"E07000098",AREANM:"Hertsmere",GlobalID:"b9876387-6705-40ed-a7e6-ef1bbb175bfe"},id:122},{arcs:[[-481,555,556,557,558,559,-260,-135,-259,-307]],type:"Polygon",properties:{AREACD:"E07000099",AREANM:"North Hertfordshire",GlobalID:"2b4936c6-f4bf-4551-b282-52d21fcb9b33"},id:123},{arcs:[[560,-553,561,562,-281,-548,563]],type:"Polygon",properties:{AREACD:"E07000102",AREANM:"Three Rivers",GlobalID:"261747dd-f842-4f3c-bbae-1df570354d8b"},id:124},{arcs:[[564,-554,-561]],type:"Polygon",properties:{AREACD:"E07000103",AREANM:"Watford",GlobalID:"11369d4f-4521-4b10-997d-9f6b26b598af"},id:125},{arcs:[[565,566,-415,567,568,569]],type:"Polygon",properties:{AREACD:"E07000105",AREANM:"Ashford",GlobalID:"4124a1c6-479a-4ce7-8613-10102a7d6e91"},id:126},{arcs:[[570,571,-566,572,573,574]],type:"Polygon",properties:{AREACD:"E07000106",AREANM:"Canterbury",GlobalID:"696f3ada-7927-4443-bf10-527c9f4ed177"},id:127},{arcs:[[575,576,577,578]],type:"Polygon",properties:{AREACD:"E07000107",AREANM:"Dartford",GlobalID:"94c31ef6-56f5-4162-9b7c-e85f91bb0144"},id:128},{arcs:[[579,580,581,-571]],type:"Polygon",properties:{AREACD:"E07000108",AREANM:"Dover",GlobalID:"dbe70093-71c3-4139-be9f-31e778194b85"},id:129},{arcs:[[-151,582,583,-576,584]],type:"Polygon",properties:{AREACD:"E07000109",AREANM:"Gravesham",GlobalID:"3ec6f6a5-7c67-42fe-9f7d-241bd44d1ef7"},id:130},{arcs:[[585,-569,586,587,-149]],type:"Polygon",properties:{AREACD:"E07000110",AREANM:"Maidstone",GlobalID:"9bc102ad-5bb7-488a-958f-3e5c26f816ac"},id:131},{arcs:[[-584,588,589,-426,590,591,592,-577]],type:"Polygon",properties:{AREACD:"E07000111",AREANM:"Sevenoaks",GlobalID:"9ab9cec3-662c-4595-8946-3f9697ff694a"},id:132},{arcs:[[-582,593,-416,-567,-572]],type:"Polygon",properties:{AREACD:"E07000112",AREANM:"Folkestone and Hythe",GlobalID:"7f5a0f7f-c364-4506-aa12-68325606149d"},id:133},{arcs:[[[594]],[[-573,-570,-586,-148,595]],[[596]],[[597]]],type:"MultiPolygon",properties:{AREACD:"E07000113",AREANM:"Swale",GlobalID:"4eb6c1d7-799a-4c29-bb38-e18c8989bd07"},id:134},{arcs:[[-580,-575,598]],type:"Polygon",properties:{AREACD:"E07000114",AREANM:"Thanet",GlobalID:"1de2920d-5fd0-4221-a2c6-ffc873513299"},id:135},{arcs:[[-588,599,-589,-583,-150]],type:"Polygon",properties:{AREACD:"E07000115",AREANM:"Tonbridge and Malling",GlobalID:"09e78773-3633-430c-8daf-0107f599d1e8"},id:136},{arcs:[[-587,-568,-420,-421,-590,-600]],type:"Polygon",properties:{AREACD:"E07000116",AREANM:"Tunbridge Wells",GlobalID:"9c194884-5fce-41b9-b61d-3b687a230692"},id:137},{arcs:[[600,601,602,603,604]],type:"Polygon",properties:{AREACD:"E07000117",AREANM:"Burnley",GlobalID:"d65bb43f-8f96-48db-9c54-2784a8b60e36"},id:138},{arcs:[[-36,605,606,607,608]],type:"Polygon",properties:{AREACD:"E07000118",AREANM:"Chorley",GlobalID:"045ab3f0-b2e1-4f8e-8496-2b91200a94b4"},id:139},{arcs:[[[609,610,611]],[[612,613,-40,614]]],type:"MultiPolygon",properties:{AREACD:"E07000119",AREANM:"Fylde",GlobalID:"c4a7a807-e55d-448c-9df8-c239aa0acb8e"},id:140},{arcs:[[-603,615,-39,616]],type:"Polygon",properties:{AREACD:"E07000120",AREANM:"Hyndburn",GlobalID:"8afa0525-6fde-4016-a301-c1a1530238bf"},id:141},{arcs:[[617,618,619,620,621,622,-328]],type:"Polygon",properties:{AREACD:"E07000121",AREANM:"Lancaster",GlobalID:"6955920e-4fe2-435d-b615-9e8173492fd7"},id:142},{arcs:[[623,624,-605,625,626]],type:"Polygon",properties:{AREACD:"E07000122",AREANM:"Pendle",GlobalID:"13031039-03fd-420d-b7d5-e123a2a8914b"},id:143},{arcs:[[627,-612,-613,628,629]],type:"Polygon",properties:{AREACD:"E07000123",AREANM:"Preston",GlobalID:"4c4828a6-bac1-4e2b-ac52-bfb2928c9a6d"},id:144},{arcs:[[-626,-604,-617,-38,630,-630,631,-619,632]],type:"Polygon",properties:{AREACD:"E07000124",AREANM:"Ribble Valley",GlobalID:"dfd1be4b-c03a-4f7c-ab65-afedcd0256d4"},id:145},{arcs:[[633,634,635,-33,-616,-602]],type:"Polygon",properties:{AREACD:"E07000125",AREANM:"Rossendale",GlobalID:"3a85ca31-ee53-4641-a27c-0dcd854a8ef3"},id:146},{arcs:[[[636,637]],[[-37,-609,638,639,640,641,-610,-628,-631]]],type:"MultiPolygon",properties:{AREACD:"E07000126",AREANM:"South Ribble",GlobalID:"5d4d78c1-6939-477c-b081-db3b428c32d6"},id:147},{arcs:[[[642,-641]],[[-639,-608,643,644,645,646,647,648,-637,649]]],type:"MultiPolygon",properties:{AREACD:"E07000127",AREANM:"West Lancashire",GlobalID:"3559ea84-27d0-4d73-a334-616ef6bcc3e5"},id:148},{arcs:[[[650,-622]],[[-632,-629,-615,-42,651,-620]]],type:"MultiPolygon",properties:{AREACD:"E07000128",AREANM:"Wyre",GlobalID:"9ffb0712-e0aa-46c4-b6c7-d7395524e136"},id:149},{arcs:[[-70,652,653,654,655,656]],type:"Polygon",properties:{AREACD:"E07000129",AREANM:"Blaby",GlobalID:"66b2a2f1-6d02-4a06-93ce-c552b36de5e2"},id:150},{arcs:[[657,658,-71,-657,659,660,661]],type:"Polygon",properties:{AREACD:"E07000130",AREANM:"Charnwood",GlobalID:"2a5a5aaa-dfb2-4b13-8af4-834fb0154b67"},id:151},{arcs:[[-73,-289,-293,662,-654,663,-68,-659,664]],type:"Polygon",properties:{AREACD:"E07000131",AREANM:"Harborough",GlobalID:"b8acd593-0bd2-4487-b6fa-c11562983c2e"},id:152},{arcs:[[-656,665,666,667,668,-660]],type:"Polygon",properties:{AREACD:"E07000132",AREANM:"Hinckley and Bosworth",GlobalID:"f7839708-867c-4aba-b9e5-81f0cd30d865"},id:153},{arcs:[[-74,-665,-658,669,670,671]],type:"Polygon",properties:{AREACD:"E07000133",AREANM:"Melton",GlobalID:"7d052a3c-a568-4165-ab89-d96d4412ece5"},id:154},{arcs:[[-661,-669,672,673,-365,-353,674]],type:"Polygon",properties:{AREACD:"E07000134",AREANM:"North West Leicestershire",GlobalID:"bc582503-357e-41d7-85f3-055411d3bbe9"},id:155},{arcs:[[-653,-69,-664]],type:"Polygon",properties:{AREACD:"E07000135",AREANM:"Oadby and Wigston",GlobalID:"1383e7e5-435a-4d2d-b603-dc8fc7b93417"},id:156},{arcs:[[675,676,677,678]],type:"Polygon",properties:{AREACD:"E07000136",AREANM:"Boston",GlobalID:"8025afd6-b803-469e-80bd-297abb76e434"},id:157},{arcs:[[-679,679,680,-52,681]],type:"Polygon",properties:{AREACD:"E07000137",AREANM:"East Lindsey",GlobalID:"28e8847e-db96-4afc-99cb-4a4c3ac09edc"},id:158},{arcs:[[682,683]],type:"Polygon",properties:{AREACD:"E07000138",AREANM:"Lincoln",GlobalID:"fe54abf8-0bee-4488-8728-07cec7b3cbfe"},id:159},{arcs:[[-683,684,-680,-678,685,686,687,688]],type:"Polygon",properties:{AREACD:"E07000139",AREANM:"North Kesteven",GlobalID:"7eedc613-eb60-48ed-9921-570cc61061f6"},id:160},{arcs:[[689,690,-302,-134,691,-686,-677]],type:"Polygon",properties:{AREACD:"E07000140",AREANM:"South Holland",GlobalID:"356aa7f8-53fa-4378-8b3f-febbac927bff"},id:161},{arcs:[[-692,-133,-286,-75,-672,692,-687]],type:"Polygon",properties:{AREACD:"E07000141",AREANM:"South Kesteven",GlobalID:"ab3dc631-022e-42fb-b2e7-dcb313d3663d"},id:162},{arcs:[[-53,-681,-685,-684,-689,693,694,-57]],type:"Polygon",properties:{AREACD:"E07000142",AREANM:"West Lindsey",GlobalID:"6a3226ff-9d5f-4eb4-b327-6ce607af581f"},id:163},{arcs:[[695,696,697,698,699,700]],type:"Polygon",properties:{AREACD:"E07000143",AREANM:"Breckland",GlobalID:"ee0efb28-2285-4c16-86d5-d0e6121f79c3"},id:164},{arcs:[[701,702,703,704,-696,705]],type:"Polygon",properties:{AREACD:"E07000144",AREANM:"Broadland",GlobalID:"766810a6-4d4d-4bb3-9a89-5ca6273db11a"},id:165},{arcs:[[706,707,-702,708,709]],type:"Polygon",properties:{AREACD:"E07000145",AREANM:"Great Yarmouth",GlobalID:"cb780a45-3164-47e2-afaa-cee8762098e4"},id:166},{arcs:[[[710,-700,711,-299,-300,-691,712]],[[713]]],type:"MultiPolygon",properties:{AREACD:"E07000146",AREANM:"King's Lynn and West Norfolk",GlobalID:"43b76d47-71f3-492a-9d73-7142b794bd6f"},id:167},{arcs:[[[714]],[[715]],[[716]],[[-709,-706,-701,-711,717]]],type:"MultiPolygon",properties:{AREACD:"E07000147",AREANM:"North Norfolk",GlobalID:"494071ad-6a00-4fc8-a987-1d8f09730956"},id:168},{arcs:[[718,-704]],type:"Polygon",properties:{AREACD:"E07000148",AREANM:"Norwich",GlobalID:"fa2888be-46c7-4e71-a05d-3781acd2295c"},id:169},{arcs:[[-719,-703,-708,719,720,-697,-705]],type:"Polygon",properties:{AREACD:"E07000149",AREANM:"South Norfolk",GlobalID:"709f3dd4-0691-452a-b2a5-c05c8e6d6081"},id:170},{arcs:[[721,722,-627,-633,-618,-327,723]],type:"Polygon",properties:{AREACD:"E07000163",AREANM:"Craven",GlobalID:"44340726-c916-4486-b4ea-9451182fd4cb"},id:171},{arcs:[[-8,724,725,-63,726,727,-15,-12,-5]],type:"Polygon",properties:{AREACD:"E07000164",AREANM:"Hambleton",GlobalID:"0b900c83-1557-4aa9-8779-84363dce96dc"},id:172},{arcs:[[-62,728,729,730,-722,731,-727]],type:"Polygon",properties:{AREACD:"E07000165",AREANM:"Harrogate",GlobalID:"7af94b59-fdc8-4864-a3f7-d08014a30d8b"},id:173},{arcs:[[-16,-728,-732,-724,-326,-324,-209]],type:"Polygon",properties:{AREACD:"E07000166",AREANM:"Richmondshire",GlobalID:"890beef4-00ef-41b7-b491-24c7499b80c7"},id:174},{arcs:[[732,-51,-64,-726,733]],type:"Polygon",properties:{AREACD:"E07000167",AREANM:"Ryedale",GlobalID:"5f30fc7a-a73e-4acd-8dfd-d73c54c41e8c"},id:175},{arcs:[[-734,-725,-7,734]],type:"Polygon",properties:{AREACD:"E07000168",AREANM:"Scarborough",GlobalID:"e02c264f-a673-4f11-adcd-25618139d80e"},id:176},{arcs:[[-61,-49,735,736,737,-729]],type:"Polygon",properties:{AREACD:"E07000169",AREANM:"Selby",GlobalID:"74493323-0be9-4891-bb3f-c8f75941c2b8"},id:177},{arcs:[[738,739,740,-78,741,-332,-339]],type:"Polygon",properties:{AREACD:"E07000170",AREANM:"Ashfield",GlobalID:"994f9dca-c220-4a9e-9ea6-3107d888247b"},id:178},{arcs:[[-695,742,743,-344,744,745,-58]],type:"Polygon",properties:{AREACD:"E07000171",AREANM:"Bassetlaw",GlobalID:"0712fe19-e17d-4cbe-9fbf-c2f0e296fbf1"},id:179},{arcs:[[-77,746,-355,-333,-742]],type:"Polygon",properties:{AREACD:"E07000172",AREANM:"Broxtowe",GlobalID:"94eefc62-e71d-41c7-ba83-6be524e98f0b"},id:180},{arcs:[[747,-79,-741,748]],type:"Polygon",properties:{AREACD:"E07000173",AREANM:"Gedling",GlobalID:"6112dfd4-42ae-4bee-9c46-c8297888369b"},id:181},{arcs:[[-739,-338,-744,749]],type:"Polygon",properties:{AREACD:"E07000174",AREANM:"Mansfield",GlobalID:"eed2fa18-1292-4b8e-b167-16bf1f2bc5cc"},id:182},{arcs:[[-688,-693,-671,750,-749,-740,-750,-743,-694]],type:"Polygon",properties:{AREACD:"E07000175",AREANM:"Newark and Sherwood",GlobalID:"9b0de258-6d75-4dfc-9756-97fc8ab59aa7"},id:183},{arcs:[[-670,-662,-675,-352,-747,-76,-748,-751]],type:"Polygon",properties:{AREACD:"E07000176",AREANM:"Rushcliffe",GlobalID:"1a5b010d-9854-49be-8b4c-c2b90245653e"},id:184},{arcs:[[-284,751,752,753,754,755,-290]],type:"Polygon",properties:{AREACD:"E07000177",AREANM:"Cherwell",GlobalID:"56164085-25c8-43c9-8ebd-1d86b577dbdd"},id:185},{arcs:[[756,757,-753]],type:"Polygon",properties:{AREACD:"E07000178",AREANM:"Oxford",GlobalID:"83cad9a4-582c-4a4a-b482-a8e3466cc4fc"},id:186},{arcs:[[-283,-177,-165,-157,758,-757,-752]],type:"Polygon",properties:{AREACD:"E07000179",AREANM:"South Oxfordshire",GlobalID:"d2e88847-6036-43f2-99cf-c17435372b07"},id:187},{arcs:[[-758,-759,-163,-247,-127,-485,759,-754]],type:"Polygon",properties:{AREACD:"E07000180",AREANM:"Vale of White Horse",GlobalID:"7d7a64b8-2c0f-48d9-960d-975b048a98d0"},id:188},{arcs:[[-760,-484,760,-755]],type:"Polygon",properties:{AREACD:"E07000181",AREANM:"West Oxfordshire",GlobalID:"8f913967-ebb7-463a-9ba5-de83949849ca"},id:189},{arcs:[[761,762,-111,-92,-252]],type:"Polygon",properties:{AREACD:"E07000187",AREANM:"Mendip",GlobalID:"5637593a-5077-4b15-a8d1-54da809882b3"},id:190},{arcs:[[-108,763,-106,764,-112,-763,765,766,767]],type:"Polygon",properties:{AREACD:"E07000188",AREANM:"Sedgemoor",GlobalID:"93f59758-f0fe-457e-bb1d-5cbb57418a7e"},id:191},{arcs:[[-251,-279,-370,768,-766,-762]],type:"Polygon",properties:{AREACD:"E07000189",AREANM:"South Somerset",GlobalID:"ba34dfaa-d783-470e-9978-d4eefef7cb73"},id:192},{arcs:[[769,770,771,772]],type:"Polygon",properties:{AREACD:"E07000192",AREANM:"Cannock Chase",GlobalID:"1f1ae5b1-31f2-46e5-afa9-ad0a5495d54a"},id:193},{arcs:[[-367,773,774,775,-348]],type:"Polygon",properties:{AREACD:"E07000193",AREANM:"East Staffordshire",GlobalID:"21ef80bf-d7fa-42dc-a361-e96982fb904f"},id:194},{arcs:[[-366,-674,776,777,778,779,780,-773,781,-774]],type:"Polygon",properties:{AREACD:"E07000194",AREANM:"Lichfield",GlobalID:"6d4786b3-ca05-4d42-a7b4-3dc646d9d00d"},id:195},{arcs:[[-90,782,-237,-217,783]],type:"Polygon",properties:{AREACD:"E07000195",AREANM:"Newcastle-under-Lyme",GlobalID:"84cc4b6e-756b-4227-8366-5259f03802ee"},id:196},{arcs:[[-771,784,785,786,787,788,-232,-85,789]],type:"Polygon",properties:{AREACD:"E07000196",AREANM:"South Staffordshire",GlobalID:"8c116e2c-cb77-4c53-9745-c40a27b1c7d6"},id:197},{arcs:[[790,-775,-782,-772,-790,-87,-231,-783,-89]],type:"Polygon",properties:{AREACD:"E07000197",AREANM:"Stafford",GlobalID:"da6fa572-b7e8-4577-806e-88b2085a4cc2"},id:198},{arcs:[[-349,-776,-791,-88,-784,-216,-358]],type:"Polygon",properties:{AREACD:"E07000198",AREANM:"Staffordshire Moorlands",GlobalID:"b12f36b1-07ca-4c8d-a38c-330deefc1577"},id:199},{arcs:[[-778,791]],type:"Polygon",properties:{AREACD:"E07000199",AREANM:"Tamworth",GlobalID:"e394ae47-dff8-4457-9477-10648aaca06a"},id:200},{arcs:[[[792,793]],[[794,795]],[[796,797,798,799,800,801,-479,-454,-437,802]]],type:"MultiPolygon",properties:{AREACD:"E07000200",AREANM:"Babergh",GlobalID:"2930145c-f279-4cf3-afe2-488455d661c4"},id:201},{arcs:[[[803,-800,804]],[[805,806,-796,807,-798,808]]],type:"MultiPolygon",properties:{AREACD:"E07000202",AREANM:"Ipswich",GlobalID:"895a0741-936d-4d84-b26d-cef6702e90f2"},id:202},{arcs:[[-809,-797,809,-698,-721,810]],type:"Polygon",properties:{AREACD:"E07000203",AREANM:"Mid Suffolk",GlobalID:"eed82bca-f577-470f-a6e0-eb28a39d1a7b"},id:203},{arcs:[[811,812,813,814,815,816,817]],type:"Polygon",properties:{AREACD:"E07000207",AREANM:"Elmbridge",GlobalID:"52be6b94-4d1a-452d-ba7e-514ab75a2572"},id:204},{arcs:[[818,819,820,821]],type:"Polygon",properties:{AREACD:"E07000208",AREANM:"Epsom and Ewell",GlobalID:"558de63c-c03a-41b7-92c8-d4fb99e4048f"},id:205},{arcs:[[822,823,-539,824,825,-814]],type:"Polygon",properties:{AREACD:"E07000209",AREANM:"Guildford",GlobalID:"3f03a3e9-b1b1-488b-82a1-4c92fb0a171b"},id:206},{arcs:[[826,827,828,829,-823,-813,830,-820]],type:"Polygon",properties:{AREACD:"E07000210",AREANM:"Mole Valley",GlobalID:"d5f4f9a2-ae74-47d5-b011-b97f8e32a580"},id:207},{arcs:[[831,832,833,-827,-819,834]],type:"Polygon",properties:{AREACD:"E07000211",AREANM:"Reigate and Banstead",GlobalID:"02ba0718-57db-4508-9d1a-6d2eb45212e4"},id:208},{arcs:[[835,-816,836,837,-171]],type:"Polygon",properties:{AREACD:"E07000212",AREANM:"Runnymede",GlobalID:"1831fa91-0895-4f5c-9cb5-8cc7772821b9"},id:209},{arcs:[[838,839,840,-817,-836,-170,-167]],type:"Polygon",properties:{AREACD:"E07000213",AREANM:"Spelthorne",GlobalID:"6ce92100-c3c4-42ae-97ac-94194d54da8b"},id:210},{arcs:[[841,-825,-541,-528,-153,-172,-838]],type:"Polygon",properties:{AREACD:"E07000214",AREANM:"Surrey Heath",GlobalID:"95ba9a32-6ade-4479-957d-6a1476cef0e8"},id:211},{arcs:[[842,-591,-425,843,844,-833,845]],type:"Polygon",properties:{AREACD:"E07000215",AREANM:"Tandridge",GlobalID:"c5b02b5c-f43d-45fd-9e05-f63acf6a14af"},id:212},{arcs:[[[846]],[[-530,-540,-824,-830,847,848,849]]],type:"MultiPolygon",properties:{AREACD:"E07000216",AREANM:"Waverley",GlobalID:"4dcc9fc2-b9bd-4d18-83fc-3e087bc15188"},id:213},{arcs:[[-826,-842,-837,-815]],type:"Polygon",properties:{AREACD:"E07000217",AREANM:"Woking",GlobalID:"38535658-76b4-466b-87b6-3a22d5f5198c"},id:214},{arcs:[[-668,850,851,852,853,-779,-792,-777,-673]],type:"Polygon",properties:{AREACD:"E07000218",AREANM:"North Warwickshire",GlobalID:"32789cd8-d57d-494b-a98c-20c7d773f3d2"},id:215},{arcs:[[854,855,-851,-667]],type:"Polygon",properties:{AREACD:"E07000219",AREANM:"Nuneaton and Bedworth",GlobalID:"6c7dde0b-00db-45be-8053-5fd25596ed0a"},id:216},{arcs:[[-655,-663,-292,856,857,858,-855,-666]],type:"Polygon",properties:{AREACD:"E07000220",AREANM:"Rugby",GlobalID:"7a356a71-ebd9-460c-a6d2-6e8fd6a14ac9"},id:217},{arcs:[[859,-857,-291,-756,-761,-490,860,861,862,863]],type:"Polygon",properties:{AREACD:"E07000221",AREANM:"Stratford-on-Avon",GlobalID:"eee9a0a9-41b7-47b2-a37b-12e8e5b98c6e"},id:218},{arcs:[[-858,-860,864,865]],type:"Polygon",properties:{AREACD:"E07000222",AREANM:"Warwick",GlobalID:"7e3e7e0f-3c5d-4ad8-a921-d7d222575782"},id:219},{arcs:[[-186,866,867,868,869]],type:"Polygon",properties:{AREACD:"E07000223",AREANM:"Adur",GlobalID:"132c3802-6934-4dc7-af45-0226a922a36e"},id:220},{arcs:[[870,-869,871,872,873,874,875]],type:"Polygon",properties:{AREACD:"E07000224",AREANM:"Arun",GlobalID:"4d1e9b82-33a7-4ce0-b3b3-7f24a03ad976"},id:221},{arcs:[[[876,-874]],[[877,-876,878,-532,-509,-849]]],type:"MultiPolygon",properties:{AREACD:"E07000225",AREANM:"Chichester",GlobalID:"a8422fb3-e40f-46e8-8171-315650de2239"},id:222},{arcs:[[-845,879,880,-828,-834]],type:"Polygon",properties:{AREACD:"E07000226",AREANM:"Crawley",GlobalID:"f491b72c-ef27-43ae-84b1-1a3a347567c9"},id:223},{arcs:[[881,-187,-870,-871,-878,-848,-829,-881]],type:"Polygon",properties:{AREACD:"E07000227",AREANM:"Horsham",GlobalID:"4ecca9d2-1bff-4a4a-80f0-8a2177bac71f"},id:224},{arcs:[[-413,-188,-882,-880,-844,-424]],type:"Polygon",properties:{AREACD:"E07000228",AREANM:"Mid Sussex",GlobalID:"0abf0ccc-f55c-4561-8be7-73f8ff34d0bc"},id:225},{arcs:[[-868,882,-872]],type:"Polygon",properties:{AREACD:"E07000229",AREANM:"Worthing",GlobalID:"ef1f69cf-a028-41df-9de9-444a9ba5a021"},id:226},{arcs:[[883,884,-863,885,886,887,-788,888]],type:"Polygon",properties:{AREACD:"E07000234",AREANM:"Bromsgrove",GlobalID:"b1b9d22d-6c91-4a72-bd8f-96f753134519"},id:227},{arcs:[[889,890,891,-502,-491,-80,-234,892]],type:"Polygon",properties:{AREACD:"E07000235",AREANM:"Malvern Hills",GlobalID:"0362e12d-7e12-4794-b5a7-5685d1152b90"},id:228},{arcs:[[-862,893,-886]],type:"Polygon",properties:{AREACD:"E07000236",AREANM:"Redditch",GlobalID:"6f642ed0-b734-4e99-b583-19354feb6f4e"},id:229},{arcs:[[-891,894]],type:"Polygon",properties:{AREACD:"E07000237",AREANM:"Worcester",GlobalID:"c0937430-0c78-4d01-bc57-d9e9e58b8e62"},id:230},{arcs:[[-887,-894,-861,-489,-503,-892,-895,-890,895]],type:"Polygon",properties:{AREACD:"E07000238",AREANM:"Wychavon",GlobalID:"c1b5b9f3-d25c-411c-850e-cedf3f92bd2b"},id:231},{arcs:[[-888,-896,-893,-233,-789]],type:"Polygon",properties:{AREACD:"E07000239",AREANM:"Wyre Forest",GlobalID:"6a618179-7300-4049-87f8-25d650f47813"},id:232},{arcs:[[896,-555,-565,-564,-547,-261,-560]],type:"Polygon",properties:{AREACD:"E07000240",AREANM:"St Albans",GlobalID:"50aef074-0092-407d-8ba8-2f5142147284"},id:233},{arcs:[[897,-545,898,-549,-897,-559]],type:"Polygon",properties:{AREACD:"E07000241",AREANM:"Welwyn Hatfield",GlobalID:"dc108b8c-4991-4681-bbd0-aced482ff9a8"},id:234},{arcs:[[-480,-462,-464,-460,-546,-898,-558,899,-556]],type:"Polygon",properties:{AREACD:"E07000242",AREANM:"East Hertfordshire",GlobalID:"88aba952-66c1-4473-9279-d8d0e3d46bb9"},id:235},{arcs:[[-900,-557]],type:"Polygon",properties:{AREACD:"E07000243",AREANM:"Stevenage",GlobalID:"a3c2f090-ea78-41a2-b800-ea5a03979f20"},id:236},{arcs:[[[900,-801,-804]],[[901,-793,902,-806,-811,-720,-707]]],type:"MultiPolygon",properties:{AREACD:"E07000244",AREANM:"East Suffolk",GlobalID:"26c1d1b3-3bbb-4690-a2b0-6563f78f7bcf"},id:237},{arcs:[[-810,-803,-436,-304,-295,-712,-699]],type:"Polygon",properties:{AREACD:"E07000245",AREANM:"West Suffolk",GlobalID:"d15b9538-5a7c-4919-82f4-94cfed416eb7"},id:238},{arcs:[[-767,-769,-377,-386,-387,903]],type:"Polygon",properties:{AREACD:"E07000246",AREANM:"Somerset West and Taunton",GlobalID:"c40a173d-90fe-4312-9cf2-f5dc73d7c557"},id:239},{arcs:[[904,905,906,-606,-35]],type:"Polygon",properties:{AREACD:"E08000001",AREANM:"Bolton",GlobalID:"cd743cd9-8c4d-4b20-bba1-dfabf55306c7"},id:240},{arcs:[[907,908,909,-905,-34,-636]],type:"Polygon",properties:{AREACD:"E08000002",AREANM:"Bury",GlobalID:"43dbd345-4803-459b-a8df-8584d0ff0ed5"},id:241},{arcs:[[910,911,912,913,-213,914,915,-909]],type:"Polygon",properties:{AREACD:"E08000003",AREANM:"Manchester",GlobalID:"cbf05265-17ce-4cdd-bcda-fce06416e73c"},id:242},{arcs:[[916,-361,917,-912,918,919]],type:"Polygon",properties:{AREACD:"E08000004",AREANM:"Oldham",GlobalID:"d7807af2-568a-4482-bcdb-508ade6d3ab5"},id:243},{arcs:[[-919,-911,-908,-635,920]],type:"Polygon",properties:{AREACD:"E08000005",AREANM:"Rochdale",GlobalID:"db77b4bd-04b7-449b-82be-82d343efd922"},id:244},{arcs:[[-910,-916,921,-26,922,-906]],type:"Polygon",properties:{AREACD:"E08000006",AREANM:"Salford",GlobalID:"f8eb05a0-5c1b-4c61-822e-c7644a1eef99"},id:245},{arcs:[[-359,-214,-914,923]],type:"Polygon",properties:{AREACD:"E08000007",AREANM:"Stockport",GlobalID:"cc82fcca-9a7a-4be3-9514-a624c8a4d620"},id:246},{arcs:[[-360,-924,-913,-918]],type:"Polygon",properties:{AREACD:"E08000008",AREANM:"Tameside",GlobalID:"ab17be33-69c5-49a6-8a4c-207c8fe0e5bc"},id:247},{arcs:[[-915,-220,-27,-922]],type:"Polygon",properties:{AREACD:"E08000009",AREANM:"Trafford",GlobalID:"c91e86ab-3660-419d-9cad-46ebb1a0c91c"},id:248},{arcs:[[-907,-923,-32,924,-644,-607]],type:"Polygon",properties:{AREACD:"E08000010",AREANM:"Wigan",GlobalID:"dd20946e-e420-49d7-8d89-d6c1deb57274"},id:249},{arcs:[[925,-24,926,927,-646]],type:"Polygon",properties:{AREACD:"E08000011",AREANM:"Knowsley",GlobalID:"bfee701f-09b8-4176-a33e-c0546fcd0cb1"},id:250},{arcs:[[-23,928,929,-927]],type:"Polygon",properties:{AREACD:"E08000012",AREANM:"Liverpool",GlobalID:"55de56fa-074b-431e-a53d-c223e2e3c028"},id:251},{arcs:[[-925,-31,-25,-926,-645]],type:"Polygon",properties:{AREACD:"E08000013",AREANM:"St. Helens",GlobalID:"76e3497a-a730-4138-af97-18a6db700d4b"},id:252},{arcs:[[[-648,930]],[[-647,-928,-930,931]]],type:"MultiPolygon",properties:{AREACD:"E08000014",AREANM:"Sefton",GlobalID:"0d808306-37be-4c36-bac7-bc02bd622882"},id:253},{arcs:[[-229,933]],type:"Polygon",properties:{AREACD:"E08000015",AREANM:"Wirral",GlobalID:"64b50482-4968-4650-ba36-055e08729052"},id:254},{arcs:[[934,935,936,-356,937,938]],type:"Polygon",properties:{AREACD:"E08000016",AREANM:"Barnsley",GlobalID:"fd5149ce-a45d-4f19-829e-27453534caef"},id:255},{arcs:[[-59,-746,939,-935,940,-736,-48]],type:"Polygon",properties:{AREACD:"E08000017",AREANM:"Doncaster",GlobalID:"6730088c-816c-4b5e-84f2-004d31714d8b"},id:256},{arcs:[[-940,-745,-343,-363,941,-936]],type:"Polygon",properties:{AREACD:"E08000018",AREANM:"Rotherham",GlobalID:"7fc67059-2ad9-4f20-9910-402043de2298"},id:257},{arcs:[[-942,-364,-351,-357,-937]],type:"Polygon",properties:{AREACD:"E08000019",AREANM:"Sheffield",GlobalID:"2c14ec5a-e1e6-484a-996f-5b3d74608fd7"},id:258},{arcs:[[942,943,944,-266]],type:"Polygon",properties:{AREACD:"E08000021",AREANM:"Newcastle upon Tyne",GlobalID:"21256584-aa4c-4e75-870a-8900fab24fea"},id:259},{arcs:[[945,-943,-265,946]],type:"Polygon",properties:{AREACD:"E08000022",AREANM:"North Tyneside",GlobalID:"1d79ec7c-56b3-434c-9169-86dd1494f0ca"},id:260},{arcs:[[947,948,-944,-946,949]],type:"Polygon",properties:{AREACD:"E08000023",AREANM:"South Tyneside",GlobalID:"c8387952-a92e-473e-b098-ec3ebb97d8b7"},id:261},{arcs:[[-207,950,-948,951]],type:"Polygon",properties:{AREACD:"E08000024",AREANM:"Sunderland",GlobalID:"2996e803-4b06-421a-9aa9-e86abdf7fc9a"},id:262},{arcs:[[-854,952,-884,953,954,955,-780]],type:"Polygon",properties:{AREACD:"E08000025",AREANM:"Birmingham",GlobalID:"eff4d43c-1b28-4277-95df-f8933ccca4c3"},id:263},{arcs:[[-859,-866,956,-852,-856]],type:"Polygon",properties:{AREACD:"E08000026",AREANM:"Coventry",GlobalID:"d222eef8-5879-4674-9df0-5dd23bf92669"},id:264},{arcs:[[957,-954,-889,-787,958]],type:"Polygon",properties:{AREACD:"E08000027",AREANM:"Dudley",GlobalID:"8b978702-c2a4-4967-b55f-83b922fd88df"},id:265},{arcs:[[-955,-958,959,960]],type:"Polygon",properties:{AREACD:"E08000028",AREANM:"Sandwell",GlobalID:"8e3c41cd-9e8e-4ce3-8fd8-ea03d8787de8"},id:266},{arcs:[[-957,-865,-864,-885,-953,-853]],type:"Polygon",properties:{AREACD:"E08000029",AREANM:"Solihull",GlobalID:"c33cc63c-775c-4082-b381-b1d24e88bdc9"},id:267},{arcs:[[-956,-961,961,-785,-770,-781]],type:"Polygon",properties:{AREACD:"E08000030",AREANM:"Walsall",GlobalID:"c4882580-eb9d-467d-8766-260ae86fae7a"},id:268},{arcs:[[-962,-960,-959,-786]],type:"Polygon",properties:{AREACD:"E08000031",AREANM:"Wolverhampton",GlobalID:"3bdce8d1-ef3e-4b6f-aa64-270c4c43a802"},id:269},{arcs:[[-731,962,963,964,-624,-723]],type:"Polygon",properties:{AREACD:"E08000032",AREANM:"Bradford",GlobalID:"1c646bd3-3b47-4ea9-8e18-47ea21d34b59"},id:270},{arcs:[[965,-920,-921,-634,-601,-625,-965]],type:"Polygon",properties:{AREACD:"E08000033",AREANM:"Calderdale",GlobalID:"0a85ab97-02e9-414f-8194-315e682df1b9"},id:271},{arcs:[[966,967,-938,-362,-917,-966,-964]],type:"Polygon",properties:{AREACD:"E08000034",AREANM:"Kirklees",GlobalID:"85960799-5727-491f-9089-a11f676ae9d1"},id:272},{arcs:[[-738,968,-967,-963,-730]],type:"Polygon",properties:{AREACD:"E08000035",AREANM:"Leeds",GlobalID:"5c3d52e8-54de-4e50-b078-37f9dbe628ce"},id:273},{arcs:[[-941,-939,-968,-969,-737]],type:"Polygon",properties:{AREACD:"E08000036",AREANM:"Wakefield",GlobalID:"11f2a1aa-3940-41c5-ad50-2db5a6351f55"},id:274},{arcs:[[-945,-949,-951,-212,-267]],type:"Polygon",properties:{AREACD:"E08000037",AREANM:"Gateshead",GlobalID:"db9d479b-57a1-46b1-a18f-fe8595141781"},id:275},{arcs:[[969,970,971,972,973,974,975]],type:"Polygon",properties:{AREACD:"E09000001",AREANM:"City of London",GlobalID:"ae6fade9-1e09-4af6-af75-10f827c46206"},id:276},{arcs:[[976,977,978,979]],type:"Polygon",properties:{AREACD:"E09000002",AREANM:"Barking and Dagenham",GlobalID:"a945ff01-be4c-4ca3-9fcc-35ff7349750e"},id:277},{arcs:[[980,981,982,983,984,-551]],type:"Polygon",properties:{AREACD:"E09000003",AREANM:"Barnet",GlobalID:"bf5a3129-8ed8-4c9c-ab21-4b4365aa0c04"},id:278},{arcs:[[985,986,-578,-593,987,988,989]],type:"Polygon",properties:{AREACD:"E09000004",AREANM:"Bexley",GlobalID:"21ea5782-01f7-4723-9517-6137ec11aa2d"},id:279},{arcs:[[990,991,992,993,994,995,-984]],type:"Polygon",properties:{AREACD:"E09000005",AREANM:"Brent",GlobalID:"1887fcde-e3d9-45c1-8300-d22549143ca9"},id:280},{arcs:[[-988,-592,-843,996,997,998,999,1e3]],type:"Polygon",properties:{AREACD:"E09000006",AREANM:"Bromley",GlobalID:"9e7f1282-7a1a-473a-ba19-e2a5f95221e1"},id:281},{arcs:[[1001,-973,1002,-991,-983,1003]],type:"Polygon",properties:{AREACD:"E09000007",AREANM:"Camden",GlobalID:"2da0cbf5-4cb3-42dd-b010-030c2cf76738"},id:282},{arcs:[[-997,-846,-832,1004,1005,1006]],type:"Polygon",properties:{AREACD:"E09000008",AREANM:"Croydon",GlobalID:"dee8896b-d367-4f0b-abee-f9b7f5215517"},id:283},{arcs:[[1007,1008,1009,1010,-995]],type:"Polygon",properties:{AREACD:"E09000009",AREANM:"Ealing",GlobalID:"84b3e385-5af0-44da-baf1-694e1adf902c"},id:284},{arcs:[[-458,1011,1012,-981,-550,-899,-544]],type:"Polygon",properties:{AREACD:"E09000010",AREANM:"Enfield",GlobalID:"812840b0-c103-4ebe-ae01-7c81b5f66cc8"},id:285},{arcs:[[[1013,1014]],[[1015,1016]],[[-989,-1001,1017,1018,1019,1020,1021,1022]]],type:"MultiPolygon",properties:{AREACD:"E09000011",AREANM:"Greenwich",GlobalID:"10656971-4ed5-4c92-b7c9-d278cbe0436e"},id:286},{arcs:[[1023,1024,-975,1025,1026,1027]],type:"Polygon",properties:{AREACD:"E09000012",AREANM:"Hackney",GlobalID:"43ff7612-52b7-4bd5-b2e5-262cfee9d7c1"},id:287},{arcs:[[1028,1029,1030,1031,-1008,-994]],type:"Polygon",properties:{AREACD:"E09000013",AREANM:"Hammersmith and Fulham",GlobalID:"2b14192d-6cb5-4382-8f20-ac92f8eb9e29"},id:288},{arcs:[[1032,-1027,1033,-1004,-982,-1013]],type:"Polygon",properties:{AREACD:"E09000014",AREANM:"Haringey",GlobalID:"8ad51542-4466-45f1-b2ef-7d7f11af41ba"},id:289},{arcs:[[-985,-996,-1011,1034,-562,-552]],type:"Polygon",properties:{AREACD:"E09000015",AREANM:"Harrow",GlobalID:"05f5033c-6506-44a2-b261-89eabdec0316"},id:290},{arcs:[[[-986,1035]],[[-143,1036,-980,1037,-455,-438]]],type:"MultiPolygon",properties:{AREACD:"E09000016",AREANM:"Havering",GlobalID:"682eeef7-688d-410d-8c33-b2dea7fd40a9"},id:291},{arcs:[[-1035,-1010,1038,-839,-166,-282,-563]],type:"Polygon",properties:{AREACD:"E09000017",AREANM:"Hillingdon",GlobalID:"b8db459d-e9e6-4710-b3b7-3a942c46dd24"},id:292},{arcs:[[-1032,1039,-840,-1039,-1009]],type:"Polygon",properties:{AREACD:"E09000018",AREANM:"Hounslow",GlobalID:"cb24fd81-59b0-4129-9ca9-4246bccaa13a"},id:293},{arcs:[[-1026,-974,-1002,-1034]],type:"Polygon",properties:{AREACD:"E09000019",AREANM:"Islington",GlobalID:"6f0f3d08-5716-4112-8d3f-514d6832e347"},id:294},{arcs:[[1040,1041,-1029,-993]],type:"Polygon",properties:{AREACD:"E09000020",AREANM:"Kensington and Chelsea",GlobalID:"564a6ee2-ef11-4a78-b34e-f82628e284f9"},id:295},{arcs:[[1042,1043,-821,-831,-812,1044,1045]],type:"Polygon",properties:{AREACD:"E09000021",AREANM:"Kingston upon Thames",GlobalID:"14814913-e44a-4906-afef-12f99079208b"},id:296},{arcs:[[-998,-1007,1046,1047,1048,-971,1049]],type:"Polygon",properties:{AREACD:"E09000022",AREANM:"Lambeth",GlobalID:"2ff9b33e-8af0-4f82-9365-0541bb418aaf"},id:297},{arcs:[[-1014,1050,-1018,-1e3,1051,1052]],type:"Polygon",properties:{AREACD:"E09000023",AREANM:"Lewisham",GlobalID:"307d2ee2-de8d-44cf-b782-1640fa703b03"},id:298},{arcs:[[-1047,-1006,1053,-1043,1054]],type:"Polygon",properties:{AREACD:"E09000024",AREANM:"Merton",GlobalID:"5bb7bafa-1f6a-4ddd-afe2-5ae95e122102"},id:299},{arcs:[[[-1022,1055]],[[-978,1056,1057,-1024,1058,1059]]],type:"MultiPolygon",properties:{AREACD:"E09000025",AREANM:"Newham",GlobalID:"7d5cfc8f-167b-4219-bcad-5bdfbbad585d"},id:300},{arcs:[[-1038,-979,-1060,1060,-456]],type:"Polygon",properties:{AREACD:"E09000026",AREANM:"Redbridge",GlobalID:"cf5482eb-f6e4-4c9a-a7dc-35396b80e74e"},id:301},{arcs:[[1061,-1045,-818,-841,-1040,-1031]],type:"Polygon",properties:{AREACD:"E09000027",AREANM:"Richmond upon Thames",GlobalID:"62e86c5a-e87a-4965-a78c-babd619b9df6"},id:302},{arcs:[[1062,1063,-1052,-999,-1050,-970]],type:"Polygon",properties:{AREACD:"E09000028",AREANM:"Southwark",GlobalID:"87d97efc-3f4e-4bbc-b2cb-887e7e90b8af"},id:303},{arcs:[[-1005,-835,-822,-1044,-1054]],type:"Polygon",properties:{AREACD:"E09000029",AREANM:"Sutton",GlobalID:"a7764eef-0538-471e-a774-36a114623f1b"},id:304},{arcs:[[[-1020,1064]],[[1065,-1017,1066,-1063,-976,-1025,-1058]]],type:"MultiPolygon",properties:{AREACD:"E09000030",AREANM:"Tower Hamlets",GlobalID:"bb01e92e-96db-4351-82c5-03ccdf188f8d"},id:305},{arcs:[[-1061,-1059,-1028,-1033,-1012,-457]],type:"Polygon",properties:{AREACD:"E09000031",AREANM:"Waltham Forest",GlobalID:"2a5dd563-6962-4aa4-980f-a54cd7c98d64"},id:306},{arcs:[[-1055,-1046,-1062,-1030,-1042,1067,-1048]],type:"Polygon",properties:{AREACD:"E09000032",AREANM:"Wandsworth",GlobalID:"3c36a4b1-1d5c-40c4-b0fb-5cbef4020bce"},id:307},{arcs:[[-972,-1049,-1068,-1041,-992,-1003]],type:"Polygon",properties:{AREACD:"E09000033",AREANM:"Westminster",GlobalID:"e84ccb89-651e-4bdd-83a6-ade405f25f0a"},id:308},{arcs:[[1068,1069,1070,1071,1072,1073,1074]],type:"Polygon",properties:{AREACD:"S12000005",AREANM:"Clackmannanshire",GlobalID:"b91fda87-2d5b-4ccb-863d-5f75afc8c5b0"},id:320},{arcs:[[[-318,1075]],[[1076,1077,-320,1078,1079,1080]]],type:"MultiPolygon",properties:{AREACD:"S12000006",AREANM:"Dumfries and Galloway",GlobalID:"937c7615-22a2-482e-adc6-ac5b7987c759"},id:321},{arcs:[[1081,-1081,1082,1083,1084]],type:"Polygon",properties:{AREACD:"S12000008",AREANM:"East Ayrshire",GlobalID:"7d0d7893-f7db-4a7a-b508-e086c7b8090c"},id:322},{arcs:[[1085,1086,1087,1088]],type:"Polygon",properties:{AREACD:"S12000010",AREANM:"East Lothian",GlobalID:"d06dddf4-5551-40ff-9fa4-e13ee513d3de"},id:323},{arcs:[[1089,-1085,1090,1091,1092]],type:"Polygon",properties:{AREACD:"S12000011",AREANM:"East Renfrewshire",GlobalID:"b7f3cec9-8d48-40f7-996f-ae84481e6d24"},id:324},{arcs:[[[1093]],[[1094]],[[1095]],[[1096]],[[1097]],[[1098]],[[1099]],[[1100]],[[1101]],[[1102]],[[1103]],[[1104]],[[1105]],[[1106]],[[1108]],[[1109]],[[1110]],[[1111]],[[1112]],[[1113]],[[1114]],[[1115]],[[1116]],[[1117]],[[1118]],[[1119]],[[1120]],[[1121]],[[1122]],[[1123]],[[1124]],[[1125]],[[1126]],[[1127]],[[1128]],[[1129]],[[1130]],[[1131]],[[1132]],[[1133]],[[1134]],[[1135]],[[1136]],[[1137]],[[1138]],[[1139]],[[1140]],[[1141]],[[1142]],[[1143]],[[1144]],[[1145]],[[1146]],[[1147]],[[1148]],[[1149]],[[1150]],[[1151]],[[1152]],[[1153]],[[1154]],[[1155]],[[1156]],[[1157]],[[1158]],[[1159]],[[1160]],[[1161]],[[1162]],[[1163]],[[1164]],[[1166]],[[1167]],[[1168]],[[1169]],[[1170]],[[1171]],[[1172]],[[1173]],[[1174]],[[1175]],[[1176]],[[1177]],[[1178]],[[1179]],[[1180]],[[1181]],[[1182]],[[1183]],[[1184]],[[1185]],[[1186]],[[1187]],[[1188]],[[1189]],[[1190]],[[1191]],[[1192]],[[1193]],[[1194]],[[1195]],[[1196]],[[1197]],[[1198]],[[1199]],[[1200]],[[1201]],[[1202]],[[1204]],[[1205]],[[1206]],[[1207]],[[1208]],[[1209]],[[1210]],[[1211]],[[1212]],[[1213]],[[1214]],[[1215]],[[1216]],[[1217]],[[1218]],[[1219]],[[1220]]],type:"MultiPolygon",properties:{AREACD:"S12000013",AREANM:"Na h-Eileanan Siar",GlobalID:"79d4ba75-d90f-4183-9e96-56e4d534f82e"},id:325},{arcs:[[[-1071,1221]],[[1222,1223,1224,-1073,1225]]],type:"MultiPolygon",properties:{AREACD:"S12000014",AREANM:"Falkirk",GlobalID:"355aeaa4-dda3-4470-bb90-85e12dac4e45"},id:326},{arcs:[[[1226]],[[1227]],[[1228]],[[1229]],[[1230]],[[1231]],[[1232]],[[1233]],[[1234]],[[1235]],[[1236]],[[1237]],[[1238]],[[1239]],[[1240]],[[1241]],[[1242]],[[1243]],[[1244]],[[1245]],[[1246]],[[1247]],[[1248]],[[1249]],[[1250]],[[1251]],[[1252]],[[1253]],[[1254]],[[1255]],[[1256]],[[1257]],[[1258]],[[1259]],[[1260]],[[1261]],[[1262]],[[1263]],[[1264]],[[1265]],[[1266]],[[1267]],[[1268]],[[1269]],[[1270]],[[1271]],[[1272]],[[1273]],[[1274]],[[1275]],[[1276]],[[1277]],[[1278]],[[1279]],[[1280]],[[1281]],[[1282]],[[1283]],[[1284]],[[1285]],[[1286]],[[1287,1288,1289,1290,1291,1292,1293]],[[1294]]],type:"MultiPolygon",properties:{AREACD:"S12000017",AREANM:"Highland",GlobalID:"10ae38e3-511a-435d-9ec4-a8b303aeec9e"},id:327},{arcs:[[1295,1296,1297]],type:"Polygon",properties:{AREACD:"S12000018",AREANM:"Inverclyde",GlobalID:"ad95b428-4101-4a83-ae4d-81c7c3fd5cf6"},id:328},{arcs:[[1298,1299,-1087]],type:"Polygon",properties:{AREACD:"S12000019",AREANM:"Midlothian",GlobalID:"fde58266-ac86-4b9c-803a-57c36d89767a"},id:329},{arcs:[[1300,-1288,1301]],type:"Polygon",properties:{AREACD:"S12000020",AREANM:"Moray",GlobalID:"f24e5e20-f99a-4c39-bfd7-e3d48a68916d"},id:330},{arcs:[[[1302]],[[1303]],[[1304]],[[1305]],[[1306]],[[1307,-1091,-1084,1308,1309,-1297]]],type:"MultiPolygon",properties:{AREACD:"S12000021",AREANM:"North Ayrshire",GlobalID:"fdbc77cb-143f-4b10-9119-6df399a39adf"},id:331},{arcs:[[[1310]],[[1311]],[[1312]],[[1313]],[[1314]],[[1315]],[[1316]],[[1317]],[[1318]],[[1319]],[[1320]],[[1321]],[[1322]],[[1323]],[[1324]],[[1325]],[[1326]],[[1327]],[[1328]],[[1329]],[[1330]],[[1331]],[[1332]],[[1333]],[[1334]],[[1335]],[[1336]],[[1337]],[[1338]]],type:"MultiPolygon",properties:{AREACD:"S12000023",AREANM:"Orkney Islands",GlobalID:"03c9204d-56b2-4e74-ad90-848b703368ba"},id:332},{arcs:[[-270,-321,-1078,1339,1340,1341,-1299,-1086,1342]],type:"Polygon",properties:{AREACD:"S12000026",AREANM:"Scottish Borders",GlobalID:"f2ad3c8d-121b-48e2-a7a6-5c90666e8fef"},id:333},{arcs:[[[1343]],[[1344]],[[1345]],[[1346]],[[1347]],[[1348]],[[1349]],[[1350]],[[1351]],[[1352]],[[1353]],[[1354]],[[1355]],[[1356]],[[1357]],[[1358]],[[1359]],[[1360]],[[1361]],[[1362]],[[1363]],[[1364]],[[1365]],[[1366]],[[1367]],[[1368]],[[1369]],[[1370]],[[1371]],[[1372]],[[1373]],[[1374]],[[1375]],[[1376]],[[1377]],[[1378]],[[1379]]],type:"MultiPolygon",properties:{AREACD:"S12000027",AREANM:"Shetland Islands",GlobalID:"8862ccd9-fad5-4db4-909d-0f0e4e37a3be"},id:334},{arcs:[[[1380]],[[-1080,1381,-1309,-1083]]],type:"MultiPolygon",properties:{AREACD:"S12000028",AREANM:"South Ayrshire",GlobalID:"8621291c-4b2f-47cf-a281-24cb0818e843"},id:335},{arcs:[[1382,1383,-1340,-1077,-1082,-1090,1384]],type:"Polygon",properties:{AREACD:"S12000029",AREANM:"South Lanarkshire",GlobalID:"9cc6ea83-3eb8-4dd0-bfe4-c6557515bdba"},id:336},{arcs:[[-1074,-1225,1385,1386,1387,1388,1389]],type:"Polygon",properties:{AREACD:"S12000030",AREANM:"Stirling",GlobalID:"c3221b25-9f15-4ed5-a851-dc271bbb5ddc"},id:337},{arcs:[[1390,1391]],type:"Polygon",properties:{AREACD:"S12000033",AREANM:"Aberdeen City",GlobalID:"15398530-71a3-4a9a-9549-2aef00a56431"},id:338},{arcs:[[[1392]],[[1393]],[[-1392,1394,1395,1396,-1289,-1301,1397]]],type:"MultiPolygon",properties:{AREACD:"S12000034",AREANM:"Aberdeenshire",GlobalID:"9617ad29-7757-4577-8134-1c35f1389506"},id:339},{arcs:[[[1398]],[[1399]],[[1400]],[[1401]],[[1402]],[[1403]],[[1404]],[[1405]],[[1406]],[[1407]],[[1408]],[[1409]],[[1410]],[[1411]],[[1412]],[[1413]],[[1414]],[[1415]],[[1416]],[[1417]],[[1418]],[[1419]],[[1420]],[[1421]],[[1422]],[[1423]],[[1424]],[[1425]],[[1426]],[[1427]],[[1428]],[[1429]],[[1430]],[[1431]],[[1432]],[[1433]],[[1434]],[[1435]],[[1436]],[[1437]],[[1438]],[[-1291,1439,-1389,1440,1441]],[[1442]],[[1443]],[[1444,-1293]],[[1445]],[[1446]]],type:"MultiPolygon",properties:{AREACD:"S12000035",AREANM:"Argyll and Bute",GlobalID:"a18bd729-21c6-4441-995f-d108ad0151c2"},id:340},{arcs:[[-1088,-1300,-1342,1447,1448]],type:"Polygon",properties:{AREACD:"S12000036",AREANM:"City of Edinburgh",GlobalID:"4f396a06-35c1-4dfa-8f95-0c84456cc48f"},id:341},{arcs:[[1449,-1092,-1308,-1296,1450,1451]],type:"Polygon",properties:{AREACD:"S12000038",AREANM:"Renfrewshire",GlobalID:"13c5b7f9-4988-4b11-a153-5e3c32ff8d4e"},id:342},{arcs:[[1452,1453,-1452,1454,-1441,-1388]],type:"Polygon",properties:{AREACD:"S12000039",AREANM:"West Dunbartonshire",GlobalID:"2cb6c743-d5c0-46ed-9f0c-ca489fa820af"},id:343},{arcs:[[-1448,-1341,-1384,1455,-1223,1456]],type:"Polygon",properties:{AREACD:"S12000040",AREANM:"West Lothian",GlobalID:"a30e40f8-b167-4ff2-9159-4adf8238b417"},id:344},{arcs:[[1457,1458,1459,-1396]],type:"Polygon",properties:{AREACD:"S12000041",AREANM:"Angus",GlobalID:"3db32be1-7e8d-47e0-a231-2408f585e2f3"},id:345},{arcs:[[1460,1461,-1459]],type:"Polygon",properties:{AREACD:"S12000042",AREANM:"Dundee City",GlobalID:"6ca34332-99b6-458b-887a-3fd3df434534"},id:346},{arcs:[[1462,1463,-1453,-1387]],type:"Polygon",properties:{AREACD:"S12000045",AREANM:"East Dunbartonshire",GlobalID:"c199685b-d9dd-45f4-a7b6-f18ddf38661f"},id:347},{arcs:[[-1069,1464,1465]],type:"Polygon",properties:{AREACD:"S12000047",AREANM:"Fife",GlobalID:"760950db-8189-40de-bef8-2a74f7ebab5e"},id:348},{arcs:[[-1397,-1460,-1462,1466,-1465,-1075,-1390,-1440,-1290]],type:"Polygon",properties:{AREACD:"S12000048",AREANM:"Perth and Kinross",GlobalID:"977156eb-6d75-43cd-93f2-2574640306be"},id:349},{arcs:[[1467,-1385,-1093,-1450,-1454,-1464]],type:"Polygon",properties:{AREACD:"S12000049",AREANM:"Glasgow City",GlobalID:"18922bb3-b5bd-4b72-8b18-abbd52705ef8"},id:350},{arcs:[[-1224,-1456,-1383,-1468,-1463,-1386]],type:"Polygon",properties:{AREACD:"S12000050",AREANM:"North Lanarkshire",GlobalID:"14ba33ef-e9f1-4e69-931b-1700bdf5e9da"},id:351},{arcs:[[[1468]],[[1469]],[[1470]]],type:"MultiPolygon",properties:{AREACD:"W06000001",AREANM:"Isle of Anglesey",GlobalID:"7cde8c73-0d8f-4d34-b7ee-12573964d4d2"},id:352},{arcs:[[[1471]],[[1472,1473,1474,1475,1476]]],type:"MultiPolygon",properties:{AREACD:"W06000002",AREANM:"Gwynedd",GlobalID:"be828e21-7278-4cc0-8579-bc2bf5e1d591"},id:353},{arcs:[[1477,-1477,1478]],type:"Polygon",properties:{AREACD:"W06000003",AREANM:"Conwy",GlobalID:"182f39ff-d18e-4a1f-a4b8-227bf0bb38aa"},id:354},{arcs:[[1479,1480,-1473,-1478,1481,1482]],type:"Polygon",properties:{AREACD:"W06000004",AREANM:"Denbighshire",GlobalID:"d79a6e38-5af6-4533-803a-2491f792c658"},id:355},{arcs:[[[-225,1483]],[[-223,1484,-1483,1485]]],type:"MultiPolygon",properties:{AREACD:"W06000005",AREANM:"Flintshire",GlobalID:"c00358ac-8eb1-49ac-be19-a5cb0578c0c4"},id:356},{arcs:[[-236,1486,-1480,-1485,-222]],type:"Polygon",properties:{AREACD:"W06000006",AREANM:"Wrexham",GlobalID:"86191eeb-6a20-4b12-aabb-c6f34eced078"},id:357},{arcs:[[1487,1488,1489,-1475,1490]],type:"Polygon",properties:{AREACD:"W06000008",AREANM:"Ceredigion",GlobalID:"cf565153-914f-4772-9e00-bdb27e6af06f"},id:358},{arcs:[[[1491]],[[1492]],[[1493]],[[1494]],[[1495]],[[1496]],[[1497,1498,-1489]]],type:"MultiPolygon",properties:{AREACD:"W06000009",AREANM:"Pembrokeshire",GlobalID:"dc915baa-f9f1-4d09-b512-93319d53a3ac"},id:359},{arcs:[[[1499]],[[1500,1501,1502,1503,1504,1505,1506,1507,1508,-1498,-1488]]],type:"MultiPolygon",properties:{AREACD:"W06000010",AREANM:"Carmarthenshire",GlobalID:"a03e948a-d72c-498a-a78a-5abeb4f134a3"},id:360},{arcs:[[[1509]],[[1510]],[[-1508,1511]],[[-1505,1512]],[[1513,1514,-1503]]],type:"MultiPolygon",properties:{AREACD:"W06000011",AREANM:"Swansea",GlobalID:"4e6b9fb0-8794-4fbb-8f96-d06256a5c291"},id:361},{arcs:[[1515,1516,1517,1518,-1514,-1502]],type:"Polygon",properties:{AREACD:"W06000012",AREANM:"Neath Port Talbot",GlobalID:"91daa28a-ded4-43fa-8456-e0da2b06b419"},id:362},{arcs:[[1519,1520,1521,1522,-1518,1523]],type:"Polygon",properties:{AREACD:"W06000013",AREANM:"Bridgend",GlobalID:"2643d29b-b9d5-44e5-b452-04946be49c74"},id:363},{arcs:[[[1524,-1522]],[[1525,1526,-1520,1527]]],type:"MultiPolygon",properties:{AREACD:"W06000014",AREANM:"Vale of Glamorgan",GlobalID:"f40195ba-cab5-4936-b10c-2321645320b5"},id:364},{arcs:[[1528,1529,-1526,1530,1531]],type:"Polygon",properties:{AREACD:"W06000015",AREANM:"Cardiff",GlobalID:"a4c8c4ef-1fa4-4bd0-b793-1ba0579007ad"},id:365},{arcs:[[1532,1533,-1531,-1528,-1524,-1517,1534]],type:"Polygon",properties:{AREACD:"W06000016",AREANM:"Rhondda Cynon Taf",GlobalID:"d18f0de7-2221-403f-9f62-8ffcc9574841"},id:366},{arcs:[[1535,1536,-1532,-1534,1537,1538,1539]],type:"Polygon",properties:{AREACD:"W06000018",AREANM:"Caerphilly",GlobalID:"30c80983-e1f8-4691-82f2-33551679e483"},id:367},{arcs:[[1540,1541,-1540,1542]],type:"Polygon",properties:{AREACD:"W06000019",AREANM:"Blaenau Gwent",GlobalID:"8d5c85ce-dff8-48d3-83f2-4349ea121b7f"},id:368},{arcs:[[1543,-1536,-1542,1544]],type:"Polygon",properties:{AREACD:"W06000020",AREANM:"Torfaen",GlobalID:"b4c2e199-bb10-4fe8-96e8-64a58bd54404"},id:369},{arcs:[[[1545,-495]],[[-497,1546,1547,-1545,-1541,1548,-82]]],type:"MultiPolygon",properties:{AREACD:"W06000021",AREANM:"Monmouthshire",GlobalID:"162a25e7-091e-4ac1-beab-7f998b209c28"},id:370},{arcs:[[1549,-1529,-1537,-1544,-1548]],type:"Polygon",properties:{AREACD:"W06000022",AREANM:"Newport",GlobalID:"9ac4f428-6462-4743-b3e6-b08a0d88c16a"},id:371},{arcs:[[-235,-83,-1549,-1543,-1539,1550,-1535,-1516,-1501,-1491,-1474,-1481,-1487]],type:"Polygon",properties:{AREACD:"W06000023",AREANM:"Powys",GlobalID:"e0ce4873-cfa4-49d4-9f6a-8d8938ae91fa"},id:372},{arcs:[[-1538,-1533,-1551]],type:"Polygon",properties:{AREACD:"W06000024",AREANM:"Merthyr Tydfil",GlobalID:"304b7eb4-573e-4a11-ad63-e7000e5601f6"},id:373}]}}};function Y(t){let i,r,n;return{c(){i=c("link"),r=h(),n=c("div"),d(i,"rel","stylesheet"),d(i,"href","https://unpkg.com/maplibre-gl@2.1.9/dist/maplibre-gl.css"),d(n,"id","map"),d(n,"class","svelte-kh8c1y")},m(e,o){a(document.head,i),s(e,r,o),s(e,n,o),t[5](n)},p:e,i:e,o:e,d(e){l(i),e&&l(r),e&&l(n),t[5](null)}}}function K(e,t,i){let r,n,o,a,{colour:s}=t,{prices:l}=t;function c(e){a.features.map((function(t,i){isNaN(e[t.properties.AREACD])?t.properties.fill="#EC9AA4":t.properties.fill=s(e[t.properties.AREACD])})),n&&n.getSource("boundary")&&n.getSource("boundary").setData(a)}return b((()=>{for(let e in H.objects)i(3,a=W(H,H.objects[e]));a.features.map((function(e,t){isNaN(l[e.properties.AREACD])?e.properties.fill="#ccc":e.properties.fill=s(l[e.properties.AREACD])})),n=new $.Map({container:o,style:"https://bothness.github.io/ons-basemaps/data/style-omt.json",bounds:r,interactive:!0}),n.addControl(new $.NavigationControl({showCompass:!1})),n.on("load",(()=>{n.addSource("boundary",{type:"geojson",data:a}),n.addLayer({id:"boundary-fill",type:"fill",source:"boundary",layout:{},paint:{"fill-color":{type:"identity",property:"fill"},"fill-opacity":1,"fill-outline-color":"#707071"}},"place_other"),c(l)}))})),e.$$set=e=>{"colour"in e&&i(1,s=e.colour),"prices"in e&&i(2,l=e.prices)},e.$$.update=()=>{8&e.$$.dirty&&i(4,r=a?j(a):[[-9,49],[2,61]]),5&e.$$.dirty&&o&&c(l),16&e.$$.dirty&&function(e){n&&n.fitBounds(e,{padding:20})}(r)},[o,s,l,a,r,function(e){w[e?"unshift":"push"]((()=>{o=e,i(0,o)}))}]}class J extends G{constructor(e){super(),O(this,e,K,Y,o,{colour:1,prices:2})}}function Q(e,t){if((i=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var i,r=e.slice(0,i);return[r.length>1?r[0]+r.slice(2):r,+e.slice(i+1)]}var ee,te=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ie(e){if(!(t=te.exec(e)))throw new Error("invalid format: "+e);var t;return new re({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function re(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function ne(e,t){var i=Q(e,t);if(!i)return e+"";var r=i[0],n=i[1];return n<0?"0."+new Array(-n).join("0")+r:r.length>n+1?r.slice(0,n+1)+"."+r.slice(n+1):r+new Array(n-r.length+2).join("0")}ie.prototype=re.prototype,re.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var oe={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>ne(100*e,t),r:ne,s:function(e,t){var i=Q(e,t);if(!i)return e+"";var r=i[0],n=i[1],o=n-(ee=3*Math.max(-8,Math.min(8,Math.floor(n/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Q(e,Math.max(0,t+o-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function ae(e){return e}var se,le,ce=Array.prototype.map,ue=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function he(e){var t,i,r=void 0===e.grouping||void 0===e.thousands?ae:(t=ce.call(e.grouping,Number),i=e.thousands+"",function(e,r){for(var n=e.length,o=[],a=0,s=t[0],l=0;n>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),o.push(e.substring(n-=s,n+s)),!((l+=s+1)>r));)s=t[a=(a+1)%t.length];return o.reverse().join(i)}),n=void 0===e.currency?"":e.currency[0]+"",o=void 0===e.currency?"":e.currency[1]+"",a=void 0===e.decimal?".":e.decimal+"",s=void 0===e.numerals?ae:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(ce.call(e.numerals,String)),l=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"":e.minus+"",u=void 0===e.nan?"NaN":e.nan+"";function h(e){var t=(e=ie(e)).fill,i=e.align,h=e.sign,p=e.symbol,d=e.zero,f=e.width,m=e.comma,g=e.precision,y=e.trim,_=e.type;"n"===_?(m=!0,_="g"):oe[_]||(void 0===g&&(g=12),y=!0,_="g"),(d||"0"===t&&"="===i)&&(d=!0,t="0",i="=");var x="$"===p?n:"#"===p&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",b="$"===p?o:/[%p]/.test(_)?l:"",v=oe[_],w=/[defgprs%]/.test(_);function A(e){var n,o,l,p=x,A=b;if("c"===_)A=v(e)+A,e="";else{var E=(e=+e)<0||1/e<0;if(e=isNaN(e)?u:v(Math.abs(e),g),y&&(e=function(e){e:for(var t,i=e.length,r=1,n=-1;r<i;++r)switch(e[r]){case".":n=t=r;break;case"0":0===n&&(n=r),t=r;break;default:if(!+e[r])break e;n>0&&(n=0)}return n>0?e.slice(0,n)+e.slice(t+1):e}(e)),E&&0==+e&&"+"!==h&&(E=!1),p=(E?"("===h?h:c:"-"===h||"("===h?"":h)+p,A=("s"===_?ue[8+ee/3]:"")+A+(E&&"("===h?")":""),w)for(n=-1,o=e.length;++n<o;)if(48>(l=e.charCodeAt(n))||l>57){A=(46===l?a+e.slice(n+1):e.slice(n))+A,e=e.slice(0,n);break}}m&&!d&&(e=r(e,1/0));var I=p.length+e.length+A.length,D=I<f?new Array(f-I+1).join(t):"";switch(m&&d&&(e=r(D+e,D.length?f-A.length:1/0),D=""),i){case"<":e=p+e+A+D;break;case"=":e=p+D+e+A;break;case"^":e=D.slice(0,I=D.length>>1)+p+e+A+D.slice(I);break;default:e=D+p+e+A}return s(e)}return g=void 0===g?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),A.toString=function(){return e+""},A}return{format:h,formatPrefix:function(e,t){var i,r=h(((e=ie(e)).type="f",e)),n=3*Math.max(-8,Math.min(8,Math.floor((i=t,((i=Q(Math.abs(i)))?i[1]:NaN)/3)))),o=Math.pow(10,-n),a=ue[8+n/3];return function(e){return r(o*e)+a}}}}function pe(e,t,i){const r=e.slice();return r[2]=t[i],r[4]=i,r}function de(e){let t,i,r,n=e[1].range().concat(_e),o=[];for(let t=0;t<n.length;t+=1)o[t]=ge(pe(e,n,t));return{c(){t=c("div"),t.innerHTML="<p>Click on areas on the map to learn more about them.</p>",i=h(),r=c("div");for(let e=0;e<o.length;e+=1)o[e].c();g(r,"display","flex")},m(e,n){s(e,t,n),s(e,i,n),s(e,r,n);for(let e=0;e<o.length;e+=1)o[e].m(r,null)},p(e,t){if(3&t){let i;for(n=e[1].range().concat(_e),i=0;i<n.length;i+=1){const a=pe(e,n,i);o[i]?o[i].p(a,t):(o[i]=ge(a),o[i].c(),o[i].m(r,null))}for(;i<o.length;i+=1)o[i].d(1);o.length=n.length}},d(e){e&&l(t),e&&l(i),e&&l(r),function(e,t){for(let i=0;i<e.length;i+=1)e[i]&&e[i].d(t)}(o,e)}}}function fe(e){let t,i,r,n=le(".2~s")(e[0][e[4]])+"";return{c(){t=u(""),i=u(n),r=u("+")},m(e,n){s(e,t,n),s(e,i,n),s(e,r,n)},p(e,t){1&t&&n!==(n=le(".2~s")(e[0][e[4]])+"")&&function(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}(i,n)},d(e){e&&l(t),e&&l(i),e&&l(r)}}}function me(t){let i;return{c(){i=u("Out of budget")},m(e,t){s(e,i,t)},p:e,d(e){e&&l(i)}}}function ge(e){let t,i,r,n,o,u;function p(e,t){return e[4]==e[0].length-1?me:fe}let f=p(e),m=f(e);return{c(){t=c("div"),i=c("div"),r=h(),n=c("div"),o=c("p"),m.c(),u=h(),d(i,"class","legend-block svelte-yzm7a5"),g(i,"background-color",e[2]),d(o,"class","legend-text svelte-yzm7a5"),d(t,"class","vflex svelte-yzm7a5")},m(e,l){s(e,t,l),a(t,i),a(t,r),a(t,n),a(n,o),m.m(o,null),a(t,u)},p(e,t){2&t&&g(i,"background-color",e[2]),f===(f=p(e))&&m?m.p(e,t):(m.d(1),m=f(e),m&&(m.c(),m.m(o,null)))},d(e){e&&l(t),m.d()}}}function ye(t){let i,r=t[1]&&de(t);return{c(){r&&r.c(),i=u("")},m(e,t){r&&r.m(e,t),s(e,i,t)},p(e,[t]){e[1]?r?r.p(e,t):(r=de(e),r.c(),r.m(i.parentNode,i)):r&&(r.d(1),r=null)},i:e,o:e,d(e){r&&r.d(e),e&&l(i)}}}se=he({thousands:",",grouping:[3],currency:["$",""]}),le=se.format,se.formatPrefix;let _e="#EC9AA4";function xe(e,t,i){let{breaks:r}=t,{colour:n}=t;return e.$$set=e=>{"breaks"in e&&i(0,r=e.breaks),"colour"in e&&i(1,n=e.colour)},[r,n]}class be extends G{constructor(e){super(),O(this,e,xe,ye,o,{breaks:0,colour:1})}}var ve={},we={};function Ae(e){return new Function("d","return {"+e.map((function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'})).join(",")+"}")}function Ee(e){var t=Object.create(null),i=[];return e.forEach((function(e){for(var r in e)r in t||i.push(t[r]=r)})),i}function Ie(e,t){var i=e+"",r=i.length;return r<t?new Array(t-r+1).join(0)+i:i}function De(e){var t,i=e.getUTCHours(),r=e.getUTCMinutes(),n=e.getUTCSeconds(),o=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":((t=e.getUTCFullYear())<0?"-"+Ie(-t,6):t>9999?"+"+Ie(t,6):Ie(t,4))+"-"+Ie(e.getUTCMonth()+1,2)+"-"+Ie(e.getUTCDate(),2)+(o?"T"+Ie(i,2)+":"+Ie(r,2)+":"+Ie(n,2)+"."+Ie(o,3)+"Z":n?"T"+Ie(i,2)+":"+Ie(r,2)+":"+Ie(n,2)+"Z":r||i?"T"+Ie(i,2)+":"+Ie(r,2)+"Z":"")}var Te=function(e){var t=new RegExp('["'+e+"\n\r]"),i=e.charCodeAt(0);function r(e,t){var r,n=[],o=e.length,a=0,s=0,l=o<=0,c=!1;function u(){if(l)return we;if(c)return c=!1,ve;var t,r,n=a;if(34===e.charCodeAt(n)){for(;a++<o&&34!==e.charCodeAt(a)||34===e.charCodeAt(++a););return(t=a)>=o?l=!0:10===(r=e.charCodeAt(a++))?c=!0:13===r&&(c=!0,10===e.charCodeAt(a)&&++a),e.slice(n+1,t-1).replace(/""/g,'"')}for(;a<o;){if(10===(r=e.charCodeAt(t=a++)))c=!0;else if(13===r)c=!0,10===e.charCodeAt(a)&&++a;else if(r!==i)continue;return e.slice(n,t)}return l=!0,e.slice(n,o)}for(10===e.charCodeAt(o-1)&&--o,13===e.charCodeAt(o-1)&&--o;(r=u())!==we;){for(var h=[];r!==ve&&r!==we;)h.push(r),r=u();t&&null==(h=t(h,s++))||n.push(h)}return n}function n(t,i){return t.map((function(t){return i.map((function(e){return a(t[e])})).join(e)}))}function o(t){return t.map(a).join(e)}function a(e){return null==e?"":e instanceof Date?De(e):t.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}return{parse:function(e,t){var i,n,o=r(e,(function(e,r){if(i)return i(e,r-1);n=e,i=t?function(e,t){var i=Ae(e);return function(r,n){return t(i(r),n,e)}}(e,t):Ae(e)}));return o.columns=n||[],o},parseRows:r,format:function(t,i){return null==i&&(i=Ee(t)),[i.map(a).join(e)].concat(n(t,i)).join("\n")},formatBody:function(e,t){return null==t&&(t=Ee(e)),n(e,t).join("\n")},formatRows:function(e){return e.map(o).join("\n")},formatRow:o,formatValue:a}}(","),Ce=Te.parse;function Me(e){for(var t in e){var i,r,n=e[t].trim();if(n)if("true"===n)n=!0;else if("false"===n)n=!1;else if("NaN"===n)n=NaN;else if(isNaN(i=+n)){if(!(r=n.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;Se&&r[4]&&!r[7]&&(n=n.replace(/-/g,"/").replace(/T/," ")),n=new Date(n)}else n=i;else n=null;e[t]=n}return e}const Se=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function Pe(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function Re(e,t){return fetch(e,t).then(Pe)}var ke,ze=(ke=Ce,function(e,t,i){return 2===arguments.length&&"function"==typeof t&&(i=t,t=void 0),Re(e,t).then((function(e){return ke(e,i)}))});function Le(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Be(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Fe(e){let t,i,r;function n(e,r,n=0,o=e.length){if(n<o){if(0!==t(r,r))return o;do{const t=n+o>>>1;i(e[t],r)<0?n=t+1:o=t}while(n<o)}return n}return 2!==e.length?(t=Le,i=(t,i)=>Le(e(t),i),r=(t,i)=>e(t)-i):(t=e===Le||e===Be?e:Ne,i=e,r=e),{left:n,center:function(e,t,i=0,o=e.length){const a=n(e,t,i,o-1);return a>i&&r(e[a-1],t)>-r(e[a],t)?a-1:a},right:function(e,r,n=0,o=e.length){if(n<o){if(0!==t(r,r))return o;do{const t=n+o>>>1;i(e[t],r)<=0?n=t+1:o=t}while(n<o)}return n}}}function Ne(){return 0}const Oe=Fe(Le).right;Fe((function(e){return null===e?NaN:+e})).center;var Ge=Oe;function Ue(e,t){let i;if(void 0===t)for(const t of e)null!=t&&(i<t||void 0===i&&t>=t)&&(i=t);else{let r=-1;for(let n of e)null!=(n=t(n,++r,e))&&(i<n||void 0===i&&n>=n)&&(i=n)}return i}const Ve=new Date,$e=new Date;function qe(e,t,i,r){function n(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return n.floor=t=>(e(t=new Date(+t)),t),n.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),n.round=e=>{const t=n(e),i=n.ceil(e);return e-t<i-e?t:i},n.offset=(e,i)=>(t(e=new Date(+e),null==i?1:Math.floor(i)),e),n.range=(i,r,o)=>{const a=[];if(i=n.ceil(i),o=null==o?1:Math.floor(o),!(i<r&&o>0))return a;let s;do{a.push(s=new Date(+i)),t(i,o),e(i)}while(s<i&&i<r);return a},n.filter=i=>qe((t=>{if(t>=t)for(;e(t),!i(t);)t.setTime(t-1)}),((e,r)=>{if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!i(e););else for(;--r>=0;)for(;t(e,1),!i(e););})),i&&(n.count=(t,r)=>(Ve.setTime(+t),$e.setTime(+r),e(Ve),e($e),Math.floor(i(Ve,$e))),n.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?n.filter(r?t=>r(t)%e==0:t=>n.count(0,t)%e==0):n:null)),n}const je=6e4,Ze=864e5,We=6048e5,Xe=qe((e=>e.setHours(0,0,0,0)),((e,t)=>e.setDate(e.getDate()+t)),((e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*je)/Ze),(e=>e.getDate()-1));Xe.range;const He=qe((e=>{e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCDate(e.getUTCDate()+t)}),((e,t)=>(t-e)/Ze),(e=>e.getUTCDate()-1));He.range;function Ye(e){return qe((t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),((e,t)=>{e.setDate(e.getDate()+7*t)}),((e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*je)/We))}qe((e=>{e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCDate(e.getUTCDate()+t)}),((e,t)=>(t-e)/Ze),(e=>Math.floor(e/Ze))).range;const Ke=Ye(0),Je=Ye(1),Qe=Ye(2),et=Ye(3),tt=Ye(4),it=Ye(5),rt=Ye(6);function nt(e){return qe((t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCDate(e.getUTCDate()+7*t)}),((e,t)=>(t-e)/We))}Ke.range,Je.range,Qe.range,et.range,tt.range,it.range,rt.range;const ot=nt(0),at=nt(1),st=nt(2),lt=nt(3),ct=nt(4),ut=nt(5),ht=nt(6);ot.range,at.range,st.range,lt.range,ct.range,ut.range,ht.range;const pt=qe((e=>{e.setMonth(0,1),e.setHours(0,0,0,0)}),((e,t)=>{e.setFullYear(e.getFullYear()+t)}),((e,t)=>t.getFullYear()-e.getFullYear()),(e=>e.getFullYear()));pt.every=e=>isFinite(e=Math.floor(e))&&e>0?qe((t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),((t,i)=>{t.setFullYear(t.getFullYear()+i*e)})):null,pt.range;const dt=qe((e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)}),((e,t)=>t.getUTCFullYear()-e.getUTCFullYear()),(e=>e.getUTCFullYear()));function ft(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function mt(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function gt(e,t,i){return{y:e,m:t,d:i,H:0,M:0,S:0,L:0}}dt.every=e=>isFinite(e=Math.floor(e))&&e>0?qe((t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),((t,i)=>{t.setUTCFullYear(t.getUTCFullYear()+i*e)})):null,dt.range;var yt,_t,xt={"-":"",_:" ",0:"0"},bt=/^\s*\d+/,vt=/^%/,wt=/[\\^$*+?|[\]().{}]/g;function At(e,t,i){var r=e<0?"-":"",n=(r?-e:e)+"",o=n.length;return r+(o<i?new Array(i-o+1).join(t)+n:n)}function Et(e){return e.replace(wt,"\\$&")}function It(e){return new RegExp("^(?:"+e.map(Et).join("|")+")","i")}function Dt(e){return new Map(e.map(((e,t)=>[e.toLowerCase(),t])))}function Tt(e,t,i){var r=bt.exec(t.slice(i,i+1));return r?(e.w=+r[0],i+r[0].length):-1}function Ct(e,t,i){var r=bt.exec(t.slice(i,i+1));return r?(e.u=+r[0],i+r[0].length):-1}function Mt(e,t,i){var r=bt.exec(t.slice(i,i+2));return r?(e.U=+r[0],i+r[0].length):-1}function St(e,t,i){var r=bt.exec(t.slice(i,i+2));return r?(e.V=+r[0],i+r[0].length):-1}function Pt(e,t,i){var r=bt.exec(t.slice(i,i+2));return r?(e.W=+r[0],i+r[0].length):-1}function Rt(e,t,i){var r=bt.exec(t.slice(i,i+4));return r?(e.y=+r[0],i+r[0].length):-1}function kt(e,t,i){var r=bt.exec(t.slice(i,i+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),i+r[0].length):-1}function zt(e,t,i){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(i,i+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),i+r[0].length):-1}function Lt(e,t,i){var r=bt.exec(t.slice(i,i+1));return r?(e.q=3*r[0]-3,i+r[0].length):-1}function Bt(e,t,i){var r=bt.exec(t.slice(i,i+2));return r?(e.m=r[0]-1,i+r[0].length):-1}function Ft(e,t,i){var r=bt.exec(t.slice(i,i+2));return r?(e.d=+r[0],i+r[0].length):-1}function Nt(e,t,i){var r=bt.exec(t.slice(i,i+3));return r?(e.m=0,e.d=+r[0],i+r[0].length):-1}function Ot(e,t,i){var r=bt.exec(t.slice(i,i+2));return r?(e.H=+r[0],i+r[0].length):-1}function Gt(e,t,i){var r=bt.exec(t.slice(i,i+2));return r?(e.M=+r[0],i+r[0].length):-1}function Ut(e,t,i){var r=bt.exec(t.slice(i,i+2));return r?(e.S=+r[0],i+r[0].length):-1}function Vt(e,t,i){var r=bt.exec(t.slice(i,i+3));return r?(e.L=+r[0],i+r[0].length):-1}function $t(e,t,i){var r=bt.exec(t.slice(i,i+6));return r?(e.L=Math.floor(r[0]/1e3),i+r[0].length):-1}function qt(e,t,i){var r=vt.exec(t.slice(i,i+1));return r?i+r[0].length:-1}function jt(e,t,i){var r=bt.exec(t.slice(i));return r?(e.Q=+r[0],i+r[0].length):-1}function Zt(e,t,i){var r=bt.exec(t.slice(i));return r?(e.s=+r[0],i+r[0].length):-1}function Wt(e,t){return At(e.getDate(),t,2)}function Xt(e,t){return At(e.getHours(),t,2)}function Ht(e,t){return At(e.getHours()%12||12,t,2)}function Yt(e,t){return At(1+Xe.count(pt(e),e),t,3)}function Kt(e,t){return At(e.getMilliseconds(),t,3)}function Jt(e,t){return Kt(e,t)+"000"}function Qt(e,t){return At(e.getMonth()+1,t,2)}function ei(e,t){return At(e.getMinutes(),t,2)}function ti(e,t){return At(e.getSeconds(),t,2)}function ii(e){var t=e.getDay();return 0===t?7:t}function ri(e,t){return At(Ke.count(pt(e)-1,e),t,2)}function ni(e){var t=e.getDay();return t>=4||0===t?tt(e):tt.ceil(e)}function oi(e,t){return e=ni(e),At(tt.count(pt(e),e)+(4===pt(e).getDay()),t,2)}function ai(e){return e.getDay()}function si(e,t){return At(Je.count(pt(e)-1,e),t,2)}function li(e,t){return At(e.getFullYear()%100,t,2)}function ci(e,t){return At((e=ni(e)).getFullYear()%100,t,2)}function ui(e,t){return At(e.getFullYear()%1e4,t,4)}function hi(e,t){var i=e.getDay();return At((e=i>=4||0===i?tt(e):tt.ceil(e)).getFullYear()%1e4,t,4)}function pi(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+At(t/60|0,"0",2)+At(t%60,"0",2)}function di(e,t){return At(e.getUTCDate(),t,2)}function fi(e,t){return At(e.getUTCHours(),t,2)}function mi(e,t){return At(e.getUTCHours()%12||12,t,2)}function gi(e,t){return At(1+He.count(dt(e),e),t,3)}function yi(e,t){return At(e.getUTCMilliseconds(),t,3)}function _i(e,t){return yi(e,t)+"000"}function xi(e,t){return At(e.getUTCMonth()+1,t,2)}function bi(e,t){return At(e.getUTCMinutes(),t,2)}function vi(e,t){return At(e.getUTCSeconds(),t,2)}function wi(e){var t=e.getUTCDay();return 0===t?7:t}function Ai(e,t){return At(ot.count(dt(e)-1,e),t,2)}function Ei(e){var t=e.getUTCDay();return t>=4||0===t?ct(e):ct.ceil(e)}function Ii(e,t){return e=Ei(e),At(ct.count(dt(e),e)+(4===dt(e).getUTCDay()),t,2)}function Di(e){return e.getUTCDay()}function Ti(e,t){return At(at.count(dt(e)-1,e),t,2)}function Ci(e,t){return At(e.getUTCFullYear()%100,t,2)}function Mi(e,t){return At((e=Ei(e)).getUTCFullYear()%100,t,2)}function Si(e,t){return At(e.getUTCFullYear()%1e4,t,4)}function Pi(e,t){var i=e.getUTCDay();return At((e=i>=4||0===i?ct(e):ct.ceil(e)).getUTCFullYear()%1e4,t,4)}function Ri(){return"+0000"}function ki(){return"%"}function zi(e){return+e}function Li(e){return Math.floor(+e/1e3)}function Bi(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function Fi(){var e,t=[.5],i=[0,1],r=1;function n(n){return null!=n&&n<=n?i[Ge(t,n,0,r)]:e}return n.domain=function(e){return arguments.length?(t=Array.from(e),r=Math.min(t.length,i.length-1),n):t.slice()},n.range=function(e){return arguments.length?(i=Array.from(e),r=Math.min(t.length,i.length-1),n):i.slice()},n.invertExtent=function(e){var r=i.indexOf(e);return[t[r-1],t[r]]},n.unknown=function(t){return arguments.length?(e=t,n):e},n.copy=function(){return Fi().domain(t).range(i).unknown(e)},Bi.apply(n,arguments)}function Ni(e,t){if(e.length<2)return e;for(var i=function(e){if(0===e.length)throw new Error("min requires at least one data point");for(var t=e[0],i=1;i<e.length;i++)e[i]<t&&(t=e[i]);return t}(e),r=function(e){if(0===e.length)throw new Error("max requires at least one data point");for(var t=e[0],i=1;i<e.length;i++)e[i]>t&&(t=e[i]);return t}(e),n=[i],o=(r-i)/t,a=1;a<t;a++)n.push(n[0]+o*a);return n.push(r),n}function Oi(e){let t,i,n,o,u,_,x,b,v,w,A,E,I,D,C,M,S,P,R,N,O,G,U,V,$,q,j,Z,W,X,H,Y,K,Q,ee,te,ie,re,ne,oe,ae,se,le,ce,ue,he,pe,de,fe;return K=new J({props:{prices:e[3],colour:e[5]}}),te=new be({props:{breaks:e[4],colour:e[5]}}),{c(){t=c("h1"),t.textContent="Where in the UK can you afford to buy a property?",i=h(),n=c("h2"),n.textContent="Fill in some details below to find out which areas are affordable depending on\n  your budget. Click on each area to find out about house prices.",o=h(),u=c("hr"),_=h(),x=c("fieldset"),b=c("div"),v=c("label"),v.textContent="Mortgage term in years",w=h(),A=c("input"),E=h(),I=c("div"),D=c("label"),D.textContent="Deposit amount",C=h(),M=c("input"),S=h(),P=c("div"),R=c("label"),R.textContent="Select property type",N=h(),O=c("select"),G=c("option"),G.textContent="Detached",U=c("option"),U.textContent="Semi-detached",V=c("option"),V.textContent="Terraced",$=c("option"),$.textContent="Flat",q=h(),j=c("hr"),Z=h(),W=c("details"),W.innerHTML='<summary>Adjust monthly repayment price range</summary> \n  <p>Enter the minimum and maximum monthly mortgage payments that suits your\n    budget.</p> \n  <fieldset><div><label for="minimum">Minimum</label> \n      <input type="number" id="minimum"/></div> \n\n    <div><label for="maximum">Maximum</label> \n      <input type="number" id="maximum"/></div></fieldset>',X=h(),H=c("div"),Y=c("div"),L(K.$$.fragment),Q=h(),ee=c("div"),L(te.$$.fragment),ie=h(),re=c("hr"),ne=h(),oe=c("h3"),oe.textContent="Use and share",ae=h(),se=c("div"),se.textContent="Get data",le=h(),ce=c("div"),ce.textContent="Embed",ue=h(),he=c("div"),he.textContent="Share",d(v,"for","mortgageTerm"),d(A,"type","number"),d(A,"id","mortgageTerm"),d(D,"for","deposit"),d(M,"type","number"),d(M,"id","deposit"),d(R,"for","propertyType"),G.__value="Detached",G.value=G.__value,U.__value="Semi-detached",U.value=U.__value,V.__value="Terraced",V.value=V.__value,$.__value="Flat",$.value=$.__value,d(O,"id","propertyType"),void 0===e[2]&&T((()=>e[10].call(O))),d(Y,"id","map-container"),g(Y,"height","300px"),d(H,"id","results")},m(r,l){s(r,t,l),s(r,i,l),s(r,n,l),s(r,o,l),s(r,u,l),s(r,_,l),s(r,x,l),a(x,b),a(b,v),a(b,w),a(b,A),m(A,e[0]),a(x,E),a(x,I),a(I,D),a(I,C),a(I,M),m(M,e[1]),a(x,S),a(x,P),a(P,R),a(P,N),a(P,O),a(O,G),a(O,U),a(O,V),a(O,$),y(O,e[2]),s(r,q,l),s(r,j,l),s(r,Z,l),s(r,W,l),s(r,X,l),s(r,H,l),a(H,Y),B(K,Y,null),a(H,Q),a(H,ee),B(te,ee,null),s(r,ie,l),s(r,re,l),s(r,ne,l),s(r,oe,l),s(r,ae,l),s(r,se,l),s(r,le,l),s(r,ce,l),s(r,ue,l),s(r,he,l),pe=!0,de||(fe=[p(A,"input",e[8]),p(M,"input",e[9]),p(O,"change",e[10])],de=!0)},p(e,[t]){1&t&&f(A.value)!==e[0]&&m(A,e[0]),2&t&&f(M.value)!==e[1]&&m(M,e[1]),4&t&&y(O,e[2]);const i={};8&t&&(i.prices=e[3]),32&t&&(i.colour=e[5]),K.$set(i);const r={};16&t&&(r.breaks=e[4]),32&t&&(r.colour=e[5]),te.$set(r)},i(e){pe||(k(K.$$.fragment,e),k(te.$$.fragment,e),pe=!0)},o(e){z(K.$$.fragment,e),z(te.$$.fragment,e),pe=!1},d(e){e&&l(t),e&&l(i),e&&l(n),e&&l(o),e&&l(u),e&&l(_),e&&l(x),e&&l(q),e&&l(j),e&&l(Z),e&&l(W),e&&l(X),e&&l(H),F(K),F(te),e&&l(ie),e&&l(re),e&&l(ne),e&&l(oe),e&&l(ae),e&&l(se),e&&l(le),e&&l(ce),e&&l(ue),e&&l(he),de=!1,r(fe)}}}function Gi(e,t,i){let r,n,o,a,s,l,c,u=25,h=3e4,p={IUMZICQ:"2 year, 60% LTV",IUMBV34:"2 year, 75% LTV",IUMZICR:"2 year, 85% LTV",IUMB482:"2 year, 90% LTV",IUM2WTL:"2 year, 95% LTV"},d={Detached:"averagePriceDetached.value","Semi-detached":"averagePriceSemiDetached.value",Terraced:"averagePriceTerraced.value",Flat:"averagePriceFlatMaisonette.value"},m={};return b((async()=>{a=await ze("https://corsproxy.io/?https://www.bankofengland.co.uk/boeapps/database/_iadb-fromshowcolumns.asp?csv.x=yes&Datefrom=01/Sep/2022&Dateto=now&SeriesCodes=IUMZICQ,IUMBV34,IUMZICR,IUMB482,IUM2WTL&CSVF=CN&UsingCodes=Y&VPD=N&VFD=N",Me),s=await ze("https://raw.githubusercontent.com/ONSvisual/land-registry-flat-data/main/landreg.csv",Me);let e=Ue(s,(e=>e["date.value"])).getTime();a=a.map((function(e){return{date:_t("%d %b %Y")(e.DATE).getTime(),series:p[e.SERIES],value:+e.VALUE}}));let t=Ue(a.filter((t=>t.date<e)),(e=>e.date));const r=a.filter((e=>e.date==t)).map((function(e){return{date:new Date(e.date),series:e.series,value:e.value}})).flatMap((e=>e.value));i(7,o=Fi().domain([.6,.75,.85,.9,.95]).range(r.concat(null))),i(6,n=s.filter((t=>t["date.value"].getTime()==e)))})),e.$$.update=()=>{if(223&e.$$.dirty){function t(e){if(""==e)return"Unavailable";let t=e-h,i=o(t/e)/1200,r=12*u,n=t*(i*(1+i)**r)/((1+i)**r-1);return Math.round(100*n)/100}n&&n.forEach((e=>{i(3,m[e.code]=t(e[d[r]]),m)}));let a=Object.values(m).filter((e=>!isNaN(e))).sort(Le);i(4,l=Ni(a,4)),i(5,c=Fi().domain(l.slice(1)).range(["#E9EFF4","#BCD6E9","#8DB3D3","#6390B5"]))}},[u,h,r,m,l,c,n,o,function(){u=f(this.value),i(0,u)},function(){h=f(this.value),i(1,h)},function(){r=function(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}(this),i(2,r)}]}!function(e){yt=function(e){var t=e.dateTime,i=e.date,r=e.time,n=e.periods,o=e.days,a=e.shortDays,s=e.months,l=e.shortMonths,c=It(n),u=Dt(n),h=It(o),p=Dt(o),d=It(a),f=Dt(a),m=It(s),g=Dt(s),y=It(l),_=Dt(l),x={a:function(e){return a[e.getDay()]},A:function(e){return o[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return s[e.getMonth()]},c:null,d:Wt,e:Wt,f:Jt,g:ci,G:hi,H:Xt,I:Ht,j:Yt,L:Kt,m:Qt,M:ei,p:function(e){return n[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:zi,s:Li,S:ti,u:ii,U:ri,V:oi,w:ai,W:si,x:null,X:null,y:li,Y:ui,Z:pi,"%":ki},b={a:function(e){return a[e.getUTCDay()]},A:function(e){return o[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return s[e.getUTCMonth()]},c:null,d:di,e:di,f:_i,g:Mi,G:Pi,H:fi,I:mi,j:gi,L:yi,m:xi,M:bi,p:function(e){return n[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:zi,s:Li,S:vi,u:wi,U:Ai,V:Ii,w:Di,W:Ti,x:null,X:null,y:Ci,Y:Si,Z:Ri,"%":ki},v={a:function(e,t,i){var r=d.exec(t.slice(i));return r?(e.w=f.get(r[0].toLowerCase()),i+r[0].length):-1},A:function(e,t,i){var r=h.exec(t.slice(i));return r?(e.w=p.get(r[0].toLowerCase()),i+r[0].length):-1},b:function(e,t,i){var r=y.exec(t.slice(i));return r?(e.m=_.get(r[0].toLowerCase()),i+r[0].length):-1},B:function(e,t,i){var r=m.exec(t.slice(i));return r?(e.m=g.get(r[0].toLowerCase()),i+r[0].length):-1},c:function(e,i,r){return E(e,t,i,r)},d:Ft,e:Ft,f:$t,g:kt,G:Rt,H:Ot,I:Ot,j:Nt,L:Vt,m:Bt,M:Gt,p:function(e,t,i){var r=c.exec(t.slice(i));return r?(e.p=u.get(r[0].toLowerCase()),i+r[0].length):-1},q:Lt,Q:jt,s:Zt,S:Ut,u:Ct,U:Mt,V:St,w:Tt,W:Pt,x:function(e,t,r){return E(e,i,t,r)},X:function(e,t,i){return E(e,r,t,i)},y:kt,Y:Rt,Z:zt,"%":qt};function w(e,t){return function(i){var r,n,o,a=[],s=-1,l=0,c=e.length;for(i instanceof Date||(i=new Date(+i));++s<c;)37===e.charCodeAt(s)&&(a.push(e.slice(l,s)),null!=(n=xt[r=e.charAt(++s)])?r=e.charAt(++s):n="e"===r?" ":"0",(o=t[r])&&(r=o(i,n)),a.push(r),l=s+1);return a.push(e.slice(l,s)),a.join("")}}function A(e,t){return function(i){var r,n,o=gt(1900,void 0,1);if(E(o,e,i+="",0)!=i.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(t&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(n=(r=mt(gt(o.y,0,1))).getUTCDay(),r=n>4||0===n?at.ceil(r):at(r),r=He.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(n=(r=ft(gt(o.y,0,1))).getDay(),r=n>4||0===n?Je.ceil(r):Je(r),r=Xe.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),n="Z"in o?mt(gt(o.y,0,1)).getUTCDay():ft(gt(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(n+5)%7:o.w+7*o.U-(n+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,mt(o)):ft(o)}}function E(e,t,i,r){for(var n,o,a=0,s=t.length,l=i.length;a<s;){if(r>=l)return-1;if(37===(n=t.charCodeAt(a++))){if(n=t.charAt(a++),!(o=v[n in xt?t.charAt(a++):n])||(r=o(e,i,r))<0)return-1}else if(n!=i.charCodeAt(r++))return-1}return r}return x.x=w(i,x),x.X=w(r,x),x.c=w(t,x),b.x=w(i,b),b.X=w(r,b),b.c=w(t,b),{format:function(e){var t=w(e+="",x);return t.toString=function(){return e},t},parse:function(e){var t=A(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=w(e+="",b);return t.toString=function(){return e},t},utcParse:function(e){var t=A(e+="",!0);return t.toString=function(){return e},t}}}(e),yt.format,_t=yt.parse,yt.utcFormat,yt.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});return new class extends G{constructor(e){super(),O(this,e,Gi,Oi,o,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
